{"version":3,"file":"admin.min.js","mappings":"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","sources":["webpack://admin/../../../js/imports.js","webpack://admin/../../../js/main.js","webpack://admin/../../../../../../sim-modules/forms/js/forms.js","webpack://admin/../../../js/field_value.js","webpack://admin/./admin.js","webpack://admin/../../../js/form_submit_functions.js"],"sourcesContent":["export let scripts;\r\n\r\nexport let afterScriptsLoaded\t= function (attachTo){\r\n    // load \r\n    if(typeof(tinymce) != 'undefined'){\r\n        tinymce.remove();\r\n\r\n        // Activate tinyMce's again\r\n        document.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n        });\r\n    }    \r\n\r\n    // invoke dom content loaded events\r\n    window.document.dispatchEvent(new Event(\"DOMContentLoaded\", {\r\n        bubbles: true,\r\n        cancelable: true\r\n    }));\r\n\r\n    // Somehow the visual/text switch does not work, manually fix it\r\n    document.querySelectorAll('.wp-switch-editor').forEach(el=>el.addEventListener('click', ev=>{\r\n        let area    = el.closest('.wp-editor-wrap').querySelector('.wp-editor-area');\r\n        let panel   =  el.closest('.wp-editor-wrap').querySelector('.mce-panel');\r\n        area.style.visibility='unset';\r\n        if(ev.target.matches('.switch-tmce')){\r\n           panel.style.display='block';\r\n            area.style.display='none';\r\n        }else{\r\n            panel.style.display='none';\r\n            area.style.display='block';\r\n        }\r\n    }));\r\n\r\n    //add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceselect == undefined){\r\n\t\t    select._niceselect = NiceSelect.bind(select,{searchable: true});\r\n        }\r\n\t});\r\n\r\n    const ev = new Event('scriptsloaded');\r\n\tattachTo.dispatchEvent(ev);\r\n}\r\n\r\nexport let addStyles    = function (response, attachTo){\r\n    scripts     = [];\r\n    let temp    = document.createElement('div');\r\n\r\n    // parse inline scripts\r\n    temp.innerHTML =  response.html;\r\n    scripts = Array.prototype.slice.call(temp.getElementsByTagName('script'));\r\n\r\n    if(response.js){\r\n        temp.innerHTML =  response.js;\r\n        scripts\t= [...temp.children].concat(scripts);\r\n        addScripts(attachTo);\r\n    }\r\n\r\n    if(response.css){\r\n        temp.innerHTML = response.css;\r\n        [...temp.children].forEach(el => {\r\n            document.head.appendChild(el);\r\n        });\r\n    }\r\n}\r\n\r\nexport let addScripts\t= function (attachTo) {\r\n    if(attachTo == undefined){\r\n        return;\r\n    }\r\n\r\n    if(scripts.length == 0){\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n    let el\t= scripts.shift();\r\n\r\n    if(el == undefined){\r\n        afterScriptsLoaded(attachTo);\r\n        return;\r\n    }\r\n\r\n    // only add if needed\r\n    if(el.tagName == 'SCRIPT' && document.getElementById(el.id) == null){\r\n        var s = document.createElement('script');\r\n\r\n        if(el.type == ''){\r\n            s.type\t= 'text/javascript'; \r\n        }else{\r\n            s.type\t= el.type;\r\n        }\r\n\r\n        if(el.src != ''){\r\n            s.src \t= el.src;\r\n        }else{\r\n            s.innerHTML\t= el.innerHTML;\r\n        }\r\n        \r\n        s.id\t= el.id;\r\n        \r\n        try{\r\n            document.head.appendChild(s);\r\n        }catch (error) {\r\n            console.error(error);\r\n        }\r\n\r\n        if(scripts.length > 0){\r\n            if(el.src != ''){\r\n                s.addEventListener('load', addScripts.bind( null, attachTo ) );\r\n            }else{\r\n                addScripts(attachTo);\r\n            }\r\n        }else{\r\n            if(el.src != ''){\r\n                s.addEventListener('load', afterScriptsLoaded.bind( null, attachTo));\r\n            }else{\r\n                afterScriptsLoaded(attachTo);\r\n            }\t\t\t\r\n        }\r\n    }else if(scripts.length > 0){\r\n        // get next script\r\n        addScripts(attachTo);\r\n    }else{\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n}\r\n\r\nexport function displayMessage(message, icon, autoclose=false, no_ok=false, timer=1500){\r\n\tif(message == undefined){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tif(typeof(Swal) != 'undefined'){\r\n\t\tvar options = {\r\n\t\t\ticon: icon,\r\n\t\t\ttitle: message.trim(),\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\tcancelButtonColor: 'Crimson'\r\n\t\t};\r\n\r\n\t\tif(no_ok){\r\n\t\t\toptions['showConfirmButton'] = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(typeof(callback) == 'function'){\r\n\t\t\toptions['didClose'] = () => callback();\r\n\t\t}\r\n\t\t\r\n\t\tif(autoclose){\r\n\t\t\toptions['timer'] = timer;\r\n\t\t}\r\n\r\n        if(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\t\t\r\n\t\treturn Swal.fire(options);\r\n\t}else{\r\n\t\treturn alert(message.trim());\r\n\t}\r\n}\r\n\r\nexport function showLoader(element, replace=true, message=''){\r\n\tif(element == null){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tlet wrapper\t= document.createElement(\"DIV\");\r\n\twrapper.setAttribute('class','loaderwrapper');\r\n\tif(message != ''){\r\n\t\twrapper.innerHTML\t= message;\r\n\t}\r\n\r\n\tlet loader\t= document.createElement(\"IMG\");\r\n\tloader.setAttribute('class','loadergif');\r\n\tloader.setAttribute(\"src\", sim.loadingGif);\r\n\tloader.style[\"height\"]= \"30px\";\r\n\r\n\twrapper.insertAdjacentElement('beforeEnd', loader);\r\n\tif(replace){\r\n\t\telement.parentNode.replaceChild(wrapper, element);\r\n\t}else{\r\n        let el  = element.nextElementSibling;\r\n        if(el == null){\r\n            element.parentNode.insertAdjacentElement('beforeEnd', wrapper);\r\n        }else{\r\n            element.parentNode.insertBefore(wrapper, el);\r\n        }\r\n\t}\r\n\r\n\treturn wrapper;\r\n}\r\n\r\n//Check if on mobile\r\nexport function isMobileDevice() {\r\n    let check = false;\r\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\r\n    return check;\r\n}\r\n","console.log(\"Main.js loaded\");\r\n\r\nimport {displayMessage, showLoader, isMobileDevice, } from './imports.js';\r\nexport  {displayMessage, showLoader, isMobileDevice};\r\n\r\nexport function changeUrl(target, secondTab=''){\r\n\tlet newParam\t= target.dataset.param_val;\r\n\tlet hash\t\t= target.dataset.hash;\r\n\tconst url \t\t= new URL(window.location);\r\n\r\n\t//Change the url params\r\n\tif(target.closest('.tabcontent') == null || target.parentNode.classList.contains('modal-content')){\r\n\t\t//Add query_arg if it is a main tab\r\n\t\turl.searchParams.set('main_tab', newParam);\r\n\t\turl.searchParams.delete('second_tab');\r\n\t}else{\r\n\t\turl.searchParams.set('second_tab', newParam);\r\n\t}\r\n\r\n\tif(secondTab != ''){\r\n\t\turl.searchParams.set('second_tab', secondTab);\r\n\t}\r\n\t\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tif(hash != null){\r\n\t\twindow.location.hash\t= hash;\r\n\t}else{\r\n\t\twindow.location.hash\t= '';\r\n\t}\r\n\r\n\t// switch tab when clicking on a change url link\r\n\tif(target.tagName == 'A'){\r\n\t\tswitchTab();\r\n\t}\r\n}\r\n\r\nfunction switchTab(event=null){\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\t\r\n\tlet mainTab \t= params.main_tab;\r\n\tlet lastTab\t\t= '';\r\n\r\n\tif(mainTab != null){\r\n\t\t//find the tab and display it\r\n\t\tdocument.querySelectorAll(`[data-param_val=\"${mainTab}\"]:not(.active)`).forEach(tabbutton=>{\r\n\t\t\t//only process non-modal tabs\r\n\t\t\tif(tabbutton.closest('.modal') == null){\r\n\t\t\t\tlet result\t= displayTab(tabbutton);\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tlastTab\t= result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlet secondTab = params.second_tab;\r\n\tif(secondTab != null){\r\n\t\t//find the tab and display it\r\n\t\tdocument.querySelectorAll(`[data-param_val=\"${secondTab}\"]:not(.active)`).forEach(tabbutton=>{\r\n\t\t\tdisplayTab(tabbutton);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function displayTab(tabButton){\r\n\r\n\t//remove all existing highlights\r\n\tdocument.querySelectorAll('.highlight').forEach(el=>el.classList.remove('highlight'));\r\n\r\n\tlet tab;\r\n\t// Get content area\r\n\tif(tabButton.dataset.target == undefined){\r\n\t\ttab = document.querySelector('#'+tabButton.dataset.param_val);\r\n\t}else{\r\n\t\ttab = tabButton.closest('div:not(.tablink-wrapper)').querySelector('#'+tabButton.dataset.target);\r\n\t}\r\n\t\r\n\tif(tab != null){\r\n\t\ttab.classList.remove('hidden');\r\n\r\n\t\tif(tabButton.tagName != 'A'){\r\n\t\t\t//Mark the other tabbuttons as inactive\r\n\t\t\ttabButton.parentNode.querySelectorAll(`:scope > .active:not(#${tabButton.id})`).forEach(child=>{\r\n\t\t\t\t//Make inactive\r\n\t\t\t\tchild.classList.remove(\"active\");\r\n\t\t\t\t\t\r\n\t\t\t\t//Hide the tab\r\n\t\t\t\tvar childTab\t= child.closest('div:not(.tablink-wrapper)').querySelector('#'+child.dataset.target);\r\n\t\t\t\tif(childTab == null){\r\n\t\t\t\t\tconsole.error('Tab to hide not found:');\r\n\t\t\t\t\tconsole.error(child.closest('div:not(.tablink-wrapper)'));\r\n\t\t\t\t\tconsole.error('#'+child.dataset.target);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tchildTab.classList.add('hidden');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Mark the tabbutton as active\r\n\t\t\ttabButton.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\t//scroll to field\r\n\t\tif (window.location.hash) {\r\n\t\t\tvar hash \t\t= window.location.hash.replace('#', '');\r\n\r\n\t\t\tvar hashField\t= tab.querySelector(`[name^=\"${hash}\"]`);\r\n\t\t\r\n\t\t\tif(hashField != null){\r\n\t\t\t\thashField.scrollIntoView({block: \"center\"});\r\n\r\n\t\t\t\tvar el\t\t\t= hashField.closest('.inputwrapper');\r\n\t\t\t\tif(el != null){\r\n\t\t\t\t\thashField.closest('.inputwrapper').classList.add('highlight');\r\n\t\t\t\t}\r\n\t\t\t\thashField.classList.add('highlight');\r\n\t\t\t\thashField.focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// position any tables on this tab, as they can only be positioned when visible\r\n\t\tif(typeof(SimTableFunctions) != 'undefined'){\r\n\t\t\tSimTableFunctions.positionTable();\r\n\t\t}\r\n\r\n\t\treturn tab;\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport function getRoute(target,lat,lon){\r\n\t//Leave the origin empty on a mobile device to use the current location\r\n\tif(isMobileDevice()){\r\n\t\tvar origin = '';\r\n\t}else{\r\n\t\tvar origin = '&origin='+sim.address;\r\n\t}\r\n\tvar url = 'https://www.google.com/maps/dir/?api=1&destination='+lat+','+lon+origin;\r\n\tvar win = window.open(url, '_blank');\r\n\twin.focus();\r\n}\r\n\r\nfunction bodyScrolling(type){\r\n\t//don't do anything on homepage\r\n\t//if(document.querySelector('body').classList.contains('home')) return;\r\n\t\r\n\tif(type == 'disable'){\r\n\t\t//disable scrolling of the body\r\n\t\tdocument.querySelector(\"body\").style.overflow = 'hidden';\r\n \t\tdocument.body.style.top\t\t\t= `0px`;\r\n\r\n\t\t//scroll to top\r\n\t\twindow.scrollTo(0, 0);\r\n\r\n \t\tvar menu = document.querySelector(\"#masthead\");\r\n\t\tmenu.style.overflowY\t= 'scroll';\r\n\t\tmenu.style.top\t\t\t= '0px';\r\n\t\tmenu.style.left\t\t\t= '0';\r\n\t\tmenu.style.right\t\t= '0';\r\n\t\tmenu.style.bottom\t\t= '0';\r\n\t\tmenu.style.position\t\t= 'absolute'; \r\n\r\n\t}else{\r\n\t\t//enable scrolling of the body\r\n\t\tdocument.querySelector(\"body\").style.overflow = '';\r\n\t\tdocument.body.style.top \t\t= '';\r\n\r\n\t\tvar menu = document.querySelector(\"#masthead\");\r\n\t\tmenu.style.overflowY\t= '';\r\n\t\tmenu.style.top\t\t\t= '';\r\n\t\tmenu.style.left\t\t\t= '';\r\n\t\tmenu.style.right\t\t= '';\r\n\t\tmenu.style.bottom\t\t= '';\r\n\t\tmenu.style.position\t\t= '';\r\n\t}\r\n}\r\n\r\nexport function showModal(modal){\r\n\tif(typeof(modal) == 'string'){\r\n\t\tmodal = document.getElementById(modal + \"_modal\");\r\n\t}\r\n\t\r\n\tif(modal != null){\r\n\t\t// Prevent main page scrolling\r\n\t\tdocument.body.style.top\t\t\t= `-${window.scrollY}px`;\r\n\t\tdocument.body.style.position \t= 'fixed';\r\n\t\tlet prim\t\t\t\t\t\t= document.getElementById('primary');\r\n\t\tif(prim != null){\r\n\t\t\tprim.style.zIndex\t\t\t= 99999;\r\n\t\t}\r\n\r\n\t\tmodal.classList.remove('hidden');\r\n\r\n\t\tmodal.style.display\t= 'block';\r\n\t}\t\r\n}\r\n\r\nexport function hideModals(){\r\n\tlet modals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif(modals.length != 0){\r\n\t\tmodals.forEach(modal=>{\r\n\t\t\tmodal.classList.add('hidden');\r\n\t\t\tmodal.style.removeProperty('display');\r\n\t\t\t\r\n\t\t\tconst event = new Event('modalclosed');\r\n\t\t\tmodal.dispatchEvent(event);\r\n\t\t});\r\n\r\n\t\t// Turn main page scrolling on again\r\n\t\tconst scrollY\t\t\t\t\t= document.body.style.top;\r\n\t\tdocument.body.style.position \t= '';\r\n\t\tdocument.body.style.top \t\t= '';\r\n\t\twindow.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n\t\tlet prim\t\t\t\t\t\t= document.getElementById('primary');\r\n\t\tif(prim != null){\r\n\t\t\tprim.style.zIndex\t\t\t= 1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//check internet\r\nasync function hasInternet(){\r\n\tif(location.href.includes('localhost')){\r\n\t\twindow['online'] = true;\r\n\t\treturn window['online'];\r\n\t}\r\n\r\n\tawait fetch(location.href).then((result) => {\r\n\t\twindow['online'] = true;\r\n\t}).catch(e => {\r\n\t\twindow['online'] = false;\r\n\t});\r\n\r\n\treturn window['online'];\r\n}\r\n\r\nexport async function waitForInternet(){\r\n\tvar internet\t= await hasInternet();\r\n\tif(!internet){\r\n\t\tdisplayMessage('You have no internet connection, waiting till internet is back...', 'warning', true, true, 5000);\r\n\r\n\t\twhile(!internet){\r\n\t\t\tif(window['online']){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tinternet\t= await hasInternet();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction positionSubSubMenus(){\r\n\tconst vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\r\n\r\n\tdocument.querySelectorAll('#primary-menu .sub-menu .sub-menu').forEach(el=>{\r\n\t\tel.style.left\t\t= '100%';\r\n\t\tel.parentNode.closest('ul').style.left\t= '100%';\r\n\r\n\t\t// Get parent right coordinate\r\n\t\tlet startPos\t= el.parentNode.getBoundingClientRect()['right'];\r\n\t\t\r\n\t\t// el with\r\n\t\tlet width\t= el.getBoundingClientRect()['width'];\r\n\r\n\t\t// move to left if not fitting on screen\r\n\t\tif(startPos + width > vw){\r\n\t\t\tel.style.right\t= '100%';\r\n\t\t\tel.style.left\t= 'unset';\r\n\t\t}else{\r\n\t\t\tel.style.removeProperty('left');\r\n\t\t}\r\n\r\n\t\t// Reset left\r\n\t\tel.parentNode.closest('ul').style.removeProperty('left');\r\n\t});\r\n}\r\n\r\n//Load after page load\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\t// remove any empty widgets\r\n\tdocument.querySelectorAll('.widget').forEach(w=>{\r\n\t\tif(w.innerHTML == ''){\r\n\t\t\tw.remove();\r\n\t\t}\r\n\t});\r\n\r\n\t//loop over all the tab buttons\r\n\tdocument.querySelectorAll('.tablink').forEach(function(tabButton){\r\n\t\t//Add the dataset if it does not exist yet.\r\n\t\tif(tabButton.dataset.param_val == undefined){\r\n\t\t\ttabButton.dataset.param_val = tabButton.textContent.replace(' ','_').toLowerCase();\r\n\t\t}\r\n\t})\r\n\r\n\t//check for tab actions\r\n\tswitchTab();\r\n\r\n\t//add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n\t\tif(select._niceselect  == undefined){\r\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true});\r\n\t\t}\r\n\t});\r\n\r\n\t// hide mobile hidden\r\n\tif(isMobileDevice()){\r\n\t\tdocument.querySelectorAll('.hide-on-mobile:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\t}else{\r\n\t\tdocument.querySelectorAll('.hide-on-desktop:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t\tpositionSubSubMenus();\r\n\t}\r\n\r\n\t// Check for messages\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\r\n\tif(params.message != null){\r\n\t\tlet type = 'success';\r\n\r\n\t\tif(params.type != null){\r\n\t\t\ttype\t= params.type;\r\n\t\t}\r\n\t\tdisplayMessage(params.message, type);\r\n\t}\r\n});\r\n\r\n\r\n//Hide or show the clicked tab\r\nwindow.addEventListener(\"mousedown\", function(event) {\t\r\n\tvar target = event.target;\r\n\t\r\n\t//we clicked the menu\r\n\tif(target.closest('.menu-toggle') != null){\r\n\t\tevent.preventDefault();\r\n\t\tif(target.closest('.menu-toggle').getAttribute(\"aria-expanded\") == \"true\"){\r\n\t\t\tbodyScrolling('enable');\r\n\t\t}else{\r\n\t\t\tbodyScrolling('disable');\r\n\t\t}\r\n\t}\r\n\r\n\t//if clicked outside the menu, then close the menu\r\n\tif(\r\n\t\tdocument.querySelector('.menu-toggle') != null &&\r\n\t\tdocument.querySelector('.menu-toggle').getAttribute(\"aria-expanded\")==\"true\" &&\r\n\t\ttarget.closest('#site-navigation') == null && \r\n\t\ttarget.closest('#mobile-menu-control-wrapper') == null\r\n\t){\r\n\t\tdocument.querySelector('#mobile-menu-control-wrapper').classList.remove(\"toggled\");\r\n\t\tdocument.querySelector('.menu-toggle').setAttribute(\"aria-expanded\", 'false');\r\n\t\tdocument.querySelector('#site-navigation').classList.remove(\"toggled\");\r\n\t\tbodyScrolling('enable');\r\n\t}\r\n\r\n\t//Process the click on tab button\r\n\tif(target.matches(\".tablink\")){\r\n\t\tevent.preventDefault();\r\n\t\t//change the url in browser\r\n\t\tchangeUrl(target);\r\n\r\n\t\t//show the tab\r\n\t\tdisplayTab(target);\r\n\t}\t\r\n\r\n\t//close modal if clicked outside of modal\r\n\tlet modal\t= document.querySelector('.modal:not(.hidden)');\r\n\tif(modal != undefined){\r\n\t\tlet scrollBarWidth\t= window.innerWidth - modal.clientWidth;\r\n\t\tif(\r\n\t\t\ttarget.matches(\".modal .close\") || \t\t\t\t\t// close button clicked\r\n\t\t\t(\r\n\t\t\t\t(\r\n\t\t\t\t\tscrollBarWidth > 0\t&&\t\t\t\t\t\t// there is a scrollbar\r\n\t\t\t\t\tevent.clientX < modal.clientWidth\t\t\t// but we did not click on it\r\n\t\t\t\t)\t||\r\n\t\t\t\tscrollBarWidth\t=== 0\t\t\t\t\t\t\t// there is no scrollbar\r\n\t\t\t)\t&&\r\n\t\t\t(\r\n\t\t\t\ttarget.closest('.modal-content') == null && \t// not clicked inside the modal\r\n\t\t\t\ttarget.closest('.swal2-container') == null &&\t// not clicked on swal message container\r\n\t\t\t\ttarget.tagName == 'DIV'\t\t\t\t\t\t\t// the target is a div\r\n\t\t\t)\r\n\t\t){\r\n\t\t\t//console.log(event.clientX);\r\n\t\t\t//console.log(window.outerWidth);\r\n\t\t\thideModals();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n// disable scrolling on number fields\r\ndocument.addEventListener(\"wheel\", function(event){\r\n    if(document.activeElement.type === \"number\"){\r\n        document.activeElement.blur();\r\n    }\r\n});","import { addStyles } from '../../../plugins/sim-plugin/includes/js/imports.js';\nimport { getFieldValue } from  '../../../plugins/sim-plugin/includes/js/field_value.js';\nexport{ getFieldValue };\n\nconsole.log('Forms.js is loaded');\n\nasync function saveFormInput(target){\n\tlet form\t\t= target.closest('form');\n\n\t// make all inputs required if needed\n\tform.querySelectorAll('.required:not(hidden) input, .required:not(hidden) textarea, .required:not(hidden) select').forEach(el=>{\n\t\t// do not make nice select inputs nor file uploads required\n\t\tif(el.closest('div.nice-select') == null && (el.type != 'file' || el.closest('.file_upload_wrap').querySelector('.documentpreview input') == null)){\n\t\t\tel.required\t= true;\n\t\t}\n\t});\n\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_input');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tMain.displayMessage(response);\n\n\t\tif(form.dataset.reset == 'true'){\n\t\t\tFormSubmit.formReset(form);\n\t\t}\n\t}\n}\n\nexport function removeDefaultSelect(el){\n\tArray.from(el.options).forEach(function(option){\n\t\toption.defaultSelected = false;\n\t});\n}\n\nlet tinymceSettings = [];\nfunction prepareForCloning(originalNode){\n\t//also remove any tinymce's\n\tif(typeof(tinymce) != 'undefined'){\n\t\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\tlet tn = tinymce.get(el.id);\n\t\t\tif(tn != null){\n\t\t\t\ttinymceSettings[el.id] = tn.settings\n\t\t\t\ttn.save();\n\t\t\t\ttn.remove();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function cloneNode(originalNode, clear=true){\n\tprepareForCloning(originalNode);\n\t\n\t//make a clone\n\tlet newNode = originalNode.cloneNode(true);\n\n\t// remove niceselect drop down from clone\n\tnewNode.querySelectorAll('.niceselect').forEach(select => select.remove());\n\t\n\t//add tinymce's again\n\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\tif(tinymceSettings[el.id] != undefined){\n\t\t\ttinymce.init(tinymceSettings[el.id]);\n\t\t}\n\t});\n\t\n\t//clear values in the clone\n\tif(clear){\n\t\tnewNode.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\tif(input.type == 'checkbox' || input.type == 'radio'){\n\t\t\t\tinput.checked = false;\n\t\t\t}else if(input.type != 'hidden'){\n\t\t\t\tinput.value = \"\";\n\t\t\t}\n\t\t\t\n\t\t\t//if this is a select\n\t\t\tif(input.type == \"select-one\"){\n\t\t\t\t//remove any defaults\n\t\t\t\tremoveDefaultSelect(input);\n\t\t\t}\n\t\t});\n\t}\n\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//remove any defaults\n\t\tremoveDefaultSelect(input);\n\n\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\n\t});\n\t\n\treturn newNode;\n}\n\nexport function copyFormInput(originalNode){\n\tlet newNode = cloneNode(originalNode);\n\t\n\t//update the data index\n\tnewNode.querySelectorAll('.upload-files').forEach(function(uploadButton){\n\t\tuploadButton.dataset.index = nodeNr;\n\t})\n\t\n\t//Clear contents of any document preview divs.\n\tnewNode.querySelectorAll('.documentpreview').forEach(function(previewDiv){\n\t\tpreviewDiv.innerHTML = '';\n\t});\n\n\t//Select\n\tlet i = 0;\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//Find the value of the select we have cloned\n\t\tlet previousVal = originalNode.getElementsByTagName('select')[i].selectedIndex;\n\t\t\n\t\t//Hide the value in the clone\n\t\tif(select.options[previousVal] != undefined){\n\t\t\tselect.options[previousVal].style.display = 'none';\n\t\t}else{\n\t\t\tconsole.log(select);\n\t\t\tconsole.log(select.options);\n\t\t\tconsole.log(previousVal);\n\t\t}\n\t\t\n\t\t//Add nice select\n\t\tif(select._niceselect == undefined){\n\t\t\tconsole.error(select);\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true});\n\t\t}else{\n\t\t\tselect._niceselect.update();\n\t\t\tselect.nextSibling.querySelector('.current').textContent = 'Select an option';\n\t\t}\n\t\t\n\t\ti++;\n\t});\n\t\n\t//Add remove buttons if they are not there\n\tif(originalNode.querySelector('.remove') == null && newNode.querySelector('.remove') == null){\n \t\tlet html = `<button type=\"button\" class=\"remove button\" style=\"flex: 1;\">-</button>`;\n\n\t\t//Add minus button to the first div\n\t\toriginalNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html);\n\n\t\t//Add minus button to the second div\n\t\tnewNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html)\n\t}\t\n\t\n\t//Insert the clone\n\toriginalNode.parentNode.insertBefore(newNode, originalNode.nextSibling);\n\t\n\treturn newNode;\n}\n\nexport function fixNumbering(cloneDivsWrapper){\n\tcloneDivsWrapper.querySelectorAll(':scope > .clone_div').forEach((clone, index)=>{\n\t\t//Update the new number\t\n\t\t//DIV\n\t\tif(clone.id != ''){\n\t\t\tclone.id = clone.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\t\t\n\t\tif(clone.dataset.divid  != null){\n\t\t\tclone.dataset.divid = index;\n\t\t}\n\t\t\n\t\t//Update the title\n\t\tclone.querySelectorAll('h3, h4, legend :first-child').forEach(el => {\n\t\t\tel.textContent = el.textContent.replace(/[0-9]+(?!.*[0-9])/, index+1);\n\t\t});\n\t\t\n\t\t//Update the legend\n\t\t/* clone.querySelectorAll('legend').forEach(legend => {\n\t\t\tlegend.textContent = legend.textContent.replace(/[0-9]+(?!.*[0-9])/, ' '+(index+1));\n\t\t}); */\n\t\t\n\t\t//Update the elements\n\t\tclone.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\t//Do not copy nice selects\n\t\t\tif(!input.classList.contains('nice-select-search')){\n\t\t\t\t//Update the id\n\t\t\t\tif(input.id != '' && input.id != undefined){\n\t\t\t\t\tinput.id = input.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t\t//Update the name\n\t\t\t\tif(input.name != '' && input.name != undefined){\n\t\t\t\t\tinput.name = input.name.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//Reset the select to the default\n\t\t\t\tif(input.type == 'button'){\n\t\t\t\t\tinput.value = input.value.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t})\n}\n\nexport function removeNode(target){\n\tlet node\t\t\t= target.closest(\".clone_div\");\n\tlet parentNode\t\t= node.closest('.clone_divs_wrapper');\n\tlet allCloneDivs\t= parentNode.querySelectorAll('.clone_div');\n\t\n\t//Check if we are removing the last element\n\tif(allCloneDivs[allCloneDivs.length-1] == node){\n\t\tlet addElement = node.querySelector(\".add\");\n\t\t\n\t\t//Move the add button one up\n\t\tlet prev = node.previousElementSibling;\n\t\tif(prev.querySelector('.buttonwrapper .add') == null){\n\t\t\tprev.querySelector('.buttonwrapper').appendChild(addElement);\n\t\t}\n\t}\n\t\n\t//Remove the node\n\tnode.remove();\n\n\t//If there is only one div remaining, remove the remove button\n\tif(parentNode.querySelectorAll('.clone_div').length == 1){\n\t\tlet removeElement = parentNode.querySelector('.remove');\n\t\tremoveElement.remove();\n\t}\n\n\tfixNumbering(parentNode)\n}\n\n/* \n\tFUNCTIONS USED BY DYNAMIC FORMS JS\n */\nexport function tidyMultiInputs(){\n\t//remove unnecessary buttons on inputs with multiple values\n\tdocument.querySelectorAll('.clone_divs_wrapper').forEach( function(div){\n\t\tlet cloneDivArr\t= div.querySelectorAll(':scope > .clone_div');\n\t\t\n\t\tif(cloneDivArr.length == 1){\n\t\t\tcloneDivArr[0].querySelectorAll('.remove').forEach(el=>el.remove());\n\t\t}\n\t\t\n\t\tcloneDivArr.forEach(function(cloneDiv, index, array){\n\t\t\t//update dataset\n\t\t\tcloneDiv.dataset.divid = index;\n\t\t\t\n\t\t\t//remove add button for all but the last\n\t\t\tif(index != array.length - 1){\n\t\t\t\t// Select all add buttons but not the any nested buttons\n\t\t\t\tcloneDiv.querySelectorAll('.add:not(:scope .clone_divs_wrapper .add)').forEach(el=>el.remove());\n\t\t\t}\n\t\t})\n\t});\n}\n\nexport function updateMultiStepControls(form){\n\t// get active formsteps amount\n\tlet formsteps\t\t\t= form.querySelectorAll('.formstep');\n\tlet visibleFormsteps\t= form.querySelectorAll('.formstep:not(.hidden)');\n\tlet stepIndicators\t\t= form.querySelectorAll('.multistepcontrols_wrapper .step');\n\n\t// show all step circles\n\tstepIndicators.forEach(el => el.classList.remove('hidden'));\n\n\t// hide some step circles if needed\n\tfor(let x = visibleFormsteps.length; x < formsteps.length; x++){\n\t\tstepIndicators[x].classList.add('hidden');\n\t}\n\n\t// check if this is the last visible\n\tlet activeFormstep\t\t= form.querySelector('.formstep:not(.stephidden)');\n\tif(visibleFormsteps[visibleFormsteps.length-1] == activeFormstep){\n\t\t// make the submit button visible\n\t\tform.querySelector('.nextBtn').classList.add('hidden');\n\t\tform.querySelector('.form_submit ').classList.remove('hidden');\n\t}else{\n\t\tform.querySelector('.nextBtn').classList.remove('hidden');\n\t\tform.querySelector('.form_submit ').classList.add('hidden');\n\t}\n}\n\t\n//show a next form step\nexport function showTab(n, form) {\n\tif(typeof(form) != 'undefined'){\n\t\tif(n == 0){\n\t\t\tlet loader = form.querySelector('.formsteploader');\n\t\t\t//hide loader\n\t\t\tif(loader != null){\n\t\t\t\tloader.classList.add('hidden');\n\t\t\t\n\t\t\t\t//show form controls\n\t\t\t\tform.querySelector('.multistepcontrols').classList.remove('hidden');\n\t\t\t}\n\t\t}\n\t\t\n\t\t//hide all formsteps\n\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(step=>step.classList.add('stephidden'));\n\t\t\n\t\t// Show the specified formstep of the form ...\n\t\tlet x = form.getElementsByClassName(\"formstep\");\n\t\t\n\t\tif(x.length == 0){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//scroll back to top\n\t\tlet y = x[n].offsetTop - document.querySelector(\"#masthead\").offsetHeight\n\t\twindow.scrollTo({ top: y, behavior: 'auto'});\n\t\t\n\t\t//show\n\t\tx[n].classList.remove('stephidden');\n\n\t\t// This function removes the \"active\" class of all steps...\n\t\tform.querySelectorAll(\".step.active\").forEach(el=>{el.classList.remove('active');});\n\n\t\t//... and adds the \"active\" class to the current step:\n\t\tx = form.getElementsByClassName(\"step\");\n\t\ttry{\n\t\t\tx[n].classList.add(\"active\");\n\t\t}catch(err) {\n\t\t\tconsole.log(x);\n\t\t\tconsole.log(n);\n\t\t  \tconsole.error(err.message);\n\t\t}\n\t\t\n\n\t\t// ... and fix the Previous/Next buttons:\n\t\tif (n == 0) {\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.add('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.remove('hidden');\n\t\t}\n\n\t\tif (n == (x.length - 1)) {\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.add('hidden');\n\t\t\tform.querySelector('.form_submit').classList.remove('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.remove('hidden');\n\t\t\tform.querySelector('.form_submit').classList.add('hidden');\n\t\t}\n\t}else{\n\t\tconsole.log('no form defined');\n\t}\n\t\t\n}\n\n//next form step clicked\nexport function nextPrev(n) {\n\t// This function will figure out which tab to display\n\tlet x \t\t\t\t= form.querySelectorAll(\".formstep\");\n\tlet stepIndicators\t= form.querySelectorAll(\".step\");\n\tlet currentTab\t\t= 0;\n\tlet valid\t\t\t= true;\n\n\t// Find the current active tab\n\tx.forEach((el, index)=>{if(!el.matches('.stephidden')){currentTab = index}});\n\t\n\t//Check validity of this step if going forward\n\tif(n>0){\n\t\t// Report validity of each required field\n\t\tlet elements\t= x[currentTab].querySelectorAll('.required:not(.hidden) input, .required:not(.hidden) textarea, .required:not(.hidden) select');\n\t\tfor(const element of elements) {\n\t\t\tif(\n\t\t\t\telement.closest('.hidden')\t== null\t&&\n\t\t\t\telement.closest('div.nice-select') == null && \n\t\t\t\t(\n\t\t\t\t\telement.type != 'file' || \n\t\t\t\t\telement.closest('.file_upload_wrap').querySelector('.documentpreview input') == null\n\t\t\t\t)\n\t\t\t){\n\t\t\t\telement.required\t= true;\n\t\t\t\tvalid\t\t\t\t= element.reportValidity();\n\t\t\t\tif(!valid){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(!valid) return;\n\t\t\n\t\t//mark the last step as finished\n\t\tstepIndicators[currentTab].classList.add(\"finish\");\n\t}else{\n\t\t//mark the last step as unfinished\n\t\tstepIndicators[currentTab].classList.remove(\"finish\");\n\t}\n\t\n\t//loop over all the formsteps to hide stepindicators of them if needed\n\tArray.from(x).forEach((formstep,index) =>{\n\t\tif(formstep.classList.contains('hidden')){\n\t\t\t//hide the corresponding circle\n\t\t\tstepIndicators[index].classList.add('hidden');\n\t\t}\n\t});\n\n\t// Increase or decrease the current tab by 1:\n\tcurrentTab = currentTab + n;\n\t\n\t//check if the next tab is hidden\n\twhile(x[currentTab].classList.contains('hidden')){\n\t\t//go to the next tab\n\t\tcurrentTab = currentTab + n;\n\n\t\tif (currentTab >= x.length) {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// if you have reached the end of the form... :\n\tif (currentTab >= x.length) {\n\t\treturn false;\n\t}\n\t// Otherwise, display the correct tab:\n\tshowTab(currentTab,form);\n\n\treturn true;\n}\n\nexport function changeFieldValue(selector, value, functionRef, form, addition='', forceValue=false){\n\tif(value == undefined){\n\t\treturn;\n\t}\n\n\tlet name\t\t= '';\n\tlet target\t\t= '';\n\n\tif(selector instanceof Element){\n\t\ttarget\t\t= selector;\n\t\tname\t\t= target.name;\n\t\tif(target.id == ''){\n\t\t\tselector\t= `[name^=\"${target.name}\" i]`;\n\t\t}else{\n\t\t\tselector\t= `[id^=${target.id}]`;\n\t\t}\n\t\t\n\t}else{\n\t\ttarget \t\t= form.querySelector(selector);\n\n\t\ttry{\n\t\t\tname\t\t= target.name;\n\t\t}catch{\n\t\t\tconsole.log(target);\n\t\t}\n\t}\n\n\tlet oldValue\t= getFieldValue(target, form, false, value);\n\t// nothing to change\n\tif(oldValue == value){\n\t\treturn;\n\t}\n\n\t// Check if we are dealing with a multi input field\n\tif(target == null){\n\t\tlet targets \t= form.querySelectorAll(`.clone_div [name^=\"${name}\" i]`);\n\t\tif(targets.length === 0){\n\t\t\treturn;\n\t\t}else if(targets.length == 1){\n\t\t\ttarget\t= targets[0];\n\t\t\ttargets\t= '';\n\t\t}else{\n\t\t\ttarget\t= targets[0];\n\n\t\t\ttargets.forEach((el, index) =>{\n\t\t\t\tif(index == 0){\n\t\t\t\t\tchangeFieldValue(el, '', '', form);\n\t\t\t\t}else{\n\t\t\t\t\tremoveNode(el);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\t\n\tif(target.type == 'radio' || target.type == 'checkbox'){\n\t\t// uncheck all\n\t\tif(value == ''){\n\t\t\tif(selector != ''){\n\t\t\t\tform.querySelectorAll(selector).forEach(el=>el.checked=false);\n\t\t\t}\n\t\t}else{\n\t\t\t// Check if the current target is the one we need to check\n\t\t\tif(target.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\ttarget.checked = true;\n\t\t\t}else{\n\t\t\t\t// find the element with the given value and check it\n\t\t\t\tlet targets = form.querySelectorAll(`[name=\"${name}\" i]`);\n\t\t\t\tfor (const element of targets) {\n\t\t\t\t\tif(element.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\t\t\telement.checked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t//the target has a list attached to it\n\t}else if(target.type == 'date'){\n\t\ttarget.value = value;\n\t\t\n\t\t// convert a date to the right format\n\t\tif (!/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet splitted = '';\n\t\t\tif(value.split('-').length == 3){\n\t\t\t\tsplitted\t= value.split('-');\n\t\t\t}else if(value.split('/').length == 3){\n\t\t\t\tsplitted\t= value.split('/');\n\t\t\t}\n\n\t\t\tif(splitted != ''){\n\t\t\t\tlet year;\n\t\t\t\tlet month;\n\t\t\t\tlet day;\n\t\t\t\tsplitted.forEach(nr=>{\n\t\t\t\t\tif(nr.length == 4){\n\t\t\t\t\t\tyear\t= nr;\n\t\t\t\t\t}else if(nr.length == 2){\n\t\t\t\t\t\tif(nr > 12){\n\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// does not have a value yet\n\t\t\t\t\t\t\tif(month == undefined){\n\t\t\t\t\t\t\t\tmonth\t= nr;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(day != undefined && month != undefined && year != undefined){\n\t\t\t\t\ttarget.value = `${year}-${month}-${day}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else if(target.list != null){\n\t\tlet dataListOption = target.list.querySelector(`[data-value=\"${value}\" i]`);\n\n\t\t//we found a match\n\t\tif(dataListOption != null){\n\t\t\t// We found a cloned field, add as many inputs as needed\n\t\t\tif(target.closest('.clone_div') != null){\n\t\t\t\t// mark the existing ones for deletion, we can delete right now as we need to copy the existing ones first\n\t\t\t\ttarget.closest('.clone_divs_wrapper').querySelectorAll('.clone_div').forEach(el=>el.classList.add('shouldremove'));\n\n\t\t\t\tlet clone;\n\t\t\t\tdataListOption.value.split(';').forEach(val=>{\n\t\t\t\t\tclone = copyFormInput(target.closest('.clone_div'));\n\n\t\t\t\t\tclone.classList.remove('shouldremove');\n\n\t\t\t\t\tchangeFieldValue(clone.querySelector(target.tagName), val, '', form, '', true);\n\t\t\t\t});\n\n\t\t\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\n\n\t\t\t\t// delete the old ones\n\t\t\t\ttarget.closest('.clone_divs_wrapper').querySelectorAll('.shouldremove').forEach(el=>el.remove());\n\t\t\t}else{\n\t\t\t\ttarget.value = dataListOption.value;\n\t\t\t}\n\t\t// We did not find a match, we are filling in the given value\n\t\t}else if(forceValue){\n\t\t\ttarget.value = value;\n\t\t// We did not find a match, empty value\n\t\t}else{\n\t\t\ttarget.value = '';\n\t\t}\n\t}else{\n\t\ttarget.value = value;\n\t}\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(target);\n\t}\n}\n\nexport function changeVisibility(action, el, functionRef){\n\tlet wrapper\t= el.closest('.inputwrapper');\n\tif(wrapper == null){\n\t\twrapper\t= el\n\t}\n\t\n\tif(action == 'add'){\n\t\tif(wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.add('hidden');\n\t}else{\n\t\tif(!wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.remove('hidden');\n\t}\n\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\twrapper.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(el);\n\t}\n}\n\nexport function changeFieldProperty(selector, att, value, functionRef, form, addition=''){\n\t//first change the value\n\tlet target = form.querySelector(selector);\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\n\ttarget[att] = value;\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\n\t//run the originating function with this event\n\tfunctionRef(target);\n}\n\nasync function formbuilderSwitch(target){\n\tlet wrapper\t= target.closest('.sim-form-wrapper');\n\tlet button\t= target.outerHTML;\n\n\tlet formData = new FormData();\n\tlet formId;\n\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.formbuilder-switch')){\n\t\tformData.append('formbuilder', true);\n\t\turl.searchParams.set('formbuilder', true);\n\n\t\tformId\t= wrapper.querySelector('form.sim-form-wrapper').dataset.formid;\n\t}else{\n\t\turl.searchParams.delete('formbuilder');\n\t\tformId\t= wrapper.querySelector('[name=\"formid\"]').value;\n\t}\n\twindow.history.pushState({}, '', url);\n\n\tformData.append('formid', formId);\n\n\tlet loader\t= Main.showLoader(target, false, 'Requesting form...');\n\twrapper.innerHTML\t= loader.outerHTML;\n\n\tlet response = await FormSubmit.fetchRestApi('forms/form_builder', formData);\n\n\tif(response){\n\t\twrapper.innerHTML\t= response.html;\n\n\t\taddStyles(response, document);\n\n\t\t// Activate tinyMce's again\n\t/* \twrapper.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\n\t\t});\n\n\t\twrapper.querySelectorAll('select').forEach(function(select){\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true});\n\t\t}); */\n\t}else{\n\t\tloader.outerHTML\t= button;\n\t}\n}\n\nasync function requestNewFormResults(target){\n\tlet wrapper\t\t= target.closest('.form.table-wrapper');\n\tlet button\t\t= target.outerHTML;\n\n\tlet formData \t= new FormData();\n\tlet formId\t\t= wrapper.querySelector('.sim-table.form-data-table').dataset.formid;\n\tlet shortcodeId\t= wrapper.querySelector('.sim-table.form-data-table').dataset.shortcodeid;\n\n\tformData.append('formid', formId);\n\tformData.append('shortcode_id', shortcodeId);\n\n\tconst url \t\t= new URL(window.location);\n\tif(url.searchParams.get('onlyown')){\n\t\tformData.append('onlyown', true);\n\t}\n\n\tif(url.searchParams.get('all')){\n\t\tformData.append('all', true);\n\t}\n\n\tif(url.searchParams.get('archived')){\n\t\tformData.append('archived', true);\n\t}\n\n\tlet loader\t= Main.showLoader(target, false, 'Requesting form results...');\n\twrapper.innerHTML\t= loader.outerHTML;\n\n\tlet response = await FormSubmit.fetchRestApi('forms/show_form_results', formData);\n\n\tif(response){\n\t\twrapper.innerHTML\t= response;\n\t}else{\n\t\tloader.outerHTML\t= button;\n\t}\n}\n\nasync function archivedEntriesSwitch(target){\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.archive-switch-show')){\n\t\turl.searchParams.set('archived', true);\n\t}else{\n\t\turl.searchParams.delete('archived');\n\t}\n\twindow.history.pushState({}, '', url);\n\n\trequestNewFormResults(target);\n}\n\nasync function onlyOwnSwitch(target){\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.onlyown-switch-on')){\n\t\turl.searchParams.set('onlyown', true);\n\t\turl.searchParams.delete('all', true);\n\t}else{\n\t\turl.searchParams.set('all', true);\n\t\turl.searchParams.delete('onlyown');\n\t}\n\twindow.history.pushState({}, '', url);\n\n\trequestNewFormResults(target);\n}\n\n//we are online again\nwindow.addEventListener('online', function(){\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\n\t\tbtn.disabled = false\n\t\tbtn.querySelectorAll('.offline').forEach(el=>el.remove());\n\t});\n});\n\n//prevent form submit when offline\nwindow.addEventListener('offline',function(){\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\n\t\tbtn.disabled = true;\n\t\tif(btn.querySelector('.online') == null){\n\t\t\tbtn.innerHTML = '<div class=\"online\">'+btn.innerHTML+'</div>';\n\t\t}\n\t\tbtn.innerHTML += '<div class=\"offline\">You are offline</div>'\n\t});\n});\n\ndocument.addEventListener('click', function(event) {\n\tlet target = event.target;\n\t\n\t//add element\n\tif(target.matches('.add')){\n\t\tlet newNode = copyFormInput(target.closest(\".clone_div\"));\n\n\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\n\n\t\t//add tinymce's can only be done when node is inserted and id is unique\n\t\tnewNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor',false, el.id);\n\t\t});\n\n\t\ttarget.remove();\n\t}\n\t\n\t//remove element\n\tif(target.matches('.remove')){\n\t\t//Remove node clicked\n\t\tremoveNode(target);\n\t}\n\n\tif(target.matches('.sim-form-wrapper [name=\"submit_form\"]')){\n\t\tevent.stopPropagation();\n\t\t\n\t\tsaveFormInput(target);\n\t}\n\n\tif(target.matches('.formbuilder-switch') || target.matches('.formbuilder-switch-back')){\n\t\tformbuilderSwitch(target);\n\t}\n\n\tif(target.matches('.archive-switch-hide') || target.matches('.archive-switch-show')){\n\t\tarchivedEntriesSwitch(target);\n\t}\n\n\tif(target.matches('.onlyown-switch-all') || target.matches('.onlyown-switch-on')){\n\t\tonlyOwnSwitch(target);\n\t}\n});\n\ndocument.addEventListener('change', ev=>{\n\t// select all elements with a datalist attached\n\tif(ev.target.matches('input[list]') && ev.target.name.includes('[')){\n\t\tlet el\t\t= ev.target.list.querySelector(`[value=\"${ev.target.value}\" i]`);\n\n\t\tif(el != null){\n\t\t\t// find the dataset value of the given element value\n\t\t\tlet value\t= el.dataset.value;\n\n\t\t\tif(value != undefined){\n\t\t\t\t// change the value to create extra inputs if necessary\n\t\t\t\tchangeFieldValue(ev.target, value, '', ev.target.closest('form'));\n\t\t\t}\n\t\t}\n\t}\n})","function getRadioValue(form, selector){\r\n\tlet el\t= form.querySelector(`${selector}:checked`);\r\n\r\n\t//There is no radio selected currently\r\n\tif(el == null){\r\n\t\t//return an empty value\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn el.value;\r\n}\r\n\r\nfunction getCheckboxValue(form, selector, compareValue, orgName){\r\n\tlet value\t\t= '';\r\n\tlet elements\t= '';\r\n\r\n\t//we are dealing with a specific checkbox\r\n\tif(orgName.type == 'checkbox' && compareValue != null ){\r\n\t\tif(orgName.checked){\r\n\t\t\treturn orgName.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn '';\r\n\t}\r\n\r\n\t//we should find the checkbox with this value and check if it is checked\r\n\tif(compareValue != null){\r\n\t\telements\t= form.querySelector(`${selector}[value=\"${compareValue}\" i]:checked`);\r\n\t\tif(elements != null){\r\n\t\t\tvalue = compareValue;\r\n\t\t}\r\n\t//no compare value give just return all checked values\r\n\t}else{\r\n\t\telements\t= form.querySelectorAll(`${selector}:checked`);\r\n\t\tvalue\t\t= [];\r\n\t\telements.forEach(el=>{\r\n\t\t\tvalue.push(el.value);\r\n\t\t\t/* if(value != ''){\r\n\t\t\t\tvalue += ', ';\r\n\t\t\t}\r\n\t\t\tvalue += el.value; */\r\n\t\t});\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction getMultiValue(form, el){\r\n\tlet value = [];\r\n\r\n\tform.querySelectorAll(`[name=\"${el.name}\"]`).forEach(elem => value.push(elem.value));\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getDataListValue(el){\r\n\tlet value\t\t= '';\r\n\tlet origInput \t= el.list.querySelector(`[value='${el.value}' i]`);\r\n\t\t\t\r\n\tif(origInput == null){\r\n\t\tvalue =  el.value;\r\n\t}else{\r\n\t\tvalue = origInput.dataset.value;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getFieldValue(orgName, form, checkDatalist=true, compareValue=null, lowercase=false){\r\n\r\n\tlet el\t\t\t= ''; \r\n\tlet name\t\t= '';\r\n\tlet value \t\t= '';\r\n\tlet selector\t= '';\r\n\r\n\t//name is not a name but a node\r\n\tif(orgName instanceof Element){\r\n\t\tel\t\t\t= orgName;\t\t\r\n\t\t//check if valid input type\r\n\t\tif(el.tagName != 'INPUT' && el.tagName != 'TEXTAREA' && el.tagName != 'SELECT' && el.closest('.nice-select-dropdown') == null){\r\n\t\t\tel = el.querySelector('input, select, textarea');\r\n\t\t}\r\n\t\tif(el == null){\r\n\t\t\tel\t\t\t= orgName;\r\n\t\t}\r\n\t\tname\t\t= el.name;\r\n\t// We should look for an id\r\n\t}else if(orgName.match(\"E[0-9]\")){\r\n\t\tselector\t= `[id^=${orgName}]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t\tname\t\t= el.name;\r\n\t}else{\r\n\t\tname\t\t= orgName;\r\n\t\tselector\t= `[name='${name}' i]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t}\r\n\t\r\n\tif(el == null){\r\n\t\tconsole.trace();\r\n\t\tconsole.log(\"cannot find element with name \"+name);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(el.type == 'radio'){\r\n\t\tvalue\t= getRadioValue(form, selector);\r\n\t}else if(el.type == 'checkbox'){\r\n\t\tvalue\t= getCheckboxValue(form, selector, compareValue, orgName);\t\r\n\t}else if(el.closest('.nice-select-dropdown') != null && el.dataset.value != undefined){\r\n\t\t//nice select\r\n\t\tvalue = el.dataset.value\r\n\t}else if(el.list != null && el.value != '' && checkDatalist){\r\n\t\tvalue =  getDataListValue(el);\r\n\t}else if(el.name != undefined && el.name.endsWith('[]')){\r\n\t\tvalue =  getMultiValue(form, el);\r\n\t}else if(el.value != null && el.value != 'undefined'){\r\n\t\tvalue = el.value;\r\n\t}\r\n\t\r\n\tif(lowercase){\r\n\t\treturn value.toLowerCase();\r\n\t}\r\n\treturn value;\r\n}","import {changeUrl, displayTab, showModal} from './../../../../includes/js/main.js'\r\nimport {fetchRestApi} from  './../../../../includes/js/form_submit_functions.js'\r\nimport {copyFormInput, fixNumbering, removeNode} from './../../../../../../sim-modules/forms/js/forms.js'\r\n\r\nconsole.log('admin.js loaded');\r\n\r\nfunction switchSlider(event){\r\n    if(event.target.checked){\r\n        document.querySelectorAll('.options, .tablink-wrapper').forEach(el=>el.style.display    = 'block');\r\n    }else{\r\n        document.querySelectorAll('.options, .tablink-wrapper').forEach(el=>el.style.display    = 'none');\r\n    }\r\n}\r\n\r\n//Load after page load\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\tdocument.querySelectorAll('[name=\"enable\"]').forEach(el=>el.addEventListener('change', switchSlider));\r\n\r\n\t//add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceselect  == undefined){\r\n\t\t    select._niceselect = NiceSelect.bind(select,{searchable: true});\r\n        }\r\n\t});\r\n});\r\n\r\nwindow.addEventListener(\"click\", async event => {\r\n\tlet target = event.target;\r\n        \r\n    //add element\r\n    if(target.matches('.add')){\r\n        let newNode = copyFormInput(target.closest(\".clone_div\"));\r\n\r\n        fixNumbering(target.closest('.clone_divs_wrapper'));\r\n\r\n        //add tinymce's can only be done when node is inserted and id is unique\r\n        newNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor',false, el.id);\r\n        });\r\n\r\n        target.remove();\r\n    }\r\n    \r\n    //remove element\r\n    if(target.matches('.remove')){\r\n        //Remove node clicked\r\n        removeNode(target);\r\n    }\r\n\r\n    if(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\r\n        event.preventDefault();\r\n\r\n        let value = '';\r\n        if(target.classList.contains('placeholders')){\r\n            value = target.textContent;\r\n        }else if(target.value != ''){\r\n            value = target.value;\r\n            target.selectedIndex = '0';\r\n        }\r\n        \r\n        if(value != ''){\r\n            let options = {\r\n                icon: 'success',\r\n                title: 'Copied '+value,\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n            };\r\n\r\n            if(document.fullscreenElement != null){\r\n                options['target']\t= document.fullscreenElement;\r\n            }\r\n\r\n            Swal.fire(options);\r\n            navigator.clipboard.writeText(value);\r\n        }\r\n    }\r\n\r\n    if(target.matches(\".tablink\")){\r\n\t\tevent.preventDefault();\r\n\t\t//change the url in browser\r\n\t\tchangeUrl(target);\r\n\r\n\t\t//show the tab\r\n\t\tdisplayTab(target);\r\n\t}else if(target.matches(`.sim.release`)){\r\n        showModal('release');\r\n\r\n        let formData    = new FormData();\r\n        formData.append('module_name', target.dataset.name);\r\n        \r\n        let response    = await fetchRestApi('get-changelog', formData);\r\n\r\n        document.querySelector('#release_modal .loadergif_wrapper').classList.add('hidden');\r\n\r\n        document.querySelector('#release_modal .content').innerHTML   = response;\r\n        document.querySelector('#release_modal .content').classList.remove('hidden');\r\n    }\r\n});\r\n\r\ndocument.querySelectorAll('#release_modal').forEach(el=>el.addEventListener('modalclosed', ev=>{\r\n    ev.target.querySelector('.loadergif_wrapper').classList.remove('hidden');\r\n    ev.target.querySelector('.content').classList.add('hidden');\r\n}));","export function formReset(form){\r\n\t//reset form to the default\r\n\tform.reset();\r\n\r\n\t//hide loaders\r\n\tform.querySelectorAll('.loadergif').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t//hide button again if needed\r\n\tform.querySelectorAll('.multistepcontrols .form_submit').forEach(el=>el.classList.add('hidden'));\r\n\t\r\n\t//fix required fields\r\n\tform.querySelectorAll('[required]').forEach(el=>{el.required = false;});\r\n\t\r\n\t//empty any fileuploads\r\n\tform.querySelectorAll('.file_upload').forEach(el=>el.value='');\r\n\r\n\t//show hidden file uploads\r\n\tform.querySelectorAll('.upload_div.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\r\n\t//Reset nice selects\r\n\tform.querySelectorAll('select').forEach(el=>el._niceselect.update());\r\n\t\r\n\t//remove doc previews\r\n\tdocument.querySelectorAll('.documentpreview .document').forEach(el=>el.remove());\r\n\t\r\n\tif(form.querySelector('.formstep') != null){\r\n\t\t//mark all circles as not active anymore\r\n\t\tform.querySelectorAll('.multistepcontrols .step.finish').forEach(el=>el.classList.remove('finish'));\r\n\t\r\n\t\t//go back to the first part of the form in case of multistep\r\n\t\tFormFunctions.showTab(0,form);\r\n\t}\r\n}\r\n\r\nexport async function submitForm(target, url, extraData=''){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet validity \t= true;\r\n\t\r\n\t//get all hidden required inputs and unrequire them\r\n\tform.querySelectorAll('.hidden [required], select[required], .nice-select-search[required], .stephidden [required]').forEach(el=>{el.required = false});\r\n\r\n\t// enable disabled fields so it gets included and warnings are shown\r\n\tform.querySelectorAll('[disabled][required]').forEach( el=>{\r\n\t\tel.disabled\t= false;\r\n\t\tel.classList.add('was-disabled'); \r\n\t});\r\n\r\n\tvalidity\t= form.reportValidity();\r\n\r\n\t//only continue if valid\r\n\tif(validity){\r\n\t\t//Display loader\r\n\t\ttarget.closest('.submit_wrapper').querySelectorAll('.loadergif').forEach(loader=>loader.classList.remove('hidden'));\r\n\t\t\r\n\t\t//save any tinymce forms\r\n\t\tif (typeof tinymce !== 'undefined') {\r\n\t\t\ttinymce.get().forEach((tn)=>{\r\n\t\t\t\t// only save when the visual tab is active\r\n\t\t\t\tif(!tn.hidden){\r\n\t\t\t\t\ttn.save()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// change the name of multiselects if needed\r\n\t\tdocument.querySelectorAll('select[multiple]:not([name$=\\\\[\\\\]])').forEach(el => {\r\n\t\t\tconsole.error(`Multi select ${el.name} should have [] at the end. I have fixed it for now`);\r\n\t\t\tel.name\t= el.name+'[]';\r\n\t\t})\r\n\t\t\r\n\t\tlet formData = new FormData(form);\r\n\t\t\r\n\t\tif(extraData != ''){\r\n\t\t\tformData.append('extra', extraData);\r\n\t\t}\r\n\r\n\t\t// disable fields again\r\n\t\tform.querySelectorAll('.was-disabled').forEach( el=>{\r\n\t\t\tel.disabled\t= true;\r\n\t\t\tel.classList.remove('was-disabled'); \r\n\t\t});\r\n\r\n\t\tif(form.dataset.addempty == 'true'){\r\n\t\t\t//also append at least one off all checkboxes\r\n\t\t\tform.querySelectorAll('input[type=\"checkbox\"]:not(:checked)').forEach(checkbox=>{\r\n\t\t\t\t//if no checkbox with this name exist yet\r\n\t\t\t\tif(!formData.has(checkbox.name)){\r\n\t\t\t\t\tformData.append(checkbox.name,'');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// also add get params\r\n\t\ttry{\r\n\t\t\tlocation['search'].split('?')[1].split('&').forEach(param=>{\r\n\t\t\t\tlet split\t= param.split('=');\r\n\t\t\t\tif(split[0] != 'formbuilder' && split[0] != 'main_tab' && split[0] != 'second_tab'){\r\n\t\t\t\t\tformData.append(split[0], split[1]);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}catch{\r\n\t\t\t//pass\r\n\t\t};\r\n\r\n\t\tlet response = await fetchRestApi(url, formData);\r\n\r\n\t\tform.querySelectorAll('.submit_wrapper .loadergif').forEach(loader => loader.classList.add('hidden'));\r\n\r\n\t\tif(form.dataset.reset != 'true'){\r\n\t\t\tmarkComplete();\r\n\t\t}\r\n\r\n\t\treturn response;\r\n\t}else{\r\n\t\tform.querySelectorAll(':invalid').forEach(el=>{\r\n\t\t\tif(el.validationMessage != undefined){\r\n\t\t\t\tMain.displayMessage(`${el.name} has an error:\\n${el.validationMessage}`, 'error').then((value)=>{\r\n\t\t\t\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(formstep=>formstep.classList.add('stephidden'));\r\n\r\n\t\t\t\t\tel.closest('.stephidden').classList.remove('stephidden');\r\n\r\n\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\tel.scrollIntoView();\r\n\r\n\t\t\t\t\tel.focus();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n/**\r\n * Set the default values to the current values so to not trigger a page leave warning\r\n */\r\nexport function markComplete(){\r\n\r\n\t// pending\r\n\tdocument.querySelectorAll('[data-pending]').forEach(el=>{\r\n\t\tel.removeAttribute('data-pending');\r\n\t});\r\n\r\n\t// check all inputs\r\n\tdocument.querySelectorAll('form input:not([type=radio], [type=checkbox]), form textarea').forEach(el=>{\r\n\t\tel.defaultValue = el.value\r\n\t});\r\n\r\n\t// check all checkboxes and radio\r\n\tdocument.querySelectorAll('form input[type=radio], form input[type=checkbox]').forEach(el=>{\r\n\t\tif(el.checked){\r\n\t\t\tel.defaultChecked = true; \r\n\t\t}\r\n\t});\r\n\r\n\t// check all dropdowns\r\n\tdocument.querySelectorAll('form select').forEach(el=>{\r\n\t\tif(el.selectedIndex != -1 && el.options[el.selectedIndex] != undefined){\r\n\t\t\tel.options[el.selectedIndex].defaultSelected\t= true;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport async function fetchRestApi(url, formData='', showErrors=true){\r\n\tif(formData == ''){\r\n\t\tformData\t= new FormData();\r\n\t}\r\n\t\r\n\tformData.append('_wpnonce', sim.restNonce);\r\n\tlet result;\r\n\ttry{\r\n\t\tresult = await fetch(\r\n\t\t\t`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tcredentials: 'same-origin',\r\n\t\t\t\tbody: formData\r\n\t\t\t}\r\n\t\t);\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t}\r\n\t\r\n\tlet response\t= await result.text();\r\n\ttry{\r\n\t\tlet json\t\t= JSON.parse(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\treturn json;\r\n\t\t}else if(json.code == 'rest_cookie_invalid_nonce'){\r\n\t\t\tMain.displayMessage('Please refresh the page and try again!', 'error');\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\tconsole.error(json);\r\n\t\t\tif(json.data == null){\r\n\t\t\t\tMain.displayMessage(json.message);\r\n\t\t\t}else{\r\n\t\t\t\tMain.displayMessage(json.message+\"\\n\"+JSON.stringify(json.data), 'error');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t\tconsole.error(result);\r\n\t\tconsole.error(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\tif(showErrors){\r\n\t\t\t\tMain.displayMessage(`Problem parsing the json, refresh the page or try again.`, 'error');\r\n\t\t\t}\r\n\t\t\tconsole.error(`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}` );\r\n\t\t\tconsole.error(response);\r\n\t\t}else{\r\n\t\t\tlet modal\t= `<div id='response-details' class=\"modal hidden\" style='z-index:9999999999;'>`;\r\n\t\t\t\tmodal\t+= `<div class=\"modal-content\" style='max-width: min(1000px,100%);'>`\r\n\t\t\t\t\tmodal\t+= `<span class=\"close\">&times;</span>`;\r\n\t\t\t\t\tmodal\t+= response;\r\n\t\t\t\tmodal\t+= `</div>`;\r\n\t\t\tmodal\t+= `</div>`;\r\n\r\n\t\t\tdocument.querySelector('body').insertAdjacentHTML('afterBegin', modal);\r\n\t\t\tMain.displayMessage(`Error loading url ${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}<br><button class='button small' id='error-details' onclick='(function(){ document.getElementById(\"response-details\").classList.remove(\"hidden\"); })();'>Details</button><br><div class='hidden response-message'>${response}</div>`, 'error');\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n}"],"names":["scripts","afterScriptsLoaded","attachTo","tinymce","remove","document","querySelectorAll","forEach","el","window","tinyMCE","execCommand","id","dispatchEvent","Event","bubbles","cancelable","addEventListener","ev","area","closest","querySelector","panel","style","visibility","target","matches","display","select","undefined","_niceselect","NiceSelect","bind","searchable","addScripts","length","shift","tagName","getElementById","s","createElement","type","src","innerHTML","head","appendChild","error","console","changeUrl","secondTab","newParam","dataset","param_val","hash","url","URL","location","parentNode","classList","contains","searchParams","set","delete","history","pushState","switchTab","event","params","Proxy","URLSearchParams","search","get","prop","mainTab","main_tab","lastTab","tabbutton","result","displayTab","second_tab","tabButton","tab","child","childTab","add","replace","hashField","scrollIntoView","block","focus","SimTableFunctions","positionTable","bodyScrolling","menu","overflow","body","top","scrollTo","overflowY","left","right","bottom","position","removeDefaultSelect","Array","from","options","option","defaultSelected","log","w","textContent","toLowerCase","check","a","navigator","userAgent","vendor","opera","test","substr","vw","Math","max","documentElement","clientWidth","innerWidth","getBoundingClientRect","removeProperty","positionSubSubMenus","message","icon","autoclose","no_ok","timer","title","trim","confirmButtonColor","cancelButtonColor","callback","fullscreenElement","Swal","fire","alert","preventDefault","getAttribute","setAttribute","modal","scrollBarWidth","clientX","modals","scrollY","parseInt","prim","zIndex","hideModals","activeElement","blur","tinymceSettings","copyFormInput","originalNode","newNode","clear","tn","settings","save","prepareForCloning","cloneNode","init","input","checked","value","uploadButton","index","nodeNr","previewDiv","i","previousVal","getElementsByTagName","selectedIndex","update","nextSibling","html","insertAdjacentHTML","insertBefore","fixNumbering","cloneDivsWrapper","clone","divid","name","removeNode","node","allCloneDivs","addElement","prev","previousElementSibling","changeFieldValue","selector","functionRef","form","addition","forceValue","Element","oldValue","orgName","checkDatalist","compareValue","lowercase","match","trace","getRadioValue","elements","push","getCheckboxValue","list","origInput","getDataListValue","endsWith","elem","getMultiValue","getFieldValue","targets","date","Date","setDate","getDate","toISOString","split","element","splitted","year","month","day","nr","dataListOption","val","evt","async","requestNewFormResults","wrapper","button","outerHTML","formData","FormData","formId","formid","shortcodeId","shortcodeid","append","loader","Main","showLoader","response","FormSubmit","fetchRestApi","switchSlider","btn","disabled","stopPropagation","required","submitForm","displayMessage","reset","formReset","saveFormInput","temp","prototype","slice","call","js","children","concat","css","addStyles","formbuilderSwitch","archivedEntriesSwitch","onlyOwnSwitch","includes","showConfirmButton","clipboard","writeText","showModal","showErrors","sim","restNonce","fetch","baseUrl","restApiPrefix","method","credentials","text","json","JSON","parse","ok","code","data","stringify"],"sourceRoot":""}