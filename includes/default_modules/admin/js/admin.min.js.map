{"version":3,"file":"admin.min.js","mappings":"4CAAC,IAAWA,EAA6LC,KAA7LD,EAAkM,IAAI,MAAM,aAAa,IAAIE,oBAAoB,CAAC,IAAI,CAACC,wBAAwBC,oBAAoBC,uBAAuBC,KAAK,6rxDAA4rxD,GAAI,iCAAoB,CAACC,EAAE,CAACC,EAAER,KAAK,IAAI,IAAIS,KAAKT,EAAE,iCAAoBU,EAAEV,EAAES,KAAK,iCAAoBC,EAAEF,EAAEC,IAAIE,OAAOC,eAAeJ,EAAEC,EAAE,CAACI,YAAW,EAAGC,IAAId,EAAES,IAAG,EAAGC,EAAE,CAACF,EAAER,IAAIW,OAAOI,UAAUC,eAAeC,KAAKT,EAAER,GAAGkB,EAAEV,IAAI,oBAAoBW,QAAQA,OAAOC,aAAaT,OAAOC,eAAeJ,EAAEW,OAAOC,YAAY,CAACC,MAAM,WAAWV,OAAOC,eAAeJ,EAAE,aAAa,CAACa,OAAM,GAAG,GAAI,2BAAoB,CAAC,EAAE,OAAOnB,oBAAoB,KAAK,EAAE,2BAAoB,kCAAqB,0BAAoB,EAApyyD,GAAjJoB,OAAOC,QAAQvB,G,UCA/E,IAAWS,EAA6LR,KAA7LQ,EAAkM,IAAI,MAAM,aAAa,IAAIe,EAAE,CAACjB,EAAE,CAACE,EAAEgB,KAAK,IAAI,IAAIC,KAAKD,EAAED,EAAEd,EAAEe,EAAEC,KAAKF,EAAEd,EAAED,EAAEiB,IAAIf,OAAOC,eAAeH,EAAEiB,EAAE,CAACb,YAAW,EAAGC,IAAIW,EAAEC,IAAG,EAAGhB,EAAE,CAACc,EAAEf,IAAIE,OAAOI,UAAUC,eAAeC,KAAKO,EAAEf,GAAGS,EAAEM,IAAI,oBAAoBL,QAAQA,OAAOC,aAAaT,OAAOC,eAAeY,EAAEL,OAAOC,YAAY,CAACC,MAAM,WAAWV,OAAOC,eAAeY,EAAE,aAAa,CAACH,OAAM,GAAG,GAAIZ,EAAE,CAAC,EAAEe,EAAEN,EAAET,GAAGe,EAAEjB,EAAEE,EAAE,CAACkB,KAAK,IAAIC,EAAEC,QAAQ,IAAIC,IAAI,MAAML,EAAE,CAACD,EAAEf,EAAEgB,EAAE,CAAC,KAAK,IAAIC,EAAEA,EAAE,UAAUjB,EAAEsB,WAAW,WAAWtB,EAAEuB,MAAMvB,EAAEwB,SAAS,SAASC,WAAWC,QAAQ,MAAM3B,EAAE,IAAIkB,EAAEjB,EAAE,CAAC2B,SAAQ,EAAGC,YAAW,KAAMZ,IAAID,EAAEc,cAAc9B,EAAC,EAAGkB,EAAEF,GAAGC,EAAED,EAAE,SAAShB,EAAEgB,GAAGC,EAAED,EAAE,UAAUe,EAAEf,GAAGC,EAAED,EAAE,cAAcd,EAAE,CAACc,EAAEf,SAAI,IAASe,EAAEf,GAAGe,EAAEf,GAAGe,EAAEgB,aAAa/B,GAAGF,EAAE,CAACiB,EAAEf,IAAIe,GAAGiB,UAAUC,SAASjC,GAAGS,EAAE,CAACM,EAAEf,IAAIe,GAAGiB,UAAUE,IAAIlC,GAAGmC,EAAE,CAACpB,EAAEf,IAAIe,GAAGiB,UAAUI,OAAOpC,GAAGT,EAAE,CAAC8C,KAAK,KAAKC,YAAW,EAAGC,mBAAkB,EAAGC,YAAY,mBAAmBC,WAAW,SAASC,aAAa,WAAWC,YAAW,GAAI,MAAMC,EAAE,WAAAC,CAAY9B,EAAEf,EAAE,CAAC,GAAG,IAAIe,EAAE,MAAM,IAAI+B,MAAM,qCAAqC,KAAK/B,aAAagC,SAAS,MAAM,IAAID,MAAM,wEAAwEE,KAAKC,GAAGlC,EAAEiC,KAAKC,GAAGC,YAAYF,KAAKA,KAAKG,OAAO,IAAI5D,KAAKS,GAAGgD,KAAKX,KAAKW,KAAKG,OAAOd,KAAKW,KAAKI,gBAAgB,GAAGJ,KAAKR,YAAYvC,EAAE+C,KAAKC,GAAG,gBAAgBD,KAAKG,OAAOX,YAAYQ,KAAKP,WAAWxC,EAAE+C,KAAKC,GAAG,eAAeD,KAAKG,OAAOV,WAAWO,KAAKN,aAAazC,EAAE+C,KAAKC,GAAG,iBAAiBD,KAAKG,OAAOT,aAAaM,KAAKK,SAAS,KAAKL,KAAKM,cAAc,KAAKN,KAAKO,SAAStD,EAAE+C,KAAKC,GAAG,YAAYD,KAAKQ,SAASvD,EAAE+C,KAAKC,GAAG,YAAYD,KAAKS,SAAST,KAAKU,mBAAmB,CAAC,MAAAD,CAAO1C,GAAE,GAAIiC,KAAKX,KAAKW,KAAKW,YAAYX,KAAKX,MAAMW,KAAKY,YAAY7C,GAAGiC,KAAKC,GAAGjB,UAAUI,OAAO,iBAAiBY,KAAKa,iBAAiBb,KAAKG,OAAOR,YAAYK,KAAKC,GAAGjB,UAAUE,IAAI,iBAAiBc,KAAKc,oBAAoB,CAAC,WAAAH,CAAY5C,GAAGiC,KAAKe,QAAQhD,EAAEiD,KAAIjD,IAAG,CAAEsB,KAAKtB,EAAEkD,WAAW,CAACC,WAAWnD,EAAEmD,SAASV,WAAWzC,EAAEyC,SAASW,SAAS,aAAapD,EAAEH,UAAS,CAAC,WAAAgD,CAAY7C,GAAG,MAAMf,EAAEoE,MAAMC,KAAKrB,KAAKC,GAAGqB,iBAAiB,oBAAoBtD,EAAE,GAAGC,EAAE,GAAG+B,KAAKX,KAAKrC,EAAEgE,KAAIhE,IAAI,IAAID,EAAE+B,EAAE9B,EAAEkE,SAASnD,GAAGf,EAAEkE,WAAWlE,EAAEuE,kBAAkBzC,GAAE,GAAI/B,EAAE,aAAaC,EAAEwE,QAAQ,CAACC,KAAKzE,EAAE0E,MAAM9D,MAAM,YAAY,CAAC6D,KAAKzE,EAAE2E,QAAQC,SAAS5E,EAAE6E,UAAUjE,MAAMZ,EAAEY,MAAMkE,MAAM9E,EAAE2E,QAAQG,MAAMZ,SAASpC,EAAE0B,SAASxD,EAAEwD,UAAU,MAAMvD,EAAE,CAACiE,SAASpC,EAAE0B,SAASxD,EAAEwD,SAASW,SAAS,aAAanE,EAAEwE,SAAS1E,EAAE,CAACuC,KAAKtC,EAAEkE,WAAWhE,EAAE8E,QAAQ,MAAM,OAAO/D,EAAEgE,KAAKlF,GAAGG,EAAEiE,UAAUjD,EAAE+D,KAAKlF,GAAGC,KAAIiD,KAAKe,QAAQ/C,EAAEgC,KAAKI,gBAAgBnC,CAAC,CAAC,cAAA4C,GAAiB,MAAM9C,EAAE,CAAC,cAAcd,EAAE+C,KAAKC,GAAG,UAAU,GAAGD,KAAKQ,SAAS,WAAW,GAAGR,KAAKO,SAAS,eAAe,IAAI0B,OAAOC,SAASlF,EAAEgD,KAAKG,OAAOb,WAAW,oHAAoHU,KAAKP,sDAAsD,GAAGzB,EAAE,uBAAuBD,EAAEoE,KAAK,mBAAmBnC,KAAKQ,SAAS,GAAG,6BAA6BR,KAAKO,SAAS,mBAAmB,6EAA6EvD,0EAA0EgD,KAAKC,GAAGmC,mBAAmB,WAAWpE,GAAGgC,KAAKK,SAASL,KAAKC,GAAGoC,mBAAmBrC,KAAKsC,uBAAuBtC,KAAKuC,cAAc,CAAC,oBAAAD,GAAuB,GAAGtC,KAAKO,SAAS,CAAC,IAAIxC,EAAE,GAAG,SAASyE,OAAOC,iBAAiBzC,KAAKK,UAAUqC,OAAO1C,KAAKI,gBAAgBuC,OAAO,GAAG3C,KAAKI,gBAAgBwC,SAAQ,CAAC5F,EAAEgB,EAAEC,KAAK,IAAIlB,EAAEC,EAAEqC,KAAKoC,KAAKzD,IAAIC,EAAE0E,OAAO,IAAI5F,GAAG,MAAMgB,GAAG,yBAAyBhB,UAAC,IAAYgB,EAAEA,GAAGiC,KAAKR,aAAazB,EAAE,GAAGiC,KAAKI,gBAAgBuC,UAAU3C,KAAKN,eAAeM,KAAKK,SAASwC,cAAc,qBAAqBC,UAAU/E,CAAC,KAAK,CAAC,MAAMA,EAAEiC,KAAKI,gBAAgBuC,OAAO,EAAE3C,KAAKI,gBAAgB,GAAGf,KAAKoC,KAAKzB,KAAKR,YAAYQ,KAAKK,SAASwC,cAAc,YAAYC,UAAU/E,CAAC,CAAC,CAAC,YAAAwE,GAAe,MAAMxE,EAAEiC,KAAKK,SAASwC,cAAc,MAAM7C,KAAKe,QAAQ6B,SAAQ5F,IAAIgD,KAAKO,UAAUP,KAAKG,OAAOZ,mBAAmBS,KAAK+C,iBAAiB/F,GAAGe,EAAEiF,YAAYhD,KAAKiD,YAAYjG,GAAE,GAAG,CAAC,WAAAiG,CAAYlF,GAAG,MAAMf,EAAEkG,SAASC,cAAc,MAAM,GAAGnG,EAAE8F,UAAU/E,EAAEsB,KAAKoC,UAAK,IAAS1D,EAAEsB,KAAKyC,OAAO9E,EAAEgG,YAAYhD,KAAKoD,iBAAiBrF,EAAEsB,KAAKyC,QAAQ/D,EAAEkD,WAAWE,SAAS1D,EAAET,EAAE,gBAAgB,CAACA,EAAEqG,aAAa,aAAatF,EAAEsB,KAAKzB,OAAO,MAAMI,EAAE,CAAC,UAAUD,EAAEkD,WAAWC,UAAUlD,EAAEgE,KAAK,YAAYjE,EAAEkD,WAAWT,UAAUxC,EAAEgE,KAAK,YAAYhF,EAAEgC,UAAUE,OAAOlB,GAAGhB,EAAEsG,iBAAiB,SAAQtG,GAAGgD,KAAKuD,uBAAuBxF,EAAEf,IAAG,CAAC,OAAOe,EAAEgE,QAAQ/E,EAAEA,CAAC,CAAC,gBAAAoG,CAAiBrF,GAAG,MAAMf,EAAEkG,SAASC,cAAc,QAAQ,OAAOnG,EAAE8F,UAAU/E,EAAEN,EAAET,EAAE,SAASA,CAAC,CAAC,MAAAwG,CAAOzF,EAAE,IAAI,IAAIf,EAAEgD,KAAK,IAAIjC,IAAIf,EAAEe,EAAE0F,OAAOvD,aAAalD,EAAE0G,cAAc,CAAC,OAAAC,GAAU3D,KAAKQ,WAAWR,KAAKQ,UAAS,EAAG/C,EAAEuC,KAAKK,SAAS,YAAY,CAAC,MAAAuD,GAAS5D,KAAKQ,WAAWR,KAAKQ,UAAS,EAAGrB,EAAEa,KAAKK,SAAS,YAAY,CAAC,KAAAwD,GAAQ7D,KAAK8D,mBAAmB9D,KAAKI,gBAAgB,GAAGJ,KAAKsC,uBAAuBtC,KAAKwD,SAASzG,EAAEiD,KAAKC,GAAG,CAAC,OAAA8D,GAAU/D,KAAKM,eAAeN,KAAKgE,sBAAsBhE,KAAKK,WAAWL,KAAKK,SAASjB,SAASY,KAAKC,GAAGjB,UAAUI,OAAO,iBAAiB,CAAC,KAAA6E,CAAMlG,EAAE,IAAI,IAAIf,EAAE,GAAGF,EAAEkD,KAAKK,SAAS,QAAQL,KAAKO,SAASxC,IAAIiC,KAAKK,SAASwC,cAAc,uBAAuB1D,EAAEa,KAAKK,SAAS,QAAQvB,EAAEkB,KAAKC,MAAMd,EAAEa,KAAKK,SAAS,QAAQvB,EAAEkB,KAAKC,MAAMxC,EAAEuC,KAAKK,SAAS,QAAQrD,EAAEgD,KAAKC,GAAGjC,EAAEhB,EAAE,cAAcF,EAAEkD,KAAKK,SAAS,QAAQ,CAAC,MAAMtC,EAAEiC,KAAKK,SAASwC,cAAc,uBAAuB9E,IAAIA,EAAEH,MAAM,GAAGG,EAAEkG,SAAS,MAAMjH,EAAEgD,KAAKK,SAASwC,cAAc,UAAU7F,GAAGmC,EAAEnC,EAAE,SAAS,MAAMgB,EAAEgC,KAAKK,SAASwC,cAAc,aAAa7E,GAAGP,EAAEO,EAAE,SAASgC,KAAKK,SAASiB,iBAAiB,SAASsB,SAAQ7E,GAAGA,EAAEmG,MAAMtC,QAAQ,IAAG,MAAM5B,KAAKK,SAAS4D,OAAO,CAAC,iBAAAvD,GAAoBV,KAAKC,GAAGqD,iBAAiB,WAAU,IAAItD,KAAKmE,0BAA0B,aAAY3B,OAAOc,iBAAiB,SAAQvF,GAAGiC,KAAKoE,kBAAkBrG,KAAIiC,KAAKC,GAAGqD,iBAAiB,SAAStD,KAAKwD,OAAO,CAAC,kBAAA1C,GAAqBd,KAAKK,SAASiD,iBAAiB,SAAQvF,GAAGiC,KAAKqE,WAAWtG,KAAIiC,KAAKK,SAASiD,iBAAiB,WAAUvF,GAAGiC,KAAKsE,cAAcvG,KAAIiC,KAAKK,SAASiD,iBAAiB,WAAU,KAAK,OAAOvF,EAAEiC,KAAKC,GAAGjC,EAAED,EAAE,WAAW,IAAIA,KAAIiC,KAAKK,SAASiD,iBAAiB,YAAW,KAAK,OAAOvF,EAAEiC,KAAKC,GAAGjC,EAAED,EAAE,YAAY,IAAIA,KAAIiC,KAAKG,OAAOb,YAAYU,KAAKuE,kBAAkB,CAAC,gBAAAA,GAAmB,MAAMxG,EAAEiC,KAAKK,SAASwC,cAAc,uBAAuB9E,IAAIA,EAAEuF,iBAAiB,SAAQvF,GAAGA,EAAEyG,oBAAmBzG,EAAEuF,iBAAiB,SAAQvF,GAAGiC,KAAKyE,iBAAiB1G,KAAI,CAAC,UAAAsG,CAAWtG,GAAGA,EAAE2G,iBAAiB1E,KAAKiE,MAAMlG,EAAE0F,OAAO,CAAC,sBAAAF,CAAuBxF,EAAEf,GAAG,MAAMgB,EAAEhB,EAAEyG,OAAO,IAAI3G,EAAEkB,EAAE,YAAY,CAAC,GAAGgC,KAAKO,SAAS,CAAC,IAAIvD,EAAEF,EAAEkB,EAAE,aAAahB,GAAE,EAAGmC,EAAEnB,EAAE,YAAYgC,KAAKI,gBAAgBJ,KAAKI,gBAAgB6B,QAAOjF,GAAGA,EAAEqC,OAAOtB,EAAEsB,SAAQrC,GAAE,EAAGS,EAAEO,EAAE,YAAYgC,KAAKI,gBAAgB4B,KAAKjE,IAAIA,EAAEsB,KAAK6B,SAASlE,EAAEe,EAAEkD,WAAWC,SAASlE,CAAC,KAAK,CAACgD,KAAKK,SAASiB,iBAAiB,eAAesB,SAAQ7E,GAAGoB,EAAEpB,EAAE,cAAaN,EAAEO,EAAE,YAAYgC,KAAKI,gBAAgB,CAACrC,GAAG,IAAIf,EAAEgD,KAAKe,QAAQ4D,MAAK5G,GAAGA,EAAEkD,WAAWC,WAAUlE,IAAIA,EAAEqC,KAAK6B,UAAS,EAAGlE,EAAEiE,WAAWC,UAAS,GAAInD,EAAEsB,KAAK6B,UAAS,EAAGnD,EAAEkD,WAAWC,UAAS,CAAE,CAAClB,KAAKsC,uBAAuBtC,KAAK4E,kBAAkB5E,KAAK6E,mBAAmB,CAAC,CAAC,eAAAD,GAAkB,MAAM7G,EAAEiC,KAAKC,GAAGD,KAAKI,gBAAgBuC,OAAO,EAAE5E,EAAEH,MAAMoC,KAAKI,gBAAgB,GAAGf,KAAKzB,OAAOG,EAAEH,MAAM,GAAGG,EAAE+G,eAAe,GAAG9E,KAAKe,QAAQ6B,SAAQ5F,IAAI,IAAIgB,EAAEoD,MAAMC,KAAKtD,EAAEgD,SAAS4D,MAAK5G,GAAGA,EAAEgH,cAAc/H,EAAEqC,KAAKoC,OAAM,MAAMzD,IAAIA,EAAEoD,MAAMC,KAAKtD,EAAEgD,SAAS4D,MAAK5G,GAAGA,EAAEgH,cAAc/H,EAAEqC,KAAKzB,SAAQZ,EAAEiE,WAAWC,SAASlD,EAAEkD,UAAS,EAAGlD,EAAEkD,UAAS,CAAC,IAAInD,EAAEiH,oBAAoB,SAAShF,KAAKwD,QAAQzG,EAAEgB,GAAGA,EAAEuF,iBAAiB,SAAStD,KAAKwD,OAAO,CAAC,gBAAAM,GAAmB,GAAG9D,KAAKO,SAAS,CAAC,MAAMxC,EAAEiC,KAAKC,GAAGD,KAAKI,gBAAgBwC,SAAQ5F,IAAI,MAAMgB,EAAED,EAAE8E,cAAc,iBAAiB7F,EAAEqC,KAAKzB,WAAWI,IAAIA,EAAEkD,UAAS,EAAE,GAAG,MAAMlB,KAAKI,gBAAgBuC,OAAO,IAAI3C,KAAKC,GAAG6E,eAAe,GAAG/H,EAAEiD,KAAKC,GAAG,CAAC,YAAAyD,GAAe,GAAG1D,KAAKK,SAAS,CAAC,MAAMtC,EAAEjB,EAAEkD,KAAKK,SAAS,QAAQL,KAAKgE,sBAAsBhE,KAAKK,SAASjB,SAASY,KAAKX,KAAK,KAAKW,KAAKS,QAAO,GAAI1C,GAAGE,EAAE+B,KAAKK,SAAS,CAACpD,EAAE+C,KAAKC,GAAG,YAAYD,KAAK2D,UAAU3D,KAAK4D,QAAQ,CAAC,iBAAAiB,GAAoB7E,KAAKG,OAAOZ,oBAAoBS,KAAKgE,sBAAsBhE,KAAKI,gBAAgBwC,SAAQ7E,IAAIiC,KAAK+C,iBAAiBhF,EAAC,IAAI,CAAC,iBAAAqG,CAAkBrG,GAAGiC,KAAKK,SAASpB,SAASlB,EAAE0F,UAAUtE,EAAEa,KAAKK,SAAS,QAAQvB,EAAEkB,KAAKC,IAAI,CAAC,aAAAqE,CAAcvG,GAAG,MAAMf,EAAEgD,KAAKK,SAASwC,cAAc,UAAU7E,EAAElB,EAAEkD,KAAKK,SAAS,QAAQ,GAAG,KAAKtC,EAAEkH,QAAQhH,EAAED,EAAEhB,EAAEgD,KAAKK,eAAe,GAAG,KAAKtC,EAAEkH,QAAQ,CAAC,GAAGjH,EAAE,CAAC,MAAMD,EAAEiC,KAAKkF,UAAUlI,GAAGe,IAAIf,GAAGmC,EAAEnC,EAAE,SAASS,EAAEM,EAAE,SAAS,MAAME,EAAE+B,KAAKK,UAAUtC,EAAE2G,gBAAgB,MAAM,GAAG,KAAK3G,EAAEkH,QAAQ,CAAC,GAAGjH,EAAE,CAAC,MAAMD,EAAEiC,KAAKmF,UAAUnI,GAAGe,IAAIf,GAAGmC,EAAEnC,EAAE,SAASS,EAAEM,EAAE,SAAS,MAAME,EAAE+B,KAAKK,UAAUtC,EAAE2G,gBAAgB,MAAM,GAAG,KAAK3G,EAAEkH,SAASjH,EAAEC,EAAE+B,KAAKK,eAAe,GAAG,KAAKtC,EAAEkH,SAASjH,EAAE,OAAM,EAAG,MAAMjB,EAAEiD,KAAKK,SAASwC,cAAc,UAAU,OAAO9F,GAAGA,EAAEqI,eAAe,CAACC,MAAM,YAAW,CAAE,CAAC,SAAAH,CAAUnH,GAAG,IAAIf,EAAEe,EAAEA,EAAEsE,mBAAmBrC,KAAKK,SAASwC,cAAc,iBAAiB,KAAK7F,GAAG,CAAC,IAAIF,EAAEE,EAAE,aAAa,SAASA,EAAEkH,MAAMtC,QAAQ,OAAO5E,EAAEA,EAAEA,EAAEqF,kBAAkB,CAAC,OAAO,IAAI,CAAC,SAAA8C,CAAUpH,GAAG,IAAIf,EAAEe,EAAEA,EAAEuH,uBAAuBtF,KAAKK,SAASwC,cAAc,4BAA4B,KAAK7F,GAAG,CAAC,IAAIF,EAAEE,EAAE,aAAa,SAASA,EAAEkH,MAAMtC,QAAQ,OAAO5E,EAAEA,EAAEA,EAAEsI,sBAAsB,CAAC,OAAO,IAAI,CAAC,gBAAAb,CAAiB1G,GAAG,MAAMf,EAAEe,EAAE0F,OAAO7F,MAAM2H,cAAc,GAAG,KAAKvI,EAAEgD,KAAKe,QAAQ6B,SAAQ7E,GAAGA,EAAEgE,QAAQmC,MAAMtC,QAAQ,UAAS,GAAG9E,EAAEkD,KAAKK,SAAS,QAAQ,CAAC,MAAMtC,EAAE,IAAIyH,OAAOxI,GAAGgD,KAAKe,QAAQ6B,SAAQ5F,IAAIA,EAAE+E,QAAQmC,MAAMtC,QAAQ7D,EAAE0H,KAAKzI,EAAEqC,KAAKoC,KAAK8D,eAAe,GAAG,SAAQ,CAACvF,KAAKK,SAASiB,iBAAiB,UAAUsB,SAAQ7E,GAAGoB,EAAEpB,EAAE,WAAU,MAAMC,EAAEgC,KAAKkF,UAAU,MAAMlH,GAAGP,EAAEO,EAAE,QAAQ,CAAC,yBAAAmG,CAA0BpG,GAAG,YAAYA,GAAGN,EAAEuC,KAAKK,SAAS,WAAWlB,EAAEa,KAAKK,SAAS,WAAW5C,EAAEuC,KAAKK,SAAS,SAASlB,EAAEa,KAAKK,SAAS,WAAW,CAAC,mBAAA2D,GAAsB,MAAMhE,KAAKM,gBAAgBN,KAAKM,cAAclB,SAASY,KAAKM,cAAc,KAAK,CAAC,oBAAAoF,GAAuB,CAAC,gBAAA3C,CAAiBhF,GAAG,IAAIiC,KAAKO,UAAUxC,EAAEsB,KAAKmB,UAAU,IAAIzC,EAAEsB,KAAKzB,QAAQG,EAAEkD,WAAWC,SAAS,OAAO,GAAG,MAAMlB,KAAKM,cAAcN,KAAKM,cAAc4C,SAASC,cAAc,MAAMnD,KAAKM,cAActB,UAAUE,IAAI,yBAAyBc,KAAKC,GAAG0F,MAAM3F,KAAKM,oBAAoB,GAAG,MAAMN,KAAKM,cAAcuC,cAAc,gBAAgB9E,EAAEsB,KAAKzB,WAAW,OAAO,IAAIZ,EAAEkG,SAASC,cAAc,MAAMnG,EAAEgC,UAAUE,IAAI,oBAAoBlC,EAAE2E,QAAQ/D,MAAMG,EAAEsB,KAAKzB,MAAM,IAAII,EAAE,wJAAwJA,GAAG,+BAA+BD,EAAEsB,KAAKoC,cAAczE,EAAE8F,UAAU9E,EAAEgC,KAAKM,cAAc0C,YAAYhG,GAAGA,EAAEsE,iBAAiB,4BAA4BsB,SAAQ7E,GAAGA,EAAEuF,iBAAiB,QAAQtD,KAAK4F,oBAAoB1H,KAAK8B,QAAO,CAAC,mBAAA4F,CAAoB7H,GAAG,GAAG,MAAMiC,KAAKM,cAAc,OAAO,GAAG,MAAMvC,EAAE0F,SAAS1F,EAAEA,EAAE0F,QAAQ,MAAM1F,EAAE8H,UAAU9H,EAAE8H,QAAQ,4BAA4B,OAAO,IAAI7I,EAAEe,EAAE+H,QAAQ,uBAAuB9H,EAAEgC,KAAKe,QAAQ4D,MAAK5G,GAAGA,EAAEsB,KAAKzB,QAAQZ,EAAE2E,QAAQ/D,QAAOmE,QAAQ/D,GAAGA,EAAE6H,QAAQ,cAAc7H,EAAE+H,OAAO,EAAE,MAAM1H,EAAEuB,EAAE,SAASzB,EAAEJ,EAAEf,GAAG,OAAO,IAAI4C,EAAE7B,EAAEf,EAAE,CAAC,OAAOA,CAAE,EAAzqV,GAAjJa,EAAOC,QAAQd,G,GCC5EgJ,yBAA2B,CAAC,EAGhC,SAASpJ,oBAAoBqJ,GAE5B,IAAIC,EAAeF,yBAAyBC,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAapI,QAGrB,IAAID,EAASmI,yBAAyBC,GAAY,CAGjDnI,QAAS,CAAC,GAOX,OAHArB,oBAAoBwJ,GAAUpI,EAAQA,EAAOC,QAASlB,qBAG/CiB,EAAOC,OACf,C,4CCtBO,IAAIsI,EAEAC,EAAqB,SAAUC,GAEhB,oBAAb,UACLC,QAAQnH,SAGR8D,SAAS5B,iBAAiB,kCAAkCsB,SAAQ3C,IAChEuC,OAAOgE,QAAQC,YAAY,gBAAgB,EAAOxG,EAAGyG,GAAG,KAKhElE,OAAOU,SAASrE,cAAc,IAAIN,MAAM,mBAAoB,CACxDI,SAAS,EACTC,YAAY,KAIhBsE,SAAS5B,iBAAiB,qBAAqBsB,SAAQ3C,GAAIA,EAAGqD,iBAAiB,SAASqD,IACpF,IAAIC,EAAU3G,EAAG6F,QAAQ,mBAAmBjD,cAAc,mBACtDgE,EAAW5G,EAAG6F,QAAQ,mBAAmBjD,cAAc,cAC3D+D,EAAK1C,MAAM4C,WAAW,QACnBH,EAAGlD,OAAOoC,QAAQ,iBAClBgB,EAAM3C,MAAMtC,QAAQ,QACnBgF,EAAK1C,MAAMtC,QAAQ,SAEnBiF,EAAM3C,MAAMtC,QAAQ,OACpBgF,EAAK1C,MAAMtC,QAAQ,QACvB,MAIPsB,SAAS5B,iBAAiB,qCAAqCsB,SAAQ,SAASmE,GAChDZ,MAAtBY,EAAOC,aACZC,WAAW/I,KAAK6I,EAAQ,CAACzH,YAAY,GAE1C,IAEG,MAAMqH,EAAK,IAAIpI,MAAM,iBACxB+H,EAASzH,cAAc8H,EACxB,EAwBWO,EAAa,SAAUZ,GAC9B,GAAeH,MAAZG,EACC,OAGiB,GAAlBF,EAAQzD,QACP0D,EAAmBC,GAEvB,IAAIrG,EAAKmG,EAAQe,QAEjB,GAAShB,MAANlG,EAMH,GAAiB,UAAdA,EAAGuB,SAAyD,MAAlC0B,SAASkE,eAAenH,EAAGyG,IAAY,CAChE,IAAI1I,EAAIkF,SAASC,cAAc,UAEjB,IAAXlD,EAAGoH,KACFrJ,EAAEqJ,KAAO,kBAETrJ,EAAEqJ,KAAOpH,EAAGoH,KAGH,IAAVpH,EAAGqH,IACFtJ,EAAEsJ,IAAOrH,EAAGqH,IAEZtJ,EAAE8E,UAAY7C,EAAG6C,UAGrB9E,EAAE0I,GAAKzG,EAAGyG,GAEV,IACIxD,SAASqE,KAAKvE,YAAYhF,EAC9B,CAAC,MAAOwJ,GACJC,QAAQD,MAAMA,EAClB,CAEGpB,EAAQzD,OAAS,EACH,IAAV1C,EAAGqH,IACFtJ,EAAEsF,iBAAiB,OAAQ4D,EAAWhJ,KAAM,KAAMoI,IAElDY,EAAWZ,GAGF,IAAVrG,EAAGqH,IACFtJ,EAAEsF,iBAAiB,OAAQ+C,EAAmBnI,KAAM,KAAMoI,IAE1DD,EAAmBC,EAG/B,MAASF,EAAQzD,OAAS,EAEtBuE,EAAWZ,GAEXD,EAAmBC,QA7CnBD,EAAmBC,EA+C3B,ECtHO,SAASoB,EAAUjE,EAAQkE,EAAU,IAC3C,IAAIC,EAAWnE,EAAO9B,QAAQkG,UAC1BC,EAAQrE,EAAO9B,QAAQmG,KAC3B,MAAMC,EAAQ,IAAIC,IAAIxF,OAAOyF,UAGO,MAAjCxE,EAAOqC,QAAQ,gBAA0BrC,EAAOyE,WAAWlJ,UAAUC,SAAS,kBAEhF8I,EAAII,aAAaC,IAAI,WAAYR,GACjCG,EAAII,aAAaE,OAAO,eAExBN,EAAII,aAAaC,IAAI,aAAcR,GAGpB,IAAbD,GACFI,EAAII,aAAaC,IAAI,aAAcT,GAGpCnF,OAAO8F,QAAQC,UAAU,CAAC,EAAG,GAAIR,GAGhCvF,OAAOyF,SAASH,KADN,MAARA,EACqBA,EAEA,GAIH,KAAlBrE,EAAOjC,SACTgH,GAEF,CAEA,SAASA,EAAUC,EAAM,MACxB,IAAIC,EAAS,IAAIC,MAAM,IAAIC,gBAAgBpG,OAAOyF,SAASY,QAAS,CACnExL,IAAK,CAAC8K,EAAcW,IAASX,EAAa9K,IAAIyL,KAG3CC,EAAWL,EAAOM,SAClBC,EAAW,GAED,MAAXF,GAEF7F,SAAS5B,iBAAiB,oBAAoByH,oBAA0BnG,SAAQsG,IAE/E,GAAkC,MAA/BA,EAAUpD,QAAQ,UAAkB,CACtC,IAAIqD,EAASC,EAAWF,GACrBC,IACFF,EAAUE,EAEZ,KAIF,IAAIxB,EAAYe,EAAOW,WACP,MAAb1B,GAEFzE,SAAS5B,iBAAiB,oBAAoBqG,oBAA4B/E,SAAQsG,IACjFE,EAAWF,EAAU,GAGxB,CAEO,SAASE,EAAWE,GAK1B,IAAIC,EAQJ,GAVArG,SAAS5B,iBAAiB,cAAcsB,SAAQ3C,GAAIA,EAAGjB,UAAUI,OAAO,eAKvEmK,EAD8BpD,MAA5BmD,EAAU3H,QAAQ8B,OACdP,SAASL,cAAc,IAAIyG,EAAU3H,QAAQkG,WAE7CyB,EAAUxD,QAAQ,6BAA6BjD,cAAc,IAAIyG,EAAU3H,QAAQ8B,QAGhF,MAAP8F,EAAY,CAyBd,GAxBAA,EAAIvK,UAAUI,OAAO,UAEG,KAArBkK,EAAU9H,UAEZ8H,EAAUpB,WAAW5G,iBAAiB,yBAAyBgI,EAAU5C,OAAO9D,SAAQ4G,IAEvFA,EAAMxK,UAAUI,OAAO,UAGvB,IAAIqK,EAAWD,EAAM1D,QAAQ,6BAA6BjD,cAAc,IAAI2G,EAAM7H,QAAQ8B,QAC3E,MAAZgG,GACFhC,QAAQD,MAAM,0BACdC,QAAQD,MAAMgC,EAAM1D,QAAQ,8BAC5B2B,QAAQD,MAAM,IAAIgC,EAAM7H,QAAQ8B,SAEhCgG,EAASzK,UAAUE,IAAI,SACxB,IAIDoK,EAAUtK,UAAUE,IAAI,WAIrBsD,OAAOyF,SAASH,KAAM,CACzB,IAAIA,EAAStF,OAAOyF,SAASH,KAAK4B,QAAQ,IAAK,IAE3CC,EAAYJ,EAAI1G,cAAc,WAAWiF,OAE7B,MAAb6B,IACFA,EAAUvE,eAAe,CAACC,MAAO,WAGxB,MADEsE,EAAU7D,QAAQ,kBAE5B6D,EAAU7D,QAAQ,iBAAiB9G,UAAUE,IAAI,aAElDyK,EAAU3K,UAAUE,IAAI,aACxByK,EAAU1F,QAEZ,CAOA,MAJgC,oBAAvB,mBACR2F,kBAAkBC,gBAGZN,CACR,CACC,OAAO,CAET,CAcA,SAASO,EAAczC,GAYpB,IAaG0C,EArBM,WAAR1C,GAEFnE,SAASL,cAAc,QAAQqB,MAAM8F,SAAW,SAC/C9G,SAAS+G,KAAK/F,MAAMgG,IAAQ,MAG7B1H,OAAO2H,SAAS,EAAG,IAEdJ,EAAO7G,SAASL,cAAc,cAC9BqB,MAAMkG,UAAY,SACvBL,EAAK7F,MAAMgG,IAAQ,MACnBH,EAAK7F,MAAMmG,KAAS,IACpBN,EAAK7F,MAAMoG,MAAS,IACpBP,EAAK7F,MAAMqG,OAAU,IACrBR,EAAK7F,MAAMsG,SAAY,aAIvBtH,SAASL,cAAc,QAAQqB,MAAM8F,SAAW,GAChD9G,SAAS+G,KAAK/F,MAAMgG,IAAQ,IAExBH,EAAO7G,SAASL,cAAc,cAC7BqB,MAAMkG,UAAY,GACvBL,EAAK7F,MAAMgG,IAAQ,GACnBH,EAAK7F,MAAMmG,KAAS,GACpBN,EAAK7F,MAAMoG,MAAS,GACpBP,EAAK7F,MAAMqG,OAAU,GACrBR,EAAK7F,MAAMsG,SAAY,GAEzB,CCrJO,SAASC,EAAoBxK,GACnCmB,MAAMC,KAAKpB,EAAGc,SAAS6B,SAAQ,SAAS8H,GACvCA,EAAOnJ,iBAAkB,CAC1B,GACD,CDlCAkG,QAAQkD,IAAI,kBA0RZzH,SAASI,iBAAiB,oBAAmB,WAE5CJ,SAAS5B,iBAAiB,WAAWsB,SAAQgI,IAC1B,IAAfA,EAAE9H,WACJ8H,EAAExL,QACH,IAID8D,SAAS5B,iBAAiB,YAAYsB,SAAQ,SAAS0G,GAEpBnD,MAA/BmD,EAAU3H,QAAQkG,YACpByB,EAAU3H,QAAQkG,UAAYyB,EAAUvE,YAAY2E,QAAQ,IAAI,KAAKnE,cAEvE,IAGAiD,IAGAtF,SAAS5B,iBAAiB,qCAAqCsB,SAAQ,SAASmE,GACrDZ,MAAvBY,EAAOC,aACTC,WAAW/I,KAAK6I,EAAQ,CAACzH,YAAY,GAEvC,IDjHM,WACH,IAAIuL,GAAQ,EACZ,IAAU1L,EACV,OADUA,EAAy7D2L,UAAUC,WAAWD,UAAUE,QAAQxI,OAAOyI,OAAj+D,2TAA2TxF,KAAKtG,IAAI,0kDAA0kDsG,KAAKtG,EAAE+L,OAAO,EAAE,OAAKL,GAAQ,GACp7DA,CACX,CCgHI,GACF3H,SAAS5B,iBAAiB,gCAAgCsB,SAAQ3C,GAAIA,EAAGjB,UAAUE,IAAI,aAEvFgE,SAAS5B,iBAAiB,iCAAiCsB,SAAQ3C,GAAIA,EAAGjB,UAAUE,IAAI,YAzD1F,WACC,MAAMiM,EAAKC,KAAKC,IAAInI,SAASoI,gBAAgBC,aAAe,EAAG/I,OAAOgJ,YAAc,GAEpFtI,SAAS5B,iBAAiB,qCAAqCsB,SAAQ3C,IACtEA,EAAGiE,MAAMmG,KAAQ,OACjBpK,EAAGiI,WAAWpC,QAAQ,MAAM5B,MAAMmG,KAAO,OAG1BpK,EAAGiI,WAAWuD,wBAA+B,MAGhDxL,EAAGwL,wBAA+B,MAGxBN,GACrBlL,EAAGiE,MAAMoG,MAAQ,OACjBrK,EAAGiE,MAAMmG,KAAO,SAEhBpK,EAAGiE,MAAMwH,eAAe,QAIzBzL,EAAGiI,WAAWpC,QAAQ,MAAM5B,MAAMwH,eAAe,OAAO,GAE1D,CAmCEC,IAID,IAAIjD,EAAS,IAAIC,MAAM,IAAIC,gBAAgBpG,OAAOyF,SAASY,QAAS,CACnExL,IAAK,CAAC8K,EAAcW,IAASX,EAAa9K,IAAIyL,KAG/C,GAAqB,MAAlBJ,EAAOkD,QAAgB,CACzB,IAAIvE,EAAO,UAEO,MAAfqB,EAAOrB,OACTA,EAAOqB,EAAOrB,MDxMV,SAAwBuE,EAASC,EAAMC,GAAU,EAAOC,GAAM,EAAOC,EAAM,MACjF,GAAc7F,MAAXyF,EAAH,CAIA,GAAmB,oBAAV,KAAsB,CAC9B,IAAI7K,EAAU,CACb8K,KAAMA,EACNI,MAAOL,EAAQM,WAAWC,OAC1BC,mBAAoB,UACpBC,kBAAmB,WAmBpB,OAhBGN,IACFhL,EAA2B,mBAAI,GAGT,mBAAd,WACRA,EAAkB,SAAI,IAAMuL,YAG1BR,IACF/K,EAAe,MAAIiL,GAGmB,MAA9B9I,SAASqJ,oBACjBxL,EAAgB,OAAImC,SAASqJ,mBAGvBC,KAAKC,KAAK1L,EAClB,CACQ2L,MAAMd,EAAQO,OA5BtB,CA8BD,CCyKE,CAAezD,EAAOkD,QAASvE,EAChC,CACD,IAIA7E,OAAOc,iBAAiB,aAAa,SAASmF,GAC7C,IAAIhF,EAASgF,EAAMhF,OAGkB,MAAlCA,EAAOqC,QAAQ,kBACjB2C,EAAM/D,iBAC6D,QAAhEjB,EAAOqC,QAAQ,gBAAgB/G,aAAa,iBAC9C+K,EAAc,UAEdA,EAAc,YAM2B,MAA1C5G,SAASL,cAAc,iBAC+C,QAAtEK,SAASL,cAAc,gBAAgB9D,aAAa,kBACd,MAAtC0E,EAAOqC,QAAQ,qBACmC,MAAlDrC,EAAOqC,QAAQ,kCAEf5C,SAASL,cAAc,gCAAgC7D,UAAUI,OAAO,WACxE8D,SAASL,cAAc,gBAAgBQ,aAAa,gBAAiB,SACrEH,SAASL,cAAc,oBAAoB7D,UAAUI,OAAO,WAC5D0K,EAAc,WAIZrG,EAAOoC,QAAQ,cACjB4C,EAAM/D,iBAENgD,EAAUjE,GAGV2F,EAAW3F,IAIZ,IAAIkJ,EAAQzJ,SAASL,cAAc,uBACnC,GAAYsD,MAATwG,EAAmB,CACrB,IAAIC,EAAiBpK,OAAOgJ,WAAamB,EAAMpB,aAE9C9H,EAAOoC,QAAQ,mBAGb+G,EAAiB,GACjBnE,EAAMoE,QAAUF,EAAMpB,aAEJ,IAAnBqB,IAGoC,MAApCnJ,EAAOqC,QAAQ,mBACuB,MAAtCrC,EAAOqC,QAAQ,qBACG,OAAlBrC,EAAOjC,UAzLJ,WACN,IAAIsL,EAAS5J,SAAS5B,iBAAiB,uBACvC,GAAoB,GAAjBwL,EAAOnK,OAAY,CACrBmK,EAAOlK,SAAQ+J,IACdA,EAAM3N,UAAUE,IAAI,UACpByN,EAAMzI,MAAMwH,eAAe,WAE3B,MAAMjD,EAAQ,IAAIlK,MAAM,eACxBoO,EAAM9N,cAAc4J,EAAM,IAI3B,MAAMsE,EAAc7J,SAAS+G,KAAK/F,MAAMgG,IACxChH,SAAS+G,KAAK/F,MAAMsG,SAAY,GAChCtH,SAAS+G,KAAK/F,MAAMgG,IAAQ,GAC5B1H,OAAO2H,SAAS,GAA+B,EAA5B6C,SAASD,GAAW,MACvC,IAAIE,EAAY/J,SAASkE,eAAe,WAC7B,MAAR6F,IACFA,EAAK/I,MAAMgJ,OAAW,EAExB,CACD,CAyKGC,EAEF,CACD,IAIAjK,SAASI,iBAAiB,SAAS,SAASmF,GACL,WAAhCvF,SAASkK,cAAc/F,MACtBnE,SAASkK,cAAcC,MAE/B,IC9YA5F,QAAQkD,IAAI,sBAgCZ,IAAI2C,EAAkB,GAef,SAASC,EAAUC,EAAc3J,GAAM,IAd9C,SAA2B2J,GAEJ,oBAAb,SACRA,EAAalM,iBAAiB,mBAAmBsB,SAAQ3C,IACxD,IAAIwN,EAAKlH,QAAQlJ,IAAI4C,EAAGyG,IACf,MAAN+G,IACFH,EAAgBrN,EAAGyG,IAAM+G,EAAGC,SAC5BD,EAAGE,OACHF,EAAGrO,SACJ,GAGH,CAGCwO,CAAkBJ,GAGlB,IAAIK,EAAUL,EAAaD,WAAU,GAoCrC,OAjCAM,EAAQvM,iBAAiB,gBAAgBsB,SAAQvC,GAAYA,EAASjB,WAGtEoO,EAAalM,iBAAiB,mBAAmBsB,SAAQ3C,IAC3BkG,MAA1BmH,EAAgBrN,EAAGyG,KACrBH,QAAQuH,KAAKR,EAAgBrN,EAAGyG,IACjC,IAIE7C,GACFgK,EAAQvM,iBAAiB,yBAAyBsB,SAAQmL,IACxC,YAAdA,EAAM1G,MAAoC,SAAd0G,EAAM1G,KACpC0G,EAAMC,SAAU,EACM,UAAdD,EAAM1G,OACd0G,EAAMnQ,MAAQ,IAIE,cAAdmQ,EAAM1G,MAERoD,EAAoBsD,EACrB,IAIFF,EAAQvM,iBAAiB,UAAUsB,SAAQmE,IAE1C0D,EAAoB1D,GAEpBA,EAAOC,YAAcC,WAAW/I,KAAK6I,EAAO,CAACzH,YAAY,EAAMC,mBAAmB,GAAM,IAGlFsO,CACR,CAEO,SAASI,EAAcT,GAC7B,IAAIK,EAAUN,EAAUC,GAGxBK,EAAQvM,iBAAiB,iBAAiBsB,SAAQ,SAASsL,GAC1DA,EAAavM,QAAQwM,MAAQC,MAC9B,IAGAP,EAAQvM,iBAAiB,oBAAoBsB,SAAQ,SAASyL,GAC7DA,EAAWvL,UAAY,EACxB,IAGA,IAAI7E,EAAI,EAuBR,GAtBA4P,EAAQvM,iBAAiB,UAAUsB,SAAQmE,IAE1C,IAAIuH,EAAcd,EAAae,qBAAqB,UAAUtQ,GAAG6G,cAG/BqB,MAA/BY,EAAOhG,QAAQuN,KACjBvH,EAAOhG,QAAQuN,GAAapK,MAAMtC,QAAU,QAIpBuE,MAAtBY,EAAOC,aACTS,QAAQD,MAAMT,GACdA,EAAOC,YAAcC,WAAW/I,KAAK6I,EAAQ,CAACzH,YAAY,EAAMC,mBAAmB,MAEnFwH,EAAOC,YAAYxD,SACnBuD,EAAOyH,YAAYlN,iBAAiB,YAAYsB,SAAQ3C,GAAIA,EAAG8E,YAAc,sBAG9E9G,GAAG,IAIwC,MAAzCuP,EAAa3K,cAAc,YAA0D,MAApCgL,EAAQhL,cAAc,WAAmB,CAC3F,IAAI4L,EAAO,0EAGZjB,EAAa3K,cAAc,kBAAkBT,mBAAmB,YAAaqM,GAG7EZ,EAAQhL,cAAc,kBAAkBT,mBAAmB,YAAaqM,EACzE,CAGA,GAAGjB,EAAa3H,QAAQ,eAAe,CAEtC2H,EAAaxO,UAAUE,IAAI,UAG3B,IAAIwP,EAAYlB,EAAa1H,QAAQ,uBAAuBjD,cAAc,mBACtE8L,EAAYpB,EAAUmB,GAG1BA,EAAU1P,UAAUI,OAAO,UAG3BsP,EAAUxG,WAAW0G,aAAaD,EAAWD,EAAUF,YACxD,CAKA,OAFAhB,EAAatF,WAAW0G,aAAaf,EAASL,EAAagB,aAEpDX,CACR,CAEO,SAASgB,EAAaC,GAK5B,SAASC,EAAcC,EAAOb,GAId,IAAZa,EAAMtI,KACRsI,EAAMtI,GAAKsI,EAAMtI,GAAGgD,QAAQ,oBAAqByE,IAIjC,UAAda,EAAM3H,MAAyC,IAArB2H,EAAMjK,cAClCiK,EAAMjK,YAAgBiK,EAAMjK,YAAY2E,QAAQ,oBAAqByE,EAAQ,GAE7Ea,EAAMrN,QAAQ8B,OAASuL,EAAMrN,QAAQ8B,OAAOiG,QAAQ,oBAAqByE,IAI/C,MAAxBa,EAAMrN,QAAQsN,QAChBD,EAAMrN,QAAQsN,MAAQd,GAIvBa,EAAM1N,iBAAiB,+BAA+BsB,SAAQ3C,IAC7DA,EAAG8E,YAAc9E,EAAG8E,YAAY2E,QAAQ,oBAAqByE,EAAQ,EAAE,IASxEa,EAAM1N,iBAAiB,yBAAyBsB,SAAQmL,IAEnDA,EAAM/O,UAAUC,SAAS,wBAEb,IAAZ8O,EAAMrH,IAAwBP,MAAZ4H,EAAMrH,KAC1BqH,EAAMrH,GAAKqH,EAAMrH,GAAGgD,QAAQ,oBAAqByE,IAGjC,IAAdJ,EAAMmB,MAA4B/I,MAAd4H,EAAMmB,OAC5BnB,EAAMmB,KAAOnB,EAAMmB,KAAKxF,QAAQ,oBAAqByE,IAIrC,UAAdJ,EAAM1G,OACR0G,EAAMnQ,MAAQmQ,EAAMnQ,MAAM8L,QAAQ,oBAAqByE,IAEzD,GAEF,CArDAW,EAAQxN,iBAAiB,uBAAuBsB,QAAQmM,GAExDD,EAAQxN,iBAAiB,qBAAqBsB,QAAQmM,EAoDvD,CAEO,SAASI,EAAW1L,GAC1B,IAAI2L,EAAS3L,EAAOqC,QAAQ,cACxBoC,EAAckH,EAAKtJ,QAAQ,uBAC3BuJ,EAAenH,EAAW5G,iBAAiB,cAG/C,GAAG+N,EAAaA,EAAa1M,OAAO,IAAMyM,EAAK,CAC9C,IAAIE,EAAaF,EAAKvM,cAAc,QAGhC0M,EAAOH,EAAK9J,uBACgC,MAA7CiK,EAAK1M,cAAc,wBACrB0M,EAAK1M,cAAc,kBAAkBG,YAAYsM,EAEnD,CAGAF,EAAKhQ,SAGkD,GAApD8I,EAAW5G,iBAAiB,cAAcqB,QACxBuF,EAAWrF,cAAc,WAC/BzD,SAGfyP,EAAa3G,EACd,CA8LO,SAASsH,EAAiBC,EAAU7R,EAAO8R,EAAaC,EAAMC,EAAS,GAAIC,GAAW,GAC5F,GAAY1J,MAATvI,EACF,OAGD,IAAIsR,EAAQ,GACRzL,EAAU,GAEd,GAAGgM,aAAoB1P,QACtB0D,EAAUgM,EACVP,EAAQzL,EAAOyL,KAEdO,EADe,IAAbhM,EAAOiD,GACE,WAAWjD,EAAOyL,WAElB,QAAQzL,EAAOiD,UAGvB,CACJjD,EAAWkM,EAAK9M,cAAc4M,GAE9B,IACCP,EAAQzL,EAAOyL,IAChB,CAAC,MACAzH,QAAQkD,IAAIlH,EACb,CACD,CAEA,IAAIqM,EC3YE,SAAuBC,EAASJ,EAAMK,GAAc,EAAMC,EAAa,KAAMC,GAAU,GAE7F,IAAIjQ,EAAO,GACPiP,EAAQ,GACRtR,EAAU,GACV6R,EAAW,GAwBf,OArBGM,aAAmBhQ,SACrBE,EAAO8P,EAEU,SAAd9P,EAAGuB,SAAoC,YAAdvB,EAAGuB,SAAuC,UAAdvB,EAAGuB,SAA8D,MAAvCvB,EAAG6F,QAAQ,2BAC5F7F,EAAKA,EAAG4C,cAAc,4BAEd,MAAN5C,IACFA,EAAO8P,GAERb,EAAQjP,EAAGiP,MAEHa,EAAQI,MAAM,WACtBV,EAAW,QAAQM,KACnB9P,EAAO0P,EAAK9M,cAAc4M,GAC1BP,EAAQjP,EAAGiP,OAEXA,EAAQa,EACRN,EAAW,UAAUP,QACrBjP,EAAO0P,EAAK9M,cAAc4M,IAGlB,MAANxP,GACFwH,QAAQ2I,QACR3I,QAAQkD,IAAI,iCAAiCuE,GAEtCtR,IAGM,SAAXqC,EAAGoH,KACLzJ,EAzGF,SAAuB+R,EAAMF,GAC5B,IAAIxP,EAAK0P,EAAK9M,cAAc,GAAG4M,aAG/B,OAAS,MAANxP,EAEK,GAGDA,EAAGrC,KACX,CA+FUyS,CAAcV,EAAMF,GACT,YAAXxP,EAAGoH,KACXzJ,EA/FF,SAA0B+R,EAAMF,EAAUQ,EAAcF,GACvD,IAAInS,EAAS,GACT0S,EAAW,GAGf,MAAmB,YAAhBP,EAAQ1I,MAAsC,MAAhB4I,EAC7BF,EAAQ/B,QACH+B,EAAQnS,MAGT,IAIW,MAAhBqS,GACFK,EAAWX,EAAK9M,cAAc,GAAG4M,YAAmBQ,iBACrC,MAAZK,IACF1S,EAAQqS,KAITK,EAAWX,EAAKrO,iBAAiB,GAAGmO,aACpC7R,EAAS,GACT0S,EAAS1N,SAAQ3C,IAChBrC,EAAMoE,KAAK/B,EAAGrC,MAAM,KAQfA,EACR,CA8DU2S,CAAiBZ,EAAMF,EAAUQ,EAAcF,GACR,MAAvC9P,EAAG6F,QAAQ,0BAAwDK,MAApBlG,EAAG0B,QAAQ/D,MAElEA,EAAQqC,EAAG0B,QAAQ/D,MACA,MAAXqC,EAAGuQ,MAA4B,IAAZvQ,EAAGrC,OAAeoS,EAC7CpS,EAzDK,SAA0BqC,GAChC,IAAIrC,EAAS,GACT6S,EAAaxQ,EAAGuQ,KAAK3N,cAAc,WAAW5C,EAAGrC,aAQrD,OALCA,EADe,MAAb6S,EACOxQ,EAAGrC,MAEJ6S,EAAU9O,QAAQ/D,MAGpBA,CACR,CA8CW8S,CAAiBzQ,GACPkG,MAAXlG,EAAGiP,MAAqBjP,EAAGiP,KAAKyB,SAAS,MACjD/S,EAnEF,SAAuB+R,EAAM1P,GAC5B,IAAIrC,EAAQ,GAIZ,OAFA+R,EAAKrO,iBAAiB,UAAUrB,EAAGiP,UAAUtM,SAAQgO,GAAQhT,EAAMoE,KAAK4O,EAAKhT,SAEtEA,CACR,CA6DWiT,CAAclB,EAAM1P,GACT,MAAZA,EAAGrC,OAA6B,aAAZqC,EAAGrC,QAC/BA,EAAQqC,EAAGrC,OAGTsS,EACKtS,EAAM2H,cAEP3H,EACR,CDoVgBkT,CAAcrN,EAAQkM,GAAM,EAAO/R,GAElD,GAAGkS,GAAYlS,EACd,OAID,GAAa,MAAV6F,EAAe,CACjB,IAAIsN,EAAWpB,EAAKrO,iBAAiB,sBAAsB4N,SAC3D,GAAsB,IAAnB6B,EAAQpO,OACV,OAC0B,GAAlBoO,EAAQpO,QAChBc,EAASsN,EAAQ,GACjBA,EAAU,KAEVtN,EAASsN,EAAQ,GAEjBA,EAAQnO,SAAQ,CAAC3C,EAAIkO,KACR,GAATA,EACFqB,EAAiBvP,EAAI,GAAI,GAAI0P,GAE7BR,EAAWlP,EACZ,IAGH,CAGA,GAAe,IAAZ2P,EAEF,GAAI,oBAAoBnK,KAAK7H,GAAO,CACnC,IAAIoT,EAAO,IAAIC,KAAKrT,GACpBoT,EAAKE,QAAQF,EAAKG,UAAYnE,SAAS4C,IACvChS,EAAQoT,EAAKI,cAAcC,MAAM,KAAK,EACvC,MACCzT,GAAgBoP,SAAS4C,GAI3B,GAAkB,SAAfnM,EAAO4D,MAAkC,YAAf5D,EAAO4D,KAEnC,GAAY,IAATzJ,EACa,IAAZ6R,GACFE,EAAKrO,iBAAiBmO,GAAU7M,SAAQ3C,GAAIA,EAAG+N,SAAQ,SAIxD,GAAGvK,EAAO7F,MAAM2H,eAAiB3H,EAAM2H,cACtC9B,EAAOuK,SAAU,MACb,CAEJ,IAAI+C,EAAUpB,EAAKrO,iBAAiB,UAAU4N,SAC9C,IAAK,MAAMnN,KAAWgP,EAClBhP,EAAQnE,MAAM2H,eAAiB3H,EAAM2H,gBACvCxD,EAAQiM,SAAU,EAGrB,MAGI,GAAkB,QAAfvK,EAAO4D,MAIf,GAHA5D,EAAO7F,MAAQA,GAGV,oBAAoB6H,KAAK7H,GAAO,CACpC,IAAI0T,EAAW,GAOf,GAN8B,GAA3B1T,EAAMyT,MAAM,KAAK1O,OACnB2O,EAAW1T,EAAMyT,MAAM,KACY,GAA3BzT,EAAMyT,MAAM,KAAK1O,SACzB2O,EAAW1T,EAAMyT,MAAM,MAGT,IAAZC,EAAe,CACjB,IAAIC,EACAC,EACAC,EACJH,EAAS1O,SAAQ8O,IACA,GAAbA,EAAG/O,OACL4O,EAAOG,EACc,GAAbA,EAAG/O,SACR+O,EAAK,GACPD,EAAMC,EAGMvL,MAATqL,EACFA,EAAQE,EAERD,EAAMC,EAGT,IAGSvL,MAAPsL,GAA6BtL,MAATqL,GAA8BrL,MAARoL,IAC5C9N,EAAO7F,MAAQ,GAAG2T,KAAQC,KAASC,IAErC,CACD,OACK,GAAkB,MAAfhO,EAAO+M,KAAa,CAC5B,IAAImB,EAAiBlO,EAAO+M,KAAK3N,cAAc,gBAAgBjF,SAG/D,GAAqB,MAAlB+T,EAEF,GAAmC,MAAhClO,EAAOqC,QAAQ,cAAsB,CAIvC,IAAIkJ,EAFJvL,EAAOqC,QAAQ,uBAAuBxE,iBAAiB,cAAcsB,SAAQ3C,GAAIA,EAAGjB,UAAUE,IAAI,kBAGlGyS,EAAe/T,MAAMyT,MAAM,KAAKzO,SAAQgP,IACvC5C,EAAQf,EAAcxK,EAAOqC,QAAQ,eAErCkJ,EAAMhQ,UAAUI,OAAO,gBAEvBoQ,EAAiBR,EAAMnM,cAAcY,EAAOjC,SAAUoQ,EAAK,GAAIjC,EAAM,IAAI,EAAK,IAG/Ed,EAAapL,EAAOqC,QAAQ,wBAG5BrC,EAAOqC,QAAQ,uBAAuBxE,iBAAiB,iBAAiBsB,SAAQ3C,GAAIA,EAAGb,UACxF,MACCqE,EAAO7F,MAAQ+T,EAAe/T,WAI/B6F,EAAO7F,MADCiS,EACOjS,EAGA,EAEjB,MACC6F,EAAO7F,MAAQA,EAIhB,IAAIiU,EAAM,IAAItT,MAAM,SAEpBkF,EAAO5E,cAAcgT,GAGI,mBAAfnC,GACTA,EAAYjM,EAEd,CAuGAqO,eAAeC,EAAsBtO,GACpC,IAAIqL,EAAWrL,EAAOqC,QAAQ,uBAC1BkM,EAAUvO,EAAOwO,UAEjBC,EAAY,IAAIC,SAChBC,EAAUtD,EAAQjM,cAAc,8BAA8BlB,QAAQ0Q,OACtEC,EAAcxD,EAAQjM,cAAc,8BAA8BlB,QAAQ4Q,YAE9EL,EAASM,OAAO,SAAUJ,GAC1BF,EAASM,OAAO,eAAgBF,GAEhC,MAAMvK,EAAQ,IAAIC,IAAIxF,OAAOyF,UAC1BF,EAAII,aAAa9K,IAAI,YACvB6U,EAASM,OAAO,WAAW,GAGzBzK,EAAII,aAAa9K,IAAI,QACvB6U,EAASM,OAAO,OAAO,GAGrBzK,EAAII,aAAa9K,IAAI,aACvB6U,EAASM,OAAO,YAAY,GAG7B,IAAIC,EAASC,KAAKC,WAAWlP,GAAQ,EAAO,8BAC5CqL,EAAQhM,UAAY2P,EAAOR,UAE3B,IAAIW,QAAiBC,WAAWC,aAAa,0BAA2BZ,GAErEU,EACF9D,EAAQhM,UAAY8P,EAEpBH,EAAOR,UAAYD,CAErB,CEjuBA,SAASe,EAAatK,GACfA,EAAMhF,OAAOuK,QACZ9K,SAAS5B,iBAAiB,8BAA8BsB,SAAQ3C,GAAIA,EAAGiE,MAAMtC,QAAa,UAE1FsB,SAAS5B,iBAAiB,8BAA8BsB,SAAQ3C,GAAIA,EAAGiE,MAAMtC,QAAa,QAElG,CFwvBAY,OAAOc,iBAAiB,UAAU,WACjCJ,SAAS5B,iBAAiB,gBAAgBsB,SAAQoQ,IACjDA,EAAIxS,UAAW,EACfwS,EAAI1R,iBAAiB,YAAYsB,SAAQ3C,GAAIA,EAAGb,UAAS,GAE3D,IAGAoD,OAAOc,iBAAiB,WAAW,WAClCJ,SAAS5B,iBAAiB,gBAAgBsB,SAAQoQ,IACjDA,EAAIxS,UAAW,EACoB,MAAhCwS,EAAInQ,cAAc,aACpBmQ,EAAIlQ,UAAY,uBAAuBkQ,EAAIlQ,UAAU,UAEtDkQ,EAAIlQ,WAAa,+CAEnB,IAEAI,SAASI,iBAAiB,SAAS,SAASmF,GAC3C,IAAIhF,EAASgF,EAAMhF,OAGnB,GAAGA,EAAOoC,QAAQ,QAAQ,CACzB,IAAIoN,EAAUxP,EAAOqC,QAAQ,cAEzB+H,EAAUI,EAAcgF,GAG5BpE,EAAapL,EAAOqC,QAAQ,wBAG5B+H,EAAQvM,iBAAiB,mBAAmBsB,SAAQ,CAAC3C,EAAIkO,KAExD,IAAIV,EAAKlH,QAAQlJ,IAAI4V,EAAQ3R,iBAAiB,mBAAmB6M,GAAOzH,IACxE,GAAS,MAAN+G,EAAW,CACb,IAAIC,EAAWD,EAAGC,SAGlB,IAAK,MAAMwF,KAAOxF,EACjBjG,QAAQkD,IAAI,GAAGuI,MAAQxF,EAASwF,MAEJ,iBAAlBxF,EAASwF,KAClBxF,EAASwF,GAAOxF,EAASwF,GAAKxJ,QAC7B,eACA,CAACyG,EAAOgD,EAAQzB,IAERyB,GADWnG,SAAS0E,GAAM,MAOrCnL,QAAQuH,KAAKJ,EAEd,KAGDjK,EAAOrE,QACR,CAGGqE,EAAOoC,QAAQ,YAEjBsJ,EAAW1L,GAGTA,EAAOoC,QAAQ,4CACjB4C,EAAMjE,kBAl0BRsN,eAA6BrO,GAC5B,IAAIkM,EAAQlM,EAAOqC,QAAQ,QAG3B6J,EAAKrO,iBAAiB,6FAA6FsB,SAAQ3C,IAEtF,MAAjCA,EAAG6F,QAAQ,oBAA0C,QAAX7F,EAAGoH,MAA6F,MAA3EpH,EAAG6F,QAAQ,qBAAqBjD,cAAc,4BAC/G5C,EAAGmT,UAAW,EACf,IAGD,IAAIR,QAAiBC,WAAWQ,WAAW5P,EAAQ,yBAEhDmP,IACFnP,EAAOqC,QAAQ,mBAAmBjD,cAAc,cAAc7D,UAAUE,IAAI,UAE5EwT,KAAKY,eAAeV,GAEK,QAAtBjD,EAAKhO,QAAQ4R,OACfV,WAAWW,UAAU7D,GAGxB,CA8yBE8D,CAAchQ,KAGZA,EAAOoC,QAAQ,wBAA0BpC,EAAOoC,QAAQ,8BAnL5DiM,eAAiCrO,GAChC,IAII2O,EAJAtD,EAAUrL,EAAOqC,QAAQ,qBACzBkM,EAASvO,EAAOwO,UAEhBC,EAAW,IAAIC,SAGnB,MAAMpK,EAAQ,IAAIC,IAAIxF,OAAOyF,UAC1BxE,EAAOoC,QAAQ,wBACjBqM,EAASM,OAAO,eAAe,GAC/BzK,EAAII,aAAaC,IAAI,eAAe,GAEpCgK,EAAStD,EAAQjM,cAAc,yBAAyBlB,QAAQ0Q,SAEhEtK,EAAII,aAAaE,OAAO,eACxB+J,EAAStD,EAAQjM,cAAc,mBAAmBjF,OAEnD4E,OAAO8F,QAAQC,UAAU,CAAC,EAAG,GAAIR,GAEjCmK,EAASM,OAAO,SAAUJ,GAE1B,IAAIK,EAASC,KAAKC,WAAWlP,GAAQ,EAAO,sBAC5CqL,EAAQhM,UAAY2P,EAAOR,UAE3B,IAAIW,QAAiBC,WAAWC,aAAa,qBAAsBZ,GAEhEU,GACF9D,EAAQhM,UAAY8P,EAASnE,KFzoBL,SAAUmE,EAAUtM,GAC1CF,EAAc,GACd,IAAIsN,EAAUxQ,SAASC,cAAc,OAGrCuQ,EAAK5Q,UAAa8P,EAASnE,KAC3BrI,EAAUhF,MAAM9D,UAAUqW,MAAMnW,KAAKkW,EAAKnF,qBAAqB,WAE5DqE,EAASgB,KACRF,EAAK5Q,UAAa8P,EAASgB,GAC3BxN,EAAU,IAAIsN,EAAKG,UAAUC,OAAO1N,GACpCc,EAAWZ,IAGZsM,EAASmB,MACRL,EAAK5Q,UAAY8P,EAASmB,IAC1B,IAAIL,EAAKG,UAAUjR,SAAQ3C,IACvBiD,SAASqE,KAAKvE,YAAY/C,EAAG,IAGzC,CEunBE+T,CAAUpB,EAAU1P,WAWpBuP,EAAOR,UAAYD,CAErB,CA0IEiC,CAAkBxQ,IAGhBA,EAAOoC,QAAQ,yBAA2BpC,EAAOoC,QAAQ,0BAvG7DiM,eAAqCrO,GACpC,MAAMsE,EAAQ,IAAIC,IAAIxF,OAAOyF,UAC1BxE,EAAOoC,QAAQ,wBACjBkC,EAAII,aAAaC,IAAI,YAAY,GAEjCL,EAAII,aAAaE,OAAO,YAEzB7F,OAAO8F,QAAQC,UAAU,CAAC,EAAG,GAAIR,GAEjCgK,EAAsBtO,EACvB,CA8FEyQ,CAAsBzQ,IAGpBA,EAAOoC,QAAQ,wBAA0BpC,EAAOoC,QAAQ,wBA/F5DiM,eAA6BrO,GAC5B,MAAMsE,EAAQ,IAAIC,IAAIxF,OAAOyF,UAC1BxE,EAAOoC,QAAQ,uBACjBkC,EAAII,aAAaC,IAAI,WAAW,GAChCL,EAAII,aAAaE,OAAO,OAAO,KAE/BN,EAAII,aAAaC,IAAI,OAAO,GAC5BL,EAAII,aAAaE,OAAO,YAEzB7F,OAAO8F,QAAQC,UAAU,CAAC,EAAG,GAAIR,GAEjCgK,EAAsBtO,EACvB,CAoFE0Q,CAAc1Q,EAEhB,IAEAP,SAASI,iBAAiB,UAAUqD,IAEnC,GAAGA,EAAGlD,OAAOoC,QAAQ,gBAAkBc,EAAGlD,OAAOyL,KAAK1Q,SAAS,KAAK,CACnE,IAAIyB,EAAM0G,EAAGlD,OAAO+M,KAAK3N,cAAc,WAAW8D,EAAGlD,OAAO7F,aAE5D,GAAS,MAANqC,EAAW,CAEb,IAAIrC,EAAQqC,EAAG0B,QAAQ/D,MAEXuI,MAATvI,GAEF4R,EAAiB7I,EAAGlD,OAAQ7F,EAAO,GAAI+I,EAAGlD,OAAOqC,QAAQ,QAE3D,CACD,K,yBEn2BD2B,QAAQkD,IAAI,mBAWZzH,SAASI,iBAAiB,oBAAoB,WAC7CJ,SAAS5B,iBAAiB,mBAAmBsB,SAAQ3C,GAAIA,EAAGqD,iBAAiB,SAAUyP,KAGvF7P,SAAS5B,iBAAiB,qCAAqCsB,SAAQ,SAASmE,GAC/CZ,MAAvBY,EAAOC,cACZD,EAAOC,YAAcC,WAAW/I,KAAK6I,EAAO,CAACzH,YAAY,EAAMC,mBAAmB,IAEvF,GACD,IAEAiD,OAAOc,iBAAiB,SAASwO,UAChC,IAAIrO,EAASgF,EAAMhF,OAGhB,GAAGA,EAAOoC,QAAQ,QAAQ,CACtB,IAAIgI,EAAUI,EAAcxK,EAAOqC,QAAQ,eAE3C+I,EAAapL,EAAOqC,QAAQ,wBAG5B+H,EAAQvM,iBAAiB,mBAAmBsB,SAAQ3C,IAChDuC,OAAOgE,QAAQC,YAAY,gBAAe,EAAOxG,EAAGyG,GAAG,IAG3DjD,EAAOrE,QACX,CAQA,GALGqE,EAAOoC,QAAQ,YAEdsJ,EAAW1L,GAGZA,EAAOzE,UAAUC,SAAS,sBAAwBwE,EAAOzE,UAAUC,SAAS,gBAAgB,CAC3FwJ,EAAM/D,iBAEN,IAAI9G,EAAQ,GAQZ,GAPG6F,EAAOzE,UAAUC,SAAS,gBACzBrB,EAAQ6F,EAAOsB,YACM,IAAhBtB,EAAO7F,QACZA,EAAQ6F,EAAO7F,MACf6F,EAAOqB,cAAgB,KAGf,IAATlH,EAAY,CACX,IAAImD,EAAU,CACV8K,KAAM,UACNI,MAAO,UAAUrO,EACjBwW,mBAAmB,EACnBpI,MAAO,MAGsB,MAA9B9I,SAASqJ,oBACRxL,EAAgB,OAAImC,SAASqJ,mBAGjCC,KAAKC,KAAK1L,GACV+J,UAAUuJ,UAAUC,UAAU1W,EAClC,CACJ,CAEA,GAAG6F,EAAOoC,QAAQ,YACpB4C,EAAM/D,iBAENgD,EAAUjE,GAGV2F,EAAW3F,QACN,GAAGA,EAAOoC,QAAQ,gBAAgB,EHgGlC,SAAmB8G,GAKzB,GAJoB,iBAAX,IACRA,EAAQzJ,SAASkE,eAAeuF,EAAQ,WAG7B,MAATA,EAAc,CAEhBzJ,SAAS+G,KAAK/F,MAAMgG,IAAQ,IAAI1H,OAAOuK,YACvC7J,SAAS+G,KAAK/F,MAAMsG,SAAY,QAChC,IAAIyC,EAAY/J,SAASkE,eAAe,WAC7B,MAAR6F,IACFA,EAAK/I,MAAMgJ,OAAW,OAGvBP,EAAM3N,UAAUI,OAAO,UAEvBuN,EAAMzI,MAAMtC,QAAU,OACvB,CACD,CGjHQ2S,CAAU,WAEV,IAAIrC,EAAc,IAAIC,SACtBD,EAASM,OAAO,cAAe/O,EAAO9B,QAAQuN,MAE9C,IAAI0D,QC0ELd,eAA4B/J,EAAKmK,EAAS,GAAIsC,GAAW,GAM/D,IAAIrL,EALW,IAAZ+I,IACFA,EAAW,IAAIC,UAGhBD,EAASM,OAAO,WAAYiC,IAAIC,WAEhC,IACCvL,QAAewL,MACd,GAAGF,IAAIG,kBAAkBH,IAAII,iBAAiB9M,IAC9C,CACC+M,OAAQ,OACRC,YAAa,cACb9K,KAAMiI,GAGT,CAAC,MAAM1K,GACNC,QAAQD,MAAMA,EACf,CAEA,IAAIoL,QAAiBzJ,EAAO1H,OAC5B,IACC,IAAIuT,EAAQC,KAAKC,MAAMtC,GAEvB,OAAGzJ,EAAOgM,GACFH,EACc,6BAAbA,EAAKI,MACb1C,KAAKY,eAAe,yCAA0C,UACvD,IAEP7L,QAAQD,MAAMwN,GACE,MAAbA,EAAK3V,MAAoC,KAApB2V,EAAK3V,KAAKgW,OACjC3C,KAAKY,eAAe0B,EAAKpJ,SAEzB8G,KAAKY,eAAe0B,EAAKpJ,QAAQ,KAAKqJ,KAAKK,UAAUN,EAAK3V,MAAO,UAE3D,EAET,CAAC,MAAMmI,GAKN,GAJAC,QAAQD,MAAMA,GACdC,QAAQD,MAAM2B,GACd1B,QAAQD,MAAMoL,GAEXzJ,EAAOgM,GACNX,GACF9B,KAAKY,eAAe,2DAA4D,SAEjF7L,QAAQD,MAAM,GAAGiN,IAAIG,kBAAkBH,IAAII,iBAAiB9M,KAC5DN,QAAQD,MAAMoL,OACV,CACJ,IAAIjG,EAAQ,iFACXA,GAAS,qEACRA,GAAS,qCACTA,GAASiG,EACVjG,GAAS,SACVA,GAAS,SAETzJ,SAASL,cAAc,QAAQT,mBAAmB,aAAcuK,GAChE+F,KAAKY,eAAe,qBAAqBmB,IAAIG,kBAAkBH,IAAII,iBAAiB9M,sNAAwN6K,UAAkB,QAC/T,CAEA,OAAO,CACR,CACD,CDzIgCE,CAAa,gBAAiBZ,GAEtDhP,SAASL,cAAc,qCAAqC7D,UAAUE,IAAI,UAE1EgE,SAASL,cAAc,2BAA2BC,UAAc8P,EAChE1P,SAASL,cAAc,2BAA2B7D,UAAUI,OAAO,SACvE,KAGJ8D,SAAS5B,iBAAiB,kBAAkBsB,SAAQ3C,GAAIA,EAAGqD,iBAAiB,eAAeqD,IACvFA,EAAGlD,OAAOZ,cAAc,sBAAsB7D,UAAUI,OAAO,UAC/DuH,EAAGlD,OAAOZ,cAAc,YAAY7D,UAAUE,IAAI,SAAS,K","sources":["webpack://admin/../../../js/nice-select2.js","webpack://admin/../../../js/node_modules/nice-select2/dist/js/nice-select2.js","webpack://admin/webpack/bootstrap","webpack://admin/../../../js/imports.js","webpack://admin/../../../js/main.js","webpack://admin/../../../../../../sim-modules/forms/js/forms.js","webpack://admin/../../../js/field_value.js","webpack://admin/./admin.js","webpack://admin/../../../js/form_submit_functions.js"],"sourcesContent":["!function(l,c){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=c():\"function\"==typeof define&&define.amd?define([],c):\"object\"==typeof exports?exports.NiceSelect=c():l.NiceSelect=c()}(self,()=>(()=>{\"use strict\";var __webpack_modules__={462:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   bind: () => (/* binding */ bind),\\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n\\r\\n\\r\\nconst triggerEvent      = (el, type, init = {}) => {\\r\\n  let EventConstructor;\\r\\n  if (type === \"click\") {\\r\\n    EventConstructor = MouseEvent;\\r\\n  } else if (type === \"change\") {\\r\\n    EventConstructor = Event;\\r\\n  } else if (type.includes(\"focus\")) {\\r\\n    EventConstructor = FocusEvent;\\r\\n  } else {\\r\\n    EventConstructor = UIEvent;\\r\\n  }\\r\\n  const event = new EventConstructor(type, {\\r\\n    bubbles: true,\\r\\n    cancelable: false,\\r\\n    ...init,\\r\\n  });\\r\\n  el.dispatchEvent(event);\\r\\n};\\r\\n\\r\\nconst triggerClick      = (el) => triggerEvent(el, \"click\");\\r\\nconst triggerChange     = (el) => triggerEvent(el, \"change\");\\r\\nconst triggerFocusIn    = (el) => triggerEvent(el, \"focusin\");\\r\\nconst triggerFocusOut   = (el) => triggerEvent(el, \"focusout\");\\r\\nconst triggerModalOpen  = (el) => triggerEvent(el, \"modalopen\");\\r\\nconst triggerModalClose = (el) => triggerEvent(el, \"modalclose\");\\r\\n\\r\\nconst attr              = (el, key) => el[key] !== undefined ? el[key] : el.getAttribute(key);\\r\\nconst data              = (el, key) => el.getAttribute(\"data-\" + key);\\r\\nconst hasClass          = (el, className) => el?.classList.contains(className);\\r\\nconst addClass          = (el, className) => el?.classList.add(className);\\r\\nconst removeClass       = (el, className) => el?.classList.remove(className);\\r\\n\\r\\nconst defaultOptions = {\\r\\n  data: null,\\r\\n  searchable: true,\\r\\n  showSelectedItems: true,\\r\\n  placeholder: \"Select an option\",\\r\\n  searchtext: \"Search\",\\r\\n  selectedtext: \"selected\",\\r\\n};\\r\\n\\r\\nclass NiceSelect {\\r\\n  constructor(element, options = {}) {\\r\\n    if (!element) {\\r\\n      throw new Error(\\'No element provided to NiceSelect\\');\\r\\n    }\\r\\n\\r\\n    if (!(element instanceof Element)) {\\r\\n      throw new Error(\\'Invalid element provided to NiceSelect - must be a valid DOM element\\');\\r\\n    }\\r\\n\\r\\n    this.el               = element;\\r\\n    this.config           = { ...defaultOptions, ...options };\\r\\n    this.data             = this.config.data;\\r\\n    this.selectedOptions  = [];\\r\\n    this.placeholder      = attr(this.el, \"placeholder\") || this.config.placeholder;\\r\\n    this.searchtext       = attr(this.el, \"searchtext\") || this.config.searchtext;\\r\\n    this.selectedtext     = attr(this.el, \"selectedtext\") || this.config.selectedtext;\\r\\n    this.dropdown         = null;\\r\\n    this.selectionList    = null;\\r\\n    this.multiple         = attr(this.el, \"multiple\");\\r\\n    this.disabled         = attr(this.el, \"disabled\");\\r\\n    this.create();\\r\\n  }\\r\\n\\r\\n  create() {\\r\\n    /* Object.assign(this.el.style, {\\r\\n      opacity: \"0\",\\r\\n      width: \"0\",\\r\\n      padding: \"0\",\\r\\n      height: \"0\",\\r\\n      fontSize: \"0\",\\r\\n      minHeight: \"auto\",\\r\\n    }); */\\r\\n\\r\\n    this.data ? this.processData(this.data) : this.extractData();\\r\\n    this.renderDropdown();\\r\\n    this.bindEvent();\\r\\n  }\\r\\n\\r\\n  processData(data) {\\r\\n    this.options = data.map((item) => ({\\r\\n      data: item,\\r\\n      attributes: {\\r\\n        selected: !!item.selected,\\r\\n        disabled: !!item.disabled,\\r\\n        optgroup: item.value === \"optgroup\",\\r\\n      },\\r\\n    }));\\r\\n  }\\r\\n\\r\\n  extractData() {\\r\\n    const options = Array.from(this.el.querySelectorAll(\"option,optgroup\"));\\r\\n    const allOptions = [];\\r\\n    const selectedOptions = [];\\r\\n\\r\\n    this.data = options.map((item) => {\\r\\n      let itemData;\\r\\n\\r\\n      if (item.tagName === \"OPTGROUP\") {\\r\\n        itemData = { text: item.label, value: \"optgroup\" };\\r\\n      } else {\\r\\n        const text = item.dataset.display ?? item.innerText;\\r\\n        itemData = {\\r\\n          text,\\r\\n          value: item.value,\\r\\n          extra: item.dataset.extra,\\r\\n          selected: item.hasAttribute(\"selected\"),\\r\\n          disabled: item.hasAttribute(\"disabled\"),\\r\\n        };\\r\\n      }\\r\\n\\r\\n      const attributes = {\\r\\n        selected: item.hasAttribute(\"selected\"),\\r\\n        disabled: item.hasAttribute(\"disabled\"),\\r\\n        optgroup: item.tagName === \"OPTGROUP\",\\r\\n      };\\r\\n\\r\\n      const optionObj = { data: itemData, attributes, element: null };\\r\\n\\r\\n      allOptions.push(optionObj);\\r\\n\\r\\n      if (attributes.selected) selectedOptions.push(optionObj);\\r\\n\\r\\n      return itemData;\\r\\n    });\\r\\n\\r\\n    this.options          = allOptions;\\r\\n    this.selectedOptions  = selectedOptions;\\r\\n  }\\r\\n\\r\\n  renderDropdown() {\\r\\n    const classes = [\\r\\n      \"nice-select\",\\r\\n      attr(this.el, \"class\") || \"\",\\r\\n      this.disabled ? \"disabled\" : \"\",\\r\\n      this.multiple ? \"has-multiple\" : \"\",\\r\\n    ].filter(Boolean);\\r\\n\\r\\n    const searchHtml = this.config.searchable\\r\\n      ? `\\r\\n      <div class=\"nice-select-search-box\">\\r\\n        <input type=\"text\" class=\"nice-select-search\" placeholder=\"${this.searchtext}...\" title=\"search\"/>\\r\\n      </div>\\r\\n    `\\r\\n      : \"\";\\r\\n\\r\\n    const html = `\\r\\n      <div class=\"${classes.join(\" \")}\" tabindex=\"${this.disabled ? \"\" : 0}\">\\r\\n        <span class=\"${this.multiple ? \"multiple-options\" : \"current\"}\"></span>\\r\\n        <div class=\"nice-select-dropdown\">\\r\\n          ${searchHtml}\\r\\n          <ul class=\"list\"></ul>\\r\\n        </div>\\r\\n      </div>\\r\\n    `;\\r\\n\\r\\n    this.el.insertAdjacentHTML(\"afterend\", html);\\r\\n\\r\\n    this.dropdown = this.el.nextElementSibling;\\r\\n\\r\\n    this._renderSelectedItems();\\r\\n\\r\\n    this._renderItems();\\r\\n  }\\r\\n\\r\\n  _renderSelectedItems() {\\r\\n    if (this.multiple) {\\r\\n      let selectedHtml = \"\";\\r\\n\\r\\n      if (\\r\\n        window.getComputedStyle(this.dropdown).width === \"auto\" ||\\r\\n        this.selectedOptions.length < 2\\r\\n      ) {\\r\\n        this.selectedOptions.forEach( (item, index, array) => {\\r\\n          let text  = item.data.text;\\r\\n\\r\\n          if(index !== array.length -1 ){\\r\\n            text += `, `;\\r\\n          }\\r\\n\\r\\n          selectedHtml += `<span class=\"current\">${text}</span>`;\\r\\n        });\\r\\n\\r\\n        selectedHtml = selectedHtml || this.placeholder;\\r\\n      } else {\\r\\n        selectedHtml = `${this.selectedOptions.length} ${this.selectedtext}`;\\r\\n      }\\r\\n\\r\\n      this.dropdown.querySelector(\".multiple-options\").innerHTML = selectedHtml;\\r\\n    } else {\\r\\n      const html =\\r\\n        this.selectedOptions.length > 0\\r\\n          ? this.selectedOptions[0].data.text\\r\\n          : this.placeholder;\\r\\n\\r\\n      this.dropdown.querySelector(\".current\").innerHTML = html;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  _renderItems() {\\r\\n    const ul = this.dropdown.querySelector(\"ul\");\\r\\n\\r\\n    this.options.forEach((item) => {\\r\\n\\r\\n      if(this.multiple && this.config.showSelectedItems){\\r\\n        this._multipleListAdd(item);\\r\\n      }\\r\\n\\r\\n      ul.appendChild(this._renderItem(item));\\r\\n    });\\r\\n  }\\r\\n\\r\\n  _renderItem(option) {\\r\\n    const li      = document.createElement(\"li\");\\r\\n    li.innerHTML  = option.data.text;\\r\\n\\r\\n    if (option.data.extra !== undefined) {\\r\\n      li.appendChild(this._renderItemExtra(option.data.extra));\\r\\n    }\\r\\n\\r\\n    if (option.attributes.optgroup) {\\r\\n      addClass(li, \"optgroup\");\\r\\n    } else {\\r\\n      li.setAttribute(\"data-value\", option.data.value);\\r\\n      const classList = [\"option\"];\\r\\n      if (option.attributes.selected) classList.push(\"selected\");\\r\\n      if (option.attributes.disabled) classList.push(\"disabled\");\\r\\n      li.classList.add(...classList);\\r\\n      li.addEventListener(\"click\", (e) => this._onItemClicked(option, e));\\r\\n    }\\r\\n\\r\\n    option.element = li;\\r\\n\\r\\n    return li;\\r\\n  }\\r\\n\\r\\n  _renderItemExtra(content) {\\r\\n    const span      = document.createElement(\"span\");\\r\\n    span.innerHTML  = content;\\r\\n    addClass(span, \"extra\");\\r\\n\\r\\n    return span;\\r\\n  }\\r\\n\\r\\n  update() {\\r\\n    this.extractData();\\r\\n\\r\\n    if (this.dropdown) {\\r\\n      const open = hasClass(this.dropdown, \"open\");\\r\\n      this.dropdown.remove();\\r\\n      this.create();\\r\\n      if (open) {\\r\\n        triggerClick(this.dropdown);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    attr(this.el, \"disabled\") ? this.disable() : this.enable();\\r\\n  }\\r\\n\\r\\n  disable() {\\r\\n    if (!this.disabled) {\\r\\n      this.disabled = true;\\r\\n      addClass(this.dropdown, \"disabled\");\\r\\n    }\\r\\n  }\\r\\n\\r\\n  enable() {\\r\\n    if (this.disabled) {\\r\\n      this.disabled = false;\\r\\n      removeClass(this.dropdown, \"disabled\");\\r\\n    }\\r\\n  }\\r\\n\\r\\n  clear() {\\r\\n    this.resetSelectValue();\\r\\n    this.selectedOptions = [];\\r\\n    this._renderSelectedItems();\\r\\n    this.update();\\r\\n    triggerChange(this.el);\\r\\n  }\\r\\n\\r\\n  destroy() {\\r\\n    if(this.selectionList){\\r\\n      this.selectionList.remove();\\r\\n    }\\r\\n\\r\\n    if (this.dropdown) {\\r\\n      this.dropdown.remove();\\r\\n      this.el.style.display   = \"\";\\r\\n      this.el.style.opacity   = \\'\\';\\r\\n      this.el.style.width     = \\'\\';\\r\\n      this.el.style.padding   = \\'\\';\\r\\n      this.el.style.height    = \\'\\';\\r\\n      this.el.style.fontSize  = \\'\\';\\r\\n      this.el.style.minHeight = \\'\\';\\r\\n    }\\r\\n  }\\r\\n\\r\\n  focus(target=\\'\\'){\\r\\n    const isOpen = hasClass(this.dropdown, \"open\");\\r\\n\\r\\n    if (!isOpen) {\\r\\n      addClass(this.dropdown, \"open\");\\r\\n      triggerModalOpen(this.el);\\r\\n    } else {\\r\\n      if (this.multiple) {\\r\\n        if (target === this.dropdown.querySelector(\".multiple-options\")) {\\r\\n          removeClass(this.dropdown, \"open\");\\r\\n          triggerModalClose(this.el);\\r\\n        }\\r\\n      } else {\\r\\n        removeClass(this.dropdown, \"open\");\\r\\n        triggerModalClose(this.el);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    if (hasClass(this.dropdown, \"open\")) {\\r\\n      const search = this.dropdown.querySelector(\".nice-select-search\");\\r\\n\\r\\n      if (search) {\\r\\n        search.value = \"\";\\r\\n        search.focus();\\r\\n      }\\r\\n\\r\\n      const focused = this.dropdown.querySelector(\".focus\");\\r\\n\\r\\n      if (focused) removeClass(focused, \"focus\");\\r\\n\\r\\n      const selected = this.dropdown.querySelector(\".selected\");\\r\\n      if (selected) addClass(selected, \"focus\");\\r\\n\\r\\n      this.dropdown\\r\\n        .querySelectorAll(\"ul li\")\\r\\n        .forEach((item) => (item.style.display = \"\"));\\r\\n    } else {\\r\\n      this.dropdown.focus();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  updateSelect(){\\r\\n    const selected = Array.from(this.el.selectedOptions);\\r\\n\\r\\n    for (const option of Array.from(this.el.options)) {\\r\\n      if (selected.includes(option)) {\\r\\n        option.selected = true;\\r\\n        option.setAttribute(\"selected\", \"selected\");\\r\\n      } else {\\r\\n        option.selected = false;\\r\\n        option.removeAttribute(\"selected\");\\r\\n\\r\\n        this._multipleListRemove(option);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    this.update();\\r\\n  }\\r\\n\\r\\n  bindEvent() {\\r\\n    this.dropdown.addEventListener(\"click\", (e) => this._onClicked(e));\\r\\n    this.dropdown.addEventListener(\"keydown\", (e) => this._onKeyPressed(e));\\r\\n    this.dropdown.addEventListener(\"focusin\", () => triggerFocusIn(this.el));\\r\\n    this.dropdown.addEventListener(\"focusout\", () => triggerFocusOut(this.el));\\r\\n    this.el.addEventListener(\"invalid\", () => this._triggerValidationMessage(\"invalid\"));\\r\\n    this.el.addEventListener(\"change\", (e) => this.updateSelect(e.target));\\r\\n    window.addEventListener(\"click\", (e) => this._onClickedOutside(e));\\r\\n\\r\\n    if (this.config.searchable) this._bindSearchEvent();\\r\\n  }\\r\\n\\r\\n  _bindSearchEvent() {\\r\\n    const searchBox = this.dropdown.querySelector(\".nice-select-search\");\\r\\n    if (searchBox) {\\r\\n      searchBox.addEventListener(\"click\", (e) => e.stopPropagation());\\r\\n      searchBox.addEventListener(\"input\", (e) => this._onSearchChanged(e));\\r\\n    }\\r\\n  }\\r\\n\\r\\n  _onClicked(e) {\\r\\n    e.preventDefault();\\r\\n\\r\\n    this.focus(e.target);\\r\\n  }\\r\\n\\r\\n  _onItemClicked(option, e) {\\r\\n    const optionEl = e.target;\\r\\n    if (!hasClass(optionEl, \"disabled\")) {\\r\\n      if (this.multiple) {\\r\\n        if (hasClass(optionEl, \"selected\")) {\\r\\n          removeClass(optionEl, \"selected\");\\r\\n          this.selectedOptions = this.selectedOptions.filter(\\r\\n            (item) => item !== option\\r\\n          );\\r\\n\\r\\n          const opt = this.el.querySelector(\\r\\n            `option[value=\"${optionEl.dataset.value}\"]`\\r\\n          );\\r\\n\\r\\n          if (opt) {\\r\\n            opt.removeAttribute(\"selected\");\\r\\n            opt.selected = false;\\r\\n          }\\r\\n\\r\\n          this._multipleListRemove(option);\\r\\n        } else {\\r\\n          addClass(optionEl, \"selected\");\\r\\n          this.selectedOptions.push(option);\\r\\n\\r\\n          if(this.config.showSelectedItems){\\r\\n            option.attributes.selected = true;\\r\\n            this._multipleListAdd(option);\\r\\n          }\\r\\n        }\\r\\n      } else {\\r\\n        this.options.forEach((item) => removeClass(item.element, \"selected\"));\\r\\n\\r\\n        addClass(optionEl, \"selected\");\\r\\n\\r\\n        this.selectedOptions = [option];\\r\\n      }\\r\\n\\r\\n      this._renderSelectedItems();\\r\\n\\r\\n      this.updateSelectValue();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  setValue(value) {\\r\\n    const select = this.el;\\r\\n    let noSelected = true;\\r\\n\\r\\n    // Validate input type\\r\\n    if (select.multiple) {\\r\\n      if (!Array.isArray(value)) {\\r\\n        throw new Error(\\'setValue expects an array for multiple select elements\\');\\r\\n      }\\r\\n\\r\\n      value = value.map(String);\\r\\n    } else {\\r\\n      if (Array.isArray(value)) {\\r\\n        throw new Error(\\'setValue expects a single value for non-multiple select elements\\');\\r\\n      }\\r\\n\\r\\n      if (value !== null && value !== undefined && typeof value !== \\'string\\' && typeof value !== \\'number\\') {\\r\\n        throw new Error(\\'setValue expects a string or number for non-multiple select elements\\');\\r\\n      }\\r\\n\\r\\n      value = String(value);\\r\\n    }\\r\\n\\r\\n    for (const opt of select.options) {\\r\\n      const currentValue = select.multiple\\r\\n        ? value.includes(opt.value)\\r\\n          ? opt.value\\r\\n          : null\\r\\n        : value;\\r\\n      if (opt.value === currentValue && !opt.disabled) {\\r\\n        if (noSelected) {\\r\\n          select.value = currentValue;\\r\\n          noSelected = false;\\r\\n        }\\r\\n\\r\\n        opt.setAttribute(\"selected\", true);\\r\\n        opt.selected = true;\\r\\n      } else {\\r\\n        opt.removeAttribute(\"selected\");\\r\\n        opt.selected = false;\\r\\n      }\\r\\n    }\\r\\n\\r\\n    if (noSelected && !select.multiple && select.options.length) {\\r\\n      select.options[0].setAttribute(\"selected\", true);\\r\\n      select.options[0].selected = true;\\r\\n      select.value = select.options[0].value;\\r\\n    }\\r\\n\\r\\n    this.update();\\r\\n  }\\r\\n\\r\\n  getValue() {\\r\\n    const select = this.el;\\r\\n    if (!select.multiple) return select.value;\\r\\n\\r\\n    return Array.from(select.options)\\r\\n      .filter((opt) => opt.selected)\\r\\n      .map((opt) => opt.value);\\r\\n  }\\r\\n\\r\\n  updateSelectValue() {\\r\\n    if (this.selectedOptions.length > 0) {\\r\\n      this.el.value = this.selectedOptions[0].data.value;\\r\\n    }\\r\\n\\r\\n    const select = this.el;\\r\\n\\r\\n    // FIrst mark all options as not selected\\r\\n    select.querySelectorAll(\"option\").forEach(function (item) {\\r\\n      item.removeAttribute(\"selected\");\\r\\n    });\\r\\n\\r\\n    // Mark the selected options as selected in the select element\\r\\n    this.selectedOptions.forEach( item => {\\r\\n      let el = select.querySelector(`option[value=\"${item.data.value}\"]`);\\r\\n\\r\\n      if (el){\\r\\n        //Change it, cause it works more correctly.\\r\\n        el.setAttribute(\"selected\", \"selected\");\\r\\n        el.selected = true;\\r\\n      }\\r\\n    });\\r\\n\\r\\n    triggerChange(this.el);\\r\\n  }\\r\\n\\r\\n  resetSelectValue() {\\r\\n    if (this.multiple) {\\r\\n      const select = this.el;\\r\\n      this.selectedOptions.forEach((item) => {\\r\\n        const el = select.querySelector(`option[value=\"${item.data.value}\"]`);\\r\\n        if (el) {\\r\\n          el.removeAttribute(\"selected\");\\r\\n          el.selected = false;\\r\\n        }\\r\\n      });\\r\\n    } else if (this.selectedOptions.length > 0) {\\r\\n      this.el.selectedIndex = -1;\\r\\n    }\\r\\n\\r\\n    triggerChange(this.el);\\r\\n  }\\r\\n\\r\\n  _onClickedOutside(e) {\\r\\n    if (!this.dropdown.contains(e.target)) {\\r\\n      removeClass(this.dropdown, \"open\");\\r\\n      triggerModalClose(this.el);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  _onKeyPressed(e) {\\r\\n    const focusedOption = this.dropdown.querySelector(\".focus\");\\r\\n    const isOpen        = hasClass(this.dropdown, \"open\");\\r\\n\\r\\n    if (e.keyCode === 13) {\\r\\n      isOpen ? triggerClick(focusedOption) : triggerClick(this.dropdown);\\r\\n    } else if (e.keyCode === 40) {\\r\\n      if (!isOpen) {\\r\\n        triggerClick(this.dropdown);\\r\\n      } else {\\r\\n        const next = this._findNext(focusedOption);\\r\\n        if (next) {\\r\\n          if (focusedOption) removeClass(focusedOption, \"focus\");\\r\\n          addClass(next, \"focus\");\\r\\n        }\\r\\n      }\\r\\n      e.preventDefault();\\r\\n    } else if (e.keyCode === 38) {\\r\\n      if (!isOpen) {\\r\\n        triggerClick(this.dropdown);\\r\\n      } else {\\r\\n        const prev = this._findPrev(focusedOption);\\r\\n        if (prev) {\\r\\n          if (focusedOption) removeClass(focusedOption, \"focus\");\\r\\n          addClass(prev, \"focus\");\\r\\n        }\\r\\n      }\\r\\n      e.preventDefault();\\r\\n    } else if (e.keyCode === 27 && isOpen) {\\r\\n      triggerClick(this.dropdown);\\r\\n    } else if (e.keyCode === 32 && isOpen) {\\r\\n      return false;\\r\\n    }\\r\\n\\r\\n    const focus = this.dropdown.querySelector(\\'.focus\\');\\r\\n    if (focus) {\\r\\n      focus.scrollIntoView({ block: \\'center\\' });\\r\\n    }\\r\\n\\r\\n    return false;\\r\\n  }\\r\\n\\r\\n  _findNext(el) {\\r\\n    let nextEl = el\\r\\n      ? el.nextElementSibling\\r\\n      : this.dropdown.querySelector(\".list .option\");\\r\\n    while (nextEl) {\\r\\n      if (!hasClass(nextEl, \"disabled\") && nextEl.style.display !== \"none\")\\r\\n        return nextEl;\\r\\n      nextEl = nextEl.nextElementSibling;\\r\\n    }\\r\\n\\r\\n    return null;\\r\\n  }\\r\\n\\r\\n  _findPrev(el) {\\r\\n    let prevEl = el\\r\\n      ? el.previousElementSibling\\r\\n      : this.dropdown.querySelector(\".list .option:last-child\");\\r\\n    while (prevEl) {\\r\\n      if (!hasClass(prevEl, \"disabled\") && prevEl.style.display !== \"none\")\\r\\n        return prevEl;\\r\\n      prevEl = prevEl.previousElementSibling;\\r\\n    }\\r\\n\\r\\n    return null;\\r\\n  }\\r\\n\\r\\n  _onSearchChanged(e) {\\r\\n    const text = e.target.value.toLowerCase();\\r\\n\\r\\n    if (text === \"\") {\\r\\n      this.options.forEach((item) => (item.element.style.display = \"\"));\\r\\n    } else if (hasClass(this.dropdown, \"open\")) {\\r\\n      const matchReg = new RegExp(text);\\r\\n      this.options.forEach((item) => {\\r\\n        item.element.style.display = matchReg.test(item.data.text.toLowerCase())\\r\\n          ? \"\"\\r\\n          : \"none\";\\r\\n      });\\r\\n    }\\r\\n\\r\\n    this.dropdown\\r\\n      .querySelectorAll(\".focus\")\\r\\n      .forEach((item) => removeClass(item, \"focus\"));\\r\\n\\r\\n    const firstEl = this._findNext(null);\\r\\n\\r\\n    if (firstEl) addClass(firstEl, \"focus\");\\r\\n  }\\r\\n\\r\\n  _triggerValidationMessage(type) {\\r\\n    if (type === \"invalid\") {\\r\\n      addClass(this.dropdown, \"invalid\");\\r\\n      removeClass(this.dropdown, \"valid\");\\r\\n    } else {\\r\\n      addClass(this.dropdown, \"valid\");\\r\\n      removeClass(this.dropdown, \"invalid\");\\r\\n    }\\r\\n  }\\r\\n\\r\\n  _multipleListAdd(option) {\\r\\n  \\r\\n    if(option.data.disabled || option.data.value == \"\" || !option.attributes.selected){\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    if(this.selectionList == null){\\r\\n      this.selectionList\\t \\t\\t= document.createElement(\\'ul\\');\\r\\n      this.selectionList.classList.add(\\'select-selection-list\\');\\r\\n\\r\\n      this.el.after(this.selectionList);\\r\\n    }else if(this.selectionList.querySelector(`[data-value=\"${option.data.value}\"]`) != null){\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    let li\\t \\t\\t= document.createElement(\\'li\\');\\r\\n    li.classList.add(\\'select-selection\\');\\r\\n\\r\\n    li.dataset.value = option.data.value;\\r\\n\\r\\n    let html\\t  = `\\r\\n      <button type=\"button\" class=\"small remove-select-selection\">\\r\\n        <span class=\\'remove-select-selection\\'></span>\\r\\n      </button>\\r\\n    `;\\r\\n\\r\\n    // Add\\r\\n    html   += `<span class=\\'selected-name\\'>${option.data.text}</span>`\\r\\n\\r\\n    li.innerHTML\\t= html;\\r\\n\\r\\n    this.selectionList.appendChild(li);\\r\\n\\r\\n    li.querySelectorAll(\\'.remove-select-selection\\').forEach(el=> el.addEventListener(\"click\", this._multipleListRemove.bind(this)));\\r\\n  }\\r\\n\\r\\n  _multipleListRemove(target) {\\r\\n\\r\\n    if(target.target != null){\\r\\n      target  = target.target;\\r\\n    }\\r\\n\\r\\n    console.log(target);\\r\\n\\r\\n    // Close button clicked\\r\\n    if(target.matches(\\'.remove-select-selection\\')){\\r\\n      target.closest(\\'li.select-selection\\').remove();\\r\\n\\r\\n      let parent  = target.closest(\\'li.select-selection\\');\\r\\n\\r\\n      this.selectedOptions.forEach(option => {\\r\\n        if(option.data.value == parent.dataset.value){\\r\\n          removeClass(option.element, \"selected\");\\r\\n          this.selectedOptions.splice(this.selectedOptions.indexOf(option), 1);\\r\\n          var opt = this.el.querySelector(`option[value=\"${option.data.value}\"]`);\\r\\n          opt.removeAttribute(\\'selected\\');\\r\\n          opt.selected = false;\\r\\n        }\\r\\n\\r\\n        this._renderSelectedItems();\\r\\n      });\\r\\n    \\r\\n    // Deselected in dropdown or Deselected from original select\\r\\n    }else{\\r\\n      console.log(target);\\r\\n      if(target.element != undefined && target.element.classList.contains(\\'selected\\')){\\r\\n        return;\\r\\n      }\\r\\n\\r\\n      let parent  = this.el.parentElement;\\r\\n      \\r\\n      let ul      = parent.querySelector(\\'.select-selection-list\\');\\r\\n      \\r\\n      let option  = Array.from(ul.querySelectorAll(\\'li\\')).find(el => el.textContent === target.innerText);\\r\\n\\r\\n      if(ul != null && option != null){\\r\\n        option.remove();\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NiceSelect);\\r\\nfunction bind(el, options) {\\r\\n  return new NiceSelect(el, options);\\r\\n}//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscURBQXFELGdCQUFnQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxnQkFBZ0I7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlCQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLHlEQUF5RCxrQkFBa0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGlCQUFpQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGtCQUFrQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsVUFBVSxFQUFDO0FBQ25CO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL05pY2VTZWxlY3QvLi9zcmMvanMvbmljZS1zZWxlY3QyLmpzP2I0YzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vc2Nzcy9uaWNlLXNlbGVjdDIuc2Nzc1wiO1xyXG5cclxuY29uc3QgdHJpZ2dlckV2ZW50ICAgICAgPSAoZWwsIHR5cGUsIGluaXQgPSB7fSkgPT4ge1xyXG4gIGxldCBFdmVudENvbnN0cnVjdG9yO1xyXG4gIGlmICh0eXBlID09PSBcImNsaWNrXCIpIHtcclxuICAgIEV2ZW50Q29uc3RydWN0b3IgPSBNb3VzZUV2ZW50O1xyXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJjaGFuZ2VcIikge1xyXG4gICAgRXZlbnRDb25zdHJ1Y3RvciA9IEV2ZW50O1xyXG4gIH0gZWxzZSBpZiAodHlwZS5pbmNsdWRlcyhcImZvY3VzXCIpKSB7XHJcbiAgICBFdmVudENvbnN0cnVjdG9yID0gRm9jdXNFdmVudDtcclxuICB9IGVsc2Uge1xyXG4gICAgRXZlbnRDb25zdHJ1Y3RvciA9IFVJRXZlbnQ7XHJcbiAgfVxyXG4gIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50Q29uc3RydWN0b3IodHlwZSwge1xyXG4gICAgYnViYmxlczogdHJ1ZSxcclxuICAgIGNhbmNlbGFibGU6IGZhbHNlLFxyXG4gICAgLi4uaW5pdCxcclxuICB9KTtcclxuICBlbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxufTtcclxuXHJcbmNvbnN0IHRyaWdnZXJDbGljayAgICAgID0gKGVsKSA9PiB0cmlnZ2VyRXZlbnQoZWwsIFwiY2xpY2tcIik7XHJcbmNvbnN0IHRyaWdnZXJDaGFuZ2UgICAgID0gKGVsKSA9PiB0cmlnZ2VyRXZlbnQoZWwsIFwiY2hhbmdlXCIpO1xyXG5jb25zdCB0cmlnZ2VyRm9jdXNJbiAgICA9IChlbCkgPT4gdHJpZ2dlckV2ZW50KGVsLCBcImZvY3VzaW5cIik7XHJcbmNvbnN0IHRyaWdnZXJGb2N1c091dCAgID0gKGVsKSA9PiB0cmlnZ2VyRXZlbnQoZWwsIFwiZm9jdXNvdXRcIik7XHJcbmNvbnN0IHRyaWdnZXJNb2RhbE9wZW4gID0gKGVsKSA9PiB0cmlnZ2VyRXZlbnQoZWwsIFwibW9kYWxvcGVuXCIpO1xyXG5jb25zdCB0cmlnZ2VyTW9kYWxDbG9zZSA9IChlbCkgPT4gdHJpZ2dlckV2ZW50KGVsLCBcIm1vZGFsY2xvc2VcIik7XHJcblxyXG5jb25zdCBhdHRyICAgICAgICAgICAgICA9IChlbCwga2V5KSA9PiBlbFtrZXldICE9PSB1bmRlZmluZWQgPyBlbFtrZXldIDogZWwuZ2V0QXR0cmlidXRlKGtleSk7XHJcbmNvbnN0IGRhdGEgICAgICAgICAgICAgID0gKGVsLCBrZXkpID0+IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtXCIgKyBrZXkpO1xyXG5jb25zdCBoYXNDbGFzcyAgICAgICAgICA9IChlbCwgY2xhc3NOYW1lKSA9PiBlbD8uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbmNvbnN0IGFkZENsYXNzICAgICAgICAgID0gKGVsLCBjbGFzc05hbWUpID0+IGVsPy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbmNvbnN0IHJlbW92ZUNsYXNzICAgICAgID0gKGVsLCBjbGFzc05hbWUpID0+IGVsPy5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICBkYXRhOiBudWxsLFxyXG4gIHNlYXJjaGFibGU6IHRydWUsXHJcbiAgc2hvd1NlbGVjdGVkSXRlbXM6IHRydWUsXHJcbiAgcGxhY2Vob2xkZXI6IFwiU2VsZWN0IGFuIG9wdGlvblwiLFxyXG4gIHNlYXJjaHRleHQ6IFwiU2VhcmNoXCIsXHJcbiAgc2VsZWN0ZWR0ZXh0OiBcInNlbGVjdGVkXCIsXHJcbn07XHJcblxyXG5jbGFzcyBOaWNlU2VsZWN0IHtcclxuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvcHRpb25zID0ge30pIHtcclxuICAgIGlmICghZWxlbWVudCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGVsZW1lbnQgcHJvdmlkZWQgdG8gTmljZVNlbGVjdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZWxlbWVudCBwcm92aWRlZCB0byBOaWNlU2VsZWN0IC0gbXVzdCBiZSBhIHZhbGlkIERPTSBlbGVtZW50Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5lbCAgICAgICAgICAgICAgID0gZWxlbWVudDtcclxuICAgIHRoaXMuY29uZmlnICAgICAgICAgICA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICAgIHRoaXMuZGF0YSAgICAgICAgICAgICA9IHRoaXMuY29uZmlnLmRhdGE7XHJcbiAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyAgPSBbXTtcclxuICAgIHRoaXMucGxhY2Vob2xkZXIgICAgICA9IGF0dHIodGhpcy5lbCwgXCJwbGFjZWhvbGRlclwiKSB8fCB0aGlzLmNvbmZpZy5wbGFjZWhvbGRlcjtcclxuICAgIHRoaXMuc2VhcmNodGV4dCAgICAgICA9IGF0dHIodGhpcy5lbCwgXCJzZWFyY2h0ZXh0XCIpIHx8IHRoaXMuY29uZmlnLnNlYXJjaHRleHQ7XHJcbiAgICB0aGlzLnNlbGVjdGVkdGV4dCAgICAgPSBhdHRyKHRoaXMuZWwsIFwic2VsZWN0ZWR0ZXh0XCIpIHx8IHRoaXMuY29uZmlnLnNlbGVjdGVkdGV4dDtcclxuICAgIHRoaXMuZHJvcGRvd24gICAgICAgICA9IG51bGw7XHJcbiAgICB0aGlzLnNlbGVjdGlvbkxpc3QgICAgPSBudWxsO1xyXG4gICAgdGhpcy5tdWx0aXBsZSAgICAgICAgID0gYXR0cih0aGlzLmVsLCBcIm11bHRpcGxlXCIpO1xyXG4gICAgdGhpcy5kaXNhYmxlZCAgICAgICAgID0gYXR0cih0aGlzLmVsLCBcImRpc2FibGVkXCIpO1xyXG4gICAgdGhpcy5jcmVhdGUoKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIC8qIE9iamVjdC5hc3NpZ24odGhpcy5lbC5zdHlsZSwge1xyXG4gICAgICBvcGFjaXR5OiBcIjBcIixcclxuICAgICAgd2lkdGg6IFwiMFwiLFxyXG4gICAgICBwYWRkaW5nOiBcIjBcIixcclxuICAgICAgaGVpZ2h0OiBcIjBcIixcclxuICAgICAgZm9udFNpemU6IFwiMFwiLFxyXG4gICAgICBtaW5IZWlnaHQ6IFwiYXV0b1wiLFxyXG4gICAgfSk7ICovXHJcblxyXG4gICAgdGhpcy5kYXRhID8gdGhpcy5wcm9jZXNzRGF0YSh0aGlzLmRhdGEpIDogdGhpcy5leHRyYWN0RGF0YSgpO1xyXG4gICAgdGhpcy5yZW5kZXJEcm9wZG93bigpO1xyXG4gICAgdGhpcy5iaW5kRXZlbnQoKTtcclxuICB9XHJcblxyXG4gIHByb2Nlc3NEYXRhKGRhdGEpIHtcclxuICAgIHRoaXMub3B0aW9ucyA9IGRhdGEubWFwKChpdGVtKSA9PiAoe1xyXG4gICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgc2VsZWN0ZWQ6ICEhaXRlbS5zZWxlY3RlZCxcclxuICAgICAgICBkaXNhYmxlZDogISFpdGVtLmRpc2FibGVkLFxyXG4gICAgICAgIG9wdGdyb3VwOiBpdGVtLnZhbHVlID09PSBcIm9wdGdyb3VwXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBleHRyYWN0RGF0YSgpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcIm9wdGlvbixvcHRncm91cFwiKSk7XHJcbiAgICBjb25zdCBhbGxPcHRpb25zID0gW107XHJcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSBbXTtcclxuXHJcbiAgICB0aGlzLmRhdGEgPSBvcHRpb25zLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICBsZXQgaXRlbURhdGE7XHJcblxyXG4gICAgICBpZiAoaXRlbS50YWdOYW1lID09PSBcIk9QVEdST1VQXCIpIHtcclxuICAgICAgICBpdGVtRGF0YSA9IHsgdGV4dDogaXRlbS5sYWJlbCwgdmFsdWU6IFwib3B0Z3JvdXBcIiB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBpdGVtLmRhdGFzZXQuZGlzcGxheSA/PyBpdGVtLmlubmVyVGV4dDtcclxuICAgICAgICBpdGVtRGF0YSA9IHtcclxuICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcclxuICAgICAgICAgIGV4dHJhOiBpdGVtLmRhdGFzZXQuZXh0cmEsXHJcbiAgICAgICAgICBzZWxlY3RlZDogaXRlbS5oYXNBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKSxcclxuICAgICAgICAgIGRpc2FibGVkOiBpdGVtLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XHJcbiAgICAgICAgc2VsZWN0ZWQ6IGl0ZW0uaGFzQXR0cmlidXRlKFwic2VsZWN0ZWRcIiksXHJcbiAgICAgICAgZGlzYWJsZWQ6IGl0ZW0uaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksXHJcbiAgICAgICAgb3B0Z3JvdXA6IGl0ZW0udGFnTmFtZSA9PT0gXCJPUFRHUk9VUFwiLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgb3B0aW9uT2JqID0geyBkYXRhOiBpdGVtRGF0YSwgYXR0cmlidXRlcywgZWxlbWVudDogbnVsbCB9O1xyXG5cclxuICAgICAgYWxsT3B0aW9ucy5wdXNoKG9wdGlvbk9iaik7XHJcblxyXG4gICAgICBpZiAoYXR0cmlidXRlcy5zZWxlY3RlZCkgc2VsZWN0ZWRPcHRpb25zLnB1c2gob3B0aW9uT2JqKTtcclxuXHJcbiAgICAgIHJldHVybiBpdGVtRGF0YTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IGFsbE9wdGlvbnM7XHJcbiAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyAgPSBzZWxlY3RlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICByZW5kZXJEcm9wZG93bigpIHtcclxuICAgIGNvbnN0IGNsYXNzZXMgPSBbXHJcbiAgICAgIFwibmljZS1zZWxlY3RcIixcclxuICAgICAgYXR0cih0aGlzLmVsLCBcImNsYXNzXCIpIHx8IFwiXCIsXHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPyBcImRpc2FibGVkXCIgOiBcIlwiLFxyXG4gICAgICB0aGlzLm11bHRpcGxlID8gXCJoYXMtbXVsdGlwbGVcIiA6IFwiXCIsXHJcbiAgICBdLmZpbHRlcihCb29sZWFuKTtcclxuXHJcbiAgICBjb25zdCBzZWFyY2hIdG1sID0gdGhpcy5jb25maWcuc2VhcmNoYWJsZVxyXG4gICAgICA/IGBcclxuICAgICAgPGRpdiBjbGFzcz1cIm5pY2Utc2VsZWN0LXNlYXJjaC1ib3hcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm5pY2Utc2VsZWN0LXNlYXJjaFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaHRleHR9Li4uXCIgdGl0bGU9XCJzZWFyY2hcIi8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYFxyXG4gICAgICA6IFwiXCI7XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5qb2luKFwiIFwiKX1cIiB0YWJpbmRleD1cIiR7dGhpcy5kaXNhYmxlZCA/IFwiXCIgOiAwfVwiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiJHt0aGlzLm11bHRpcGxlID8gXCJtdWx0aXBsZS1vcHRpb25zXCIgOiBcImN1cnJlbnRcIn1cIj48L3NwYW4+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIm5pY2Utc2VsZWN0LWRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAke3NlYXJjaEh0bWx9XHJcbiAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0XCI+PC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMuZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJlbmRcIiwgaHRtbCk7XHJcblxyXG4gICAgdGhpcy5kcm9wZG93biA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgIHRoaXMuX3JlbmRlclNlbGVjdGVkSXRlbXMoKTtcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJJdGVtcygpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlclNlbGVjdGVkSXRlbXMoKSB7XHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBsZXQgc2VsZWN0ZWRIdG1sID0gXCJcIjtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRyb3Bkb3duKS53aWR0aCA9PT0gXCJhdXRvXCIgfHxcclxuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGggPCAyXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZvckVhY2goIChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgIGxldCB0ZXh0ICA9IGl0ZW0uZGF0YS50ZXh0O1xyXG5cclxuICAgICAgICAgIGlmKGluZGV4ICE9PSBhcnJheS5sZW5ndGggLTEgKXtcclxuICAgICAgICAgICAgdGV4dCArPSBgLCBgO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNlbGVjdGVkSHRtbCArPSBgPHNwYW4gY2xhc3M9XCJjdXJyZW50XCI+JHt0ZXh0fTwvc3Bhbj5gO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxlY3RlZEh0bWwgPSBzZWxlY3RlZEh0bWwgfHwgdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxlY3RlZEh0bWwgPSBgJHt0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGh9ICR7dGhpcy5zZWxlY3RlZHRleHR9YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKFwiLm11bHRpcGxlLW9wdGlvbnNcIikuaW5uZXJIVE1MID0gc2VsZWN0ZWRIdG1sO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaHRtbCA9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoID4gMFxyXG4gICAgICAgICAgPyB0aGlzLnNlbGVjdGVkT3B0aW9uc1swXS5kYXRhLnRleHRcclxuICAgICAgICAgIDogdGhpcy5wbGFjZWhvbGRlcjtcclxuXHJcbiAgICAgIHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50XCIpLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfcmVuZGVySXRlbXMoKSB7XHJcbiAgICBjb25zdCB1bCA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcInVsXCIpO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblxyXG4gICAgICBpZih0aGlzLm11bHRpcGxlICYmIHRoaXMuY29uZmlnLnNob3dTZWxlY3RlZEl0ZW1zKXtcclxuICAgICAgICB0aGlzLl9tdWx0aXBsZUxpc3RBZGQoaXRlbSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVsLmFwcGVuZENoaWxkKHRoaXMuX3JlbmRlckl0ZW0oaXRlbSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVySXRlbShvcHRpb24pIHtcclxuICAgIGNvbnN0IGxpICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICBsaS5pbm5lckhUTUwgID0gb3B0aW9uLmRhdGEudGV4dDtcclxuXHJcbiAgICBpZiAob3B0aW9uLmRhdGEuZXh0cmEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBsaS5hcHBlbmRDaGlsZCh0aGlzLl9yZW5kZXJJdGVtRXh0cmEob3B0aW9uLmRhdGEuZXh0cmEpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9uLmF0dHJpYnV0ZXMub3B0Z3JvdXApIHtcclxuICAgICAgYWRkQ2xhc3MobGksIFwib3B0Z3JvdXBcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbHVlXCIsIG9wdGlvbi5kYXRhLnZhbHVlKTtcclxuICAgICAgY29uc3QgY2xhc3NMaXN0ID0gW1wib3B0aW9uXCJdO1xyXG4gICAgICBpZiAob3B0aW9uLmF0dHJpYnV0ZXMuc2VsZWN0ZWQpIGNsYXNzTGlzdC5wdXNoKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgIGlmIChvcHRpb24uYXR0cmlidXRlcy5kaXNhYmxlZCkgY2xhc3NMaXN0LnB1c2goXCJkaXNhYmxlZFwiKTtcclxuICAgICAgbGkuY2xhc3NMaXN0LmFkZCguLi5jbGFzc0xpc3QpO1xyXG4gICAgICBsaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuX29uSXRlbUNsaWNrZWQob3B0aW9uLCBlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3B0aW9uLmVsZW1lbnQgPSBsaTtcclxuXHJcbiAgICByZXR1cm4gbGk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVySXRlbUV4dHJhKGNvbnRlbnQpIHtcclxuICAgIGNvbnN0IHNwYW4gICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgc3Bhbi5pbm5lckhUTUwgID0gY29udGVudDtcclxuICAgIGFkZENsYXNzKHNwYW4sIFwiZXh0cmFcIik7XHJcblxyXG4gICAgcmV0dXJuIHNwYW47XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoKSB7XHJcbiAgICB0aGlzLmV4dHJhY3REYXRhKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuZHJvcGRvd24pIHtcclxuICAgICAgY29uc3Qgb3BlbiA9IGhhc0NsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKTtcclxuICAgICAgdGhpcy5kcm9wZG93bi5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5jcmVhdGUoKTtcclxuICAgICAgaWYgKG9wZW4pIHtcclxuICAgICAgICB0cmlnZ2VyQ2xpY2sodGhpcy5kcm9wZG93bik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhdHRyKHRoaXMuZWwsIFwiZGlzYWJsZWRcIikgPyB0aGlzLmRpc2FibGUoKSA6IHRoaXMuZW5hYmxlKCk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlKCkge1xyXG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBhZGRDbGFzcyh0aGlzLmRyb3Bkb3duLCBcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlKCkge1xyXG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmRyb3Bkb3duLCBcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLnJlc2V0U2VsZWN0VmFsdWUoKTtcclxuICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW107XHJcbiAgICB0aGlzLl9yZW5kZXJTZWxlY3RlZEl0ZW1zKCk7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgdHJpZ2dlckNoYW5nZSh0aGlzLmVsKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICBpZih0aGlzLnNlbGVjdGlvbkxpc3Qpe1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbkxpc3QucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZHJvcGRvd24pIHtcclxuICAgICAgdGhpcy5kcm9wZG93bi5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5lbC5zdHlsZS5kaXNwbGF5ICAgPSBcIlwiO1xyXG4gICAgICB0aGlzLmVsLnN0eWxlLm9wYWNpdHkgICA9ICcnO1xyXG4gICAgICB0aGlzLmVsLnN0eWxlLndpZHRoICAgICA9ICcnO1xyXG4gICAgICB0aGlzLmVsLnN0eWxlLnBhZGRpbmcgICA9ICcnO1xyXG4gICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCAgICA9ICcnO1xyXG4gICAgICB0aGlzLmVsLnN0eWxlLmZvbnRTaXplICA9ICcnO1xyXG4gICAgICB0aGlzLmVsLnN0eWxlLm1pbkhlaWdodCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXModGFyZ2V0PScnKXtcclxuICAgIGNvbnN0IGlzT3BlbiA9IGhhc0NsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKTtcclxuXHJcbiAgICBpZiAoIWlzT3Blbikge1xyXG4gICAgICBhZGRDbGFzcyh0aGlzLmRyb3Bkb3duLCBcIm9wZW5cIik7XHJcbiAgICAgIHRyaWdnZXJNb2RhbE9wZW4odGhpcy5lbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIGlmICh0YXJnZXQgPT09IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5tdWx0aXBsZS1vcHRpb25zXCIpKSB7XHJcbiAgICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmRyb3Bkb3duLCBcIm9wZW5cIik7XHJcbiAgICAgICAgICB0cmlnZ2VyTW9kYWxDbG9zZSh0aGlzLmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5kcm9wZG93biwgXCJvcGVuXCIpO1xyXG4gICAgICAgIHRyaWdnZXJNb2RhbENsb3NlKHRoaXMuZWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGhhc0NsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKSkge1xyXG4gICAgICBjb25zdCBzZWFyY2ggPSB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIubmljZS1zZWxlY3Qtc2VhcmNoXCIpO1xyXG5cclxuICAgICAgaWYgKHNlYXJjaCkge1xyXG4gICAgICAgIHNlYXJjaC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgc2VhcmNoLmZvY3VzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZvY3VzZWQgPSB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIuZm9jdXNcIik7XHJcblxyXG4gICAgICBpZiAoZm9jdXNlZCkgcmVtb3ZlQ2xhc3MoZm9jdXNlZCwgXCJmb2N1c1wiKTtcclxuXHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkXCIpO1xyXG4gICAgICBpZiAoc2VsZWN0ZWQpIGFkZENsYXNzKHNlbGVjdGVkLCBcImZvY3VzXCIpO1xyXG5cclxuICAgICAgdGhpcy5kcm9wZG93blxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwidWwgbGlcIilcclxuICAgICAgICAuZm9yRWFjaCgoaXRlbSkgPT4gKGl0ZW0uc3R5bGUuZGlzcGxheSA9IFwiXCIpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZHJvcGRvd24uZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVNlbGVjdCgpe1xyXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBBcnJheS5mcm9tKHRoaXMuZWwuc2VsZWN0ZWRPcHRpb25zKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBBcnJheS5mcm9tKHRoaXMuZWwub3B0aW9ucykpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkLmluY2x1ZGVzKG9wdGlvbikpIHtcclxuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCBcInNlbGVjdGVkXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIG9wdGlvbi5yZW1vdmVBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbXVsdGlwbGVMaXN0UmVtb3ZlKG9wdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgYmluZEV2ZW50KCkge1xyXG4gICAgdGhpcy5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuX29uQ2xpY2tlZChlKSk7XHJcbiAgICB0aGlzLmRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB0aGlzLl9vbktleVByZXNzZWQoZSkpO1xyXG4gICAgdGhpcy5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCAoKSA9PiB0cmlnZ2VyRm9jdXNJbih0aGlzLmVsKSk7XHJcbiAgICB0aGlzLmRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB0cmlnZ2VyRm9jdXNPdXQodGhpcy5lbCkpO1xyXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwiaW52YWxpZFwiLCAoKSA9PiB0aGlzLl90cmlnZ2VyVmFsaWRhdGlvbk1lc3NhZ2UoXCJpbnZhbGlkXCIpKTtcclxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZSkgPT4gdGhpcy51cGRhdGVTZWxlY3QoZS50YXJnZXQpKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuX29uQ2xpY2tlZE91dHNpZGUoZSkpO1xyXG5cclxuICAgIGlmICh0aGlzLmNvbmZpZy5zZWFyY2hhYmxlKSB0aGlzLl9iaW5kU2VhcmNoRXZlbnQoKTtcclxuICB9XHJcblxyXG4gIF9iaW5kU2VhcmNoRXZlbnQoKSB7XHJcbiAgICBjb25zdCBzZWFyY2hCb3ggPSB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIubmljZS1zZWxlY3Qtc2VhcmNoXCIpO1xyXG4gICAgaWYgKHNlYXJjaEJveCkge1xyXG4gICAgICBzZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuICAgICAgc2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4gdGhpcy5fb25TZWFyY2hDaGFuZ2VkKGUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9vbkNsaWNrZWQoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIHRoaXMuZm9jdXMoZS50YXJnZXQpO1xyXG4gIH1cclxuXHJcbiAgX29uSXRlbUNsaWNrZWQob3B0aW9uLCBlKSB7XHJcbiAgICBjb25zdCBvcHRpb25FbCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKCFoYXNDbGFzcyhvcHRpb25FbCwgXCJkaXNhYmxlZFwiKSkge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIGlmIChoYXNDbGFzcyhvcHRpb25FbCwgXCJzZWxlY3RlZFwiKSkge1xyXG4gICAgICAgICAgcmVtb3ZlQ2xhc3Mob3B0aW9uRWwsIFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZpbHRlcihcclxuICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0gIT09IG9wdGlvblxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBvcHQgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgIGBvcHRpb25bdmFsdWU9XCIke29wdGlvbkVsLmRhdGFzZXQudmFsdWV9XCJdYFxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpZiAob3B0KSB7XHJcbiAgICAgICAgICAgIG9wdC5yZW1vdmVBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgb3B0LnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5fbXVsdGlwbGVMaXN0UmVtb3ZlKG9wdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFkZENsYXNzKG9wdGlvbkVsLCBcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMucHVzaChvcHRpb24pO1xyXG5cclxuICAgICAgICAgIGlmKHRoaXMuY29uZmlnLnNob3dTZWxlY3RlZEl0ZW1zKXtcclxuICAgICAgICAgICAgb3B0aW9uLmF0dHJpYnV0ZXMuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9tdWx0aXBsZUxpc3RBZGQob3B0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGl0ZW0pID0+IHJlbW92ZUNsYXNzKGl0ZW0uZWxlbWVudCwgXCJzZWxlY3RlZFwiKSk7XHJcblxyXG4gICAgICAgIGFkZENsYXNzKG9wdGlvbkVsLCBcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFtvcHRpb25dO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9yZW5kZXJTZWxlY3RlZEl0ZW1zKCk7XHJcblxyXG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdFZhbHVlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgY29uc3Qgc2VsZWN0ID0gdGhpcy5lbDtcclxuICAgIGxldCBub1NlbGVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dCB0eXBlXHJcbiAgICBpZiAoc2VsZWN0Lm11bHRpcGxlKSB7XHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFZhbHVlIGV4cGVjdHMgYW4gYXJyYXkgZm9yIG11bHRpcGxlIHNlbGVjdCBlbGVtZW50cycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YWx1ZSA9IHZhbHVlLm1hcChTdHJpbmcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRWYWx1ZSBleHBlY3RzIGEgc2luZ2xlIHZhbHVlIGZvciBub24tbXVsdGlwbGUgc2VsZWN0IGVsZW1lbnRzJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc2V0VmFsdWUgZXhwZWN0cyBhIHN0cmluZyBvciBudW1iZXIgZm9yIG5vbi1tdWx0aXBsZSBzZWxlY3QgZWxlbWVudHMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoY29uc3Qgb3B0IG9mIHNlbGVjdC5vcHRpb25zKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHNlbGVjdC5tdWx0aXBsZVxyXG4gICAgICAgID8gdmFsdWUuaW5jbHVkZXMob3B0LnZhbHVlKVxyXG4gICAgICAgICAgPyBvcHQudmFsdWVcclxuICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgIDogdmFsdWU7XHJcbiAgICAgIGlmIChvcHQudmFsdWUgPT09IGN1cnJlbnRWYWx1ZSAmJiAhb3B0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgaWYgKG5vU2VsZWN0ZWQpIHtcclxuICAgICAgICAgIHNlbGVjdC52YWx1ZSA9IGN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAgIG5vU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9wdC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCB0cnVlKTtcclxuICAgICAgICBvcHQuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9wdC5yZW1vdmVBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICBvcHQuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChub1NlbGVjdGVkICYmICFzZWxlY3QubXVsdGlwbGUgJiYgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHNlbGVjdC5vcHRpb25zWzBdLnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIHRydWUpO1xyXG4gICAgICBzZWxlY3Qub3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIHNlbGVjdC52YWx1ZSA9IHNlbGVjdC5vcHRpb25zWzBdLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBnZXRWYWx1ZSgpIHtcclxuICAgIGNvbnN0IHNlbGVjdCA9IHRoaXMuZWw7XHJcbiAgICBpZiAoIXNlbGVjdC5tdWx0aXBsZSkgcmV0dXJuIHNlbGVjdC52YWx1ZTtcclxuXHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShzZWxlY3Qub3B0aW9ucylcclxuICAgICAgLmZpbHRlcigob3B0KSA9PiBvcHQuc2VsZWN0ZWQpXHJcbiAgICAgIC5tYXAoKG9wdCkgPT4gb3B0LnZhbHVlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVNlbGVjdFZhbHVlKCkge1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5lbC52YWx1ZSA9IHRoaXMuc2VsZWN0ZWRPcHRpb25zWzBdLmRhdGEudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0ID0gdGhpcy5lbDtcclxuXHJcbiAgICAvLyBGSXJzdCBtYXJrIGFsbCBvcHRpb25zIGFzIG5vdCBzZWxlY3RlZFxyXG4gICAgc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvcHRpb25cIikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZShcInNlbGVjdGVkXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTWFyayB0aGUgc2VsZWN0ZWQgb3B0aW9ucyBhcyBzZWxlY3RlZCBpbiB0aGUgc2VsZWN0IGVsZW1lbnRcclxuICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZvckVhY2goIGl0ZW0gPT4ge1xyXG4gICAgICBsZXQgZWwgPSBzZWxlY3QucXVlcnlTZWxlY3Rvcihgb3B0aW9uW3ZhbHVlPVwiJHtpdGVtLmRhdGEudmFsdWV9XCJdYCk7XHJcblxyXG4gICAgICBpZiAoZWwpe1xyXG4gICAgICAgIC8vQ2hhbmdlIGl0LCBjYXVzZSBpdCB3b3JrcyBtb3JlIGNvcnJlY3RseS5cclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCBcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgIGVsLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdHJpZ2dlckNoYW5nZSh0aGlzLmVsKTtcclxuICB9XHJcblxyXG4gIHJlc2V0U2VsZWN0VmFsdWUoKSB7XHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLmVsO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBzZWxlY3QucXVlcnlTZWxlY3Rvcihgb3B0aW9uW3ZhbHVlPVwiJHtpdGVtLmRhdGEudmFsdWV9XCJdYCk7XHJcbiAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgIGVsLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLmVsLnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgIH1cclxuXHJcbiAgICB0cmlnZ2VyQ2hhbmdlKHRoaXMuZWwpO1xyXG4gIH1cclxuXHJcbiAgX29uQ2xpY2tlZE91dHNpZGUoZSkge1xyXG4gICAgaWYgKCF0aGlzLmRyb3Bkb3duLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmRyb3Bkb3duLCBcIm9wZW5cIik7XHJcbiAgICAgIHRyaWdnZXJNb2RhbENsb3NlKHRoaXMuZWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX29uS2V5UHJlc3NlZChlKSB7XHJcbiAgICBjb25zdCBmb2N1c2VkT3B0aW9uID0gdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKFwiLmZvY3VzXCIpO1xyXG4gICAgY29uc3QgaXNPcGVuICAgICAgICA9IGhhc0NsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKTtcclxuXHJcbiAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICBpc09wZW4gPyB0cmlnZ2VyQ2xpY2soZm9jdXNlZE9wdGlvbikgOiB0cmlnZ2VyQ2xpY2sodGhpcy5kcm9wZG93bik7XHJcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDApIHtcclxuICAgICAgaWYgKCFpc09wZW4pIHtcclxuICAgICAgICB0cmlnZ2VyQ2xpY2sodGhpcy5kcm9wZG93bik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX2ZpbmROZXh0KGZvY3VzZWRPcHRpb24pO1xyXG4gICAgICAgIGlmIChuZXh0KSB7XHJcbiAgICAgICAgICBpZiAoZm9jdXNlZE9wdGlvbikgcmVtb3ZlQ2xhc3MoZm9jdXNlZE9wdGlvbiwgXCJmb2N1c1wiKTtcclxuICAgICAgICAgIGFkZENsYXNzKG5leHQsIFwiZm9jdXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOCkge1xyXG4gICAgICBpZiAoIWlzT3Blbikge1xyXG4gICAgICAgIHRyaWdnZXJDbGljayh0aGlzLmRyb3Bkb3duKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy5fZmluZFByZXYoZm9jdXNlZE9wdGlvbik7XHJcbiAgICAgICAgaWYgKHByZXYpIHtcclxuICAgICAgICAgIGlmIChmb2N1c2VkT3B0aW9uKSByZW1vdmVDbGFzcyhmb2N1c2VkT3B0aW9uLCBcImZvY3VzXCIpO1xyXG4gICAgICAgICAgYWRkQ2xhc3MocHJldiwgXCJmb2N1c1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDI3ICYmIGlzT3Blbikge1xyXG4gICAgICB0cmlnZ2VyQ2xpY2sodGhpcy5kcm9wZG93bik7XHJcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzIgJiYgaXNPcGVuKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb2N1cyA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcignLmZvY3VzJyk7XHJcbiAgICBpZiAoZm9jdXMpIHtcclxuICAgICAgZm9jdXMuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ2NlbnRlcicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2ZpbmROZXh0KGVsKSB7XHJcbiAgICBsZXQgbmV4dEVsID0gZWxcclxuICAgICAgPyBlbC5uZXh0RWxlbWVudFNpYmxpbmdcclxuICAgICAgOiB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIubGlzdCAub3B0aW9uXCIpO1xyXG4gICAgd2hpbGUgKG5leHRFbCkge1xyXG4gICAgICBpZiAoIWhhc0NsYXNzKG5leHRFbCwgXCJkaXNhYmxlZFwiKSAmJiBuZXh0RWwuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCIpXHJcbiAgICAgICAgcmV0dXJuIG5leHRFbDtcclxuICAgICAgbmV4dEVsID0gbmV4dEVsLm5leHRFbGVtZW50U2libGluZztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIF9maW5kUHJldihlbCkge1xyXG4gICAgbGV0IHByZXZFbCA9IGVsXHJcbiAgICAgID8gZWwucHJldmlvdXNFbGVtZW50U2libGluZ1xyXG4gICAgICA6IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5saXN0IC5vcHRpb246bGFzdC1jaGlsZFwiKTtcclxuICAgIHdoaWxlIChwcmV2RWwpIHtcclxuICAgICAgaWYgKCFoYXNDbGFzcyhwcmV2RWwsIFwiZGlzYWJsZWRcIikgJiYgcHJldkVsLnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiKVxyXG4gICAgICAgIHJldHVybiBwcmV2RWw7XHJcbiAgICAgIHByZXZFbCA9IHByZXZFbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgX29uU2VhcmNoQ2hhbmdlZChlKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gZS50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBpZiAodGV4dCA9PT0gXCJcIikge1xyXG4gICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoaXRlbSkgPT4gKGl0ZW0uZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJcIikpO1xyXG4gICAgfSBlbHNlIGlmIChoYXNDbGFzcyh0aGlzLmRyb3Bkb3duLCBcIm9wZW5cIikpIHtcclxuICAgICAgY29uc3QgbWF0Y2hSZWcgPSBuZXcgUmVnRXhwKHRleHQpO1xyXG4gICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gbWF0Y2hSZWcudGVzdChpdGVtLmRhdGEudGV4dC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgPyBcIlwiXHJcbiAgICAgICAgICA6IFwibm9uZVwiO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRyb3Bkb3duXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvY3VzXCIpXHJcbiAgICAgIC5mb3JFYWNoKChpdGVtKSA9PiByZW1vdmVDbGFzcyhpdGVtLCBcImZvY3VzXCIpKTtcclxuXHJcbiAgICBjb25zdCBmaXJzdEVsID0gdGhpcy5fZmluZE5leHQobnVsbCk7XHJcblxyXG4gICAgaWYgKGZpcnN0RWwpIGFkZENsYXNzKGZpcnN0RWwsIFwiZm9jdXNcIik7XHJcbiAgfVxyXG5cclxuICBfdHJpZ2dlclZhbGlkYXRpb25NZXNzYWdlKHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09PSBcImludmFsaWRcIikge1xyXG4gICAgICBhZGRDbGFzcyh0aGlzLmRyb3Bkb3duLCBcImludmFsaWRcIik7XHJcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZHJvcGRvd24sIFwidmFsaWRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZGRDbGFzcyh0aGlzLmRyb3Bkb3duLCBcInZhbGlkXCIpO1xyXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmRyb3Bkb3duLCBcImludmFsaWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbXVsdGlwbGVMaXN0QWRkKG9wdGlvbikge1xyXG4gIFxyXG4gICAgaWYob3B0aW9uLmRhdGEuZGlzYWJsZWQgfHwgb3B0aW9uLmRhdGEudmFsdWUgPT0gXCJcIiB8fCAhb3B0aW9uLmF0dHJpYnV0ZXMuc2VsZWN0ZWQpe1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5zZWxlY3Rpb25MaXN0ID09IG51bGwpe1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbkxpc3RcdCBcdFx0PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbkxpc3QuY2xhc3NMaXN0LmFkZCgnc2VsZWN0LXNlbGVjdGlvbi1saXN0Jyk7XHJcblxyXG4gICAgICB0aGlzLmVsLmFmdGVyKHRoaXMuc2VsZWN0aW9uTGlzdCk7XHJcbiAgICB9ZWxzZSBpZih0aGlzLnNlbGVjdGlvbkxpc3QucXVlcnlTZWxlY3RvcihgW2RhdGEtdmFsdWU9XCIke29wdGlvbi5kYXRhLnZhbHVlfVwiXWApICE9IG51bGwpe1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxpXHQgXHRcdD0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgIGxpLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdC1zZWxlY3Rpb24nKTtcclxuXHJcbiAgICBsaS5kYXRhc2V0LnZhbHVlID0gb3B0aW9uLmRhdGEudmFsdWU7XHJcblxyXG4gICAgbGV0IGh0bWxcdCAgPSBgXHJcbiAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic21hbGwgcmVtb3ZlLXNlbGVjdC1zZWxlY3Rpb25cIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz0ncmVtb3ZlLXNlbGVjdC1zZWxlY3Rpb24nPsOXPC9zcGFuPlxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgIGA7XHJcblxyXG4gICAgLy8gQWRkXHJcbiAgICBodG1sICAgKz0gYDxzcGFuIGNsYXNzPSdzZWxlY3RlZC1uYW1lJz4ke29wdGlvbi5kYXRhLnRleHR9PC9zcGFuPmBcclxuXHJcbiAgICBsaS5pbm5lckhUTUxcdD0gaHRtbDtcclxuXHJcbiAgICB0aGlzLnNlbGVjdGlvbkxpc3QuYXBwZW5kQ2hpbGQobGkpO1xyXG5cclxuICAgIGxpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUtc2VsZWN0LXNlbGVjdGlvbicpLmZvckVhY2goZWw9PiBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fbXVsdGlwbGVMaXN0UmVtb3ZlLmJpbmQodGhpcykpKTtcclxuICB9XHJcblxyXG4gIF9tdWx0aXBsZUxpc3RSZW1vdmUodGFyZ2V0KSB7XHJcblxyXG4gICAgaWYodGFyZ2V0LnRhcmdldCAhPSBudWxsKXtcclxuICAgICAgdGFyZ2V0ICA9IHRhcmdldC50YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2codGFyZ2V0KTtcclxuXHJcbiAgICAvLyBDbG9zZSBidXR0b24gY2xpY2tlZFxyXG4gICAgaWYodGFyZ2V0Lm1hdGNoZXMoJy5yZW1vdmUtc2VsZWN0LXNlbGVjdGlvbicpKXtcclxuICAgICAgdGFyZ2V0LmNsb3Nlc3QoJ2xpLnNlbGVjdC1zZWxlY3Rpb24nKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgIGxldCBwYXJlbnQgID0gdGFyZ2V0LmNsb3Nlc3QoJ2xpLnNlbGVjdC1zZWxlY3Rpb24nKTtcclxuXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICBpZihvcHRpb24uZGF0YS52YWx1ZSA9PSBwYXJlbnQuZGF0YXNldC52YWx1ZSl7XHJcbiAgICAgICAgICByZW1vdmVDbGFzcyhvcHRpb24uZWxlbWVudCwgXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnNwbGljZSh0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmRleE9mKG9wdGlvbiksIDEpO1xyXG4gICAgICAgICAgdmFyIG9wdCA9IHRoaXMuZWwucXVlcnlTZWxlY3Rvcihgb3B0aW9uW3ZhbHVlPVwiJHtvcHRpb24uZGF0YS52YWx1ZX1cIl1gKTtcclxuICAgICAgICAgIG9wdC5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICBvcHQuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlclNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgfSk7XHJcbiAgICBcclxuICAgIC8vIERlc2VsZWN0ZWQgaW4gZHJvcGRvd24gb3IgRGVzZWxlY3RlZCBmcm9tIG9yaWdpbmFsIHNlbGVjdFxyXG4gICAgfWVsc2V7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRhcmdldCk7XHJcbiAgICAgIGlmKHRhcmdldC5lbGVtZW50ICE9IHVuZGVmaW5lZCAmJiB0YXJnZXQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHBhcmVudCAgPSB0aGlzLmVsLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgdWwgICAgICA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LXNlbGVjdGlvbi1saXN0Jyk7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgb3B0aW9uICA9IEFycmF5LmZyb20odWwucXVlcnlTZWxlY3RvckFsbCgnbGknKSkuZmluZChlbCA9PiBlbC50ZXh0Q29udGVudCA9PT0gdGFyZ2V0LmlubmVyVGV4dCk7XHJcblxyXG4gICAgICBpZih1bCAhPSBudWxsICYmIG9wdGlvbiAhPSBudWxsKXtcclxuICAgICAgICBvcHRpb24ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5pY2VTZWxlY3Q7XHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kKGVsLCBvcHRpb25zKSB7XHJcbiAgcmV0dXJuIG5ldyBOaWNlU2VsZWN0KGVsLCBvcHRpb25zKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///462\\n\\n}')}},__webpack_require__={d:(l,c)=>{for(var t in c)__webpack_require__.o(c,t)&&!__webpack_require__.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:c[t]})},o:(l,c)=>Object.prototype.hasOwnProperty.call(l,c),r:l=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(l,\"__esModule\",{value:!0})}},__webpack_exports__={};return __webpack_modules__[462](0,__webpack_exports__,__webpack_require__),__webpack_exports__})());","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.NiceSelect=t():e.NiceSelect=t()}(self,()=>(()=>{\"use strict\";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},t={};e.r(t),e.d(t,{bind:()=>u,default:()=>p});const s=(e,t,s={})=>{let i;i=\"click\"===t?MouseEvent:\"change\"===t?Event:t.includes(\"focus\")?FocusEvent:UIEvent;const l=new i(t,{bubbles:!0,cancelable:!1,...s});e.dispatchEvent(l)},i=e=>s(e,\"click\"),l=e=>s(e,\"change\"),n=e=>s(e,\"modalclose\"),o=(e,t)=>void 0!==e[t]?e[t]:e.getAttribute(t),d=(e,t)=>e?.classList.contains(t),r=(e,t)=>e?.classList.add(t),a=(e,t)=>e?.classList.remove(t),c={data:null,searchable:!0,showSelectedItems:!0,placeholder:\"Select an option\",searchtext:\"Search\",selectedtext:\"selected\",hideSelect:!0};class h{constructor(e,t={}){if(!e)throw new Error(\"No element provided to NiceSelect\");if(!(e instanceof Element))throw new Error(\"Invalid element provided to NiceSelect - must be a valid DOM element\");this.el=e,this.el._niceSelect=this,this.config={...c,...t},this.data=this.config.data,this.selectedOptions=[],this.placeholder=o(this.el,\"placeholder\")||this.config.placeholder,this.searchtext=o(this.el,\"searchtext\")||this.config.searchtext,this.selectedtext=o(this.el,\"selectedtext\")||this.config.selectedtext,this.dropdown=null,this.selectionList=null,this.multiple=o(this.el,\"multiple\"),this.disabled=o(this.el,\"disabled\"),this.create(),this.bindElementEvents()}create(e=!0){this.data?this.processData(this.data):this.extractData(e),this.el.classList.remove(\"hidden-select\"),this.renderDropdown(),this.config.hideSelect&&this.el.classList.add(\"hidden-select\"),this.bindDropdownEvents()}processData(e){this.options=e.map(e=>({data:e,attributes:{selected:!!e.selected,disabled:!!e.disabled,optgroup:\"optgroup\"===e.value}}))}extractData(e){const t=Array.from(this.el.querySelectorAll(\"option,optgroup\")),s=[],i=[];this.data=t.map(t=>{let l,n=t.selected;e&&t.selected&&!t.defaultSelected&&(n=!1),l=\"OPTGROUP\"===t.tagName?{text:t.label,value:\"optgroup\"}:{text:t.dataset.display??t.innerText,value:t.value,extra:t.dataset.extra,selected:n,disabled:t.disabled};const o={selected:n,disabled:t.disabled,optgroup:\"OPTGROUP\"===t.tagName},d={data:l,attributes:o,element:null};return s.push(d),o.selected&&i.push(d),l}),this.options=s,this.selectedOptions=i}renderDropdown(){const e=[\"nice-select\",o(this.el,\"class\")||\"\",this.disabled?\"disabled\":\"\",this.multiple?\"has-multiple\":\"\"].filter(Boolean),t=this.config.searchable?`\\n      <div class=\"nice-select-search-box\">\\n        <input type=\"text\" class=\"nice-select-search\" placeholder=\"${this.searchtext}...\" title=\"search\"/>\\n      </div>\\n    `:\"\",s=`\\n      <div class=\"${e.join(\" \")}\" tabindex=\"${this.disabled?\"\":0}\">\\n        <span class=\"${this.multiple?\"multiple-options\":\"current\"}\"></span>\\n        <div class=\"nice-select-dropdown\">\\n          ${t}\\n          <ul class=\"list\"></ul>\\n        </div>\\n      </div>\\n    `;this.el.insertAdjacentHTML(\"afterend\",s),this.dropdown=this.el.nextElementSibling,this._renderSelectedItems(),this._renderItems()}_renderSelectedItems(){if(this.multiple){let e=\"\";\"auto\"===window.getComputedStyle(this.dropdown).width||this.selectedOptions.length<2?(this.selectedOptions.forEach((t,s,i)=>{let l=t.data.text;s!==i.length-1&&(l+=\", \"),e+=`<span class=\"current\">${l}</span>`}),e=e||this.placeholder):e=`${this.selectedOptions.length} ${this.selectedtext}`,this.dropdown.querySelector(\".multiple-options\").innerHTML=e}else{const e=this.selectedOptions.length>0?this.selectedOptions[0].data.text:this.placeholder;this.dropdown.querySelector(\".current\").innerHTML=e}}_renderItems(){const e=this.dropdown.querySelector(\"ul\");this.options.forEach(t=>{this.multiple&&this.config.showSelectedItems&&this._multipleListAdd(t),e.appendChild(this._renderItem(t))})}_renderItem(e){const t=document.createElement(\"li\");if(t.innerHTML=e.data.text,void 0!==e.data.extra&&t.appendChild(this._renderItemExtra(e.data.extra)),e.attributes.optgroup)r(t,\"optgroup\");else{t.setAttribute(\"data-value\",e.data.value);const s=[\"option\"];e.attributes.selected&&s.push(\"selected\"),e.attributes.disabled&&s.push(\"disabled\"),t.classList.add(...s),t.addEventListener(\"click\",t=>this._onDropdownItemClicked(e,t))}return e.element=t,t}_renderItemExtra(e){const t=document.createElement(\"span\");return t.innerHTML=e,r(t,\"extra\"),t}update(e=\"\"){let t=this;\"\"!=e&&(t=e.target._niceSelect),t.syncDropdown()}disable(){this.disabled||(this.disabled=!0,r(this.dropdown,\"disabled\"))}enable(){this.disabled&&(this.disabled=!1,a(this.dropdown,\"disabled\"))}clear(){this.resetSelectValue(),this.selectedOptions=[],this._renderSelectedItems(),this.update(),l(this.el)}destroy(){this.selectionList&&this.removeSelectionList(),this.dropdown&&(this.dropdown.remove(),this.el.classList.remove(\"hidden-select\"))}focus(e=\"\"){var t;if(d(this.dropdown,\"open\")?this.multiple?e===this.dropdown.querySelector(\".multiple-options\")&&(a(this.dropdown,\"open\"),n(this.el)):(a(this.dropdown,\"open\"),n(this.el)):(r(this.dropdown,\"open\"),t=this.el,s(t,\"modalopen\")),d(this.dropdown,\"open\")){const e=this.dropdown.querySelector(\".nice-select-search\");e&&(e.value=\"\",e.focus());const t=this.dropdown.querySelector(\".focus\");t&&a(t,\"focus\");const s=this.dropdown.querySelector(\".selected\");s&&r(s,\"focus\"),this.dropdown.querySelectorAll(\"ul li\").forEach(e=>e.style.display=\"\")}else this.dropdown.focus()}bindElementEvents(){this.el.addEventListener(\"invalid\",()=>this._triggerValidationMessage(\"invalid\")),window.addEventListener(\"click\",e=>this._onClickedOutside(e)),this.el.addEventListener(\"change\",this.update)}bindDropdownEvents(){this.dropdown.addEventListener(\"click\",e=>this._onClicked(e)),this.dropdown.addEventListener(\"keydown\",e=>this._onKeyPressed(e)),this.dropdown.addEventListener(\"focusin\",()=>{return e=this.el,s(e,\"focusin\");var e}),this.dropdown.addEventListener(\"focusout\",()=>{return e=this.el,s(e,\"focusout\");var e}),this.config.searchable&&this._bindSearchEvent()}_bindSearchEvent(){const e=this.dropdown.querySelector(\".nice-select-search\");e&&(e.addEventListener(\"click\",e=>e.stopPropagation()),e.addEventListener(\"input\",e=>this._onSearchChanged(e)))}_onClicked(e){e.preventDefault(),this.focus(e.target)}_onDropdownItemClicked(e,t){const s=t.target;if(!d(s,\"disabled\")){if(this.multiple){let t;d(s,\"selected\")?(t=!1,a(s,\"selected\"),this.selectedOptions=this.selectedOptions.filter(t=>t.data!==e.data)):(t=!0,r(s,\"selected\"),this.selectedOptions.push(e)),e.data.selected=t,e.attributes.selected=t}else{this.dropdown.querySelectorAll(\"li.selected\").forEach(e=>a(e,\"selected\")),r(s,\"selected\"),this.selectedOptions=[e];let t=this.options.find(e=>e.attributes.selected);t&&(t.data.selected=!1,t.attributes.selected=!1),e.data.selected=!0,e.attributes.selected=!0}this._renderSelectedItems(),this.syncSelectValue(),this.syncSelectionList()}}syncSelectValue(){const e=this.el;this.selectedOptions.length>0?e.value=this.selectedOptions[0].data.value:(e.value=\"\",e.selectedIndex=-1),this.options.forEach(t=>{let s=Array.from(e.options).find(e=>e.textContent===t.data.text);null==s&&(s=Array.from(e.options).find(e=>e.textContent===t.data.value)),t.attributes.selected?s.selected=!0:s.selected=!1}),e.removeEventListener(\"change\",this.update),l(e),e.addEventListener(\"change\",this.update)}resetSelectValue(){if(this.multiple){const e=this.el;this.selectedOptions.forEach(t=>{const s=e.querySelector(`option[value=\"${t.data.value}\"]`);s&&(s.selected=!1)})}else this.selectedOptions.length>0&&(this.el.selectedIndex=-1);l(this.el)}syncDropdown(){if(this.dropdown){const e=d(this.dropdown,\"open\");this.removeSelectionList(),this.dropdown.remove(),this.data=null,this.create(!1),e&&i(this.dropdown)}o(this.el,\"disabled\")?this.disable():this.enable()}syncSelectionList(){this.config.showSelectedItems&&(this.removeSelectionList(),this.selectedOptions.forEach(e=>{this._multipleListAdd(e)}))}_onClickedOutside(e){this.dropdown.contains(e.target)||(a(this.dropdown,\"open\"),n(this.el))}_onKeyPressed(e){const t=this.dropdown.querySelector(\".focus\"),s=d(this.dropdown,\"open\");if(13===e.keyCode)i(s?t:this.dropdown);else if(40===e.keyCode){if(s){const e=this._findNext(t);e&&(t&&a(t,\"focus\"),r(e,\"focus\"))}else i(this.dropdown);e.preventDefault()}else if(38===e.keyCode){if(s){const e=this._findPrev(t);e&&(t&&a(t,\"focus\"),r(e,\"focus\"))}else i(this.dropdown);e.preventDefault()}else if(27===e.keyCode&&s)i(this.dropdown);else if(32===e.keyCode&&s)return!1;const l=this.dropdown.querySelector(\".focus\");return l&&l.scrollIntoView({block:\"center\"}),!1}_findNext(e){let t=e?e.nextElementSibling:this.dropdown.querySelector(\".list .option\");for(;t;){if(!d(t,\"disabled\")&&\"none\"!==t.style.display)return t;t=t.nextElementSibling}return null}_findPrev(e){let t=e?e.previousElementSibling:this.dropdown.querySelector(\".list .option:last-child\");for(;t;){if(!d(t,\"disabled\")&&\"none\"!==t.style.display)return t;t=t.previousElementSibling}return null}_onSearchChanged(e){const t=e.target.value.toLowerCase();if(\"\"===t)this.options.forEach(e=>e.element.style.display=\"\");else if(d(this.dropdown,\"open\")){const e=new RegExp(t);this.options.forEach(t=>{t.element.style.display=e.test(t.data.text.toLowerCase())?\"\":\"none\"})}this.dropdown.querySelectorAll(\".focus\").forEach(e=>a(e,\"focus\"));const s=this._findNext(null);s&&r(s,\"focus\")}_triggerValidationMessage(e){\"invalid\"===e?(r(this.dropdown,\"invalid\"),a(this.dropdown,\"valid\")):(r(this.dropdown,\"valid\"),a(this.dropdown,\"invalid\"))}removeSelectionList(){null!=this.selectionList&&(this.selectionList.remove(),this.selectionList=null)}updateDropdownOption(){}_multipleListAdd(e){if(!this.multiple||e.data.disabled||\"\"==e.data.value||!e.attributes.selected)return;if(null==this.selectionList)this.selectionList=document.createElement(\"ul\"),this.selectionList.classList.add(\"select-selection-list\"),this.el.after(this.selectionList);else if(null!=this.selectionList.querySelector(`[data-value=\"${e.data.value}\"]`))return;let t=document.createElement(\"li\");t.classList.add(\"select-selection\"),t.dataset.value=e.data.value;let s='\\n      <button type=\"button\" class=\"small remove-select-selection\">\\n        <span class=\\'remove-select-selection\\'></span>\\n      </button>\\n    ';s+=`<span class='selected-name'>${e.data.text}</span>`,t.innerHTML=s,this.selectionList.appendChild(t),t.querySelectorAll(\".remove-select-selection\").forEach(e=>e.addEventListener(\"click\",this._multipleListRemove.bind(this)))}_multipleListRemove(e){if(null==this.selectionList)return;if(null!=e.target&&(e=e.target),null==e.matches||!e.matches(\".remove-select-selection\"))return;let t=e.closest(\"li.select-selection\"),s=this.options.find(e=>e.data.value===t.dataset.value).element;s&&s.matches(\".selected\")&&s.click()}}const p=h;function u(e,t){return new h(e,t)}return t})());\n//# sourceMappingURL=nice-select2.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export let scripts;\r\n\r\nexport let afterScriptsLoaded\t= function (attachTo){\r\n    // load \r\n    if(typeof(tinymce) != 'undefined'){\r\n        tinymce.remove();\r\n\r\n        // Activate tinyMce's again\r\n        document.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n        });\r\n    }    \r\n\r\n    // invoke dom content loaded events\r\n    window.document.dispatchEvent(new Event(\"DOMContentLoaded\", {\r\n        bubbles: true,\r\n        cancelable: true\r\n    }));\r\n\r\n    // Somehow the visual/text switch does not work, manually fix it\r\n    document.querySelectorAll('.wp-switch-editor').forEach(el=>el.addEventListener('click', ev=>{\r\n        let area    = el.closest('.wp-editor-wrap').querySelector('.wp-editor-area');\r\n        let panel   =  el.closest('.wp-editor-wrap').querySelector('.mce-panel');\r\n        area.style.visibility='unset';\r\n        if(ev.target.matches('.switch-tmce')){\r\n           panel.style.display='block';\r\n            area.style.display='none';\r\n        }else{\r\n            panel.style.display='none';\r\n            area.style.display='block';\r\n        }\r\n    }));\r\n\r\n    //add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceselect == undefined){\r\n\t\t    NiceSelect.bind(select, {searchable: true});\r\n        }\r\n\t});\r\n\r\n    const ev = new Event('scriptsloaded');\r\n\tattachTo.dispatchEvent(ev);\r\n}\r\n\r\nexport let addStyles    = function (response, attachTo){\r\n    scripts     = [];\r\n    let temp    = document.createElement('div');\r\n\r\n    // parse inline scripts\r\n    temp.innerHTML =  response.html;\r\n    scripts = Array.prototype.slice.call(temp.getElementsByTagName('script'));\r\n\r\n    if(response.js){\r\n        temp.innerHTML =  response.js;\r\n        scripts\t= [...temp.children].concat(scripts);\r\n        addScripts(attachTo);\r\n    }\r\n\r\n    if(response.css){\r\n        temp.innerHTML = response.css;\r\n        [...temp.children].forEach(el => {\r\n            document.head.appendChild(el);\r\n        });\r\n    }\r\n}\r\n\r\nexport let addScripts\t= function (attachTo) {\r\n    if(attachTo == undefined){\r\n        return;\r\n    }\r\n\r\n    if(scripts.length == 0){\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n    let el\t= scripts.shift();\r\n\r\n    if(el == undefined){\r\n        afterScriptsLoaded(attachTo);\r\n        return;\r\n    }\r\n\r\n    // only add if needed\r\n    if(el.tagName == 'SCRIPT' && document.getElementById(el.id) == null){\r\n        var s = document.createElement('script');\r\n\r\n        if(el.type == ''){\r\n            s.type\t= 'text/javascript'; \r\n        }else{\r\n            s.type\t= el.type;\r\n        }\r\n\r\n        if(el.src != ''){\r\n            s.src \t= el.src;\r\n        }else{\r\n            s.innerHTML\t= el.innerHTML;\r\n        }\r\n        \r\n        s.id\t= el.id;\r\n        \r\n        try{\r\n            document.head.appendChild(s);\r\n        }catch (error) {\r\n            console.error(error);\r\n        }\r\n\r\n        if(scripts.length > 0){\r\n            if(el.src != ''){\r\n                s.addEventListener('load', addScripts.bind( null, attachTo ) );\r\n            }else{\r\n                addScripts(attachTo);\r\n            }\r\n        }else{\r\n            if(el.src != ''){\r\n                s.addEventListener('load', afterScriptsLoaded.bind( null, attachTo));\r\n            }else{\r\n                afterScriptsLoaded(attachTo);\r\n            }\t\t\t\r\n        }\r\n    }else if(scripts.length > 0){\r\n        // get next script\r\n        addScripts(attachTo);\r\n    }else{\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n}\r\n\r\nexport function displayMessage(message, icon, autoclose=false, no_ok=false, timer=1500){\r\n\tif(message == undefined){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tif(typeof(Swal) != 'undefined'){\r\n\t\tvar options = {\r\n\t\t\ticon: icon,\r\n\t\t\ttitle: message.toString().trim(),\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\tcancelButtonColor: 'Crimson'\r\n\t\t};\r\n\r\n\t\tif(no_ok){\r\n\t\t\toptions['showConfirmButton'] = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(typeof(callback) == 'function'){\r\n\t\t\toptions['didClose'] = () => callback();\r\n\t\t}\r\n\t\t\r\n\t\tif(autoclose){\r\n\t\t\toptions['timer'] = timer;\r\n\t\t}\r\n\r\n        if(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\t\t\r\n\t\treturn Swal.fire(options);\r\n\t}else{\r\n\t\treturn alert(message.trim());\r\n\t}\r\n}\r\n\r\nexport function showLoader(element, replace=true, message=''){\r\n\tif(element == null){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tlet wrapper\t= document.createElement(\"DIV\");\r\n\twrapper.setAttribute('class','loaderwrapper');\r\n\tif(message != ''){\r\n\t\twrapper.innerHTML\t= message;\r\n\t}\r\n\r\n\tlet loader\t= document.createElement(\"IMG\");\r\n\tloader.setAttribute('class','loadergif');\r\n\tloader.setAttribute(\"src\", sim.loadingGif);\r\n\tloader.style[\"height\"]= \"30px\";\r\n\r\n\twrapper.insertAdjacentElement('beforeEnd', loader);\r\n\tif(replace){\r\n\t\telement.parentNode.replaceChild(wrapper, element);\r\n\t}else{\r\n        let el  = element.nextElementSibling;\r\n        if(el == null){\r\n            element.parentNode.insertAdjacentElement('beforeEnd', wrapper);\r\n        }else{\r\n            element.parentNode.insertBefore(wrapper, el);\r\n        }\r\n\t}\r\n\r\n\treturn wrapper;\r\n}\r\n\r\n//Check if on mobile\r\nexport function isMobileDevice() {\r\n    let check = false;\r\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\r\n    return check;\r\n}","console.log(\"Main.js loaded\");\r\n\r\nimport 'nice-select2';\r\nimport {displayMessage, showLoader, isMobileDevice, } from './imports.js';\r\nexport  {displayMessage, showLoader, isMobileDevice};\r\n\r\nexport function changeUrl(target, secondTab=''){\r\n\tlet newParam\t= target.dataset.param_val;\r\n\tlet hash\t\t= target.dataset.hash;\r\n\tconst url \t\t= new URL(window.location);\r\n\r\n\t//Change the url params\r\n\tif(target.closest('.tabcontent') == null || target.parentNode.classList.contains('modal-content')){\r\n\t\t//Add query_arg if it is a main tab\r\n\t\turl.searchParams.set('main_tab', newParam);\r\n\t\turl.searchParams.delete('second_tab');\r\n\t}else{\r\n\t\turl.searchParams.set('second_tab', newParam);\r\n\t}\r\n\r\n\tif(secondTab != ''){\r\n\t\turl.searchParams.set('second_tab', secondTab);\r\n\t}\r\n\t\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tif(hash != null){\r\n\t\twindow.location.hash\t= hash;\r\n\t}else{\r\n\t\twindow.location.hash\t= '';\r\n\t}\r\n\r\n\t// switch tab when clicking on a change url link\r\n\tif(target.tagName == 'A'){\r\n\t\tswitchTab();\r\n\t}\r\n}\r\n\r\nfunction switchTab(event=null){\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\t\r\n\tlet mainTab \t= params.main_tab;\r\n\tlet lastTab\t\t= '';\r\n\r\n\tif(mainTab != null){\r\n\t\t//find the tab and display it\r\n\t\tdocument.querySelectorAll(`[data-param_val=\"${mainTab}\"]:not(.active)`).forEach(tabbutton=>{\r\n\t\t\t//only process non-modal tabs\r\n\t\t\tif(tabbutton.closest('.modal') == null){\r\n\t\t\t\tlet result\t= displayTab(tabbutton);\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tlastTab\t= result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlet secondTab = params.second_tab;\r\n\tif(secondTab != null){\r\n\t\t//find the tab and display it\r\n\t\tdocument.querySelectorAll(`[data-param_val=\"${secondTab}\"]:not(.active)`).forEach(tabbutton=>{\r\n\t\t\tdisplayTab(tabbutton);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function displayTab(tabButton){\r\n\r\n\t//remove all existing highlights\r\n\tdocument.querySelectorAll('.highlight').forEach(el=>el.classList.remove('highlight'));\r\n\r\n\tlet tab;\r\n\t// Get content area\r\n\tif(tabButton.dataset.target == undefined){\r\n\t\ttab = document.querySelector('#'+tabButton.dataset.param_val);\r\n\t}else{\r\n\t\ttab = tabButton.closest('div:not(.tablink-wrapper)').querySelector('#'+tabButton.dataset.target);\r\n\t}\r\n\t\r\n\tif(tab != null){\r\n\t\ttab.classList.remove('hidden');\r\n\r\n\t\tif(tabButton.tagName != 'A'){\r\n\t\t\t//Mark the other tabbuttons as inactive\r\n\t\t\ttabButton.parentNode.querySelectorAll(`:scope > .active:not(#${tabButton.id})`).forEach(child=>{\r\n\t\t\t\t//Make inactive\r\n\t\t\t\tchild.classList.remove(\"active\");\r\n\t\t\t\t\t\r\n\t\t\t\t//Hide the tab\r\n\t\t\t\tvar childTab\t= child.closest('div:not(.tablink-wrapper)').querySelector('#'+child.dataset.target);\r\n\t\t\t\tif(childTab == null){\r\n\t\t\t\t\tconsole.error('Tab to hide not found:');\r\n\t\t\t\t\tconsole.error(child.closest('div:not(.tablink-wrapper)'));\r\n\t\t\t\t\tconsole.error('#'+child.dataset.target);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tchildTab.classList.add('hidden');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Mark the tabbutton as active\r\n\t\t\ttabButton.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\t//scroll to field\r\n\t\tif (window.location.hash) {\r\n\t\t\tvar hash \t\t= window.location.hash.replace('#', '');\r\n\r\n\t\t\tvar hashField\t= tab.querySelector(`[name^=\"${hash}\"]`);\r\n\t\t\r\n\t\t\tif(hashField != null){\r\n\t\t\t\thashField.scrollIntoView({block: \"center\"});\r\n\r\n\t\t\t\tvar el\t\t\t= hashField.closest('.inputwrapper');\r\n\t\t\t\tif(el != null){\r\n\t\t\t\t\thashField.closest('.inputwrapper').classList.add('highlight');\r\n\t\t\t\t}\r\n\t\t\t\thashField.classList.add('highlight');\r\n\t\t\t\thashField.focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// position any tables on this tab, as they can only be positioned when visible\r\n\t\tif(typeof(SimTableFunctions) != 'undefined'){\r\n\t\t\tSimTableFunctions.positionTable();\r\n\t\t}\r\n\r\n\t\treturn tab;\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport function getRoute(target,lat,lon){\r\n\t//Leave the origin empty on a mobile device to use the current location\r\n\tif(isMobileDevice()){\r\n\t\tvar origin = '';\r\n\t}else{\r\n\t\tvar origin = '&origin='+sim.address;\r\n\t}\r\n\tvar url = 'https://www.google.com/maps/dir/?api=1&destination='+lat+','+lon+origin;\r\n\tvar win = window.open(url, '_blank');\r\n\twin.focus();\r\n}\r\n\r\nfunction bodyScrolling(type){\r\n\t//don't do anything on homepage\r\n\t//if(document.querySelector('body').classList.contains('home')) return;\r\n\t\r\n\tif(type == 'disable'){\r\n\t\t//disable scrolling of the body\r\n\t\tdocument.querySelector(\"body\").style.overflow = 'hidden';\r\n \t\tdocument.body.style.top\t\t\t= `0px`;\r\n\r\n\t\t//scroll to top\r\n\t\twindow.scrollTo(0, 0);\r\n\r\n \t\tvar menu = document.querySelector(\"#masthead\");\r\n\t\tmenu.style.overflowY\t= 'scroll';\r\n\t\tmenu.style.top\t\t\t= '0px';\r\n\t\tmenu.style.left\t\t\t= '0';\r\n\t\tmenu.style.right\t\t= '0';\r\n\t\tmenu.style.bottom\t\t= '0';\r\n\t\tmenu.style.position\t\t= 'absolute'; \r\n\r\n\t}else{\r\n\t\t//enable scrolling of the body\r\n\t\tdocument.querySelector(\"body\").style.overflow = '';\r\n\t\tdocument.body.style.top \t\t= '';\r\n\r\n\t\tvar menu = document.querySelector(\"#masthead\");\r\n\t\tmenu.style.overflowY\t= '';\r\n\t\tmenu.style.top\t\t\t= '';\r\n\t\tmenu.style.left\t\t\t= '';\r\n\t\tmenu.style.right\t\t= '';\r\n\t\tmenu.style.bottom\t\t= '';\r\n\t\tmenu.style.position\t\t= '';\r\n\t}\r\n}\r\n\r\nexport function showModal(modal){\r\n\tif(typeof(modal) == 'string'){\r\n\t\tmodal = document.getElementById(modal + \"_modal\");\r\n\t}\r\n\t\r\n\tif(modal != null){\r\n\t\t// Prevent main page scrolling\r\n\t\tdocument.body.style.top\t\t\t= `-${window.scrollY}px`;\r\n\t\tdocument.body.style.position \t= 'fixed';\r\n\t\tlet prim\t\t\t\t\t\t= document.getElementById('primary');\r\n\t\tif(prim != null){\r\n\t\t\tprim.style.zIndex\t\t\t= 99999;\r\n\t\t}\r\n\r\n\t\tmodal.classList.remove('hidden');\r\n\r\n\t\tmodal.style.display\t= 'block';\r\n\t}\t\r\n}\r\n\r\nexport function hideModals(){\r\n\tlet modals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif(modals.length != 0){\r\n\t\tmodals.forEach(modal=>{\r\n\t\t\tmodal.classList.add('hidden');\r\n\t\t\tmodal.style.removeProperty('display');\r\n\t\t\t\r\n\t\t\tconst event = new Event('modalclosed');\r\n\t\t\tmodal.dispatchEvent(event);\r\n\t\t});\r\n\r\n\t\t// Turn main page scrolling on again\r\n\t\tconst scrollY\t\t\t\t\t= document.body.style.top;\r\n\t\tdocument.body.style.position \t= '';\r\n\t\tdocument.body.style.top \t\t= '';\r\n\t\twindow.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n\t\tlet prim\t\t\t\t\t\t= document.getElementById('primary');\r\n\t\tif(prim != null){\r\n\t\t\tprim.style.zIndex\t\t\t= 1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//check internet\r\nasync function hasInternet(){\r\n\tif(location.href.includes('localhost')){\r\n\t\twindow['online'] = true;\r\n\t\treturn window['online'];\r\n\t}\r\n\r\n\tawait fetch(location.href).then((result) => {\r\n\t\twindow['online'] = true;\r\n\t}).catch(e => {\r\n\t\twindow['online'] = false;\r\n\t});\r\n\r\n\treturn window['online'];\r\n}\r\n\r\nexport async function waitForInternet(){\r\n\tvar internet\t= await hasInternet();\r\n\tif(!internet){\r\n\t\tdisplayMessage('You have no internet connection, waiting till internet is back...', 'warning', true, true, 5000);\r\n\r\n\t\twhile(!internet){\r\n\t\t\tif(window['online']){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tinternet\t= await hasInternet();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction positionSubSubMenus(){\r\n\tconst vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\r\n\r\n\tdocument.querySelectorAll('#primary-menu .sub-menu .sub-menu').forEach(el=>{\r\n\t\tel.style.left\t\t= '100%';\r\n\t\tel.parentNode.closest('ul').style.left\t= '100%';\r\n\r\n\t\t// Get parent right coordinate\r\n\t\tlet startPos\t= el.parentNode.getBoundingClientRect()['right'];\r\n\t\t\r\n\t\t// el with\r\n\t\tlet width\t= el.getBoundingClientRect()['width'];\r\n\r\n\t\t// move to left if not fitting on screen\r\n\t\tif(startPos + width > vw){\r\n\t\t\tel.style.right\t= '100%';\r\n\t\t\tel.style.left\t= 'unset';\r\n\t\t}else{\r\n\t\t\tel.style.removeProperty('left');\r\n\t\t}\r\n\r\n\t\t// Reset left\r\n\t\tel.parentNode.closest('ul').style.removeProperty('left');\r\n\t});\r\n}\r\n\r\n//Load after page load\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\t// remove any empty widgets\r\n\tdocument.querySelectorAll('.widget').forEach(w=>{\r\n\t\tif(w.innerHTML == ''){\r\n\t\t\tw.remove();\r\n\t\t}\r\n\t});\r\n\r\n\t//loop over all the tab buttons\r\n\tdocument.querySelectorAll('.tablink').forEach(function(tabButton){\r\n\t\t//Add the dataset if it does not exist yet.\r\n\t\tif(tabButton.dataset.param_val == undefined){\r\n\t\t\ttabButton.dataset.param_val = tabButton.textContent.replace(' ','_').toLowerCase();\r\n\t\t}\r\n\t})\r\n\r\n\t//check for tab actions\r\n\tswitchTab();\r\n\r\n\t//add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n\t\tif(select._niceselect  == undefined){\r\n\t\t\tNiceSelect.bind(select, {searchable: true});\r\n\t\t}\r\n\t});\r\n\r\n\t// hide mobile hidden\r\n\tif(isMobileDevice()){\r\n\t\tdocument.querySelectorAll('.hide-on-mobile:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\t}else{\r\n\t\tdocument.querySelectorAll('.hide-on-desktop:not(.hidden)').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t\tpositionSubSubMenus();\r\n\t}\r\n\r\n\t// Check for messages\r\n\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t});\r\n\r\n\tif(params.message != null){\r\n\t\tlet type = 'success';\r\n\r\n\t\tif(params.type != null){\r\n\t\t\ttype\t= params.type;\r\n\t\t}\r\n\t\tdisplayMessage(params.message, type);\r\n\t}\r\n});\r\n\r\n\r\n//Hide or show the clicked tab\r\nwindow.addEventListener(\"mousedown\", function(event) {\t\r\n\tvar target = event.target;\r\n\t\r\n\t//we clicked the menu\r\n\tif(target.closest('.menu-toggle') != null){\r\n\t\tevent.preventDefault();\r\n\t\tif(target.closest('.menu-toggle').getAttribute(\"aria-expanded\") == \"true\"){\r\n\t\t\tbodyScrolling('enable');\r\n\t\t}else{\r\n\t\t\tbodyScrolling('disable');\r\n\t\t}\r\n\t}\r\n\r\n\t//if clicked outside the menu, then close the menu\r\n\tif(\r\n\t\tdocument.querySelector('.menu-toggle') != null &&\r\n\t\tdocument.querySelector('.menu-toggle').getAttribute(\"aria-expanded\")==\"true\" &&\r\n\t\ttarget.closest('#site-navigation') == null && \r\n\t\ttarget.closest('#mobile-menu-control-wrapper') == null\r\n\t){\r\n\t\tdocument.querySelector('#mobile-menu-control-wrapper').classList.remove(\"toggled\");\r\n\t\tdocument.querySelector('.menu-toggle').setAttribute(\"aria-expanded\", 'false');\r\n\t\tdocument.querySelector('#site-navigation').classList.remove(\"toggled\");\r\n\t\tbodyScrolling('enable');\r\n\t}\r\n\r\n\t//Process the click on tab button\r\n\tif(target.matches(\".tablink\")){\r\n\t\tevent.preventDefault();\r\n\t\t//change the url in browser\r\n\t\tchangeUrl(target);\r\n\r\n\t\t//show the tab\r\n\t\tdisplayTab(target);\r\n\t}\t\r\n\r\n\t//close modal if clicked outside of modal\r\n\tlet modal\t= document.querySelector('.modal:not(.hidden)');\r\n\tif(modal != undefined){\r\n\t\tlet scrollBarWidth\t= window.innerWidth - modal.clientWidth;\r\n\t\tif(\r\n\t\t\ttarget.matches(\".modal .close\") || \t\t\t\t\t// close button clicked\r\n\t\t\t(\r\n\t\t\t\t(\r\n\t\t\t\t\tscrollBarWidth > 0\t&&\t\t\t\t\t\t// there is a scrollbar\r\n\t\t\t\t\tevent.clientX < modal.clientWidth\t\t\t// but we did not click on it\r\n\t\t\t\t)\t||\r\n\t\t\t\tscrollBarWidth\t=== 0\t\t\t\t\t\t\t// there is no scrollbar\r\n\t\t\t)\t&&\r\n\t\t\t(\r\n\t\t\t\ttarget.closest('.modal-content') == null && \t// not clicked inside the modal\r\n\t\t\t\ttarget.closest('.swal2-container') == null &&\t// not clicked on swal message container\r\n\t\t\t\ttarget.tagName == 'DIV'\t\t\t\t\t\t\t// the target is a div\r\n\t\t\t)\r\n\t\t){\r\n\t\t\t//console.log(event.clientX);\r\n\t\t\t//console.log(window.outerWidth);\r\n\t\t\thideModals();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n// disable scrolling on number fields\r\ndocument.addEventListener(\"wheel\", function(event){\r\n    if(document.activeElement.type === \"number\"){\r\n        document.activeElement.blur();\r\n    }\r\n});","import { addStyles } from '../../../plugins/sim-plugin/includes/js/imports.js';\nimport { getFieldValue } from  '../../../plugins/sim-plugin/includes/js/field_value.js';\nexport{ getFieldValue };\n\nconsole.log('Forms.js is loaded');\n\nasync function saveFormInput(target){\n\tlet form\t\t= target.closest('form');\n\n\t// make all inputs required if needed\n\tform.querySelectorAll('.required:not(hidden) input, .required:not(hidden) textarea, .required:not(hidden) select').forEach(el=>{\n\t\t// do not make nice select inputs nor file uploads required\n\t\tif(el.closest('div.nice-select') == null && (el.type != 'file' || el.closest('.file_upload_wrap').querySelector('.documentpreview input') == null)){\n\t\t\tel.required\t= true;\n\t\t}\n\t});\n\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_input');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tMain.displayMessage(response);\n\n\t\tif(form.dataset.reset == 'true'){\n\t\t\tFormSubmit.formReset(form);\n\t\t}\n\t}\n}\n\nexport function removeDefaultSelect(el){\n\tArray.from(el.options).forEach(function(option){\n\t\toption.defaultSelected = false;\n\t});\n}\n\nlet tinymceSettings = [];\nfunction prepareForCloning(originalNode){\n\t//also remove any tinymce's\n\tif(typeof(tinymce) != 'undefined'){\n\t\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\tlet tn = tinymce.get(el.id);\n\t\t\tif(tn != null){\n\t\t\t\ttinymceSettings[el.id] = tn.settings\n\t\t\t\ttn.save();\n\t\t\t\ttn.remove();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function cloneNode(originalNode, clear=true){\n\tprepareForCloning(originalNode);\n\t\n\t//make a clone\n\tlet newNode = originalNode.cloneNode(true);\n\n\t// remove niceselect drop down from clone\n\tnewNode.querySelectorAll('.nice-select').forEach(dropdown => dropdown.remove());\n\t\n\t//add tinymce's again\n\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\tif(tinymceSettings[el.id] != undefined){\n\t\t\ttinymce.init(tinymceSettings[el.id]);\n\t\t}\n\t});\n\t\n\t//clear values in the clone\n\tif(clear){\n\t\tnewNode.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\tif(input.type == 'checkbox' || input.type == 'radio'){\n\t\t\t\tinput.checked = false;\n\t\t\t}else if(input.type != 'hidden'){\n\t\t\t\tinput.value = \"\";\n\t\t\t}\n\t\t\t\n\t\t\t//if this is a select\n\t\t\tif(input.type == \"select-one\"){\n\t\t\t\t//remove any defaults\n\t\t\t\tremoveDefaultSelect(input);\n\t\t\t}\n\t\t});\n\t}\n\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//remove any defaults\n\t\tremoveDefaultSelect(select);\n\n\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true, showSelectedItems: true});\n\t});\n\t\n\treturn newNode;\n}\n\nexport function copyFormInput(originalNode){\n\tlet newNode = cloneNode(originalNode);\n\t\n\t//update the data index\n\tnewNode.querySelectorAll('.upload-files').forEach(function(uploadButton){\n\t\tuploadButton.dataset.index = nodeNr;\n\t})\n\t\n\t//Clear contents of any document preview divs.\n\tnewNode.querySelectorAll('.documentpreview').forEach(function(previewDiv){\n\t\tpreviewDiv.innerHTML = '';\n\t});\n\n\t//Select\n\tlet i = 0;\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//Find the value of the select we have cloned\n\t\tlet previousVal = originalNode.getElementsByTagName('select')[i].selectedIndex;\n\t\t\n\t\t//Hide the value in the clone\n\t\tif(select.options[previousVal] != undefined){\n\t\t\tselect.options[previousVal].style.display = 'none';\n\t\t}\n\t\t\n\t\t//Add nice select\n\t\tif(select._niceselect == undefined){\n\t\t\tconsole.error(select);\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true, showSelectedItems: true});\n\t\t}else{\n\t\t\tselect._niceselect.update();\n\t\t\tselect.nextSibling.querySelectorAll('.current').forEach(el=>el.textContent = 'Select an option');\n\t\t}\n\t\t\n\t\ti++;\n\t});\n\t\n\t//Add remove buttons if they are not there\n\tif(originalNode.querySelector('.remove') == null && newNode.querySelector('.remove') == null){\n \t\tlet html = `<button type=\"button\" class=\"remove button\" style=\"flex: 1;\">-</button>`;\n\n\t\t//Add minus button to the first div\n\t\toriginalNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html);\n\n\t\t//Add minus button to the second div\n\t\tnewNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html)\n\t}\t\n\n\t// process tab buttons\n\tif(originalNode.matches('.tabcontent')){\n\t\t// Hide original\n\t\toriginalNode.classList.add('hidden');\n\n\t\t// Add button for the new one\n\t\tlet orgButton\t= originalNode.closest('.clone_divs_wrapper').querySelector(`.tablink.active`);\n\t\tlet newButton\t= cloneNode(orgButton);\n\n\t\t// make the org butto inactive\n\t\torgButton.classList.remove('active');\n\n\t\t//Insert the clone\n\t\torgButton.parentNode.insertBefore(newButton, orgButton.nextSibling);\n\t}\n\t\n\t//Insert the clone\n\toriginalNode.parentNode.insertBefore(newNode, originalNode.nextSibling);\n\t\n\treturn newNode;\n}\n\nexport function fixNumbering(wrapper){\n\twrapper.querySelectorAll(':scope > .clone_div').forEach(updateNumbers);\n\n\twrapper.querySelectorAll(':scope > .tablink').forEach(updateNumbers);\n\n\tfunction updateNumbers(clone, index){\n\t\t//Update the new number\t\n\n\t\t// Update the ID\n\t\tif(clone.id != ''){\n\t\t\tclone.id = clone.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\t\t\n\t\t// Update the content\n\t\tif(clone.type == 'button' && clone.textContent != ''){\n\t\t\tclone.textContent \t\t= clone.textContent.replace(/[0-9]+(?!.*[0-9])/, index + 1);\n\n\t\t\tclone.dataset.target\t= clone.dataset.target.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\n\t\t// Update the divid attribute\n\t\tif(clone.dataset.divid  != null){\n\t\t\tclone.dataset.divid = index;\n\t\t}\n\t\t\n\t\t//Update the title\n\t\tclone.querySelectorAll('h3, h4, legend :first-child').forEach(el => {\n\t\t\tel.textContent = el.textContent.replace(/[0-9]+(?!.*[0-9])/, index + 1);\n\t\t});\n\t\t\n\t\t//Update the legend\n\t\t/* clone.querySelectorAll('legend').forEach(legend => {\n\t\t\tlegend.textContent = legend.textContent.replace(/[0-9]+(?!.*[0-9])/, ' '+(index+1));\n\t\t}); */\n\t\t\n\t\t//Update the elements\n\t\tclone.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\t//Do not copy nice selects\n\t\t\tif(!input.classList.contains('nice-select-search')){\n\t\t\t\t//Update the id\n\t\t\t\tif(input.id != '' && input.id != undefined){\n\t\t\t\t\tinput.id = input.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t\t//Update the name\n\t\t\t\tif(input.name != '' && input.name != undefined){\n\t\t\t\t\tinput.name = input.name.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//Reset the select to the default\n\t\t\t\tif(input.type == 'button'){\n\t\t\t\t\tinput.value = input.value.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function removeNode(target){\n\tlet node\t\t\t= target.closest(\".clone_div\");\n\tlet parentNode\t\t= node.closest('.clone_divs_wrapper');\n\tlet allCloneDivs\t= parentNode.querySelectorAll('.clone_div');\n\t\n\t//Check if we are removing the last element\n\tif(allCloneDivs[allCloneDivs.length-1] == node){\n\t\tlet addElement = node.querySelector(\".add\");\n\t\t\n\t\t//Move the add button one up\n\t\tlet prev = node.previousElementSibling;\n\t\tif(prev.querySelector('.buttonwrapper .add') == null){\n\t\t\tprev.querySelector('.buttonwrapper').appendChild(addElement);\n\t\t}\n\t}\n\t\n\t//Remove the node\n\tnode.remove();\n\n\t//If there is only one div remaining, remove the remove button\n\tif(parentNode.querySelectorAll('.clone_div').length == 1){\n\t\tlet removeElement = parentNode.querySelector('.remove');\n\t\tremoveElement.remove();\n\t}\n\n\tfixNumbering(parentNode)\n}\n\n/* \n\tFUNCTIONS USED BY DYNAMIC FORMS JS\n */\nexport function tidyMultiInputs(){\n\t//remove unnecessary buttons on inputs with multiple values\n\tdocument.querySelectorAll('.clone_divs_wrapper').forEach( function(div){\n\t\tlet cloneDivArr\t= div.querySelectorAll(':scope > .clone_div');\n\t\t\n\t\tif(cloneDivArr.length == 1){\n\t\t\tcloneDivArr[0].querySelectorAll('.remove').forEach(el=>el.remove());\n\t\t}\n\t\t\n\t\tcloneDivArr.forEach(function(cloneDiv, index, array){\n\t\t\t//update dataset\n\t\t\tcloneDiv.dataset.divid = index;\n\t\t\t\n\t\t\t//remove add button for all but the last\n\t\t\tif(index != array.length - 1){\n\t\t\t\t// Select all add buttons but not the any nested buttons\n\t\t\t\tcloneDiv.querySelectorAll('.add:not(:scope .clone_divs_wrapper .add)').forEach(el=>el.remove());\n\t\t\t}\n\t\t})\n\t});\n}\n\nexport function updateMultiStepControls(form){\n\t// get active formsteps amount\n\tlet formsteps\t\t\t= form.querySelectorAll('.formstep');\n\tlet visibleFormsteps\t= form.querySelectorAll('.formstep:not(.hidden)');\n\tlet stepIndicators\t\t= form.querySelectorAll('.multistepcontrols_wrapper .step');\n\n\t// show all step circles\n\tstepIndicators.forEach(el => el.classList.remove('hidden'));\n\n\t// hide some step circles if needed\n\tfor(let x = visibleFormsteps.length; x < formsteps.length; x++){\n\t\tstepIndicators[x].classList.add('hidden');\n\t}\n\n\t// check if this is the last visible\n\tlet activeFormstep\t\t= form.querySelector('.formstep:not(.stephidden)');\n\tif(visibleFormsteps[visibleFormsteps.length-1] == activeFormstep){\n\t\t// make the submit button visible\n\t\tform.querySelector('.nextBtn').classList.add('hidden');\n\t\tform.querySelector('.form_submit ').classList.remove('hidden');\n\t}else{\n\t\tform.querySelector('.nextBtn').classList.remove('hidden');\n\t\tform.querySelector('.form_submit ').classList.add('hidden');\n\t}\n}\n\t\n//show a next form step\nexport function showTab(n, form) {\n\tif(typeof(form) != 'undefined'){\n\t\tif(n == 0){\n\t\t\tlet loader = form.querySelector('.formsteploader');\n\t\t\t//hide loader\n\t\t\tif(loader != null){\n\t\t\t\tloader.classList.add('hidden');\n\t\t\t\n\t\t\t\t//show form controls\n\t\t\t\tform.querySelector('.multistepcontrols').classList.remove('hidden');\n\t\t\t}\n\t\t}\n\t\t\n\t\t//hide all formsteps\n\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(step=>step.classList.add('stephidden'));\n\t\t\n\t\t// Show the specified formstep of the form ...\n\t\tlet x = form.getElementsByClassName(\"formstep\");\n\t\t\n\t\tif(x.length == 0){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//scroll back to top\n\t\tlet y = x[n].offsetTop - document.querySelector(\"#masthead\").offsetHeight\n\t\twindow.scrollTo({ top: y, behavior: 'auto'});\n\t\t\n\t\t//show\n\t\tx[n].classList.remove('stephidden');\n\n\t\t// This function removes the \"active\" class of all steps...\n\t\tform.querySelectorAll(\".step.active\").forEach(el=>{el.classList.remove('active');});\n\n\t\t//... and adds the \"active\" class to the current step:\n\t\tx = form.getElementsByClassName(\"step\");\n\t\ttry{\n\t\t\tx[n].classList.add(\"active\");\n\t\t}catch(err) {\n\t\t\tconsole.log(x);\n\t\t\tconsole.log(n);\n\t\t  \tconsole.error(err.message);\n\t\t}\n\t\t\n\n\t\t// ... and fix the Previous/Next buttons:\n\t\tif (n == 0) {\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.add('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.remove('hidden');\n\t\t}\n\n\t\tif (n == (x.length - 1)) {\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.add('hidden');\n\t\t\tform.querySelector('.form_submit').classList.remove('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.remove('hidden');\n\t\t\tform.querySelector('.form_submit').classList.add('hidden');\n\t\t}\n\t}else{\n\t\tconsole.log('no form defined');\n\t}\n\t\t\n}\n\n//next form step clicked\nexport function nextPrev(n) {\n\t// This function will figure out which tab to display\n\tlet x \t\t\t\t= form.querySelectorAll(\".formstep\");\n\tlet stepIndicators\t= form.querySelectorAll(\".step\");\n\tlet currentTab\t\t= 0;\n\tlet valid\t\t\t= true;\n\n\t// Find the current active tab\n\tx.forEach((el, index)=>{if(!el.matches('.stephidden')){currentTab = index}});\n\t\n\t//Check validity of this step if going forward\n\tif(n>0){\n\t\t// Report validity of each required field\n\t\tlet elements\t= x[currentTab].querySelectorAll('.required:not(.hidden) input, .required:not(.hidden) textarea, .required:not(.hidden) select');\n\t\tfor(const element of elements) {\n\t\t\tif(\n\t\t\t\telement.closest('.hidden')\t== null\t&&\n\t\t\t\telement.closest('div.nice-select') == null && \n\t\t\t\t(\n\t\t\t\t\telement.type != 'file' || \n\t\t\t\t\telement.closest('.file_upload_wrap').querySelector('.documentpreview input') == null\n\t\t\t\t)\n\t\t\t){\n\t\t\t\telement.required\t= true;\n\t\t\t\tvalid\t\t\t\t= element.reportValidity();\n\t\t\t\tif(!valid){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(!valid) return;\n\t\t\n\t\t//mark the last step as finished\n\t\tstepIndicators[currentTab].classList.add(\"finish\");\n\t}else{\n\t\t//mark the last step as unfinished\n\t\tstepIndicators[currentTab].classList.remove(\"finish\");\n\t}\n\t\n\t//loop over all the formsteps to hide stepindicators of them if needed\n\tArray.from(x).forEach((formstep,index) =>{\n\t\tif(formstep.classList.contains('hidden')){\n\t\t\t//hide the corresponding circle\n\t\t\tstepIndicators[index].classList.add('hidden');\n\t\t}\n\t});\n\n\t// Increase or decrease the current tab by 1:\n\tcurrentTab = currentTab + n;\n\t\n\t//check if the next tab is hidden\n\twhile(x[currentTab].classList.contains('hidden')){\n\t\t//go to the next tab\n\t\tcurrentTab = currentTab + n;\n\n\t\tif (currentTab >= x.length) {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// if you have reached the end of the form... :\n\tif (currentTab >= x.length) {\n\t\treturn false;\n\t}\n\t// Otherwise, display the correct tab:\n\tshowTab(currentTab,form);\n\n\treturn true;\n}\n\nexport function changeFieldValue(selector, value, functionRef, form, addition='', forceValue=false){\n\tif(value == undefined){\n\t\treturn;\n\t}\n\n\tlet name\t\t= '';\n\tlet target\t\t= '';\n\n\tif(selector instanceof Element){\n\t\ttarget\t\t= selector;\n\t\tname\t\t= target.name;\n\t\tif(target.id == ''){\n\t\t\tselector\t= `[name^=\"${target.name}\" i]`;\n\t\t}else{\n\t\t\tselector\t= `[id^=${target.id}]`;\n\t\t}\n\t\t\n\t}else{\n\t\ttarget \t\t= form.querySelector(selector);\n\n\t\ttry{\n\t\t\tname\t\t= target.name;\n\t\t}catch{\n\t\t\tconsole.log(target);\n\t\t}\n\t}\n\n\tlet oldValue\t= getFieldValue(target, form, false, value);\n\t// nothing to change\n\tif(oldValue == value){\n\t\treturn;\n\t}\n\n\t// Check if we are dealing with a multi input field\n\tif(target == null){\n\t\tlet targets \t= form.querySelectorAll(`.clone_div [name^=\"${name}\" i]`);\n\t\tif(targets.length === 0){\n\t\t\treturn;\n\t\t}else if(targets.length == 1){\n\t\t\ttarget\t= targets[0];\n\t\t\ttargets\t= '';\n\t\t}else{\n\t\t\ttarget\t= targets[0];\n\n\t\t\ttargets.forEach((el, index) =>{\n\t\t\t\tif(index == 0){\n\t\t\t\t\tchangeFieldValue(el, '', '', form);\n\t\t\t\t}else{\n\t\t\t\t\tremoveNode(el);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\t\n\tif(target.type == 'radio' || target.type == 'checkbox'){\n\t\t// uncheck all\n\t\tif(value == ''){\n\t\t\tif(selector != ''){\n\t\t\t\tform.querySelectorAll(selector).forEach(el=>el.checked=false);\n\t\t\t}\n\t\t}else{\n\t\t\t// Check if the current target is the one we need to check\n\t\t\tif(target.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\ttarget.checked = true;\n\t\t\t}else{\n\t\t\t\t// find the element with the given value and check it\n\t\t\t\tlet targets = form.querySelectorAll(`[name=\"${name}\" i]`);\n\t\t\t\tfor (const element of targets) {\n\t\t\t\t\tif(element.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\t\t\telement.checked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t//the target has a list attached to it\n\t}else if(target.type == 'date'){\n\t\ttarget.value = value;\n\t\t\n\t\t// convert a date to the right format\n\t\tif (!/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet splitted = '';\n\t\t\tif(value.split('-').length == 3){\n\t\t\t\tsplitted\t= value.split('-');\n\t\t\t}else if(value.split('/').length == 3){\n\t\t\t\tsplitted\t= value.split('/');\n\t\t\t}\n\n\t\t\tif(splitted != ''){\n\t\t\t\tlet year;\n\t\t\t\tlet month;\n\t\t\t\tlet day;\n\t\t\t\tsplitted.forEach(nr=>{\n\t\t\t\t\tif(nr.length == 4){\n\t\t\t\t\t\tyear\t= nr;\n\t\t\t\t\t}else if(nr.length == 2){\n\t\t\t\t\t\tif(nr > 12){\n\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// does not have a value yet\n\t\t\t\t\t\t\tif(month == undefined){\n\t\t\t\t\t\t\t\tmonth\t= nr;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(day != undefined && month != undefined && year != undefined){\n\t\t\t\t\ttarget.value = `${year}-${month}-${day}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else if(target.list != null){\n\t\tlet dataListOption = target.list.querySelector(`[data-value=\"${value}\" i]`);\n\n\t\t//we found a match\n\t\tif(dataListOption != null){\n\t\t\t// We found a cloned field, add as many inputs as needed\n\t\t\tif(target.closest('.clone_div') != null){\n\t\t\t\t// mark the existing ones for deletion, we can delete right now as we need to copy the existing ones first\n\t\t\t\ttarget.closest('.clone_divs_wrapper').querySelectorAll('.clone_div').forEach(el=>el.classList.add('shouldremove'));\n\n\t\t\t\tlet clone;\n\t\t\t\tdataListOption.value.split(';').forEach(val=>{\n\t\t\t\t\tclone = copyFormInput(target.closest('.clone_div'));\n\n\t\t\t\t\tclone.classList.remove('shouldremove');\n\n\t\t\t\t\tchangeFieldValue(clone.querySelector(target.tagName), val, '', form, '', true);\n\t\t\t\t});\n\n\t\t\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\n\n\t\t\t\t// delete the old ones\n\t\t\t\ttarget.closest('.clone_divs_wrapper').querySelectorAll('.shouldremove').forEach(el=>el.remove());\n\t\t\t}else{\n\t\t\t\ttarget.value = dataListOption.value;\n\t\t\t}\n\t\t// We did not find a match, we are filling in the given value\n\t\t}else if(forceValue){\n\t\t\ttarget.value = value;\n\t\t// We did not find a match, empty value\n\t\t}else{\n\t\t\ttarget.value = '';\n\t\t}\n\t}else{\n\t\ttarget.value = value;\n\t}\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(target);\n\t}\n}\n\nexport function changeVisibility(action, el, functionRef){\n\tlet wrapper\t= el.closest('.inputwrapper');\n\tif(wrapper == null){\n\t\twrapper\t= el\n\t}\n\t\n\tif(action == 'add'){\n\t\tif(wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.add('hidden');\n\t}else{\n\t\tif(!wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.remove('hidden');\n\t}\n\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\twrapper.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(el);\n\t}\n}\n\nexport function changeFieldProperty(selector, att, value, functionRef, form, addition=''){\n\t//first change the value\n\tlet target = form.querySelector(selector);\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\n\ttarget[att] = value;\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\n\t//run the originating function with this event\n\tfunctionRef(target);\n}\n\nasync function formbuilderSwitch(target){\n\tlet wrapper\t= target.closest('.sim-form-wrapper');\n\tlet button\t= target.outerHTML;\n\n\tlet formData = new FormData();\n\tlet formId;\n\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.formbuilder-switch')){\n\t\tformData.append('formbuilder', true);\n\t\turl.searchParams.set('formbuilder', true);\n\n\t\tformId\t= wrapper.querySelector('form.sim-form-wrapper').dataset.formid;\n\t}else{\n\t\turl.searchParams.delete('formbuilder');\n\t\tformId\t= wrapper.querySelector('[name=\"formid\"]').value;\n\t}\n\twindow.history.pushState({}, '', url);\n\n\tformData.append('formid', formId);\n\n\tlet loader\t= Main.showLoader(target, false, 'Requesting form...');\n\twrapper.innerHTML\t= loader.outerHTML;\n\n\tlet response = await FormSubmit.fetchRestApi('forms/form_builder', formData);\n\n\tif(response){\n\t\twrapper.innerHTML\t= response.html;\n\n\t\taddStyles(response, document);\n\n\t\t// Activate tinyMce's again\n\t/* \twrapper.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\n\t\t});\n\n\t\twrapper.querySelectorAll('select').forEach(function(select){\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true, showSelectedItems: true});\n\t\t}); */\n\t}else{\n\t\tloader.outerHTML\t= button;\n\t}\n}\n\nasync function requestNewFormResults(target){\n\tlet wrapper\t\t= target.closest('.form.table-wrapper');\n\tlet button\t\t= target.outerHTML;\n\n\tlet formData \t= new FormData();\n\tlet formId\t\t= wrapper.querySelector('.sim-table.form-data-table').dataset.formid;\n\tlet shortcodeId\t= wrapper.querySelector('.sim-table.form-data-table').dataset.shortcodeid;\n\n\tformData.append('formid', formId);\n\tformData.append('shortcode_id', shortcodeId);\n\n\tconst url \t\t= new URL(window.location);\n\tif(url.searchParams.get('onlyown')){\n\t\tformData.append('onlyown', true);\n\t}\n\n\tif(url.searchParams.get('all')){\n\t\tformData.append('all', true);\n\t}\n\n\tif(url.searchParams.get('archived')){\n\t\tformData.append('archived', true);\n\t}\n\n\tlet loader\t= Main.showLoader(target, false, 'Requesting form results...');\n\twrapper.innerHTML\t= loader.outerHTML;\n\n\tlet response = await FormSubmit.fetchRestApi('forms/show_form_results', formData);\n\n\tif(response){\n\t\twrapper.innerHTML\t= response;\n\t}else{\n\t\tloader.outerHTML\t= button;\n\t}\n}\n\nasync function archivedEntriesSwitch(target){\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.archive-switch-show')){\n\t\turl.searchParams.set('archived', true);\n\t}else{\n\t\turl.searchParams.delete('archived');\n\t}\n\twindow.history.pushState({}, '', url);\n\n\trequestNewFormResults(target);\n}\n\nasync function onlyOwnSwitch(target){\n\tconst url \t\t= new URL(window.location);\n\tif(target.matches('.onlyown-switch-on')){\n\t\turl.searchParams.set('onlyown', true);\n\t\turl.searchParams.delete('all', true);\n\t}else{\n\t\turl.searchParams.set('all', true);\n\t\turl.searchParams.delete('onlyown');\n\t}\n\twindow.history.pushState({}, '', url);\n\n\trequestNewFormResults(target);\n}\n\n//we are online again\nwindow.addEventListener('online', function(){\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\n\t\tbtn.disabled = false\n\t\tbtn.querySelectorAll('.offline').forEach(el=>el.remove());\n\t});\n});\n\n//prevent form submit when offline\nwindow.addEventListener('offline', function(){\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\n\t\tbtn.disabled = true;\n\t\tif(btn.querySelector('.online') == null){\n\t\t\tbtn.innerHTML = '<div class=\"online\">'+btn.innerHTML+'</div>';\n\t\t}\n\t\tbtn.innerHTML += '<div class=\"offline\">You are offline</div>'\n\t});\n});\n\ndocument.addEventListener('click', function(event) {\n\tlet target = event.target;\n\t\n\t//add element\n\tif(target.matches('.add')){\n\t\tlet orgNode\t= target.closest(\".clone_div\");\n\n\t\tlet newNode = copyFormInput(orgNode);\n\n\t\t// Fix in nodes\n\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\n\n\t\t//add tinymce's can only be done when node is inserted and id is unique\n\t\tnewNode.querySelectorAll('.wp-editor-area').forEach((el, index) =>{\n\t\t\t// find org node settings\n\t\t\tlet tn = tinymce.get(orgNode.querySelectorAll('.wp-editor-area')[index].id);\n\t\t\tif(tn != null){\n\t\t\t\tlet settings\t= tn.settings;\n\n\t\t\t\t// update the settings for the clone\n\t\t\t\tfor (const key in settings) {\n\t\t\t\t\tconsole.log(`${key}: ${settings[key]}`);\n\n\t\t\t\t\tif(typeof(settings[key]) == 'string'){\n\t\t\t\t\t\tsettings[key]\t= settings[key].replace(\n\t\t\t\t\t\t\t/(.*)([0-9])/, \n\t\t\t\t\t\t\t(match, prefix, nr) => {\n\t\t\t\t\t\t\t\tconst newNumber = parseInt(nr) + 1;\n\t\t\t\t\t\t\t\treturn prefix + newNumber;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttinymce.init(settings);\n\t\t\t\t//window.tinyMCE.execCommand('mceAddEditor', false, el.id);\n\t\t\t}\n\t\t});\n\n\t\ttarget.remove();\n\t}\n\t\n\t//remove element\n\tif(target.matches('.remove')){\n\t\t//Remove node clicked\n\t\tremoveNode(target);\n\t}\n\n\tif(target.matches('.sim-form-wrapper [name=\"submit_form\"]')){\n\t\tevent.stopPropagation();\n\t\t\n\t\tsaveFormInput(target);\n\t}\n\n\tif(target.matches('.formbuilder-switch') || target.matches('.formbuilder-switch-back')){\n\t\tformbuilderSwitch(target);\n\t}\n\n\tif(target.matches('.archive-switch-hide') || target.matches('.archive-switch-show')){\n\t\tarchivedEntriesSwitch(target);\n\t}\n\n\tif(target.matches('.onlyown-switch-all') || target.matches('.onlyown-switch-on')){\n\t\tonlyOwnSwitch(target);\n\t}\n});\n\ndocument.addEventListener('change', ev=>{\n\t// select all elements with a datalist attached\n\tif(ev.target.matches('input[list]') && ev.target.name.includes('[')){\n\t\tlet el\t\t= ev.target.list.querySelector(`[value=\"${ev.target.value}\" i]`);\n\n\t\tif(el != null){\n\t\t\t// find the dataset value of the given element value\n\t\t\tlet value\t= el.dataset.value;\n\n\t\t\tif(value != undefined){\n\t\t\t\t// change the value to create extra inputs if necessary\n\t\t\t\tchangeFieldValue(ev.target, value, '', ev.target.closest('form'));\n\t\t\t}\n\t\t}\n\t}\n})","function getRadioValue(form, selector){\r\n\tlet el\t= form.querySelector(`${selector}:checked`);\r\n\r\n\t//There is no radio selected currently\r\n\tif(el == null){\r\n\t\t//return an empty value\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn el.value;\r\n}\r\n\r\nfunction getCheckboxValue(form, selector, compareValue, orgName){\r\n\tlet value\t\t= '';\r\n\tlet elements\t= '';\r\n\r\n\t//we are dealing with a specific checkbox\r\n\tif(orgName.type == 'checkbox' && compareValue != null ){\r\n\t\tif(orgName.checked){\r\n\t\t\treturn orgName.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn '';\r\n\t}\r\n\r\n\t//we should find the checkbox with this value and check if it is checked\r\n\tif(compareValue != null){\r\n\t\telements\t= form.querySelector(`${selector}[value=\"${compareValue}\" i]:checked`);\r\n\t\tif(elements != null){\r\n\t\t\tvalue = compareValue;\r\n\t\t}\r\n\t//no compare value give just return all checked values\r\n\t}else{\r\n\t\telements\t= form.querySelectorAll(`${selector}:checked`);\r\n\t\tvalue\t\t= [];\r\n\t\telements.forEach(el=>{\r\n\t\t\tvalue.push(el.value);\r\n\t\t\t/* if(value != ''){\r\n\t\t\t\tvalue += ', ';\r\n\t\t\t}\r\n\t\t\tvalue += el.value; */\r\n\t\t});\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction getMultiValue(form, el){\r\n\tlet value = [];\r\n\r\n\tform.querySelectorAll(`[name=\"${el.name}\"]`).forEach(elem => value.push(elem.value));\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getDataListValue(el){\r\n\tlet value\t\t= '';\r\n\tlet origInput \t= el.list.querySelector(`[value='${el.value}' i]`);\r\n\t\t\t\r\n\tif(origInput == null){\r\n\t\tvalue =  el.value;\r\n\t}else{\r\n\t\tvalue = origInput.dataset.value;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getFieldValue(orgName, form, checkDatalist=true, compareValue=null, lowercase=false){\r\n\r\n\tlet el\t\t\t= ''; \r\n\tlet name\t\t= '';\r\n\tlet value \t\t= '';\r\n\tlet selector\t= '';\r\n\r\n\t//name is not a name but a node\r\n\tif(orgName instanceof Element){\r\n\t\tel\t\t\t= orgName;\t\t\r\n\t\t//check if valid input type\r\n\t\tif(el.tagName != 'INPUT' && el.tagName != 'TEXTAREA' && el.tagName != 'SELECT' && el.closest('.nice-select-dropdown') == null){\r\n\t\t\tel = el.querySelector('input, select, textarea');\r\n\t\t}\r\n\t\tif(el == null){\r\n\t\t\tel\t\t\t= orgName;\r\n\t\t}\r\n\t\tname\t\t= el.name;\r\n\t// We should look for an id\r\n\t}else if(orgName.match(\"E[0-9]\")){\r\n\t\tselector\t= `[id^=${orgName}]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t\tname\t\t= el.name;\r\n\t}else{\r\n\t\tname\t\t= orgName;\r\n\t\tselector\t= `[name='${name}' i]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t}\r\n\t\r\n\tif(el == null){\r\n\t\tconsole.trace();\r\n\t\tconsole.log(\"cannot find element with name \"+name);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(el.type == 'radio'){\r\n\t\tvalue\t= getRadioValue(form, selector);\r\n\t}else if(el.type == 'checkbox'){\r\n\t\tvalue\t= getCheckboxValue(form, selector, compareValue, orgName);\t\r\n\t}else if(el.closest('.nice-select-dropdown') != null && el.dataset.value != undefined){\r\n\t\t//nice select\r\n\t\tvalue = el.dataset.value\r\n\t}else if(el.list != null && el.value != '' && checkDatalist){\r\n\t\tvalue =  getDataListValue(el);\r\n\t}else if(el.name != undefined && el.name.endsWith('[]')){\r\n\t\tvalue =  getMultiValue(form, el);\r\n\t}else if(el.value != null && el.value != 'undefined'){\r\n\t\tvalue = el.value;\r\n\t}\r\n\t\r\n\tif(lowercase){\r\n\t\treturn value.toLowerCase();\r\n\t}\r\n\treturn value;\r\n}","import {changeUrl, displayTab, showModal} from './../../../../includes/js/main.js'\r\nimport {fetchRestApi} from  './../../../../includes/js/form_submit_functions.js'\r\nimport {copyFormInput, fixNumbering, removeNode} from './../../../../../../sim-modules/forms/js/forms.js'\r\nimport '../../../js/nice-select2';\r\n\r\nconsole.log('admin.js loaded');\r\n\r\nfunction switchSlider(event){\r\n    if(event.target.checked){\r\n        document.querySelectorAll('.options, .tablink-wrapper').forEach(el=>el.style.display    = 'block');\r\n    }else{\r\n        document.querySelectorAll('.options, .tablink-wrapper').forEach(el=>el.style.display    = 'none');\r\n    }\r\n}\r\n\r\n//Load after page load\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\tdocument.querySelectorAll('[name=\"enable\"]').forEach(el=>el.addEventListener('change', switchSlider));\r\n\r\n\t//add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceselect  == undefined){\r\n\t\t    select._niceselect = NiceSelect.bind(select,{searchable: true, showSelectedItems: true});\r\n        }\r\n\t});\r\n});\r\n\r\nwindow.addEventListener(\"click\", async event => {\r\n\tlet target = event.target;\r\n        \r\n    //add element\r\n    if(target.matches('.add')){\r\n        let newNode = copyFormInput(target.closest(\".clone_div\"));\r\n\r\n        fixNumbering(target.closest('.clone_divs_wrapper'));\r\n\r\n        //add tinymce's can only be done when node is inserted and id is unique\r\n        newNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor',false, el.id);\r\n        });\r\n\r\n        target.remove();\r\n    }\r\n    \r\n    //remove element\r\n    if(target.matches('.remove')){\r\n        //Remove node clicked\r\n        removeNode(target);\r\n    }\r\n\r\n    if(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\r\n        event.preventDefault();\r\n\r\n        let value = '';\r\n        if(target.classList.contains('placeholders')){\r\n            value = target.textContent;\r\n        }else if(target.value != ''){\r\n            value = target.value;\r\n            target.selectedIndex = '0';\r\n        }\r\n        \r\n        if(value != ''){\r\n            let options = {\r\n                icon: 'success',\r\n                title: 'Copied '+value,\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n            };\r\n\r\n            if(document.fullscreenElement != null){\r\n                options['target']\t= document.fullscreenElement;\r\n            }\r\n\r\n            Swal.fire(options);\r\n            navigator.clipboard.writeText(value);\r\n        }\r\n    }\r\n\r\n    if(target.matches(\".tablink\")){\r\n\t\tevent.preventDefault();\r\n\t\t//change the url in browser\r\n\t\tchangeUrl(target);\r\n\r\n\t\t//show the tab\r\n\t\tdisplayTab(target);\r\n\t}else if(target.matches(`.sim.release`)){\r\n        showModal('release');\r\n\r\n        let formData    = new FormData();\r\n        formData.append('module_name', target.dataset.name);\r\n        \r\n        let response    = await fetchRestApi('get-changelog', formData);\r\n\r\n        document.querySelector('#release_modal .loadergif_wrapper').classList.add('hidden');\r\n\r\n        document.querySelector('#release_modal .content').innerHTML   = response;\r\n        document.querySelector('#release_modal .content').classList.remove('hidden');\r\n    }\r\n});\r\n\r\ndocument.querySelectorAll('#release_modal').forEach(el=>el.addEventListener('modalclosed', ev=>{\r\n    ev.target.querySelector('.loadergif_wrapper').classList.remove('hidden');\r\n    ev.target.querySelector('.content').classList.add('hidden');\r\n}));","export function formReset(form){\r\n\t//reset form to the default\r\n\tform.reset();\r\n\r\n\t//hide loaders\r\n\tform.querySelectorAll('.loadergif').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t//hide button again if needed\r\n\tform.querySelectorAll('.multistepcontrols .form_submit').forEach(el=>el.classList.add('hidden'));\r\n\t\r\n\t//fix required fields\r\n\tform.querySelectorAll('[required]').forEach(el=>{el.required = false;});\r\n\t\r\n\t//empty any fileuploads\r\n\tform.querySelectorAll('.file_upload').forEach(el=>el.value='');\r\n\r\n\t//show hidden file uploads\r\n\tform.querySelectorAll('.upload_div.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\r\n\t//Reset nice selects\r\n\tform.querySelectorAll('select').forEach(el=>el._niceselect.update());\r\n\t\r\n\t//remove doc previews\r\n\tdocument.querySelectorAll('.documentpreview .document').forEach(el=>el.remove());\r\n\t\r\n\tif(form.querySelector('.formstep') != null){\r\n\t\t//mark all circles as not active anymore\r\n\t\tform.querySelectorAll('.multistepcontrols .step.finish').forEach(el=>el.classList.remove('finish'));\r\n\t\r\n\t\t//go back to the first part of the form in case of multistep\r\n\t\tFormFunctions.showTab(0,form);\r\n\t}\r\n}\r\n\r\nexport async function submitForm(target, url, extraData=''){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet validity \t= true;\r\n\t\r\n\t//get all hidden required inputs and unrequire them\r\n\tform.querySelectorAll('.hidden [required], select[required], .nice-select-search[required], .stephidden [required]').forEach(el=>{el.required = false});\r\n\r\n\t// enable disabled fields so it gets included and warnings are shown\r\n\tform.querySelectorAll('[disabled][required]').forEach( el=>{\r\n\t\tel.disabled\t= false;\r\n\t\tel.classList.add('was-disabled'); \r\n\t});\r\n\r\n\tvalidity\t= form.reportValidity();\r\n\r\n\t//only continue if valid\r\n\tif(validity){\r\n\t\t//Display loader\r\n\t\ttarget.closest('.submit_wrapper').querySelectorAll('.loadergif').forEach(loader=>loader.classList.remove('hidden'));\r\n\t\t\r\n\t\t//save any tinymce forms\r\n\t\tif (typeof tinymce !== 'undefined') {\r\n\t\t\ttinymce.get().forEach((tn)=>{\r\n\t\t\t\t// only save when the visual tab is active\r\n\t\t\t\tif(!tn.hidden){\r\n\t\t\t\t\ttn.save()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// change the name of multiselects if needed\r\n\t\tdocument.querySelectorAll('select[multiple]:not([name$=\\\\[\\\\]])').forEach(el => {\r\n\t\t\tconsole.error(`Multi select ${el.name} should have [] at the end. I have fixed it for now`);\r\n\t\t\tel.name\t= el.name+'[]';\r\n\t\t})\r\n\t\t\r\n\t\tlet formData = new FormData(form);\r\n\t\t\r\n\t\tif(extraData != ''){\r\n\t\t\tformData.append('extra', extraData);\r\n\t\t}\r\n\r\n\t\t// disable fields again\r\n\t\tform.querySelectorAll('.was-disabled').forEach( el=>{\r\n\t\t\tel.disabled\t= true;\r\n\t\t\tel.classList.remove('was-disabled'); \r\n\t\t});\r\n\r\n\t\tif(form.dataset.addempty == 'true'){\r\n\t\t\t//also append at least one off all checkboxes\r\n\t\t\tform.querySelectorAll('input[type=\"checkbox\"]:not(:checked)').forEach(checkbox=>{\r\n\t\t\t\t//if no checkbox with this name exist yet\r\n\t\t\t\tif(!formData.has(checkbox.name)){\r\n\t\t\t\t\tformData.append(checkbox.name,'');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// also add get params\r\n\t\ttry{\r\n\t\t\tlocation['search'].split('?')[1].split('&').forEach(param=>{\r\n\t\t\t\tlet split\t= param.split('=');\r\n\t\t\t\tif(split[0] != 'formbuilder' && split[0] != 'main_tab' && split[0] != 'second_tab'){\r\n\t\t\t\t\tformData.append(split[0], split[1]);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}catch{\r\n\t\t\t//pass\r\n\t\t};\r\n\r\n\t\tlet response = await fetchRestApi(url, formData);\r\n\r\n\t\tform.querySelectorAll('.submit_wrapper .loadergif').forEach(loader => loader.classList.add('hidden'));\r\n\r\n\t\tif(form.dataset.reset != 'true'){\r\n\t\t\tmarkComplete();\r\n\t\t}\r\n\r\n\t\treturn response;\r\n\t}else{\r\n\t\tform.querySelectorAll(':invalid').forEach(el=>{\r\n\t\t\tif(el.validationMessage != undefined){\r\n\t\t\t\tMain.displayMessage(`${el.name} has an error:\\n${el.validationMessage}`, 'error').then((value)=>{\r\n\t\t\t\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(formstep=>formstep.classList.add('stephidden'));\r\n\r\n\t\t\t\t\tel.closest('.stephidden').classList.remove('stephidden');\r\n\r\n\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\tel.scrollIntoView();\r\n\r\n\t\t\t\t\tel.focus();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n/**\r\n * Set the default values to the current values so to not trigger a page leave warning\r\n */\r\nexport function markComplete(){\r\n\r\n\t// pending\r\n\tdocument.querySelectorAll('[data-pending]').forEach(el=>{\r\n\t\tel.removeAttribute('data-pending');\r\n\t});\r\n\r\n\t// check all inputs\r\n\tdocument.querySelectorAll('form input:not([type=radio], [type=checkbox]), form textarea').forEach(el=>{\r\n\t\tel.defaultValue = el.value\r\n\t});\r\n\r\n\t// check all checkboxes and radio\r\n\tdocument.querySelectorAll('form input[type=radio], form input[type=checkbox]').forEach(el=>{\r\n\t\tif(el.checked){\r\n\t\t\tel.defaultChecked = true; \r\n\t\t}\r\n\t});\r\n\r\n\t// check all dropdowns\r\n\tdocument.querySelectorAll('form select').forEach(el=>{\r\n\t\tif(el.selectedIndex != -1 && el.options[el.selectedIndex] != undefined){\r\n\t\t\tel.options[el.selectedIndex].defaultSelected\t= true;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport async function fetchRestApi(url, formData='', showErrors=true){\r\n\tif(formData == ''){\r\n\t\tformData\t= new FormData();\r\n\t}\r\n\t\r\n\tformData.append('_wpnonce', sim.restNonce);\r\n\tlet result;\r\n\ttry{\r\n\t\tresult = await fetch(\r\n\t\t\t`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tcredentials: 'same-origin',\r\n\t\t\t\tbody: formData\r\n\t\t\t}\r\n\t\t);\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t}\r\n\t\r\n\tlet response\t= await result.text();\r\n\ttry{\r\n\t\tlet json\t\t= JSON.parse(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\treturn json;\r\n\t\t}else if(json.code == 'rest_cookie_invalid_nonce'){\r\n\t\t\tMain.displayMessage('Please refresh the page and try again!', 'error');\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\tconsole.error(json);\r\n\t\t\tif(json.data == null || json.data.status == 403){\r\n\t\t\t\tMain.displayMessage(json.message);\r\n\t\t\t}else{\r\n\t\t\t\tMain.displayMessage(json.message+\"\\n\"+JSON.stringify(json.data), 'error');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t\tconsole.error(result);\r\n\t\tconsole.error(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\tif(showErrors){\r\n\t\t\t\tMain.displayMessage(`Problem parsing the json, refresh the page or try again.`, 'error');\r\n\t\t\t}\r\n\t\t\tconsole.error(`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}` );\r\n\t\t\tconsole.error(response);\r\n\t\t}else{\r\n\t\t\tlet modal\t= `<div id='response-details' class=\"modal hidden\" style='z-index:9999999999;'>`;\r\n\t\t\t\tmodal\t+= `<div class=\"modal-content\" style='max-width: min(1000px,100%);'>`\r\n\t\t\t\t\tmodal\t+= `<span class=\"close\">&times;</span>`;\r\n\t\t\t\t\tmodal\t+= response;\r\n\t\t\t\tmodal\t+= `</div>`;\r\n\t\t\tmodal\t+= `</div>`;\r\n\r\n\t\t\tdocument.querySelector('body').insertAdjacentHTML('afterBegin', modal);\r\n\t\t\tMain.displayMessage(`Error loading url ${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}<br><button class='button small' id='error-details' onclick='(function(){ document.getElementById(\"response-details\").classList.remove(\"hidden\"); })();'>Details</button><br><div class='hidden response-message'>${response}</div>`, 'error');\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n}"],"names":["c","self","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","eval","d","l","t","o","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","module","exports","e","s","i","bind","u","default","p","MouseEvent","Event","includes","FocusEvent","UIEvent","bubbles","cancelable","dispatchEvent","n","getAttribute","classList","contains","add","a","remove","data","searchable","showSelectedItems","placeholder","searchtext","selectedtext","hideSelect","h","constructor","Error","Element","this","el","_niceSelect","config","selectedOptions","dropdown","selectionList","multiple","disabled","create","bindElementEvents","processData","extractData","renderDropdown","bindDropdownEvents","options","map","attributes","selected","optgroup","Array","from","querySelectorAll","defaultSelected","tagName","text","label","dataset","display","innerText","extra","element","push","filter","Boolean","join","insertAdjacentHTML","nextElementSibling","_renderSelectedItems","_renderItems","window","getComputedStyle","width","length","forEach","querySelector","innerHTML","_multipleListAdd","appendChild","_renderItem","document","createElement","_renderItemExtra","setAttribute","addEventListener","_onDropdownItemClicked","update","target","syncDropdown","disable","enable","clear","resetSelectValue","destroy","removeSelectionList","focus","style","_triggerValidationMessage","_onClickedOutside","_onClicked","_onKeyPressed","_bindSearchEvent","stopPropagation","_onSearchChanged","preventDefault","find","syncSelectValue","syncSelectionList","selectedIndex","textContent","removeEventListener","keyCode","_findNext","_findPrev","scrollIntoView","block","previousElementSibling","toLowerCase","RegExp","test","updateDropdownOption","after","_multipleListRemove","matches","closest","click","__webpack_module_cache__","moduleId","cachedModule","undefined","scripts","afterScriptsLoaded","attachTo","tinymce","tinyMCE","execCommand","id","ev","area","panel","visibility","select","_niceselect","NiceSelect","addScripts","shift","getElementById","type","src","head","error","console","changeUrl","secondTab","newParam","param_val","hash","url","URL","location","parentNode","searchParams","set","delete","history","pushState","switchTab","event","params","Proxy","URLSearchParams","search","prop","mainTab","main_tab","lastTab","tabbutton","result","displayTab","second_tab","tabButton","tab","child","childTab","replace","hashField","SimTableFunctions","positionTable","bodyScrolling","menu","overflow","body","top","scrollTo","overflowY","left","right","bottom","position","removeDefaultSelect","option","log","w","check","navigator","userAgent","vendor","opera","substr","vw","Math","max","documentElement","clientWidth","innerWidth","getBoundingClientRect","removeProperty","positionSubSubMenus","message","icon","autoclose","no_ok","timer","title","toString","trim","confirmButtonColor","cancelButtonColor","callback","fullscreenElement","Swal","fire","alert","modal","scrollBarWidth","clientX","modals","scrollY","parseInt","prim","zIndex","hideModals","activeElement","blur","tinymceSettings","cloneNode","originalNode","tn","settings","save","prepareForCloning","newNode","init","input","checked","copyFormInput","uploadButton","index","nodeNr","previewDiv","previousVal","getElementsByTagName","nextSibling","html","orgButton","newButton","insertBefore","fixNumbering","wrapper","updateNumbers","clone","divid","name","removeNode","node","allCloneDivs","addElement","prev","changeFieldValue","selector","functionRef","form","addition","forceValue","oldValue","orgName","checkDatalist","compareValue","lowercase","match","trace","getRadioValue","elements","getCheckboxValue","list","origInput","getDataListValue","endsWith","elem","getMultiValue","getFieldValue","targets","date","Date","setDate","getDate","toISOString","split","splitted","year","month","day","nr","dataListOption","val","evt","async","requestNewFormResults","button","outerHTML","formData","FormData","formId","formid","shortcodeId","shortcodeid","append","loader","Main","showLoader","response","FormSubmit","fetchRestApi","switchSlider","btn","orgNode","key","prefix","required","submitForm","displayMessage","reset","formReset","saveFormInput","temp","slice","js","children","concat","css","addStyles","formbuilderSwitch","archivedEntriesSwitch","onlyOwnSwitch","showConfirmButton","clipboard","writeText","showModal","showErrors","sim","restNonce","fetch","baseUrl","restApiPrefix","method","credentials","json","JSON","parse","ok","code","status","stringify"],"sourceRoot":""}