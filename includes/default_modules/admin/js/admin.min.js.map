{"version":3,"file":"admin.min.js","mappings":"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","sources":["webpack://admin/../../../js/node_modules/nice-select2/dist/js/nice-select2.js","webpack://admin/webpack/bootstrap","webpack://admin/../../../js/partials/tabs.js","webpack://admin/../../../../../../sim-modules/forms/js/form_exports.js","webpack://admin/./admin.js","webpack://admin/../../../js/partials/modals.js","webpack://admin/../../../js/form_submit_functions.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.NiceSelect=t():e.NiceSelect=t()}(self,()=>(()=>{\"use strict\";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},t={};e.r(t),e.d(t,{bind:()=>u,default:()=>p});const s=(e,t,s={})=>{let i;i=\"click\"===t?MouseEvent:\"change\"===t?Event:t.includes(\"focus\")?FocusEvent:UIEvent;const l=new i(t,{bubbles:!0,cancelable:!1,...s});e.dispatchEvent(l)},i=e=>s(e,\"click\"),l=e=>s(e,\"change\"),n=e=>s(e,\"modalclose\"),o=(e,t)=>void 0!==e[t]?e[t]:e.getAttribute(t),d=(e,t)=>e?.classList.contains(t),a=(e,t)=>e?.classList.add(t),r=(e,t)=>e?.classList.remove(t),c={data:null,searchable:!0,showSelectedItems:!0,placeholder:\"Select an option\",searchtext:\"Search\",selectedtext:\"selected\",hideSelect:!0};class h{constructor(e,t={}){if(!e)throw new Error(\"No element provided to NiceSelect\");if(!(e instanceof Element))throw new Error(\"Invalid element provided to NiceSelect - must be a valid DOM element\");this.el=e,this.el._niceSelect=this,this.config={...c,...t},this.data=this.config.data,this.selectedOptions=[],this.placeholder=o(this.el,\"placeholder\")||this.config.placeholder,this.searchtext=o(this.el,\"searchtext\")||this.config.searchtext,this.selectedtext=o(this.el,\"selectedtext\")||this.config.selectedtext,this.dropdown=null,this.selectionList=null,this.multiple=o(this.el,\"multiple\"),this.disabled=o(this.el,\"disabled\"),this.#e(),this.#t()}update(e=\"\"){let t=this;\"\"!=e&&(t=e.target._niceSelect),t.#s()}disable(){this.disabled||(this.disabled=!0,a(this.dropdown,\"disabled\"))}enable(){this.disabled&&(this.disabled=!1,r(this.dropdown,\"disabled\"))}clear(){this.#i(),this.selectedOptions=[],this.#l(),this.update(),l(this.el)}destroy(){this.selectionList&&this.#n(),this.dropdown&&(this.dropdown.remove(),this.el.classList.remove(\"hidden-select\"))}focus(e=\"\"){var t;if(d(this.dropdown,\"open\")?this.multiple?e===this.dropdown.querySelector(\".multiple-options\")&&(r(this.dropdown,\"open\"),n(this.el)):(r(this.dropdown,\"open\"),n(this.el)):(a(this.dropdown,\"open\"),t=this.el,s(t,\"modalopen\")),d(this.dropdown,\"open\")){const e=this.dropdown.querySelector(\".nice-select-search\");e&&(e.value=\"\",e.focus());const t=this.dropdown.querySelector(\".focus\");t&&r(t,\"focus\");const s=this.dropdown.querySelector(\".selected\");s&&a(s,\"focus\"),this.dropdown.querySelectorAll(\"ul li\").forEach(e=>e.style.display=\"\")}else this.dropdown.focus()}#e(e=!0){this.data?this.#o(this.data):this.#d(e),this.el.classList.remove(\"hidden-select\"),this.#a(),this.config.hideSelect&&this.el.classList.add(\"hidden-select\"),this.#r()}#o(e){this.options=e.map(e=>({data:e,attributes:{selected:!!e.selected,disabled:!!e.disabled,optgroup:\"optgroup\"===e.value}}))}#d(e){const t=Array.from(this.el.querySelectorAll(\"option,optgroup\")),s=[],i=[];this.data=t.map(t=>{let l,n=t.selected;e&&t.selected&&!t.defaultSelected&&(n=!1),l=\"OPTGROUP\"===t.tagName?{text:t.label,value:\"optgroup\"}:{text:t.dataset.display??t.innerText,value:t.value,extra:t.dataset.extra,selected:n,disabled:t.disabled};const o={selected:n,disabled:t.disabled,optgroup:\"OPTGROUP\"===t.tagName},d={data:l,attributes:o,element:null};return s.push(d),o.selected&&i.push(d),l}),this.options=s,this.selectedOptions=i}#a(){const e=[\"nice-select\",o(this.el,\"class\")||\"\",this.disabled?\"disabled\":\"\",this.multiple?\"has-multiple\":\"\"].filter(Boolean),t=this.config.searchable?`\\n      <div class=\"nice-select-search-box\">\\n        <input type=\"text\" class=\"nice-select-search\" placeholder=\"${this.searchtext}...\" title=\"search\"/>\\n      </div>\\n    `:\"\",s=`\\n      <div class=\"${e.join(\" \")}\" tabindex=\"${this.disabled?\"\":0}\">\\n        <span class=\"${this.multiple?\"multiple-options\":\"current\"}\"></span>\\n        <div class=\"nice-select-dropdown\">\\n          ${t}\\n          <ul class=\"list\"></ul>\\n        </div>\\n      </div>\\n    `;this.el.insertAdjacentHTML(\"afterend\",s),this.dropdown=this.el.nextElementSibling,this.#l(),this.#c()}#l(){if(this.multiple){let e=\"\";\"auto\"===window.getComputedStyle(this.dropdown).width||this.selectedOptions.length<2?(this.selectedOptions.forEach((t,s,i)=>{let l=t.data.text;s!==i.length-1&&(l+=\", \");let n=document.createElement(\"span\");n.classList.add(\"current\"),n.textContent=l,e+=n.outerHTML}),e=e||this.placeholder):e=`${this.selectedOptions.length} ${this.selectedtext}`,this.dropdown.querySelector(\".multiple-options\").innerHTML=e}else{const e=this.selectedOptions.length>0?this.selectedOptions[0].data.text:this.placeholder;this.dropdown.querySelector(\".current\").textContent=e}}#c(){const e=this.dropdown.querySelector(\"ul\");this.options.forEach(t=>{this.multiple&&this.config.showSelectedItems&&this.#h(t),e.appendChild(this.#p(t))})}#p(e){const t=document.createElement(\"li\");if(t.textContent=e.data.text,void 0!==e.data.extra&&t.appendChild(this.#u(e.data.extra)),e.attributes.optgroup)a(t,\"optgroup\");else{t.setAttribute(\"data-value\",e.data.value);const s=[\"option\"];e.attributes.selected&&s.push(\"selected\"),e.attributes.disabled&&s.push(\"disabled\"),t.classList.add(...s),t.addEventListener(\"click\",t=>this.#m(e,t))}return e.element=t,t}#u(e){const t=document.createElement(\"span\");return t.innerHTML=e,a(t,\"extra\"),t}#t(){this.el.addEventListener(\"invalid\",()=>this.#f(\"invalid\")),window.addEventListener(\"click\",e=>this.#v(e)),this.el.addEventListener(\"change\",this.update)}#r(){this.dropdown.addEventListener(\"click\",e=>this.#w(e)),this.dropdown.addEventListener(\"keydown\",e=>this.#b(e)),this.dropdown.addEventListener(\"focusin\",()=>{return e=this.el,s(e,\"focusin\");var e}),this.dropdown.addEventListener(\"focusout\",()=>{return e=this.el,s(e,\"focusout\");var e}),this.config.searchable&&this.#S()}#S(){const e=this.dropdown.querySelector(\".nice-select-search\");e&&(e.addEventListener(\"click\",e=>e.stopPropagation()),e.addEventListener(\"input\",e=>this.#g(e)))}#w(e){e.preventDefault(),this.focus(e.target)}#m(e,t){const s=t.target;if(!d(s,\"disabled\")){if(this.multiple){let t;d(s,\"selected\")?(t=!1,r(s,\"selected\"),this.selectedOptions=this.selectedOptions.filter(t=>t.data!==e.data)):(t=!0,a(s,\"selected\"),this.selectedOptions.push(e)),e.data.selected=t,e.attributes.selected=t}else{this.dropdown.querySelectorAll(\"li.selected\").forEach(e=>r(e,\"selected\")),a(s,\"selected\"),this.selectedOptions=[e];let t=this.options.find(e=>e.attributes.selected);t&&(t.data.selected=!1,t.attributes.selected=!1),e.data.selected=!0,e.attributes.selected=!0}this.#l(),this.#y(),this.#L()}}#y(){const e=this.el;this.selectedOptions.length>0?e.value=this.selectedOptions[0].data.value:(e.value=\"\",e.selectedIndex=-1),this.options.forEach(t=>{let s=Array.from(e.options).find(e=>String(e.dataset.display||e.textContent).trim().toLowerCase()===String(t.data.text).trim().toLowerCase());null==s&&(s=Array.from(e.options).find(e=>String(e.value).trim().toLowerCase()===String(t.data.value).trim().toLowerCase())),null!=s?t.attributes.selected?s.selected=!0:s.selected=!1:console.warn(`No matching option found for value: \"${t.data.value}\" in select element`,e)}),e.removeEventListener(\"change\",this.update),l(e),e.addEventListener(\"change\",this.update)}#i(){if(this.multiple){const e=this.el;this.selectedOptions.forEach(t=>{const s=e.querySelector(`option[value=\"${t.data.value}\"]`);s&&(s.selected=!1)})}else this.selectedOptions.length>0&&(this.el.selectedIndex=-1);l(this.el)}#s(){if(this.dropdown){const e=d(this.dropdown,\"open\");this.#n(),this.dropdown.remove(),this.data=null,this.#e(!1),e&&i(this.dropdown)}o(this.el,\"disabled\")?this.disable():this.enable()}#L(){this.config.showSelectedItems&&(this.#n(),this.selectedOptions.forEach(e=>{this.#h(e)}))}#v(e){this.dropdown.contains(e.target)||(r(this.dropdown,\"open\"),n(this.el))}#b(e){const t=this.dropdown.querySelector(\".focus\"),s=d(this.dropdown,\"open\");if(13===e.keyCode)i(s?t:this.dropdown);else if(40===e.keyCode){if(s){const e=this.#E(t);e&&(t&&r(t,\"focus\"),a(e,\"focus\"))}else i(this.dropdown);e.preventDefault()}else if(38===e.keyCode){if(s){const e=this.#x(t);e&&(t&&r(t,\"focus\"),a(e,\"focus\"))}else i(this.dropdown);e.preventDefault()}else if(27===e.keyCode&&s)i(this.dropdown);else if(32===e.keyCode&&s)return!1;const l=this.dropdown.querySelector(\".focus\");return l&&l.scrollIntoView({block:\"center\"}),!1}#E(e){let t=e?e.nextElementSibling:this.dropdown.querySelector(\".list .option\");for(;t;){if(!d(t,\"disabled\")&&\"none\"!==t.style.display)return t;t=t.nextElementSibling}return null}#x(e){let t=e?e.previousElementSibling:this.dropdown.querySelector(\".list .option:last-child\");for(;t;){if(!d(t,\"disabled\")&&\"none\"!==t.style.display)return t;t=t.previousElementSibling}return null}#g(e){const t=e.target.value.toLowerCase();if(\"\"===t)this.options.forEach(e=>e.element.style.display=\"\");else if(d(this.dropdown,\"open\")){const e=new RegExp(t);this.options.forEach(t=>{t.element.style.display=e.test(t.data.text.toLowerCase())?\"\":\"none\"})}this.dropdown.querySelectorAll(\".focus\").forEach(e=>r(e,\"focus\"));const s=this.#E(null);s&&a(s,\"focus\")}#f(e){\"invalid\"===e?(a(this.dropdown,\"invalid\"),r(this.dropdown,\"valid\")):(a(this.dropdown,\"valid\"),r(this.dropdown,\"invalid\"))}#n(){null!=this.selectionList&&(this.selectionList.remove(),this.selectionList=null)}#h(e){if(!this.multiple||e.data.disabled||\"\"==e.data.value||!e.attributes.selected)return;if(null==this.selectionList)this.selectionList=document.createElement(\"ul\"),this.selectionList.classList.add(\"select-selection-list\"),this.el.after(this.selectionList);else if(null!=this.selectionList.querySelector(`[data-value=\"${e.data.value}\"]`))return;let t=document.createElement(\"li\");t.classList.add(\"select-selection\"),t.dataset.value=e.data.value;let s=document.createElement(\"button\");s.classList.add(\"small\",\"remove-select-selection\");let i=document.createElement(\"span\");i.classList.add(\"remove-select-selection\"),i.textContent=\"x\",s.appendChild(i),t.appendChild(s),i=document.createElement(\"span\"),i.classList.add(\"selected-name\"),i.textContent=e.data.text,t.appendChild(i),this.selectionList.appendChild(t),t.querySelectorAll(\".remove-select-selection\").forEach(e=>e.addEventListener(\"click\",this.#C.bind(this)))}#C(e){if(null==this.selectionList)return;if(null!=e.target&&(e=e.target),null==e.matches||!e.matches(\".remove-select-selection\"))return;let t=e.closest(\"li.select-selection\"),s=this.options.find(e=>e.data.value===t.dataset.value).element;s&&s.matches(\".selected\")&&s.click()}}const p=h;function u(e,t){return new h(e,t)}return t})());\n//# sourceMappingURL=nice-select2.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export function changeUrl(target, secondTab=''){\r\n    let newParam\t= target.dataset.paramVal;\r\n    let hash\t\t= target.dataset.hash;\r\n    const url \t\t= new URL(window.location);\r\n\r\n    //Change the url params\r\n    if(target.closest('.tabcontent') == null || target.parentNode.classList.contains('modal-content')){\r\n        //Add query-arg if it is a main tab\r\n        url.searchParams.set('main-tab', newParam);\r\n        url.searchParams.delete('second-tab');\r\n    }else{\r\n        url.searchParams.set('second-tab', newParam);\r\n    }\r\n\r\n    if(secondTab != ''){\r\n        url.searchParams.set('second-tab', secondTab);\r\n    }\r\n    \r\n    window.history.pushState({}, '', url);\r\n\r\n    if(hash != null){\r\n        window.location.hash\t= hash;\r\n    }else{\r\n        window.location.hash\t= '';\r\n    }\r\n\r\n    // switch tab when clicking on a change url link\r\n    if(target.tagName == 'A'){\r\n        switchTab();\r\n    }\r\n}\r\n\r\nexport function switchTab(event=null){\r\n    let params = new Proxy(new URLSearchParams(window.location.search), {\r\n        get: (searchParams, prop) => searchParams.get(prop),\r\n    });\r\n    \r\n    let mainTab \t= params['main-tab'];\r\n    let lastTab\t\t= '';\r\n\r\n    if(mainTab != null){\r\n        //find the tab and display it\r\n        document.querySelectorAll(`[data-param-val=\"${mainTab}\"]:not(.active)`).forEach(tabbutton=>{\r\n            //only process non-modal tabs\r\n            if(tabbutton.closest('.modal') == null){\r\n                let result\t= displayTab(tabbutton);\r\n                if(result){\r\n                    lastTab\t= result;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    let secondTab = params.second_tab;\r\n    if(secondTab != null){\r\n        //find the tab and display it\r\n        document.querySelectorAll(`[data-param-val=\"${secondTab}\"]:not(.active)`).forEach(tabbutton=>{\r\n            displayTab(tabbutton);\r\n        });\r\n    }\r\n}\r\n\r\nexport function displayTab(tabButton){\r\n\r\n    //remove all existing highlights\r\n    document.querySelectorAll('.highlight').forEach(el=>el.classList.remove('highlight'));\r\n\r\n    let tab;\r\n    // Get content area\r\n    if(tabButton.dataset.target == undefined){\r\n        tab = document.querySelector('#'+tabButton.dataset.paramVal.trim());\r\n    }else{\r\n        tab = tabButton.closest('div:not(.tablink-wrapper)').querySelector('#'+tabButton.dataset.target);\r\n    }\r\n    \r\n    if(tab != null){\r\n        tab.classList.remove('hidden');\r\n\r\n        if(tabButton.tagName != 'A'){\r\n            //Mark the other tabbuttons as inactive\r\n            tabButton.parentNode.querySelectorAll(`:scope > .active:not(#${tabButton.id})`).forEach(child=>{\r\n                //Make inactive\r\n                child.classList.remove(\"active\");\r\n                    \r\n                //Hide the tab\r\n                var childTab\t= child.closest('div:not(.tablink-wrapper)').querySelector('#'+child.dataset.target);\r\n                if(childTab == null){\r\n                    console.error('Tab to hide not found:');\r\n                    console.error(child.closest('div:not(.tablink-wrapper)'));\r\n                    console.error('#'+child.dataset.target);\r\n                }else{\r\n                    childTab.classList.add('hidden');\r\n                }\r\n            });\r\n            \r\n            //Mark the tabbutton as active\r\n            tabButton.classList.add(\"active\");\r\n        }\r\n\r\n        //scroll to field\r\n        if (window.location.hash) {\r\n            var hash \t\t= window.location.hash.replace('#', '');\r\n\r\n            var hashField\t= tab.querySelector(`[name^=\"${hash}\"]`);\r\n        \r\n            if(hashField != null){\r\n                hashField.scrollIntoView({block: \"center\"});\r\n\r\n                var el\t\t\t= hashField.closest('.input-wrapper');\r\n                if(el != null){\r\n                    hashField.closest('.input-wrapper').classList.add('highlight');\r\n                }\r\n                hashField.classList.add('highlight');\r\n                hashField.focus();\r\n            }\r\n        }\r\n\r\n        // position any tables on this tab, as they can only be positioned when visible\r\n        if(typeof(SimTableFunctions) != 'undefined'){\r\n            SimTableFunctions.positionTable();\r\n        }\r\n\r\n        return tab;\r\n    }else{\r\n        return false;\r\n    }\r\n}","import { getFieldValue } from  '../../../plugins/sim-plugin/includes/js/field_value.js';\n\nexport function removeDefaultSelect(el){\n\tArray.from(el.options).forEach(function(option){\n\t\toption.defaultSelected = false;\n\t});\n}\n\nlet tinymceSettings = [];\nfunction prepareForCloning(originalNode){\n\t//also remove any tinymce's\n\tif(typeof(tinymce) != 'undefined'){\n\t\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\t\tlet tn = tinymce.get(el.id);\n\t\t\tif(tn != null){\n\t\t\t\ttinymceSettings[el.id] = tn.settings\n\t\t\t\ttn.save();\n\t\t\t\ttn.remove();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function cloneNode(originalNode, clear=true){\n\tprepareForCloning(originalNode);\n\t\n\t//make a clone\n\tlet newNode = originalNode.cloneNode(true);\n\n\t// remove niceselect drop down from clone\n\tnewNode.querySelectorAll('.nice-select').forEach(dropdown => dropdown.remove());\n\t\n\t//add tinymce's again\n\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\n\t\tif(tinymceSettings[el.id] != undefined){\n\t\t\ttinymce.init(tinymceSettings[el.id]);\n\t\t}\n\t});\n\t\n\t//clear values in the clone\n\tif(clear){\n\t\tnewNode.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\tif(input.type == 'checkbox' || input.type == 'radio'){\n\t\t\t\tinput.checked = false;\n\t\t\t}else if(!input.matches('.no-reset') ){\n\t\t\t\tinput.value = \"\";\n\t\t\t}\n\t\t\t\n\t\t\t//if this is a select\n\t\t\tif(input.type == \"select-one\"){\n\t\t\t\t//remove any defaults\n\t\t\t\tremoveDefaultSelect(input);\n\t\t\t}\n\t\t});\n\t}\n\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//remove any defaults\n\t\tremoveDefaultSelect(select);\n\n\t\tMain.attachNiceSelect(select);\n\t});\n\t\n\treturn newNode;\n}\n\nexport function copyFormInput(originalNode){\n\toriginalNode.querySelectorAll('.remove.hidden').forEach( el => el.classList.remove('hidden'));\n\n\tlet newNode = cloneNode(originalNode);\n\t\n\t//update the data index\n\tnewNode.querySelectorAll('.upload-files').forEach(function(uploadButton){\n\t\tuploadButton.dataset.index = nodeNr;\n\t})\n\t\n\t//Clear contents of any document preview divs.\n\tnewNode.querySelectorAll('.document-preview').forEach(function(previewDiv){\n\t\tpreviewDiv.innerHTML = '';\n\t});\n\n\t//Select\n\tlet i = 0;\n\tnewNode.querySelectorAll('select').forEach(select => {\n\t\t//Find the value of the select we have cloned\n\t\tlet previousVal = originalNode.getElementsByTagName('select')[i].selectedIndex;\n\t\t\n\t\t//Hide the value in the clone\n\t\tif(select.options[previousVal] != undefined){\n\t\t\tselect.options[previousVal].style.display = 'none';\n\t\t}\n\t\t\n\t\t//Add nice select\n\t\tMain.attachNiceSelect(select);\n\t\t\n\t\ti++;\n\t});\n\n\t// process tab buttons\n\tif(originalNode.matches('.tabcontent')){\n\t\t// Hide original\n\t\toriginalNode.classList.add('hidden');\n\n\t\t// Add button for the new one\n\t\tlet orgButton\t= originalNode.closest('.clone-divs-wrapper').querySelector(`.tablink.active`);\n\t\tlet newButton\t= cloneNode(orgButton);\n\n\t\t// make the org butto inactive\n\t\torgButton.classList.remove('active');\n\n\t\t//Insert the clone\n\t\torgButton.parentNode.insertBefore(newButton, orgButton.nextSibling);\n\t}\n\t\n\t//Insert the clone\n\toriginalNode.parentNode.insertBefore(newNode, originalNode.nextSibling);\n\n\t// Process formsteps\n\tif(originalNode.matches('.formstep')){\n\t\t// hide the new clone\n\t\tnewNode.classList.add('step-hidden');\n\n\t\t// Update the formstep controls\n\t\tlet form\t\t= originalNode.closest('form');\n\t\tif(form != null && form.querySelector('.multi-step-controls-wrapper') != null){\n\t\t\tupdateMultiStepControls(form);\n\t\t}\n\n\t\tlet text\t= originalNode.querySelector('.add.button').textContent.replace('Add ', '');\n\n\t\tMain.displayMessage(`Succesfully added an extra ${text}<br>Its added as the next page.`);\n\t}\n\t\n\treturn newNode;\n}\n\nexport function fixNumbering(wrapper){\n\twrapper.querySelectorAll(':scope > .clone-div, :scope > .tablink').forEach(updateNumbers);\n\n\tfunction updateNumbers(clone, index){\n\t\t//Update the new number\t\n\n\t\t// Update the ID\n\t\tif(clone.id != ''){\n\t\t\tclone.id = clone.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\t\t\n\t\t// Update the content\n\t\tif(clone.type == 'button' && clone.textContent != ''){\n\t\t\tclone.textContent \t\t= clone.textContent.replace(/[0-9]+(?!.*[0-9])/, index + 1);\n\n\t\t\tclone.dataset.target\t= clone.dataset.target.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t}\n\n\t\t// Update the divid attribute\n\t\tif(clone.dataset.divId  != null){\n\t\t\tclone.dataset.divId = index;\n\t\t}\n\t\t\n\t\t//Update the title\n\t\tclone.querySelectorAll('h3, h4, legend :first-child').forEach(el => {\n\t\t\tel.textContent = el.textContent.replace(/[0-9]+(?!.*[0-9])/, index + 1);\n\t\t});\n\t\t\n\t\t//Update the legend\n\t\t/* clone.querySelectorAll('legend').forEach(legend => {\n\t\t\tlegend.textContent = legend.textContent.replace(/[0-9]+(?!.*[0-9])/, ' '+(index+1));\n\t\t}); */\n\t\t\n\t\t//Update the elements\n\t\tclone.querySelectorAll('input,select,textarea').forEach(input => {\n\t\t\t//Do not copy nice selects\n\t\t\tif(!input.classList.contains('nice-select-search')){\n\t\t\t\t//Update the id\n\t\t\t\tif(input.id != '' && input.id != undefined){\n\t\t\t\t\tinput.id = input.id.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\n\t\t\t\t//Update the name\n\t\t\t\tif(input.name != '' && input.name != undefined){\n\t\t\t\t\tinput.name = input.name.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//Reset the select to the default\n\t\t\t\tif(input.type == 'button'){\n\t\t\t\t\tinput.value = input.value.replace(/[0-9]+(?!.*[0-9])/, index);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function removeNode(target){\n\tlet node\t\t\t= target.closest(\".clone-div\");\n\tlet parentNode\t\t= node.closest('.clone-divs-wrapper');\n\tlet allCloneDivs\t= parentNode.querySelectorAll('.clone-div');\n\t\n\t//Check if we are removing the last element\n\tif(allCloneDivs[allCloneDivs.length-1] == node){\n\t\tlet addElement = node.querySelector(\".add\");\n\t\t\n\t\t//Move the add button one up\n\t\tlet prev = node.previousElementSibling;\n\t\tif(prev.querySelector('.button-wrapper .add') == null){\n\t\t\tprev.querySelector('.button-wrapper').appendChild(addElement);\n\t\t}\n\t}\n\n\t// check if we need to remove a corresponding tab button\n\tif(node.matches('.tabcontent')){\n\t\tlet buttonToRemove\t= parentNode.querySelector(`.tablink[data-target=\"${node.id}\"]`);\n\t\tif(buttonToRemove != null){\n\n\t\t\t//if the button is active, make the previous one active\n\t\t\tif(buttonToRemove.classList.contains('active')){\n\t\t\t\tlet prevButton\t= buttonToRemove.previousElementSibling;\n\t\t\t\tif(prevButton != null){\n\t\t\t\t\tprevButton.classList.add('active');\n\t\t\t\t\t\n\t\t\t\t\t//show the corresponding tab\n\t\t\t\t\tMain.displayTab(prevButton);\n\t\t\t\t}else{\n\t\t\t\t\t//try the next one\n\t\t\t\t\tlet nextButton\t= buttonToRemove.nextElementSibling;\n\t\t\t\t\tif(nextButton != null){\n\t\t\t\t\t\tnextButton.classList.add('active');\n\t\t\t\t\t\t\n\t\t\t\t\t\t//show the corresponding tab\n\t\t\t\t\t\tMain.displayTab(nextButton);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//remove the button\n\t\t\tbuttonToRemove.remove();\n\t\t}\n\t}\n\n\t// Check if this is a formstep\n\tif(node.matches('.formstep')){\n\t\tlet newFormstep\t= null;\n\n\t\t// if there is a next clonable formstep, show that one\n\t\tlet nextFormstep\t= parentNode.querySelector(`.formstep[data-div-id='${parseInt(node.dataset.divId) + 1}']`);\n\t\tif(nextFormstep != null){\t\t\t\n\t\t\tnewFormstep\t= nextFormstep;\n\t\t}else{\n\t\t\t//try the previous one\n\t\t\tlet prevFormstep\t= parentNode.querySelector(`.formstep[data-div-id='${parseInt(node.dataset.divId) - 1}']`);\n\t\t\tif(prevFormstep != null){\n\t\t\t\tnewFormstep\t= prevFormstep;\n\t\t\t}\n\t\t}\n\n\t\tif(newFormstep != null){\n\t\t\t//check if we need to update the multi step controls\n\t\t\tlet form\t\t= node.closest('form');\n\t\t\tif(form != null && form.querySelector('.multi-step-controls-wrapper') != null){\n\t\t\t\tupdateMultiStepControls(form);\n\n\t\t\t\t// find the next visible formstep index\n\t\t\t\tform.querySelectorAll('.formstep').forEach((formstep, index) =>{\n\t\t\t\t\tif(formstep == newFormstep){\n\t\t\t\t\t\t//show the next visible formstep\n\t\t\t\t\t\tshowFormStep(index, form);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t//Remove the node\n\tnode.remove();\n\n\t//If there is only one div remaining, hide the remove button\n\tif(parentNode.querySelectorAll('.clone-div').length == 1){\n\t\tlet removeElement = parentNode.querySelector('.remove');\n\t\tremoveElement.classList.add('hidden');\n\t}\n\n\tfixNumbering(parentNode)\n}\n\n/* \n\tFUNCTIONS USED BY DYNAMIC FORMS JS\n */\nexport function tidyMultiInputs(){\n\t//remove unnecessary buttons on inputs with multiple values\n\tdocument.querySelectorAll('.clone-divs-wrapper').forEach( function(div){\n\t\tlet cloneDivArr\t= div.querySelectorAll(':scope > .clone-div');\n\t\t\n\t\tif(cloneDivArr.length == 1){\n\t\t\tcloneDivArr[0].querySelectorAll('.remove').forEach(el=>el.remove());\n\t\t}\n\t\t\n\t\tcloneDivArr.forEach(function(cloneDiv, index, array){\n\t\t\t//update dataset\n\t\t\tcloneDiv.dataset.divId = index;\n\t\t\t\n\t\t\t//remove add button for all but the last\n\t\t\tif(index != array.length - 1){\n\t\t\t\t// Select all add buttons but not the any nested buttons\n\t\t\t\tcloneDiv.querySelectorAll('.add:not(:scope .clone-divs-wrapper .add)').forEach(el=>el.remove());\n\t\t\t}\n\t\t})\n\t});\n}\n\nexport function updateMultiStepControls(form){\n\t// get active formsteps amount\n\tlet formsteps\t\t\t= form.querySelectorAll('.formstep');\n\tlet visibleFormsteps\t= form.querySelectorAll('.formstep:not(.hidden)');\n\tlet stepIndicators\t\t= form.querySelectorAll('.multi-step-controls-wrapper .step');\n\n\t// show all step circles\n\tstepIndicators.forEach(el => el.classList.remove('hidden'));\n\n\t// hide some step circles if needed\n\tfor(let x = visibleFormsteps.length; x < formsteps.length; x++){\n\t\tstepIndicators[x].classList.add('hidden');\n\t}\n\n\t// Add some step circles if needed\n\tfor(let x = stepIndicators.length; x < formsteps.length; x++){\n\t\tlet step\t= document.createElement('span');\n\t\tstep.classList.add('step');\n\n\t\tform.querySelectorAll(`.step-wrapper`).forEach(el => el.appendChild(step));\n\t}\n\n\t// check if this is the last visible\n\tlet currentFormstep\t\t= form.querySelector('.formstep:not(.step-hidden)');\n\tif(visibleFormsteps[visibleFormsteps.length-1] == currentFormstep){\n\t\t// make the submit button visible\n\t\tform.querySelector('.next-button').classList.add('hidden');\n\t\tform.querySelector('.form-submit ').classList.remove('hidden');\n\t}else{\n\t\tform.querySelector('.next-button').classList.remove('hidden');\n\t\tform.querySelector('.form-submit ').classList.add('hidden');\n\t}\n}\n\t\n/** \n * show a next form step\n * @param {number} n - the form step index to show\n * @param {Element} form - the form contaning the form steps\n */\nexport function showFormStep(n, form) {\n\tif(typeof(form) != 'undefined'){\n\t\tif(n == 0){\n\t\t\tlet loader = form.querySelector('.loader-wrapper:not(.hidden)' );\n\t\t\t//hide loader\n\t\t\tif(loader != null){\n\t\t\t\tloader.classList.add('hidden');\n\t\t\t}\n\n\t\t\t//show form controls\n\t\t\tform.querySelector('.multi-step-controls.hidden').classList.remove('hidden');\n\t\t}\n\t\t\n\t\t//hide all formsteps\n\t\tform.querySelectorAll('.formstep:not(.step-hidden)').forEach(step=>step.classList.add('step-hidden'));\n\t\t\n\t\t// Show the specified formstep of the form ...\n\t\tlet x = form.getElementsByClassName(\"formstep\");\n\t\t\n\t\tif(x.length == 0){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//scroll back to top\n\t\tlet y = x[n].offsetTop - document.querySelector(\"#masthead\").offsetHeight\n\t\twindow.scrollTo({ top: y, behavior: 'auto'});\n\t\t\n\t\t//show\n\t\tx[n].classList.remove('step-hidden');\n\n\t\t// This function removes the \"active\" class of all steps...\n\t\tform.querySelectorAll(\".step.active\").forEach(el=>{el.classList.remove('active');});\n\n\t\t//... and adds the \"active\" class to the current step:\n\t\tx = form.getElementsByClassName(\"step\");\n\t\ttry{\n\t\t\tx[n].classList.add(\"active\");\n\t\t}catch(err) {\n\t\t\tconsole.log(x);\n\t\t\tconsole.log(n);\n\t\t  \tconsole.error(err.message);\n\t\t}\n\t\t\n\n\t\t// ... and fix the Previous/Next buttons:\n\t\tif (n == 0) {\n\t\t\tform.querySelector('[name=\"previous-button\"]').classList.add('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"previous-button\"]').classList.remove('hidden');\n\t\t}\n\n\t\tif (n == (x.length - 1)) {\n\t\t\tform.querySelector('[name=\"next-button\"]').classList.add('hidden');\n\t\t\tform.querySelector('.form-submit').classList.remove('hidden');\n\t\t} else {\n\t\t\tform.querySelector('[name=\"next-button\"]').classList.remove('hidden');\n\t\t\tform.querySelector('.form-submit').classList.add('hidden');\n\t\t}\n\t}else{\n\t\tconsole.log('no form defined');\n\t}\n\t\t\n}\n\n//next form step clicked\nexport function nextPrev(n, form) {\n\t// This function will figure out which tab to display\n\tlet x \t\t\t\t= form.querySelectorAll(\".formstep\");\n\tlet stepIndicators\t= form.querySelectorAll(\".step\");\n\tlet currentTab\t\t= 0;\n\tlet valid\t\t\t= true;\n\n\t// Find the current active tab\n\tx.forEach((el, index)=>{if(!el.matches('.step-hidden')){currentTab = index}});\n\t\n\t//Check validity of this step if going forward\n\tif( n > 0){\n\t\t// Prepare the elements on this tab\n\t\tFormSubmit.prepareForValidation(x[currentTab]);\n\n\t\t// Report validity of each required field\n\t\tlet elements\t= x[currentTab].querySelectorAll('input[required], textarea[required], select[required]');\n\t\tfor(const element of elements) {\n\t\t\telement.required\t= true;\n\t\t\tvalid\t\t\t\t= element.reportValidity();\n\t\t\tif(!valid){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(!valid) return;\n\t\t\n\t\t//mark the last step as finished\n\t\tstepIndicators[currentTab].classList.add(\"finish\");\n\t}else{\n\t\t//mark the last step as unfinished\n\t\tstepIndicators[currentTab].classList.remove(\"finish\");\n\t}\n\t\n\t//loop over all the formsteps to hide stepindicators of them if needed\n\tArray.from(x).forEach((formstep,index) =>{\n\t\tif(formstep.classList.contains('hidden')){\n\t\t\t//hide the corresponding circle\n\t\t\tstepIndicators[index].classList.add('hidden');\n\t\t}\n\t});\n\n\t// Increase or decrease the current tab by 1:\n\tcurrentTab = currentTab + n;\n\t\n\t//check if the next tab is hidden\n\twhile(x[currentTab].classList.contains('hidden')){\n\t\t//go to the next tab\n\t\tcurrentTab = currentTab + n;\n\n\t\tif (currentTab >= x.length) {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// if you have reached the end of the form... :\n\tif (currentTab >= x.length) {\n\t\treturn false;\n\t}\n\t// Otherwise, display the correct tab:\n\tshowFormStep(currentTab, form);\n\n\treturn true;\n}\n\nexport function changeFieldValue(selector, value, functionRef, form, addition='', forceValue=false){\n\tif(value == undefined){\n\t\treturn;\n\t}\n\n\tlet name\t\t= '';\n\tlet target\t\t= '';\n\n\tif(selector instanceof Element){\n\t\ttarget\t\t= selector;\n\t\tname\t\t= target.name;\n\t\tif(target.id == ''){\n\t\t\tselector\t= `[name^=\"${target.name}\" i]`;\n\t\t}else{\n\t\t\tselector\t= `[id^=${target.id}]`;\n\t\t}\n\t\t\n\t}else{\n\t\ttarget \t\t= form.querySelector(selector);\n\n\t\ttry{\n\t\t\tname\t\t= target.name;\n\t\t}catch{\n\t\t\tconsole.log(target);\n\t\t}\n\t}\n\n\tlet oldValue\t= getFieldValue(target, form, false, value);\n\t// nothing to change\n\tif(oldValue == value){\n\t\treturn;\n\t}\n\n\t// Check if we are dealing with a multi input field\n\tif(target == null){\n\t\tlet targets \t= form.querySelectorAll(`.clone-div [name^=\"${name}\" i]`);\n\t\tif(targets.length === 0){\n\t\t\treturn;\n\t\t}else if(targets.length == 1){\n\t\t\ttarget\t= targets[0];\n\t\t\ttargets\t= '';\n\t\t}else{\n\t\t\ttarget\t= targets[0];\n\n\t\t\ttargets.forEach((el, index) =>{\n\t\t\t\tif(index == 0){\n\t\t\t\t\tchangeFieldValue(el, '', '', form);\n\t\t\t\t}else{\n\t\t\t\t\tremoveNode(el);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\t\n\tif(target.type == 'radio' || target.type == 'checkbox'){\n\t\t// uncheck all\n\t\tif(value == ''){\n\t\t\tif(selector != ''){\n\t\t\t\tform.querySelectorAll(selector).forEach(el=>el.checked=false);\n\t\t\t}\n\t\t}else{\n\t\t\t// Check if the current target is the one we need to check\n\t\t\tif(target.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\ttarget.checked = true;\n\t\t\t}else{\n\t\t\t\t// find the element with the given value and check it\n\t\t\t\tlet targets = form.querySelectorAll(`[name=\"${name}\" i]`);\n\t\t\t\tfor (const element of targets) {\n\t\t\t\t\tif(element.value.toLowerCase() == value.toLowerCase()){\n\t\t\t\t\t\telement.checked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t//the target has a list attached to it\n\t}else if(target.type == 'date'){\n\t\ttarget.value = value;\n\t\t\n\t\t// convert a date to the right format\n\t\tif (!/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet splitted = '';\n\t\t\tif(value.split('-').length == 3){\n\t\t\t\tsplitted\t= value.split('-');\n\t\t\t}else if(value.split('/').length == 3){\n\t\t\t\tsplitted\t= value.split('/');\n\t\t\t}\n\n\t\t\tif(splitted != ''){\n\t\t\t\tlet year;\n\t\t\t\tlet month;\n\t\t\t\tlet day;\n\t\t\t\tsplitted.forEach(nr=>{\n\t\t\t\t\tif(nr.length == 4){\n\t\t\t\t\t\tyear\t= nr;\n\t\t\t\t\t}else if(nr.length == 2){\n\t\t\t\t\t\tif(nr > 12){\n\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t// does not have a value yet\n\t\t\t\t\t\t\tif(month == undefined){\n\t\t\t\t\t\t\t\tmonth\t= nr;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tday\t= nr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(day != undefined && month != undefined && year != undefined){\n\t\t\t\t\ttarget.value = `${year}-${month}-${day}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else if(target.list != null){\n\t\tlet dataListOption = target.list.querySelector(`[data-value=\"${value}\" i]`);\n\n\t\t//we found a match\n\t\tif(dataListOption != null){\n\t\t\t// We found a cloned field, add as many inputs as needed\n\t\t\tif(target.closest('.clone-div') != null){\n\t\t\t\t// mark the existing ones for deletion, we can delete right now as we need to copy the existing ones first\n\t\t\t\ttarget.closest('.clone-divs-wrapper').querySelectorAll('.clone-div').forEach(el=>el.classList.add('shouldremove'));\n\n\t\t\t\tlet clone;\n\t\t\t\tdataListOption.value.split(';').forEach(val=>{\n\t\t\t\t\tclone = copyFormInput(target.closest('.clone-div'));\n\n\t\t\t\t\tclone.classList.remove('shouldremove');\n\n\t\t\t\t\tchangeFieldValue(clone.querySelector(target.tagName), val, '', form, '', true);\n\t\t\t\t});\n\n\t\t\t\tfixNumbering(target.closest('.clone-divs-wrapper'));\n\n\t\t\t\t// delete the old ones\n\t\t\t\ttarget.closest('.clone-divs-wrapper').querySelectorAll('.shouldremove').forEach(el=>el.remove());\n\t\t\t}else{\n\t\t\t\ttarget.value = dataListOption.value;\n\t\t\t}\n\t\t// We did not find a match, we are filling in the given value\n\t\t}else if(forceValue){\n\t\t\ttarget.value = value;\n\t\t// We did not find a match, empty value\n\t\t}else{\n\t\t\ttarget.value = '';\n\t\t}\n\t}else{\n\t\ttarget.value = value;\n\t}\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(target);\n\t}\n}\n\nexport function changeVisibility(action, el, functionRef){\n\tlet wrapper\t= el.closest('.input-wrapper');\n\tif(wrapper == null){\n\t\twrapper\t= el\n\t}\n\t\n\tif(action == 'add'){\n\t\tif(wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.add('hidden');\n\t}else{\n\t\tif(!wrapper.matches('.hidden')){\n\t\t\treturn;\n\t\t}\n\t\twrapper.classList.remove('hidden');\n\t}\n\n\t//create a new event\n\tlet evt = new Event('input');\n\t//attach the target\n\twrapper.dispatchEvent(evt);\n\t\n\t//run the originating function with this event\n\tif(typeof functionRef == 'function'){\n\t\tfunctionRef(el);\n\t}\n}\n\nexport function changeFieldProperty(selector, att, value, functionRef, form, addition=''){\n\t//first change the value\n\tlet target = form.querySelector(selector);\n\n\t// calculate the new value\n\tif(addition != ''){\n\t\t// check if a date\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\n\t\t\tlet date\t= new Date(value);\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\n\t\t\tvalue\t= date.toISOString().split('T')[0];\n\t\t}else{\n\t\t\tvalue\t= value + parseInt(addition);\n\t\t}\n\t}\n\n\ttarget[att] = value;\n\t\n\t//create a new event\n\tlet evt = new Event('input');\n\n\t//attach the target\n\ttarget.dispatchEvent(evt);\n\n\t//run the originating function with this event\n\tfunctionRef(target);\n}","import {changeUrl, displayTab} from './../../../../includes/js/partials/tabs.js'\r\nimport {showModal} from './../../../../includes/js/partials/modals.js'\r\nimport {fetchRestApi} from  './../../../../includes/js/form_submit_functions.js'\r\nimport {copyFormInput, fixNumbering, removeNode} from './../../../../../../sim-modules/forms/js/form_exports.js'\r\nimport { bind as NiceSelect } from '../../../js/node_modules/nice-select2';\r\n\r\nconsole.log('admin.js loaded');\r\n\r\nfunction switchSlider(event){\r\n    if(event.target.checked){\r\n        document.querySelectorAll('.options, .tablink-wrapper').forEach(el=>el.style.display    = 'block');\r\n    }else{\r\n        document.querySelectorAll('.options, .tablink-wrapper').forEach(el=>el.style.display    = 'none');\r\n    }\r\n}\r\n\r\n//Load after page load\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\tdocument.querySelectorAll('[name=\"enable\"]').forEach(el=>el.addEventListener('change', switchSlider));\r\n\r\n\t//add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceSelect  == undefined){\r\n\t\t    NiceSelect(select, {searchable: true});\r\n        }\r\n\t});\r\n});\r\n\r\nwindow.addEventListener(\"click\", async event => {\r\n\tlet target = event.target;\r\n        \r\n    //add element\r\n    if(target.matches('.add')){\r\n        let newNode = copyFormInput(target.closest(\".clone-div\"));\r\n\r\n        fixNumbering(target.closest('.clone-divs-wrapper'));\r\n\r\n        //add tinymce's can only be done when node is inserted and id is unique\r\n        newNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor',false, el.id);\r\n        });\r\n\r\n        target.remove();\r\n    }\r\n    \r\n    //remove element\r\n    if(target.matches('.remove')){\r\n        //Remove node clicked\r\n        removeNode(target);\r\n    }\r\n\r\n    if(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\r\n        event.preventDefault();\r\n\r\n        let value = '';\r\n        if(target.classList.contains('placeholders')){\r\n            value = target.textContent;\r\n        }else if(target.value != ''){\r\n            value = target.value;\r\n            target.selectedIndex = '0';\r\n        }\r\n        \r\n        if(value != ''){\r\n            let options = {\r\n                icon: 'success',\r\n                title: 'Copied '+value,\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n            };\r\n\r\n            if(document.fullscreenElement != null){\r\n                options['target']\t= document.fullscreenElement;\r\n            }\r\n\r\n            Swal.fire(options);\r\n            navigator.clipboard.writeText(value);\r\n        }\r\n    }\r\n\r\n    if(target.matches(\".tablink\")){\r\n\t\tevent.preventDefault();\r\n\t\t//change the url in browser\r\n\t\tchangeUrl(target);\r\n\r\n\t\t//show the tab\r\n\t\tdisplayTab(target);\r\n\t}else if(target.matches(`.sim.release`)){\r\n        showModal('release');\r\n\r\n        let formData    = new FormData();\r\n        formData.append('module-name', target.dataset.name);\r\n        \r\n        let response    = await fetchRestApi('get-changelog', formData);\r\n\r\n        document.querySelector('#release-modal .loader-wrapper').classList.add('hidden');\r\n\r\n        document.querySelector('#release-modal .content').innerHTML   = response;\r\n        document.querySelector('#release-modal .content').classList.remove('hidden');\r\n    }\r\n});\r\n\r\ndocument.querySelectorAll('#release-modal').forEach(el=>el.addEventListener('modalclosed', ev=>{\r\n    ev.target.querySelector('.loader-wrapper').classList.remove('hidden');\r\n    ev.target.querySelector('.content').classList.add('hidden');\r\n}));","export function showModal(modal){\r\n    if(typeof(modal) == 'string'){\r\n        modal = document.getElementById(modal + \"-modal\");\r\n    }\r\n    \r\n    if(modal != null){\r\n        // Prevent main page scrolling\r\n        document.body.style.top\t\t\t= `-${window.scrollY}px`;\r\n        document.body.style.position \t= 'fixed';\r\n\r\n        let prim\t\t\t\t\t\t= document.getElementById('primary');\r\n        if(prim != null){\r\n            prim.style.zIndex\t\t\t= '';\r\n        }\r\n\r\n        modal.classList.remove('hidden');\r\n\r\n        modal.style.display\t= 'block';\r\n    }\t\r\n}\r\n\r\nexport function hideModals(){\r\n    let modals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n    if(modals.length != 0){\r\n        modals.forEach(modal=>{\r\n            modal.classList.add('hidden');\r\n            modal.style.removeProperty('display');\r\n            \r\n            const event = new Event('modalclosed');\r\n            modal.dispatchEvent(event);\r\n        });\r\n\r\n        // Turn main page scrolling on again\r\n        const scrollY\t\t\t\t\t= document.body.style.top;\r\n        document.body.style.position \t= '';\r\n        document.body.style.top \t\t= '';\r\n        window.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n        \r\n        /* \t\tlet prim\t\t\t\t\t\t= document.getElementById('primary');\r\n        if(prim != null){\r\n            prim.style.zIndex\t\t\t= 1;\r\n        } */\r\n    }\r\n}","export function formReset(form){\r\n\t//reset form to the default\r\n\tform.reset();\r\n\r\n\t//hide loaders\r\n\tform.querySelectorAll('.loader-wrapper').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t//hide button again if needed\r\n\tform.querySelectorAll('.multi-step-controls .form-submit').forEach(el=>el.classList.add('hidden'));\r\n\t\r\n\t//fix required fields\r\n\tform.querySelectorAll('[required]').forEach(el=>{el.required = false;});\r\n\t\r\n\t//empty any fileuploads\r\n\tform.querySelectorAll('.file_upload').forEach(el=>el.value='');\r\n\r\n\t//show hidden file uploads\r\n\tform.querySelectorAll('.upload-div.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\r\n\t//remove doc previews\r\n\tdocument.querySelectorAll('.document-preview .document').forEach(el=>el.remove());\r\n\t\r\n\tif(form.querySelector('.formstep') != null){\r\n\t\t//mark all circles as not active anymore\r\n\t\tform.querySelectorAll('.multi-step-controls .step.finish').forEach(el=>el.classList.remove('finish'));\r\n\t\r\n\t\t//go back to the first part of the form in case of multistep\r\n\t\tFormFunctions.showFormStep(0, form);\r\n\t}\r\n}\r\n\r\n/**\r\n * \r\n * @param {node} wrapper \tThe Wrapper element of the inputs to be prepared\r\n */\r\nexport function prepareForValidation(wrapper){\r\n\t// make all inputs required that should be\r\n\twrapper.querySelectorAll('.required input, .required textarea, .required select').forEach(el => el.required = true);\r\n\r\n\t//get all hidden required inputs and unrequire them\r\n\twrapper.querySelectorAll('.hidden [required], select[required], .nice-select-search[required], .step-hidden [required]').forEach(el=>{el.required = false});\r\n\r\n\t// Get all multi-text inputs with a value and unrequire the main element\r\n\twrapper.querySelectorAll(`.list-selection-list > .list-selection:first-child`).forEach(list => list.closest('.option-wrapper').querySelector(`input[type='text']`).required = false);\r\n\r\n\t// enable disabled fields so it gets included and warnings are shown\r\n\twrapper.querySelectorAll('[disabled][required]').forEach( el=>{\r\n\t\tel.disabled\t= false;\r\n\t\tel.classList.add('was-disabled'); \r\n\t});\r\n}\r\n\r\nexport async function submitForm(target, url, extraData=''){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet validity \t= true;\r\n\t\r\n\tprepareForValidation(form);\r\n\r\n\tvalidity\t= form.reportValidity();\r\n\r\n\tif(!validity){\r\n\t\tform.querySelectorAll(':invalid').forEach(el=>{\r\n\t\t\tif(el.validationMessage != undefined){\r\n\t\t\t\tMain.displayMessage(`${el.name} has an error:\\n${el.validationMessage}`, 'error').then((value)=>{\r\n\t\t\t\t\tform.querySelectorAll('.formstep:not(.step-hidden)').forEach(formstep => formstep.classList.add('step-hidden'));\r\n\r\n\t\t\t\t\tif(el.closest('.step-hidden') != null){\r\n\t\t\t\t\t\tel.closest('.step-hidden').classList.remove('step-hidden');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\tel.scrollIntoView();\r\n\r\n\t\t\t\t\tel.focus();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Disable the submit button\r\n\ttarget.disabled\t= true;\r\n\r\n\t/**\r\n\t * Adjust the submit button text\r\n\t */\r\n\tlet buttonText \t\t= target.innerHTML;\r\n\r\n\t// get the first word\r\n\tlet text\t\t\t= buttonText.split(' ')[0];\r\n\tlet vowels\t\t\t= ['a', 'e', 'i', 'o', 'u'];\r\n\tlet lastChar\t\t= text.charAt(text.length - 1);\r\n\tlet secondLatChar\t= text.charAt(text.length - 2);\r\n\t\r\n\tif(lastChar == 'e'){\r\n\t\t// replace ie with y\r\n\t\tif(secondLatChar == 'i'){\r\n\t\t\ttext\t\t= text.substring(0, text.length - 2)+'y';\r\n\t\t}\r\n\t\t\r\n\t\t// remove the e\r\n\t\telse{\r\n\t\t\ttext\t\t= text.substring(0, text.length - 1);\r\n\t\t}\r\n\t}\r\n\r\n\t// duplicate the last letter if needed\r\n\telse if(\r\n\t\tsecondLatChar != lastChar &&\r\n\t\tvowels.includes(secondLatChar) &&\r\n\t\t!vowels.includes(lastChar)\r\n\t){\r\n\t\ttext\t\t\t= text + text.substring(text.length - 1, text.length);\r\n\t}\r\n\r\n\ttext\t\t\t\t= text+'ing...';\r\n\r\n\ttarget.innerHTML\t= Main.showLoader(null, false, 20, text, true, true);\r\n\t\r\n\t//save any tinymce forms\r\n\tif (typeof tinymce !== 'undefined') {\r\n\t\ttinymce.get().forEach((tn)=>{\r\n\t\t\t// only save when the visual tab is active\r\n\t\t\tif(!tn.hidden){\r\n\t\t\t\ttn.save()\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// change the name of multiselects if needed\r\n\tdocument.querySelectorAll('select[multiple]:not([name$=\\\\[\\\\]])').forEach(el => {\r\n\t\tconsole.error(`Multi select ${el.name} should have [] at the end. I have fixed it for now`);\r\n\t\tel.name\t= el.name+'[]';\r\n\t})\r\n\t\r\n\tlet formData = new FormData(form);\r\n\t\r\n\tif(extraData != ''){\r\n\t\tformData.append('extra', extraData);\r\n\t}\r\n\r\n\t// disable fields again\r\n\tform.querySelectorAll('.was-disabled').forEach( el=>{\r\n\t\tel.disabled\t= true;\r\n\t\tel.classList.remove('was-disabled'); \r\n\t});\r\n\r\n\tif(form.dataset.addEmpty == true){\r\n\t\t//also append at least one off all checkboxes\r\n\t\tform.querySelectorAll('input[type=\"checkbox\"]:not(:checked)').forEach(checkbox=>{\r\n\t\t\t//if no checkbox with this name exist yet\r\n\t\t\tif(!formData.has(checkbox.name)){\r\n\t\t\t\tformData.append(checkbox.name,'');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// also add get params\r\n\ttry{\r\n\t\tlocation['search'].split('?')[1].split('&').forEach(param=>{\r\n\t\t\tlet split\t= param.split('=');\r\n\t\t\tif(split[0] != 'formbuilder' && split[0] != 'main-tab' && split[0] != 'second-tab'){\r\n\t\t\t\tformData.append(split[0], split[1]);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}catch{\r\n\t\t//pass\r\n\t};\r\n\r\n\tlet response = await fetchRestApi(url, formData);\r\n\r\n\t// Reset button\r\n\ttarget.innerHTML\t= buttonText;\r\n\ttarget.disabled\t\t= false;\r\n\r\n\tif(form.dataset.reset != true){\r\n\t\tmarkComplete();\r\n\t}\r\n\r\n\treturn response;\r\n}\r\n\r\n/**\r\n * Set the default values to the current values so to not trigger a page leave warning\r\n */\r\nexport function markComplete(){\r\n\r\n\t// pending\r\n\tdocument.querySelectorAll('[data-pending]').forEach(el=>{\r\n\t\tel.removeAttribute('data-pending');\r\n\t});\r\n\r\n\t// check all inputs\r\n\tdocument.querySelectorAll('form input:not([type=radio], [type=checkbox]), form textarea').forEach(el=>{\r\n\t\tel.defaultValue = el.value\r\n\t});\r\n\r\n\t// check all checkboxes and radio\r\n\tdocument.querySelectorAll('form input[type=radio], form input[type=checkbox]').forEach(el=>{\r\n\t\tif(el.checked){\r\n\t\t\tel.defaultChecked = true; \r\n\t\t}\r\n\t});\r\n\r\n\t// check all dropdowns\r\n\tdocument.querySelectorAll('form select').forEach(el=>{\r\n\t\tif(el.selectedIndex != -1 && el.options[el.selectedIndex] != undefined){\r\n\t\t\tel.options[el.selectedIndex].defaultSelected\t= true;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport async function fetchRestApi(url, formData='', showErrors=true){\r\n\tif(formData == ''){\r\n\t\tformData\t= new FormData();\r\n\t}\r\n\t\r\n\tformData.append('_wpnonce', sim.restNonce);\r\n\tlet result;\r\n\ttry{\r\n\t\tresult = await fetch(\r\n\t\t\t`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tcredentials: 'same-origin',\r\n\t\t\t\tbody: formData\r\n\t\t\t}\r\n\t\t);\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t}\r\n\t\r\n\tlet response\t= await result.text();\r\n\ttry{\r\n\t\tlet json\t\t= JSON.parse(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\treturn json;\r\n\t\t}else if(json.code == 'rest_cookie_invalid_nonce'){\r\n\t\t\tMain.displayMessage('Please refresh the page and try again!', 'error');\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\tconsole.error(url);\r\n\t\t\tconsole.error(json);\r\n\t\t\tif(json.data == null || json.data.status == 403){\r\n\t\t\t\tMain.displayMessage(json.message);\r\n\t\t\t}else{\r\n\t\t\t\tMain.displayMessage(json.message+\"\\n\"+JSON.stringify(json.data), 'error');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t\tconsole.error(result);\r\n\t\tconsole.error(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\tif(showErrors){\r\n\t\t\t\tMain.displayMessage(`Problem parsing the json, refresh the page or try again.`, 'error');\r\n\t\t\t}\r\n\t\t\tconsole.error(`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}` );\r\n\t\t\tconsole.error(response);\r\n\t\t}else{\r\n\t\t\tlet modal\t= `<div id='response-details' class=\"modal hidden\" style='z-index:9999999999;'>`;\r\n\t\t\t\tmodal\t+= `<div class=\"modal-content\" style='max-width: min(1000px,100%);'>`\r\n\t\t\t\t\tmodal\t+= `<span class=\"close\">&times;</span>`;\r\n\t\t\t\t\tmodal\t+= response;\r\n\t\t\t\tmodal\t+= `</div>`;\r\n\t\t\tmodal\t+= `</div>`;\r\n\r\n\t\t\tdocument.querySelector('body').insertAdjacentHTML('afterBegin', modal);\r\n\t\t\tMain.displayMessage(`Error loading url ${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}<br><button class='button small' id='error-details' onclick='(function(){ document.getElementById(\"response-details\").classList.remove(\"hidden\"); })();'>Details</button><br><div class='hidden response-message'>${response}</div>`, 'error');\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n}"],"names":["t","self","e","d","s","i","o","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","bind","u","default","p","MouseEvent","Event","includes","FocusEvent","UIEvent","l","bubbles","cancelable","dispatchEvent","n","getAttribute","classList","contains","a","add","remove","c","data","searchable","showSelectedItems","placeholder","searchtext","selectedtext","hideSelect","h","constructor","Error","Element","this","el","_niceSelect","config","selectedOptions","dropdown","selectionList","multiple","disabled","update","target","disable","enable","clear","destroy","focus","querySelector","querySelectorAll","forEach","style","display","options","map","attributes","selected","optgroup","Array","from","defaultSelected","tagName","text","label","dataset","innerText","extra","element","push","filter","Boolean","join","insertAdjacentHTML","nextElementSibling","window","getComputedStyle","width","length","document","createElement","textContent","outerHTML","innerHTML","appendChild","setAttribute","addEventListener","stopPropagation","preventDefault","find","selectedIndex","String","trim","toLowerCase","console","warn","removeEventListener","keyCode","scrollIntoView","block","previousElementSibling","RegExp","test","after","matches","closest","click","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","displayTab","tabButton","tab","paramVal","parentNode","id","child","childTab","error","location","hash","replace","hashField","SimTableFunctions","positionTable","removeDefaultSelect","option","tinymceSettings","cloneNode","originalNode","tn","tinymce","settings","save","prepareForCloning","newNode","init","input","type","checked","select","Main","attachNiceSelect","fixNumbering","wrapper","clone","index","divId","name","removeNode","node","allCloneDivs","addElement","prev","buttonToRemove","prevButton","nextButton","newFormstep","nextFormstep","parseInt","prevFormstep","form","updateMultiStepControls","formstep","loader","step","x","getElementsByClassName","y","offsetTop","offsetHeight","scrollTo","top","behavior","err","log","message","showFormStep","formsteps","visibleFormsteps","stepIndicators","currentFormstep","switchSlider","event","async","uploadButton","nodeNr","previewDiv","previousVal","getElementsByTagName","orgButton","newButton","insertBefore","nextSibling","displayMessage","copyFormInput","tinyMCE","execCommand","icon","title","showConfirmButton","timer","fullscreenElement","Swal","fire","navigator","clipboard","writeText","secondTab","newParam","url","URL","searchParams","set","delete","history","pushState","params","Proxy","URLSearchParams","search","prop","mainTab","lastTab","tabbutton","result","second_tab","switchTab","changeUrl","modal","getElementById","body","scrollY","position","prim","zIndex","showModal","formData","FormData","append","response","showErrors","sim","restNonce","fetch","baseUrl","restApiPrefix","method","credentials","json","JSON","parse","ok","code","status","stringify","fetchRestApi","ev"],"sourceRoot":""}