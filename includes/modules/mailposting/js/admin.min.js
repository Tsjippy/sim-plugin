(()=>{"use strict";let e,t=function(){tinymce.remove(),document.querySelectorAll(".entry-content .wp-editor-area").forEach((e=>{window.tinyMCE.execCommand("mceAddEditor",!1,e.id)})),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0})),document.querySelectorAll(".wp-switch-editor").forEach((e=>e.addEventListener("click",(t=>{let r=e.closest(".wp-editor-wrap").querySelector(".wp-editor-area"),o=e.closest(".wp-editor-wrap").querySelector(".mce-panel");r.style.visibility="unset",t.target.matches(".switch-tmce")?(o.style.display="block",r.style.display="none"):(o.style.display="none",r.style.display="block")})))),document.querySelectorAll("select:not(.nonice,.swal2-select)").forEach((function(e){null==e._niceselect&&(e._niceselect=NiceSelect.bind(e,{searchable:!0}))}))},r=function(){let o=e.shift();if(null==document.getElementById(o.id)&&"SCRIPT"==o.tagName){var n=document.createElement("script");""==o.type?n.type="text/javascript":n.type=o.type,""!=o.src?n.src=o.src:n.innerHTML=o.innerHTML,n.id=o.id,document.head.appendChild(n),e.length>0?""!=o.src?n.addEventListener("load",r):r():""!=o.src?n.addEventListener("load",t):t()}else e.length>0?r():t()};function o(e){Array.from(e.options).forEach((function(e){e.defaultSelected=!1}))}let n=[];function l(e){let t=function(e,t=!0){!function(e){e.querySelectorAll("select").forEach((e=>{-1!=e.selectedIndex&&(e.options[e.selectedIndex].defaultSelected||o(e)),e.selectedOptions.length>0&&(e.selectedOptions[0].defaultSelected=!0),e._niceselect.destroy()})),"undefined"!=typeof tinymce&&e.querySelectorAll(".wp-editor-area").forEach((e=>{let t=tinymce.get(e.id);null!=t&&(n[e.id]=t.settings,t.save(),t.remove())}))}(e);let r=e.cloneNode(!0);return e.querySelectorAll("select").forEach((e=>{e._niceselect=NiceSelect.bind(e,{searchable:!0}),""==e.value&&e._niceselect.clear()})),e.querySelectorAll(".wp-editor-area").forEach((e=>{tinymce.init(n[e.id])})),t?r.querySelectorAll("input,select,textarea").forEach((e=>{"checkbox"==e.type||"radio"==e.type?e.checked=!1:"hidden"!=e.type&&(e.value=""),"select-one"==e.type&&(o(e),e._niceselect=NiceSelect.bind(e,{searchable:!0}),e._niceselect.clear())})):r.querySelectorAll("select").forEach((e=>{e._niceselect=NiceSelect.bind(e,{searchable:!0})})),r}(e);t.querySelectorAll(".upload-files").forEach((function(e){e.dataset.index=nodeNr})),t.querySelectorAll(".documentpreview").forEach((function(e){e.innerHTML=""}));let r=0;if(t.querySelectorAll("select").forEach((t=>{let o=e.getElementsByTagName("select")[r].selectedIndex;t.options[o].style.display="none",t._niceselect.update(),t.nextSibling.querySelector(".current").textContent="Select an option",r++})),null==e.querySelector(".remove")&&null==t.querySelector(".remove")){let r='<button type="button" class="remove button" style="flex: 1;">-</button>';e.querySelector(".buttonwrapper").insertAdjacentHTML("beforeend",r),t.querySelector(".buttonwrapper").insertAdjacentHTML("beforeend",r)}return e.parentNode.insertBefore(t,e.nextSibling),t}function c(e){e.querySelectorAll(":scope > .clone_div").forEach(((e,t)=>{""!=e.id&&(e.id=e.id.replace(/[0-9]+(?!.*[0-9])/,t)),null!=e.dataset.divid&&(e.dataset.divid=t),e.querySelectorAll("h3, h4, legend :first-child").forEach((e=>{e.textContent=e.textContent.replace(/[0-9]+(?!.*[0-9])/,t+1)})),e.querySelectorAll("input,select,textarea").forEach((e=>{e.classList.contains("nice-select-search")||(""!=e.id&&null!=e.id&&(e.id=e.id.replace(/[0-9]+(?!.*[0-9])/,t)),""!=e.name&&null!=e.name&&(e.name=e.name.replace(/[0-9]+(?!.*[0-9])/,t)),"button"==e.type&&(e.value=e.value.replace(/[0-9]+(?!.*[0-9])/,t)))}))}))}function a(e){let t=e.closest(".clone_div"),r=t.closest(".clone_divs_wrapper"),o=r.querySelectorAll(".clone_div");if(o[o.length-1]==t){let e=t.querySelector(".add"),r=t.previousElementSibling;null==r.querySelector(".buttonwrapper .add")&&r.querySelector(".buttonwrapper").appendChild(e)}t.remove(),1==r.querySelectorAll(".clone_div").length&&r.querySelector(".remove").remove(),c(r)}async function i(e){let t=e.closest(".form.table-wrapper"),r=e.outerHTML,o=new FormData,n=t.querySelector(".sim-table.form-data-table").dataset.formid,l=t.querySelector(".sim-table.form-data-table").dataset.shortcodeid;o.append("formid",n),o.append("id",l);const c=new URL(window.location);c.searchParams.get("onlyown")&&o.append("onlyown",!0),c.searchParams.get("all")&&(console.log("dsf"),o.append("all",!0)),c.searchParams.get("archived")&&o.append("archived",!0);let a=Main.showLoader(e,!1,"Requesting form results...");t.innerHTML=a.outerHTML;let i=await FormSubmit.fetchRestApi("forms/show_form_results",o);i?t.innerHTML=i:a.outerHTML=r}document.addEventListener("DOMContentLoaded",(function(){console.log("Forms.js is loaded")})),window.addEventListener("online",(function(){document.querySelectorAll(".form_submit").forEach((e=>{e.disabled=!1,e.querySelectorAll(".offline").forEach((e=>e.remove()))}))})),window.addEventListener("offline",(function(){document.querySelectorAll(".form_submit").forEach((e=>{e.disabled=!0,null==e.querySelector(".online")&&(e.innerHTML='<div class="online">'+e.innerHTML+"</div>"),e.innerHTML+='<div class="offline">You are offline</div>'}))})),document.addEventListener("click",(function(t){let o=t.target;if(o.matches(".add")){let e=l(o.closest(".clone_div"));c(o.closest(".clone_divs_wrapper")),e.querySelectorAll(".wp-editor-area").forEach((e=>{window.tinyMCE.execCommand("mceAddEditor",!1,e.id)})),o.remove()}o.matches(".remove")&&a(o),o.matches('.sim_form [name="submit_form"]')&&(t.stopPropagation(),async function(e){let t=e.closest("form");t.querySelectorAll(".required:not(hidden) input, .required:not(hidden) textarea, .required:not(hidden) select").forEach((e=>{null!=e.closest("div.nice-select")||"file"==e.type&&null!=e.closest(".file_upload_wrap").querySelector(".documentpreview input")||(e.required=!0)}));let r=await FormSubmit.submitForm(e,"forms/save_form_input");r&&(e.closest(".submit_wrapper").querySelector(".loadergif").classList.add("hidden"),Main.displayMessage(r),"true"==t.dataset.reset&&FormSubmit.formReset(t))}(o)),(o.matches(".formbuilder-switch")||o.matches(".formbuilder-switch-back"))&&async function(t){let o,n=t.closest(".sim_form.wrapper"),l=t.outerHTML,c=new FormData;const a=new URL(window.location);t.matches(".formbuilder-switch")?(c.append("formbuilder",!0),a.searchParams.set("formbuilder",!0),o=n.querySelector("form.sim_form").dataset.formid):(a.searchParams.delete("formbuilder"),o=n.querySelector('[name="formid"]').value),window.history.pushState({},"",a),c.append("formid",o);let i=Main.showLoader(t,!1,"Requesting form...");n.innerHTML=i.outerHTML;let s=await FormSubmit.fetchRestApi("forms/form_builder",c);s?(n.innerHTML=s.html,function(t){let o=document.createElement("div");t.js&&(o.innerHTML=t.js,e=[...o.children],r()),t.css&&(o.innerHTML=t.css,[...o.children].forEach((e=>{document.head.appendChild(e)})))}(s)):i.outerHTML=l}(o),(o.matches(".archive-switch-hide")||o.matches(".archive-switch-show"))&&async function(e){const t=new URL(window.location);e.matches(".archive-switch-show")?t.searchParams.set("archived",!0):t.searchParams.delete("archived"),window.history.pushState({},"",t),i(e)}(o),(o.matches(".onlyown-switch-all")||o.matches(".onlyown-switch-on"))&&async function(e){const t=new URL(window.location);e.matches(".onlyown-switch-on")?(t.searchParams.set("onlyown",!0),t.searchParams.delete("all",!0)):(t.searchParams.set("all",!0),t.searchParams.delete("onlyown")),window.history.pushState({},"",t),i(e)}(o)})),document.addEventListener("click",(function(e){let t=e.target;console.log(t),t.matches(".add")&&(l(t.closest(".clone_div")),c(t.closest(".clone_divs_wrapper")),t.remove()),t.matches(".remove")&&a(t),t.matches(".posttype")&&t.closest(".posttype-wrapper").querySelector(".taxonomies-wrapper").classList.remove("hidden"),t.matches(".taxonomy")&&t.closest(".taxonomy-wrapper").querySelector(".categories-wrapper").classList.remove("hidden")}))})();
//# sourceMappingURL=admin.min.js.map