(()=>{function e(e,t=!1){t||(e.querySelector(".booking-startdate").value="",e.querySelector(".calendar.day.startdate").classList.remove("startdate"),e.querySelectorAll(".available.selected").forEach((e=>e.classList.remove("selected"))),e.querySelector(".booking-date-label-wrapper.enddate").classList.add("disabled")),e.querySelector(".booking-enddate").value="",e.querySelector(".calendar.day.enddate").classList.remove("enddate"),e.querySelectorAll(".inbetween").forEach((e=>e.classList.remove("inbetween")))}document.addEventListener("DOMContentLoaded",(()=>{console.log("Bookings.js loaded"),document.querySelector('[name="accomodation"]').addEventListener("change",(e=>{document.querySelector(`[name="${e.target.value}-modal"]`).classList.remove("hidden")}))})),document.addEventListener("click",(t=>{let a=t.target,o=a.closest(".modal");if(null!=a.closest("dt")&&(a=a.closest("dt")),a.matches(".action.reset")&&e(o),a.matches(".prevnext")&&async function(e){let t=e.closest(".bookings-wrap"),a=t.querySelector(`.month-container[data-month="${e.dataset.month}"][data-year="${e.dataset.year}"]`);if(t.querySelector(".calendar.table .month-container:first-of-type").classList.add("hidden"),null==a){let a=new FormData;a.append("month",e.dataset.month),a.append("year",e.dataset.year),a.append("subject",e.closest(".bookings-wrap").dataset.subject);let o=Main.showLoader(t.querySelector(".calendar.table .month-container:not(.hidden)"),!1),d=await FormSubmit.fetchRestApi("bookings/get_next_month",a);d&&(o.outerHTML=d.month,t.querySelector(".navigator").outerHTML=d.navigator)}else a.classList.remove("hidden")}(a),a.matches(".change-booking-date")&&document.querySelector(`[name="${document.querySelector('[name="accomodation"]').value}-modal"]`).classList.remove("hidden"),a.matches(".action.confirm")){let t=a.closest("form").querySelector('[name="booking[startdate]"]'),d=a.closest("form").querySelector('[name="booking[enddate]"]');t.value=o.querySelector(".booking-startdate").dataset.isodate,d.value=o.querySelector(".booking-enddate").dataset.isodate,t.closest(".selected-booking-dates").classList.remove("hidden"),o.classList.add("hidden"),e(o)}if(a.matches(".bookings-wrap .available:not(.selected)")){if(null!=o.querySelector(".calendar.day.startdate")&&null!=o.querySelector(".calendar.day.enddate")){let t=!1;a.matches(".inbetween")&&(t=!0),e(o,t)}if(null==o.querySelector(".calendar.day.startdate")){o.querySelector(".booking-startdate").value=a.dataset.date,o.querySelector(".booking-startdate").dataset.isodate=a.dataset.isodate,a.classList.add("startdate"),o.querySelectorAll(".booking-date-label-wrapper.disabled").forEach((e=>e.classList.remove("disabled")));let e=a.closest(".calendar.table").querySelectorAll("dt.calendar.day:not(.head, .unavailable)"),t=!1;for(i=0;i<e.length;++i)e[i]==a?t=!0:t&&e[i].matches(".selected")&&(t=!1),t||e[i].classList.add("selected")}else{o.querySelector(".booking-enddate").value=a.dataset.date,o.querySelector(".booking-enddate").dataset.isodate=a.dataset.isodate,a.classList.add("enddate"),a.closest(".calendar.table").querySelectorAll(".available.selected").forEach((e=>e.classList.remove("selected")));let e=a.closest(".calendar.table").querySelectorAll("dt.calendar.day:not(.head)"),t=!0;for(i=0;i<e.length&&e[i]!=a;++i)t||e[i].classList.add("inbetween"),e[i].matches(".startdate")&&(t=!1);o.querySelectorAll(".actions .action.disabled").forEach((e=>e.classList.remove("disabled")))}}}))})();
//# sourceMappingURL=bookings.min.js.map