(()=>{function e(e){document.querySelectorAll(".large-image:not(.hidden)").forEach((e=>e.classList.add("hidden"))),document.querySelector('.large-image[data-index="'+e+'"]').classList.remove("hidden")}function t(t,a,n){var l=new FormData;l.append("_wpnonce",sim.restnonce);var d=document.querySelector("#media-amount").value;if(d!=n){l.append("amount",d),l.append("page",document.querySelector("#paged").value),l.append("skipAmount",n);var r=[];document.querySelectorAll(".media-type-selector:checked").forEach((e=>r.push(e.value))),l.append("types",r),l.append("startIndex",t+1),fetch(sim.base_url+"/wp-json/sim/v1/load_more_media",{method:"POST",credentials:"same-origin",body:l}).then((e=>e.json())).then((n=>{if(document.querySelectorAll("#medialoaderwrapper:not(.hidden), .loaderwrapper:not(.hidden)").forEach((e=>e.classList.add("hidden"))),0==n)display_message("All media are loaded","info"),document.getElementById("loadmoremedia").classList.add("hidden");else{document.querySelector(".mediawrapper").insertAdjacentHTML("beforeEnd",n),a&&e(document.querySelector('[data-index="'+t+'"]').nextElementSibling.nextElementSibling.dataset.index);var l=document.querySelectorAll(".large-image");null==l[l.length-1].querySelector(".nextbtn")&&document.getElementById("loadmoremedia").classList.add("hidden")}})).catch((e=>console.error(e)))}}function a(e){var t=new FormData;t.append("_wpnonce",sim.restnonce);var a=document.querySelector("#media-amount").value;t.append("amount",a);var n=[];document.querySelectorAll(".media-type-selector:checked").forEach((e=>n.push(e.value))),t.append("types",n);var l=e.closest(".mediabuttons").querySelector(".searchtext").value;t.append("search",l),fetch(sim.base_url+"/wp-json/sim/v1/media_search",{method:"POST",credentials:"same-origin",body:t}).then((e=>e.json())).then((e=>{0==e?display_message("Nothing found","warning"):document.querySelector(".mediawrapper").innerHTML=e})).catch((e=>console.error(e)))}document.querySelectorAll(".searchtext").forEach((e=>{e.addEventListener("keyup",(function(e){13===e.keyCode&&a(e.target)}))})),document.addEventListener("click",(n=>{var l=n.target,d=l.closest(".large-image");if(l.matches(".media-item")&&e(l.closest(".cell").dataset.index),l.matches(".closebtn")){d.classList.add("hidden");var r=d.querySelector("iframe");null!=r&&(r.src=r.src)}if(l.matches(".prevbtn")&&e((o=l.closest(".large-image")).previousElementSibling.previousElementSibling.dataset.index),l.matches(".nextbtn")){var o;if(null!=(c=(o=l.closest(".large-image")).nextElementSibling))var c=c.nextElementSibling;null==c?(document.getElementById("medialoaderwrapper").classList.remove("hidden"),document.getElementById("paged").value=parseInt(document.getElementById("paged").value)+1,t(o.dataset.index,!0)):e(c.dataset.index)}if("loadmoremedia"==l.id){var i=document.querySelectorAll(".cell");document.getElementById("paged").value=parseInt(document.getElementById("paged").value)+1,t(i[i.length-1].firstChild.dataset.index,!1),showLoader(l,!1)}if(l.matches(".buttonwrapper .description")&&display_message(l.dataset.description),l.matches(".media-type-selector"))if(l.checked){document.querySelectorAll(".cell."+l.value).forEach((e=>e.classList.remove("hidden")));var s=document.querySelectorAll(".cell:not(.hidden)");for(let e=document.querySelector("#media-amount").value;e<s.length;e++)s[e].remove()}else document.querySelectorAll(".cell."+l.value).forEach((e=>e.classList.add("hidden"))),i=document.querySelectorAll(".cell"),s=document.querySelectorAll(".cell:not(.hidden)"),t(i[i.length-1].dataset.index,!1,s.length);l.matches(".mediabuttons .search")&&a(l)})),document.addEventListener("change",(e=>{var a=e.target;if("media-amount"==a.id){document.getElementById("paged").value=1;var n=document.querySelectorAll(".cell"),l=n.length;if(a.value>l)t(parseInt(n[n.length-1].dataset.index),!1,l);else if(a.value<l){var d=1;document.querySelectorAll(".cell, .large-image").forEach((e=>{d>a.value&&e.remove(),e.matches(".cell")&&d++}))}}}));var n=null,l=null;document.addEventListener("touchstart",(function(e){const t=e.touches[0];n=t.clientX,l=t.clientY})),document.addEventListener("touchmove",(function(t){if(n&&l){var a=t.touches[0].clientX,d=t.touches[0].clientY,r=n-a,o=l-d;if(Math.abs(r)>Math.abs(o)){var c=document.querySelector(".large-image:not(.hidden)");if(r>0)var i=c.nextElementSibling.nextElementSibling;else i=c.previousElementSibling.previousElementSibling;e(i.dataset.index)}n=null,l=null}}))})();
//# sourceMappingURL=media_gallery.min.js.map