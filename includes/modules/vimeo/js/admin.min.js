(()=>{"use strict";async function e(e){const t=e.target.closest("form").querySelector('[name="download_url"]').value;if(""==t)return void Main.displayMessage("Please give an url to download from","error");e.target.closest(".submit_wrapper").querySelector(".loadergif").classList.remove("hidden");let n=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).vimeoid,o=`${sim.baseUrl}/wp-json/sim/v2/vimeo/download_to_server?vimeoid=${n}&download_url=${btoa(t)}`;document.getElementById("loadarea").src=o,Main.displayMessage("Download started","info",!0)}async function t(e){!function(e,t=!0,n=""){if(null==e)return;let o=document.createElement("DIV");o.setAttribute("class","loaderwrapper"),""!=n&&(o.innerHTML=n);let a=document.createElement("IMG");if(a.setAttribute("class","loadergif"),a.setAttribute("src",sim.loadingGif),a.style.height="30px",o.insertAdjacentElement("beforeEnd",a),t)e.parentNode.replaceChild(o,e);else{let t=e.nextElementSibling;null==t?e.parentNode.insertAdjacentElement("beforeEnd",o):e.parentNode.insertBefore(o,t)}}(e.target);let t=await FormSubmit.fetchRestApi("vimeo/cleanup_backup");document.querySelectorAll(".loadergif:not(.hidden)").forEach((e=>e.classList.add("hidden"))),t&&Main.displayMessage(t,"success")}console.log("Vimeo admin js loaded"),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[name="download_video"]').forEach((t=>t.addEventListener("click",e))),document.getElementById("cleanup-archive").addEventListener("click",t)}))})();
//# sourceMappingURL=admin.min.js.map