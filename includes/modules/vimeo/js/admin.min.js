(()=>{"use strict";async function e(e){const t=e.target.closest("form").querySelector('[name="download_url"]').value;if(""==t)return void Main.displayMessage("Please give an url to download from","error");e.target.closest(".submit_wrapper").querySelector(".loadergif").classList.remove("hidden");let a=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).vimeoid,n=new FormData;n.append("vimeoid",a),n.append("download_url",t),Main.displayMessage("Download started please wait till it finishes");let r=await FormSubmit.fetchRestApi("vimeo/download_to_server",n);e.target.closest(".submit_wrapper").querySelector(".loadergif").classList.add("hidden"),r?(Main.displayMessage(r,"success"),e.target.closest("form").remove()):e.target.closest("form").querySelector('[name="download_url"]').value=""}async function t(){!function(e,t=!0,a=""){if(null==e)return;let n=document.createElement("DIV");n.setAttribute("class","loaderwrapper"),""!=a&&(n.innerHTML=a);let r=document.createElement("IMG");if(r.setAttribute("class","loadergif"),r.setAttribute("src",sim.loadingGif),r.style.height="30px",n.insertAdjacentElement("beforeEnd",r),t)e.parentNode.replaceChild(n,e);else{let t=e.nextElementSibling;null==t?e.parentNode.insertAdjacentElement("beforeEnd",n):e.parentNode.insertBefore(n,t)}}(ev.target);let e=await FormSubmit.fetchRestApi("vimeo/cleanup_backup");document.querySelectorAll(".loadergif:not(.hidden)").forEach((e=>e.classList.add("hidden"))),e&&Main.displayMessage(e,"success")}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[name="download_video"]').forEach((t=>t.addEventListener("click",e))),document.getElementById("cleanup-archive").addEventListener("click",t)}))})();
//# sourceMappingURL=admin.min.js.map