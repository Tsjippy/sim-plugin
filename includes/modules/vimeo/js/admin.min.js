(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[name="download_video"]').forEach((e=>e.addEventListener("click",(async e=>{const t=e.target.closest("form").querySelector('[name="download_url"]').value;if(""==t)return void Main.displayMessage("Please give an url to download from","error");e.target.closest(".submit_wrapper").querySelector(".loadergif").classList.remove("hidden");let a=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).vimeoid,r=new FormData;r.append("vimeoid",a),r.append("download_url",t),Main.displayMessage("Download started please wait till it finishes");let n=await FormSubmit.fetchRestApi("vimeo/download_to_server",r);e.target.closest(".submit_wrapper").querySelector(".loadergif").classList.add("hidden"),n?(Main.displayMessage(n,"success"),e.target.closest("form").remove()):e.target.closest("form").querySelector('[name="download_url"]').value=""})))),document.getElementById("cleanup-archive").addEventListener("click",(async e=>{!function(e,t=!0,a=""){if(null==e)return;let r=document.createElement("DIV");r.setAttribute("class","loaderwrapper"),""!=a&&(r.innerHTML=a);let n=document.createElement("IMG");if(n.setAttribute("class","loadergif"),n.setAttribute("src",sim.loadingGif),n.style.height="30px",r.insertAdjacentElement("beforeEnd",n),t)e.parentNode.replaceChild(r,e);else{let t=e.nextElementSibling;null==t?e.parentNode.insertAdjacentElement("beforeEnd",r):e.parentNode.insertBefore(r,t)}}(e.target);let t=await FormSubmit.fetchRestApi("vimeo/cleanup_backup");document.querySelectorAll(".loadergif:not(.hidden)").forEach((e=>e.classList.add("hidden"))),t&&Main.displayMessage(t,"success")}))}))})();
//# sourceMappingURL=admin.min.js.map