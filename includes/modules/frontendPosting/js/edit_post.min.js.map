{"version":3,"file":"edit_post.min.js","mappings":"MAAAA,eAAeC,EAAeC,GAC7B,IAAIC,EAAUD,EAAME,OAAOC,QAAQ,QAAQC,cAAc,kBAErDC,EAAc,IAAIC,SACfC,EAAcP,EAAME,OAAOM,QAAQC,GACvCJ,EAASK,OAAO,SAAUH,GAE7B,MAAMI,EAAQ,IAAIC,IAAI,6CACtBD,EAAIE,aAAaC,IAAI,UAAWP,GAEhCQ,OAAOC,QAAQC,UAAU,CAAC,EAAG,GAAIN,GAEjC,IAAIO,EAASC,KAAKC,WAAWpB,EAAME,QAAQ,EAAO,sBAE9CmB,QAAiBC,WAAWC,aAAa,6BAA8BlB,GAExEgB,IACFA,EAASG,KAAKC,SAAQC,GAwDxB,SAAgBA,GACZ,IAAIC,EAAIC,SAASC,cAAc,UAI/B,OAHAF,EAAEG,KAAO,kBACTH,EAAEI,YAAcL,EAChBE,SAASI,qBAAqB,QAAQ,GAAGC,YAAYN,GAC9CA,CACX,CA9DoCO,CAAOR,KAEzCS,OAAOC,KAAKf,EAASgB,MAAMZ,SAAQa,IAClCC,EAAclB,EAASgB,KAAKC,GAAI,IAGjCE,IAEAvC,EAAQwC,UAAYpB,EAASqB,KAG7BzC,EAAQ0C,iBAAiB,UAAUlB,SAAQ,SAASmB,GACnDA,EAAOC,YAAcC,WAAWC,KAAKH,EAAO,CAACI,YAAY,GAC1D,KAGD9B,EAAO+B,QACR,CAEA,SAASC,IAERtB,SAASe,iBAAiB,kCAAkClB,SAAQ0B,IACnEpC,OAAOqC,QAAQC,YAAY,gBAAgB,EAAOF,EAAG1C,GAAG,GAE1D,CAEA,IAAI6C,EAAK,GACT,SAASf,EAAcgB,GAEtBpB,OAAOC,KAAKmB,EAAOlB,MAAMZ,SAAQa,IAChCC,EAAcgB,EAAOlB,KAAKC,GAAK,IAKhCgB,EAAKE,KAAKD,EAAOE,IAClB,CAEA,SAASjB,IAEL,IAAIb,EAAIC,SAASC,cAAc,UAa/B,OAZAF,EAAEG,KAAO,kBACTH,EAAE8B,IAAMH,EAAK,GACb1B,SAASI,qBAAqB,QAAQ,GAAGC,YAAYN,GAExD2B,EAAKI,QAGFJ,EAAKK,OAAS,EAChBhC,EAAEiC,iBAAiB,OAAQpB,GAE3Bb,EAAEiC,iBAAiB,OAAQV,GAElBvB,CACX,CAUAC,SAASgC,iBAAiB,oBAAmB,WAC5CC,QAAQC,IAAI,uBAEZlC,SAASe,iBAAiB,cAAclB,SAAQ0B,IAC/CA,EAAGS,iBAAiB,QAAS7D,GAC7BoD,EAAGY,UAAUd,OAAO,SAAS,GAE/B,G","sources":["webpack://frontend_posting/./edit_post.js"],"sourcesContent":["async function editPostSwitch(event){\r\n\tlet wrapper\t= event.target.closest('main').querySelector('.entry-content');\r\n\r\n\tlet formData    = new FormData();\r\n    let postId      = event.target.dataset.id;\r\n    formData.append('postid', postId);\r\n\r\n\tconst url \t\t= new URL('https://localhost/simnigeria/add-content/');\r\n\turl.searchParams.set('post_id', postId);\r\n\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tlet loader\t= Main.showLoader(event.target, false, 'Requesting form...');\r\n\r\n\tlet response = await FormSubmit.fetchRestApi('frontend_posting/post_edit', formData);\r\n\r\n\tif(response){\r\n\t\tresponse.vars.forEach(variable => addVar(variable));\r\n\r\n\t\tObject.keys(response.deps).forEach(dep => {\r\n\t\t\tgetScriptUrls(response.deps[dep])\r\n\t\t});\r\n\r\n\t\taddScripts();\r\n\r\n\t\twrapper.innerHTML\t= response.html;\r\n\r\n\t\t// Add nice selects\r\n\t\twrapper.querySelectorAll('select').forEach(function(select){\r\n\t\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\r\n\t\t});\r\n\t}\r\n\r\n\tloader.remove();\r\n}\r\n\r\nfunction afterScriptsLoaded(){\r\n\t// Activate tinyMce's again\r\n\tdocument.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n\t});\r\n}\r\n\r\nvar urls=[];\r\nfunction getScriptUrls(script) {\r\n\t// First add the dependicies\r\n\tObject.keys(script.deps).forEach(dep => {\r\n\t\tgetScriptUrls(script.deps[dep]);\r\n\t});\r\n\r\n\t// Then the main one\r\n\t//addScript(script.src);\r\n\turls.push(script.src);\r\n}\r\n\r\nfunction addScripts() {\r\n\t// Add the first one, wait for it to load\r\n    var s = document.createElement('script');\r\n    s.type = 'text/javascript';\r\n    s.src = urls[0];\r\n    document.getElementsByTagName('head')[0].appendChild(s);\r\n\r\n\turls.shift();\r\n\r\n\t//run again when this script is loaded\r\n\tif(urls.length > 0){\r\n\t\ts.addEventListener('load', addScripts);\r\n\t}else{\r\n\t\ts.addEventListener('load', afterScriptsLoaded);\r\n\t}\r\n    return s;  // to remove it later\r\n}\r\n\r\nfunction addVar(variable) {\r\n    var s = document.createElement('script');\r\n    s.type = 'text/javascript';\r\n    s.textContent = variable;\r\n    document.getElementsByTagName('head')[0].appendChild(s);\r\n    return s;  // to remove it later\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\tconsole.log(\"Edit post.js loaded\");\r\n\t\r\n\tdocument.querySelectorAll('#page-edit').forEach(el=>{\r\n\t\tel.addEventListener('click', editPostSwitch);\r\n\t\tel.classList.remove('hidden');\r\n\t});\r\n});"],"names":["async","editPostSwitch","event","wrapper","target","closest","querySelector","formData","FormData","postId","dataset","id","append","url","URL","searchParams","set","window","history","pushState","loader","Main","showLoader","response","FormSubmit","fetchRestApi","vars","forEach","variable","s","document","createElement","type","textContent","getElementsByTagName","appendChild","addVar","Object","keys","deps","dep","getScriptUrls","addScripts","innerHTML","html","querySelectorAll","select","_niceselect","NiceSelect","bind","searchable","remove","afterScriptsLoaded","el","tinyMCE","execCommand","urls","script","push","src","shift","length","addEventListener","console","log","classList"],"sourceRoot":""}