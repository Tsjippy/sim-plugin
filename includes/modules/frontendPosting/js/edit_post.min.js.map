{"version":3,"file":"edit_post.min.js","mappings":"AAmGAA,SAASC,iBAAiB,oBAAoB,WAC7CC,QAAQC,IAAI,uBAEZH,SAASI,iBAAiB,cAAcC,SAAQC,IAC/CA,EAAGC,UAAUC,OAAO,SAAS,GAE/B,IAEAR,SAASC,iBAAiB,SAAQ,SAASQ,GACvB,aAAhBA,EAAGC,OAAOC,IA5GOC,eAAgBC,GACpC,IAuDIC,EAvDAC,EAAqB,WACxBC,QAAQC,QAAQZ,SAAQa,GAAIA,EAAGV,WAG/BR,SAASI,iBAAiB,kCAAkCC,SAAQC,IACnEa,OAAOC,QAAQC,YAAY,gBAAgB,EAAOf,EAAGK,GAAG,IAGzDW,EAAOd,QACR,EAEIe,EAAa,WAChB,IAAIjB,EAAKQ,EAAQU,QAGjB,GAAqC,MAAlCxB,SAASyB,eAAenB,EAAGK,KAA6B,UAAdL,EAAGoB,QAAoB,CACnE,IAAIC,EAAI3B,SAAS4B,cAAc,UAEjB,IAAXtB,EAAGuB,KACLF,EAAEE,KAAO,kBAETF,EAAEE,KAAOvB,EAAGuB,KAGA,IAAVvB,EAAGwB,IACLH,EAAEG,IAAOxB,EAAGwB,IAEZH,EAAEI,UAAYzB,EAAGyB,UAGlBJ,EAAEhB,GAAKL,EAAGK,GAEVX,SAASgC,KAAKC,YAAYN,GAEvBb,EAAQoB,OAAS,EACN,IAAV5B,EAAGwB,IACLH,EAAE1B,iBAAiB,OAAQsB,GAE3BA,IAGY,IAAVjB,EAAGwB,IACLH,EAAE1B,iBAAiB,OAAQc,GAE3BA,GAGH,MAASD,EAAQoB,OAAS,EAEzBX,IAEAR,GAEF,EAIIoB,EAAStB,EAAMH,OACf0B,EAAUD,EAAOE,QAAQ,QAAQC,cAAc,kBAE/CC,EAAc,IAAIC,SACfC,EAAcN,EAAOO,QAAQ/B,GACjC4B,EAASI,OAAO,SAAUF,GAE7B,MAAMG,EAAQ,IAAIC,IAAIC,eACtBF,EAAIG,aAAaC,IAAI,UAAWP,GAEhCtB,OAAO8B,QAAQC,UAAU,CAAC,EAAG,GAAIN,GAEjC,IAAItB,EAAS6B,KAAKC,WAAWjB,GAAQ,EAAM,sBAEvCkB,QAAiBC,WAAWC,aAAa,6BAA8BhB,GAE3E,GAAGc,EAAS,CACXjB,EAAQL,UAAYsB,EAASG,KAE7B,IAAIC,EAAOzD,SAAS4B,cAAc,OAElC6B,EAAK1B,UAAasB,EAASK,GAE3B5C,EAAU,IAAI2C,EAAKE,UAEnBpC,IAEAkC,EAAK1B,UAAYsB,EAASO,IAC1B,IAAIH,EAAKE,UAAUtD,SAAQC,IAC1BN,SAASgC,KAAKC,YAAY3B,EAAG,IAI9B8B,EAAQhC,iBAAiB,UAAUC,SAAQ,SAASwD,GACnDA,EAAOC,YAAcC,WAAWC,KAAKH,EAAO,CAACI,YAAY,GAC1D,GACD,MACC3C,EAAO4C,UAAY/B,EAAO+B,SAE5B,CAYEC,CAAe1D,EAEjB","sources":["webpack://frontend_posting/./edit_post.js"],"sourcesContent":["let editPostSwitch = async function (event){\r\n\tlet afterScriptsLoaded\t= function (){\r\n\t\ttinymce.editors.forEach(ed=>ed.remove());\r\n\r\n\t\t// Activate tinyMce's again\r\n\t\tdocument.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n\t\t});\r\n\r\n\t\tloader.remove();\r\n\t}\r\n\t\r\n\tlet addScripts\t= function () {\r\n\t\tlet el\t= scripts.shift();\r\n\t\r\n\t\t// only add if needed\r\n\t\tif(document.getElementById(el.id) == null && el.tagName == 'SCRIPT'){\r\n\t\t\tvar s = document.createElement('script');\r\n\r\n\t\t\tif(el.type == ''){\r\n\t\t\t\ts.type\t= 'text/javascript';\r\n\t\t\t}else{\r\n\t\t\t\ts.type\t= el.type;\r\n\t\t\t}\r\n\r\n\t\t\tif(el.src != ''){\r\n\t\t\t\ts.src \t= el.src;\r\n\t\t\t}else{\r\n\t\t\t\ts.innerHTML\t= el.innerHTML;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ts.id\t= el.id;\r\n\t\t\t\r\n\t\t\tdocument.head.appendChild(s);\r\n\r\n\t\t\tif(scripts.length > 0){\r\n\t\t\t\tif(el.src != ''){\r\n\t\t\t\t\ts.addEventListener('load', addScripts);\r\n\t\t\t\t}else{\r\n\t\t\t\t\taddScripts();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(el.src != ''){\r\n\t\t\t\t\ts.addEventListener('load', afterScriptsLoaded);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tafterScriptsLoaded();\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\r\n\t\t}else if(scripts.length > 0){\r\n\t\t\t//run again when this script is loaded\r\n\t\t\taddScripts();\r\n\t\t}else{\r\n\t\t\tafterScriptsLoaded();\r\n\t\t}\r\n\t}\r\n\r\n\tlet scripts;\r\n\r\n\tlet button\t= event.target;\r\n\tlet wrapper\t= button.closest('main').querySelector('.entry-content');\r\n\r\n\tlet formData    = new FormData();\r\n    let postId      = button.dataset.id;\r\n    formData.append('postid', postId);\r\n\r\n\tconst url \t\t= new URL(edit_post_url);\r\n\turl.searchParams.set('post_id', postId);\r\n\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tlet loader\t= Main.showLoader(button, true, 'Requesting form...');\r\n\r\n\tlet response = await FormSubmit.fetchRestApi('frontend_posting/post_edit', formData);\r\n\r\n\tif(response){\r\n\t\twrapper.innerHTML\t= response.html;\r\n\r\n\t\tvar temp = document.createElement('div');\r\n\r\n\t\ttemp.innerHTML =  response.js;\r\n\r\n\t\tscripts\t= [...temp.children];\r\n\r\n\t\taddScripts();\r\n\r\n\t\ttemp.innerHTML = response.css;\r\n\t\t[...temp.children].forEach(el => {\r\n\t\t\tdocument.head.appendChild(el);\r\n\t\t})\r\n\r\n\t\t// Add nice selects\r\n\t\twrapper.querySelectorAll('select').forEach(function(select){\r\n\t\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\r\n\t\t});\r\n\t}else{\r\n\t\tloader.outerHTML\t= button.outerHTML;\r\n\t}\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\tconsole.log(\"Edit post.js loaded\");\r\n\t\r\n\tdocument.querySelectorAll('#page-edit').forEach(el=>{\r\n\t\tel.classList.remove('hidden');\r\n\t});\r\n});\r\n\r\ndocument.addEventListener(\"click\",function(ev) {\t\r\n\tif(ev.target.id == 'page-edit'){\r\n\t\teditPostSwitch(ev);\r\n\t}\r\n});"],"names":["document","addEventListener","console","log","querySelectorAll","forEach","el","classList","remove","ev","target","id","async","event","scripts","afterScriptsLoaded","tinymce","editors","ed","window","tinyMCE","execCommand","loader","addScripts","shift","getElementById","tagName","s","createElement","type","src","innerHTML","head","appendChild","length","button","wrapper","closest","querySelector","formData","FormData","postId","dataset","append","url","URL","edit_post_url","searchParams","set","history","pushState","Main","showLoader","response","FormSubmit","fetchRestApi","html","temp","js","children","css","select","_niceselect","NiceSelect","bind","searchable","outerHTML","editPostSwitch"],"sourceRoot":""}