{"version":3,"file":"edit_post.min.js","mappings":"AAoGAA,SAASC,iBAAiB,oBAAoB,WAC7CC,QAAQC,IAAI,uBAEZH,SAASI,iBAAiB,cAAcC,SAAQC,IAC/CA,EAAGC,UAAUC,OAAO,SAAS,GAE/B,IAEAR,SAASC,iBAAiB,SAAS,SAASQ,GACxB,aAAhBA,EAAGC,OAAOC,IA7GOC,eAAgBC,GACpC,IA6DIC,EA7DAC,EAAqB,WACxBC,QAAQC,QAAQZ,SAAQa,GAAIA,EAAGV,WAG/BR,SAASI,iBAAiB,kCAAkCC,SAAQC,IACnEa,OAAOC,QAAQC,YAAY,gBAAgB,EAAOf,EAAGK,GAAG,IAIzDQ,OAAOnB,SAASsB,cAAc,IAAIC,MAAM,mBAAoB,CAC3DC,SAAS,EACTC,YAAY,KAGbC,EAAOlB,QACR,EAEImB,EAAa,WAChB,IAAIrB,EAAKQ,EAAQc,QAGjB,GAAqC,MAAlC5B,SAAS6B,eAAevB,EAAGK,KAA6B,UAAdL,EAAGwB,QAAoB,CACnE,IAAIC,EAAI/B,SAASgC,cAAc,UAEjB,IAAX1B,EAAG2B,KACLF,EAAEE,KAAO,kBAETF,EAAEE,KAAO3B,EAAG2B,KAGA,IAAV3B,EAAG4B,IACLH,EAAEG,IAAO5B,EAAG4B,IAEZH,EAAEI,UAAY7B,EAAG6B,UAGlBJ,EAAEpB,GAAKL,EAAGK,GAEVX,SAASoC,KAAKC,YAAYN,GAEvBjB,EAAQwB,OAAS,EACN,IAAVhC,EAAG4B,IACLH,EAAE9B,iBAAiB,OAAQ0B,GAE3BA,IAGY,IAAVrB,EAAG4B,IACLH,EAAE9B,iBAAiB,OAAQc,GAE3BA,GAGH,MAASD,EAAQwB,OAAS,EAEzBX,IAEAZ,GAEF,EAIIwB,EAAS1B,EAAMH,OACf8B,EAAUD,EAAOE,QAAQ,QAAQC,cAAc,kBAE/CC,EAAc,IAAIC,SACfC,EAAcN,EAAOO,QAAQnC,GACjCgC,EAASI,OAAO,SAAUF,GAE7B,MAAMG,EAAQ,IAAIC,IAAIC,eACtBF,EAAIG,aAAaC,IAAI,UAAWP,GAEhC1B,OAAOkC,QAAQC,UAAU,CAAC,EAAG,GAAIN,GAEjC,IAAItB,EAAS6B,KAAKC,WAAWjB,GAAQ,EAAM,sBAEvCkB,QAAiBC,WAAWC,aAAa,6BAA8BhB,GAE3E,GAAGc,EAAS,CACXjB,EAAQL,UAAYsB,EAASG,KAE7B,IAAIC,EAAO7D,SAASgC,cAAc,OAElC6B,EAAK1B,UAAasB,EAASK,GAE3BhD,EAAU,IAAI+C,EAAKE,UAEnBpC,IAEAkC,EAAK1B,UAAYsB,EAASO,IAC1B,IAAIH,EAAKE,UAAU1D,SAAQC,IAC1BN,SAASoC,KAAKC,YAAY/B,EAAG,GAE/B,MACCoB,EAAOuC,UAAY1B,EAAO0B,SAE5B,CAYEC,CAAezD,EAEjB","sources":["webpack://frontend_posting/./edit_post.js"],"sourcesContent":["let editPostSwitch = async function (event){\r\n\tlet afterScriptsLoaded\t= function (){\r\n\t\ttinymce.editors.forEach(ed=>ed.remove());\r\n\r\n\t\t// Activate tinyMce's again\r\n\t\tdocument.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n\t\t});\r\n\r\n\t\t// invoke dom content loaded events\r\n\t\twindow.document.dispatchEvent(new Event(\"DOMContentLoaded\", {\r\n\t\t\tbubbles: true,\r\n\t\t\tcancelable: true\r\n\t\t}));\r\n\r\n\t\tloader.remove();\r\n\t}\r\n\t\r\n\tlet addScripts\t= function () {\r\n\t\tlet el\t= scripts.shift();\r\n\t\r\n\t\t// only add if needed\r\n\t\tif(document.getElementById(el.id) == null && el.tagName == 'SCRIPT'){\r\n\t\t\tvar s = document.createElement('script');\r\n\r\n\t\t\tif(el.type == ''){\r\n\t\t\t\ts.type\t= 'text/javascript';\r\n\t\t\t}else{\r\n\t\t\t\ts.type\t= el.type;\r\n\t\t\t}\r\n\r\n\t\t\tif(el.src != ''){\r\n\t\t\t\ts.src \t= el.src;\r\n\t\t\t}else{\r\n\t\t\t\ts.innerHTML\t= el.innerHTML;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ts.id\t= el.id;\r\n\t\t\t\r\n\t\t\tdocument.head.appendChild(s);\r\n\r\n\t\t\tif(scripts.length > 0){\r\n\t\t\t\tif(el.src != ''){\r\n\t\t\t\t\ts.addEventListener('load', addScripts);\r\n\t\t\t\t}else{\r\n\t\t\t\t\taddScripts();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(el.src != ''){\r\n\t\t\t\t\ts.addEventListener('load', afterScriptsLoaded);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tafterScriptsLoaded();\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\r\n\t\t}else if(scripts.length > 0){\r\n\t\t\t//run again when this script is loaded\r\n\t\t\taddScripts();\r\n\t\t}else{\r\n\t\t\tafterScriptsLoaded();\r\n\t\t}\r\n\t}\r\n\r\n\tlet scripts;\r\n\r\n\tlet button\t= event.target;\r\n\tlet wrapper\t= button.closest('main').querySelector('.entry-content');\r\n\r\n\tlet formData    = new FormData();\r\n    let postId      = button.dataset.id;\r\n    formData.append('postid', postId);\r\n\r\n\tconst url \t\t= new URL(edit_post_url);\r\n\turl.searchParams.set('post_id', postId);\r\n\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tlet loader\t= Main.showLoader(button, true, 'Requesting form...');\r\n\r\n\tlet response = await FormSubmit.fetchRestApi('frontend_posting/post_edit', formData);\r\n\r\n\tif(response){\r\n\t\twrapper.innerHTML\t= response.html;\r\n\r\n\t\tvar temp = document.createElement('div');\r\n\r\n\t\ttemp.innerHTML =  response.js;\r\n\r\n\t\tscripts\t= [...temp.children];\r\n\r\n\t\taddScripts();\r\n\r\n\t\ttemp.innerHTML = response.css;\r\n\t\t[...temp.children].forEach(el => {\r\n\t\t\tdocument.head.appendChild(el);\r\n\t\t});\r\n\t}else{\r\n\t\tloader.outerHTML\t= button.outerHTML;\r\n\t}\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\tconsole.log(\"Edit post.js loaded\");\r\n\t\r\n\tdocument.querySelectorAll('#page-edit').forEach(el=>{\r\n\t\tel.classList.remove('hidden');\r\n\t});\r\n});\r\n\r\ndocument.addEventListener(\"click\", function(ev) {\t\r\n\tif(ev.target.id == 'page-edit'){\r\n\t\teditPostSwitch(ev);\r\n\t}\r\n});"],"names":["document","addEventListener","console","log","querySelectorAll","forEach","el","classList","remove","ev","target","id","async","event","scripts","afterScriptsLoaded","tinymce","editors","ed","window","tinyMCE","execCommand","dispatchEvent","Event","bubbles","cancelable","loader","addScripts","shift","getElementById","tagName","s","createElement","type","src","innerHTML","head","appendChild","length","button","wrapper","closest","querySelector","formData","FormData","postId","dataset","append","url","URL","edit_post_url","searchParams","set","history","pushState","Main","showLoader","response","FormSubmit","fetchRestApi","html","temp","js","children","css","outerHTML","editPostSwitch"],"sourceRoot":""}