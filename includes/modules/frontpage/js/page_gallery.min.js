(()=>{document.addEventListener("DOMContentLoaded",(()=>{console.log("Page gallery.js loaded"),document.querySelectorAll(".page-gallery-article").forEach((t=>{e(t,!0)}))}));let e=async function(t,a=!1){let l=t.dataset.speed,o=t;if(!a){var r=new FormData;r.append("postTypes",t.dataset.posttypes),r.append("amount",t.querySelectorAll(".page-gallery").length),r.append("categories",t.dataset.categories),r.append("speed",l),r.append("title",t.querySelector(".page-gallery-title").textContent);var n=await FormSubmit.fetchRestApi("frontpage/show_page_gallery",r);if(n){let e=document.createElement("div");e.innerHTML=n,o=e.querySelector(".page-gallery-article");let a=o.querySelectorAll("img"),l=a.length;a.forEach((e=>{e.removeAttribute("loading"),e.addEventListener("load",(()=>{l--,console.log("Current amount is "+l),0===l&&(console.log("Updating "),t.replaceWith(o))})),e.src=e.src}))}}setTimeout(e,1e3*l,o)}})();
//# sourceMappingURL=page_gallery.min.js.map