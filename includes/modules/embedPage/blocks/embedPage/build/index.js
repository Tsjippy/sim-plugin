!function(){"use strict";var e,t={903:function(e,t,n){var r=window.wp.blocks,o=window.wp.element,l=window.wp.i18n,a=window.wp.blockEditor,i=window.wp.components,c=window.wp.htmlEntities,s=window.wp.apiFetch,u=n.n(s),p=JSON.parse('{"u2":"sim/embed-page"}');(0,r.registerBlockType)(p.u2,{icon:"embed-generic",edit:e=>{let{attributes:t,setAttributes:n}=e;const{page:r,hide:s,newline:p,content:d}=t;let m,h=(0,l.__)("Please select a page...","sim"),f={};try{f=JSON.parse(r)}catch(e){console.error("not a valid page")}console.log(f.post_content),m=null==f.post_content||null==d?h:wp.element.RawHTML({children:f.post_content});const[b,g]=(0,o.useState)(""),[w,E]=(0,o.useState)(m),[v,_]=(0,o.useState)(!1),k=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;E((0,o.createElement)(i.Spinner,null)),m=await u()({path:sim.restApiPrefix+"/embedpage/result",method:"POST",data:{id:e,collapsible:t,linebreak:r}}),""==m.trim()&&(m="<div class='error'>Empty post</div>"),n({content:m}),E(wp.element.RawHTML({children:m}))};(0,o.useEffect)((()=>{!async function(){_(!1);const e=await u()({path:sim.restApiPrefix+"/embedpage/find",method:"POST",data:{search:b}});_(e)}()}),[b]);const C=async function(e,t){e?(k(t.ID),n({page:JSON.stringify(t)})):(n({page:null}),E(h))},y=function(e){let{pageList:n}=e;return v?n?.length?v?.map((e=>(0,o.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(e.post_title),onChange:t=>C(t,e),checked:t.page==e}))):b?(0,o.createElement)("div",null," ",(0,l.__)("No search results","sim")):"":(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.Spinner,null),(0,o.createElement)("br",null))},O=e=>w!=h&&e?"":(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.SearchControl,{onChange:g,value:b,autoFocus:!0}),(0,o.createElement)(y,{pageList:v}));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(i.PanelBody,{title:(0,l.__)("Page Embed Settings","sim")},(0,o.createElement)(i.CheckboxControl,{label:(0,l.__)("Only show contents on hover"),onChange:e=>async function(e){n({hide:e}),k(f.ID,e)}(e),checked:s}),(0,o.createElement)(i.CheckboxControl,{label:(0,l.__)("Add a line break"),onChange:e=>async function(e){n({newline:e}),k(f.ID,s,e)}(e),checked:p}),(0,o.createElement)((function(){return"{}"==r?"":(0,o.createElement)(o.Fragment,null,"Currently embeded page:",(0,o.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(f.post_title),onChange:e=>C(e,f),checked:!0}),(0,o.createElement)("a",{href:`${sim.baseUrl}/wp-admin/post.php?post=${f.ID}&action=edit`},"Edit embeded page here"),(0,o.createElement)("br",null),(0,o.createElement)("br",null))}),null),(0,o.createElement)("i",null,(0,l.__)("Use searchbox below to search for a page","sim")),O(!1))),(0,o.createElement)("div",(0,a.useBlockProps)(),O(!0),w))},save:()=>null})}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=function(t,n,o,l){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&l||a>=l)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(i=!1,l<a&&(a=l));if(i){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,o,l]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,a=n[0],i=n[1],c=n[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var u=c(r)}for(t&&t(n);s<a.length;s++)l=a[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},n=self.webpackChunksim_embed_page=self.webpackChunksim_embed_page||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[431],(function(){return r(903)}));o=r.O(o)}();