(()=>{"use strict";var e,t={903:(e,t,n)=>{const l=window.wp.blocks,r=window.wp.element,a=window.wp.i18n,o=window.wp.blockEditor,i=window.wp.components,c=window.wp.htmlEntities,s=window.wp.apiFetch;var p=n.n(s);const d=JSON.parse('{"u2":"sim/embed-page"}');(0,l.registerBlockType)(d.u2,{icon:"embed-generic",edit:e=>{let{attributes:t,setAttributes:n}=e;const{page:l,hide:s,newline:d,content:u}=t;let m,h=(0,a.__)("Please select a page...","sim");m=null==JSON.parse(l).post_content||null==u?h:wp.element.RawHTML({children:u});const[g,b]=(0,r.useState)(""),[w,f]=(0,r.useState)(m),[v,E]=(0,r.useState)(!1),O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;f((0,r.createElement)(i.Spinner,null)),m=await p()({path:sim.restApiPrefix+"/embedpage/result",method:"POST",data:{id:e,collapsible:t,linebreak:l}}),""==m.trim()&&(m="<div class='error'>Empty post</div>"),n({content:m}),f(wp.element.RawHTML({children:m}))};(0,r.useEffect)((async()=>{E(!1);const e=await p()({path:sim.restApiPrefix+"/embedpage/find",method:"POST",data:{search:g}});E(e)}),[g]);const _=async function(e,t){e?(O(t.ID),n({page:JSON.stringify(t)})):(n({page:null}),f(h))},k=function(e){let{pageList:n}=e;return v?null!=n&&n.length?null==v?void 0:v.map((e=>(0,r.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(e.post_title),onChange:t=>_(t,e),checked:t.page==e}))):g?(0,r.createElement)("div",null," ",(0,a.__)("No search results","sim")):"":(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.Spinner,null),(0,r.createElement)("br",null))},C=e=>w!=h&&e?"":(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.SearchControl,{onChange:b,value:g,autoFocus:!0}),(0,r.createElement)(k,{pageList:v}));return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.InspectorControls,null,(0,r.createElement)(i.PanelBody,{title:(0,a.__)("Page Embed Settings","sim")},(0,r.createElement)(i.CheckboxControl,{label:(0,a.__)("Only show contents on hover"),onChange:e=>async function(e){n({hide:e}),O(JSON.parse(l).ID,e)}(e),checked:s}),(0,r.createElement)(i.CheckboxControl,{label:(0,a.__)("Add a line break"),onChange:e=>async function(e){n({newline:e}),O(JSON.parse(l).ID,s,e)}(e),checked:d}),(0,r.createElement)((function(){return"{}"==l?"":(0,r.createElement)(r.Fragment,null,"Currently embeded page:",(0,r.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(JSON.parse(l).post_title),onChange:e=>_(e,JSON.parse(l)),checked:!0}))}),null),(0,r.createElement)("i",null,(0,a.__)("Use searchbox below to search for a page","sim")),C(!1))),(0,r.createElement)("div",(0,o.useBlockProps)(),C(!0),w))},save:()=>null})}},n={};function l(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,n,r,a)=>{if(!n){var o=1/0;for(p=0;p<e.length;p++){n=e[p][0],r=e[p][1],a=e[p][2];for(var i=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(l.O).every((e=>l.O[e](n[c])))?n.splice(c--,1):(i=!1,a<o&&(o=a));if(i){e.splice(p--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[n,r,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,o=n[0],i=n[1],c=n[2],s=0;if(o.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(c)var p=c(l)}for(t&&t(n);s<o.length;s++)a=o[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(p)},n=self.webpackChunksim_embed_page=self.webpackChunksim_embed_page||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=l.O(void 0,[431],(()=>l(903)));r=l.O(r)})();