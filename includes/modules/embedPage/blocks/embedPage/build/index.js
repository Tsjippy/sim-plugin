!function(){"use strict";var e,n={903:function(e,n,t){var r=window.wp.blocks,o=window.wp.element,l=window.wp.i18n,a=window.wp.blockEditor,i=window.wp.components,c=window.wp.htmlEntities,s=window.wp.apiFetch,u=t.n(s),p=JSON.parse('{"u2":"sim/embed-page"}');(0,r.registerBlockType)(p.u2,{icon:"embed-generic",edit:e=>{let{attributes:n,setAttributes:t}=e;const{page:r,hide:s,newline:p,content:d}=n;let m,f=(0,l.__)("Please select a page...","sim"),h={};try{h=JSON.parse(r)}catch(e){console.error("not a valid page")}m=null==h.post_content||null==d?f:wp.element.RawHTML({children:d});const[g,b]=(0,o.useState)(""),[w,v]=(0,o.useState)(m),[E,_]=(0,o.useState)(!1),k=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;v((0,o.createElement)(i.Spinner,null)),m=await u()({path:sim.restApiPrefix+"/embedpage/result",method:"POST",data:{id:e,collapsible:n,linebreak:r}}),""==m.trim()&&(m="<div class='error'>Empty post</div>"),t({content:m}),v(wp.element.RawHTML({children:m}))};(0,o.useEffect)((()=>{!async function(){_(!1);const e=await u()({path:sim.restApiPrefix+"/embedpage/find",method:"POST",data:{search:g}});_(e)}()}),[g]);const C=async function(e,n){e?(k(n.ID),t({page:JSON.stringify(n)})):(t({page:null}),v(f))},y=function(e){let{pageList:t}=e;return E?t?.length?E?.map((e=>(0,o.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(e.post_title),onChange:n=>C(n,e),checked:n.page==e}))):g?(0,o.createElement)("div",null," ",(0,l.__)("No search results","sim")):"":(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.Spinner,null),(0,o.createElement)("br",null))},O=e=>w!=f&&e?"":(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.SearchControl,{onChange:b,value:g,autoFocus:!0}),(0,o.createElement)(y,{pageList:E}));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(i.PanelBody,{title:(0,l.__)("Page Embed Settings","sim")},(0,o.createElement)(i.CheckboxControl,{label:(0,l.__)("Only show contents on hover"),onChange:e=>async function(e){t({hide:e}),k(h.ID,e)}(e),checked:s}),(0,o.createElement)(i.CheckboxControl,{label:(0,l.__)("Add a line break"),onChange:e=>async function(e){t({newline:e}),k(h.ID,s,e)}(e),checked:p}),(0,o.createElement)((function(){return"{}"==r?"":(0,o.createElement)(o.Fragment,null,"Currently embeded page:",(0,o.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(h.post_title),onChange:e=>C(e,h),checked:!0}))}),null),(0,o.createElement)("i",null,(0,l.__)("Use searchbox below to search for a page","sim")),O(!1))),(0,o.createElement)("div",(0,a.useBlockProps)(),O(!0),w))},save:()=>null})}},t={};function r(e){var o=t[e];if(void 0!==o)return o.exports;var l=t[e]={exports:{}};return n[e](l,l.exports,r),l.exports}r.m=n,e=[],r.O=function(n,t,o,l){if(!t){var a=1/0;for(u=0;u<e.length;u++){t=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,c=0;c<t.length;c++)(!1&l||a>=l)&&Object.keys(r.O).every((function(e){return r.O[e](t[c])}))?t.splice(c--,1):(i=!1,l<a&&(a=l));if(i){e.splice(u--,1);var s=o();void 0!==s&&(n=s)}}return n}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[t,o,l]},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={826:0,431:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,l,a=t[0],i=t[1],c=t[2],s=0;if(a.some((function(n){return 0!==e[n]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var u=c(r)}for(n&&n(t);s<a.length;s++)l=a[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},t=self.webpackChunksim_embed_page=self.webpackChunksim_embed_page||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var o=r.O(void 0,[431],(function(){return r(903)}));o=r.O(o)}();