(()=>{"use strict";var e,t={903:(e,t,n)=>{const l=window.wp.blocks,r=window.wp.element,a=window.wp.i18n,o=window.wp.blockEditor,i=window.wp.components,c=window.wp.htmlEntities,s=window.wp.apiFetch;var d=n.n(s);const p=JSON.parse('{"u2":"sim/embed-page"}');(0,l.registerBlockType)(p.u2,{icon:"embed-generic",edit:e=>{let{attributes:t,setAttributes:n}=e;const{page:l,hide:s,newline:p,content:u}=t;let m,h=(0,a.__)("Please select a page...","sim"),g={};try{g=JSON.parse(l)}catch(e){console.error("not a valid page")}m=null==g.post_content||null==u?h:wp.element.RawHTML({children:u});const[b,w]=(0,r.useState)(""),[f,v]=(0,r.useState)(m),[E,_]=(0,r.useState)(!1),k=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;v((0,r.createElement)(i.Spinner,null)),m=await d()({path:sim.restApiPrefix+"/embedpage/result",method:"POST",data:{id:e,collapsible:t,linebreak:l}}),""==m.trim()&&(m="<div class='error'>Empty post</div>"),n({content:m}),v(wp.element.RawHTML({children:m}))};(0,r.useEffect)((async()=>{_(!1);const e=await d()({path:sim.restApiPrefix+"/embedpage/find",method:"POST",data:{search:b}});_(e)}),[b]);const C=async function(e,t){e?(k(t.ID),n({page:JSON.stringify(t)})):(n({page:null}),v(h))},y=function(e){let{pageList:n}=e;return E?null!=n&&n.length?null==E?void 0:E.map((e=>(0,r.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(e.post_title),onChange:t=>C(t,e),checked:t.page==e}))):b?(0,r.createElement)("div",null," ",(0,a.__)("No search results","sim")):"":(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.Spinner,null),(0,r.createElement)("br",null))},O=e=>f!=h&&e?"":(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.SearchControl,{onChange:w,value:b,autoFocus:!0}),(0,r.createElement)(y,{pageList:E}));return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.InspectorControls,null,(0,r.createElement)(i.PanelBody,{title:(0,a.__)("Page Embed Settings","sim")},(0,r.createElement)(i.CheckboxControl,{label:(0,a.__)("Only show contents on hover"),onChange:e=>async function(e){n({hide:e}),k(g.ID,e)}(e),checked:s}),(0,r.createElement)(i.CheckboxControl,{label:(0,a.__)("Add a line break"),onChange:e=>async function(e){n({newline:e}),k(g.ID,s,e)}(e),checked:p}),(0,r.createElement)((function(){return"{}"==l?"":(0,r.createElement)(r.Fragment,null,"Currently embeded page:",(0,r.createElement)(i.CheckboxControl,{label:(0,c.decodeEntities)(g.post_title),onChange:e=>C(e,g),checked:!0}))}),null),(0,r.createElement)("i",null,(0,a.__)("Use searchbox below to search for a page","sim")),O(!1))),(0,r.createElement)("div",(0,o.useBlockProps)(),O(!0),f))},save:()=>null})}},n={};function l(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,n,r,a)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],a=e[d][2];for(var i=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(l.O).every((e=>l.O[e](n[c])))?n.splice(c--,1):(i=!1,a<o&&(o=a));if(i){e.splice(d--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,o=n[0],i=n[1],c=n[2],s=0;if(o.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(c)var d=c(l)}for(t&&t(n);s<o.length;s++)a=o[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},n=self.webpackChunksim_embed_page=self.webpackChunksim_embed_page||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=l.O(void 0,[431],(()=>l(903)));r=l.O(r)})();