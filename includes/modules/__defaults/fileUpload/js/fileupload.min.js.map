{"version":3,"file":"fileupload.min.js","mappings":"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","sources":["webpack://fileupload/./node_modules/croppr/dist/croppr.js","webpack://fileupload/webpack/bootstrap","webpack://fileupload/webpack/runtime/compat get default export","webpack://fileupload/webpack/runtime/define property getters","webpack://fileupload/webpack/runtime/hasOwnProperty shorthand","webpack://fileupload/./image-edit.js","webpack://fileupload/./fileupload.js"],"sourcesContent":["/**\n * Croppr.js\n * https://github.com/jamesssooi/Croppr.js\n * \n * A JavaScript image cropper that's lightweight, awesome, and has\n * zero dependencies.\n * \n * (C) 2017 James Ooi. Released under the MIT License.\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Croppr = factory());\n}(this, (function () { 'use strict';\n\n(function () {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n  if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = window.setTimeout(function () {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n  if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n    clearTimeout(id);\n  };\n})();\n(function () {\n  if (typeof window.CustomEvent === \"function\") return false;\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n(function (window) {\n  try {\n    new CustomEvent('test');\n    return false;\n  } catch (e) {}\n  function MouseEvent(eventType, params) {\n    params = params || { bubbles: false, cancelable: false };\n    var mouseEvent = document.createEvent('MouseEvent');\n    mouseEvent.initMouseEvent(eventType, params.bubbles, params.cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    return mouseEvent;\n  }\n  MouseEvent.prototype = Event.prototype;\n  window.MouseEvent = MouseEvent;\n})(window);\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar Handle =\n/**\n * Creates a new Handle instance.\n * @constructor\n * @param {Array} position The x and y ratio position of the handle\n *      within the crop region. Accepts a value between 0 to 1 in the order\n *      of [X, Y].\n * @param {Array} constraints Define the side of the crop region that\n *      is to be affected by this handle. Accepts a value of 0 or 1 in the\n *      order of [TOP, RIGHT, BOTTOM, LEFT].\n * @param {String} cursor The CSS cursor of this handle.\n * @param {Element} eventBus The element to dispatch events to.\n */\nfunction Handle(position, constraints, cursor, eventBus) {\n  classCallCheck(this, Handle);\n  var self = this;\n  this.position = position;\n  this.constraints = constraints;\n  this.cursor = cursor;\n  this.eventBus = eventBus;\n  this.el = document.createElement('div');\n  this.el.className = 'croppr-handle';\n  this.el.style.cursor = cursor;\n  this.el.addEventListener('mousedown', onMouseDown);\n  function onMouseDown(e) {\n    e.stopPropagation();\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n      detail: { handle: self }\n    }));\n  }\n  function onMouseUp(e) {\n    e.stopPropagation();\n    document.removeEventListener('mouseup', onMouseUp);\n    document.removeEventListener('mousemove', onMouseMove);\n    self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n      detail: { handle: self }\n    }));\n  }\n  function onMouseMove(e) {\n    e.stopPropagation();\n    self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n      detail: { mouseX: e.clientX, mouseY: e.clientY }\n    }));\n  }\n};\n\nvar Box = function () {\n  /**\n   * Creates a new Box instance.\n   * @constructor\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  function Box(x1, y1, x2, y2) {\n    classCallCheck(this, Box);\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n  /**\n   * Sets the new dimensions of the box.\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  createClass(Box, [{\n    key: 'set',\n    value: function set$$1() {\n      var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      this.x1 = x1 == null ? this.x1 : x1;\n      this.y1 = y1 == null ? this.y1 : y1;\n      this.x2 = x2 == null ? this.x2 : x2;\n      this.y2 = y2 == null ? this.y2 : y2;\n      return this;\n    }\n    /**\n     * Calculates the width of the box.\n     * @returns {Number}\n     */\n  }, {\n    key: 'width',\n    value: function width() {\n      return Math.abs(this.x2 - this.x1);\n    }\n    /**\n     * Calculates the height of the box.\n     * @returns {Number}\n     */\n  }, {\n    key: 'height',\n    value: function height() {\n      return Math.abs(this.y2 - this.y1);\n    }\n    /**\n     * Resizes the box to a new size.\n     * @param {Number} newWidth\n     * @param {Number} newHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'resize',\n    value: function resize(newWidth, newHeight) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];\n      var fromX = this.x1 + this.width() * origin[0];\n      var fromY = this.y1 + this.height() * origin[1];\n      this.x1 = fromX - newWidth * origin[0];\n      this.y1 = fromY - newHeight * origin[1];\n      this.x2 = this.x1 + newWidth;\n      this.y2 = this.y1 + newHeight;\n      return this;\n    }\n    /**\n     * Scale the box by a factor.\n     * @param {Number} factor\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'scale',\n    value: function scale(factor) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];\n      var newWidth = this.width() * factor;\n      var newHeight = this.height() * factor;\n      this.resize(newWidth, newHeight, origin);\n      return this;\n    }\n  }, {\n    key: 'move',\n    value: function move() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var width = this.width();\n      var height = this.height();\n      x = x === null ? this.x1 : x;\n      y = y === null ? this.y1 : y;\n      this.x1 = x;\n      this.y1 = y;\n      this.x2 = x + width;\n      this.y2 = y + height;\n      return this;\n    }\n    /**\n     * Get relative x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n  }, {\n    key: 'getRelativePoint',\n    value: function getRelativePoint() {\n      var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0];\n      var x = this.width() * point[0];\n      var y = this.height() * point[1];\n      return [x, y];\n    }\n    /**\n     * Get absolute x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n  }, {\n    key: 'getAbsolutePoint',\n    value: function getAbsolutePoint() {\n      var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0];\n      var x = this.x1 + this.width() * point[0];\n      var y = this.y1 + this.height() * point[1];\n      return [x, y];\n    }\n    /**\n     * Constrain the box to a fixed ratio.\n     * @param {Number} ratio\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {String} [grow] The axis to grow to maintain the ratio.\n     *     Defaults to 'height'.\n     */\n  }, {\n    key: 'constrainToRatio',\n    value: function constrainToRatio(ratio) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];\n      var grow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'height';\n      if (ratio === null) {\n        return;\n      }\n      var width = this.width();\n      var height = this.height();\n      switch (grow) {\n        case 'height':\n          this.resize(this.width(), this.width() * ratio, origin);\n          break;\n        case 'width':\n          this.resize(this.height() * 1 / ratio, this.height(), origin);\n          break;\n        default:\n          this.resize(this.width(), this.width() * ratio, origin);\n      }\n      return this;\n    }\n    /**\n     * Constrain the box within a boundary.\n     * @param {Number} boundaryWidth\n     * @param {Number} boundaryHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'constrainToBoundary',\n    value: function constrainToBoundary(boundaryWidth, boundaryHeight) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];\n      var _getAbsolutePoint = this.getAbsolutePoint(origin),\n          _getAbsolutePoint2 = slicedToArray(_getAbsolutePoint, 2),\n          originX = _getAbsolutePoint2[0],\n          originY = _getAbsolutePoint2[1];\n      var maxIfLeft = originX;\n      var maxIfTop = originY;\n      var maxIfRight = boundaryWidth - originX;\n      var maxIfBottom = boundaryHeight - originY;\n      var directionX = -2 * origin[0] + 1;\n      var directionY = -2 * origin[1] + 1;\n      var maxWidth = null,\n          maxHeight = null;\n      switch (directionX) {\n        case -1:\n          maxWidth = maxIfLeft;break;\n        case 0:\n          maxWidth = Math.min(maxIfLeft, maxIfRight) * 2;break;\n        case +1:\n          maxWidth = maxIfRight;break;\n      }\n      switch (directionY) {\n        case -1:\n          maxHeight = maxIfTop;break;\n        case 0:\n          maxHeight = Math.min(maxIfTop, maxIfBottom) * 2;break;\n        case +1:\n          maxHeight = maxIfBottom;break;\n      }\n      if (this.width() > maxWidth) {\n        var factor = maxWidth / this.width();\n        this.scale(factor, origin);\n      }\n      if (this.height() > maxHeight) {\n        var _factor = maxHeight / this.height();\n        this.scale(_factor, origin);\n      }\n      return this;\n    }\n    /**\n     * Constrain the box to a maximum/minimum size.\n     * @param {Number} [maxWidth]\n     * @param {Number} [maxHeight]\n     * @param {Number} [minWidth]\n     * @param {Number} [minHeight]\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {Number} [ratio] Ratio to maintain.\n     */\n  }, {\n    key: 'constrainToSize',\n    value: function constrainToSize() {\n      var maxWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var maxHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var minWidth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var minHeight = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var origin = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [0, 0];\n      var ratio = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      if (ratio) {\n        if (ratio > 1) {\n          maxWidth = maxHeight * 1 / ratio;\n          minHeight = minHeight * ratio;\n        } else if (ratio < 1) {\n          maxHeight = maxWidth * ratio;\n          minWidth = minHeight * 1 / ratio;\n        }\n      }\n      if (maxWidth && this.width() > maxWidth) {\n        var newWidth = maxWidth,\n            newHeight = ratio === null ? this.height() : maxHeight;\n        this.resize(newWidth, newHeight, origin);\n      }\n      if (maxHeight && this.height() > maxHeight) {\n        var _newWidth = ratio === null ? this.width() : maxWidth,\n            _newHeight = maxHeight;\n        this.resize(_newWidth, _newHeight, origin);\n      }\n      if (minWidth && this.width() < minWidth) {\n        var _newWidth2 = minWidth,\n            _newHeight2 = ratio === null ? this.height() : minHeight;\n        this.resize(_newWidth2, _newHeight2, origin);\n      }\n      if (minHeight && this.height() < minHeight) {\n        var _newWidth3 = ratio === null ? this.width() : minWidth,\n            _newHeight3 = minHeight;\n        this.resize(_newWidth3, _newHeight3, origin);\n      }\n      return this;\n    }\n  }]);\n  return Box;\n}();\n\n/**\n * Binds an element's touch events to be simulated as mouse events.\n * @param {Element} element\n */\nfunction enableTouch(element) {\n  element.addEventListener('touchstart', simulateMouseEvent);\n  element.addEventListener('touchend', simulateMouseEvent);\n  element.addEventListener('touchmove', simulateMouseEvent);\n}\n/**\n * Translates a touch event to a mouse event.\n * @param {Event} e\n */\nfunction simulateMouseEvent(e) {\n  e.preventDefault();\n  var touch = e.changedTouches[0];\n  var eventMap = {\n    'touchstart': 'mousedown',\n    'touchmove': 'mousemove',\n    'touchend': 'mouseup'\n  };\n  touch.target.dispatchEvent(new MouseEvent(eventMap[e.type], {\n    bubbles: true,\n    cancelable: true,\n    view: window,\n    clientX: touch.clientX,\n    clientY: touch.clientY,\n    screenX: touch.screenX,\n    screenY: touch.screenY\n  }));\n}\n\n/**\n * Define a list of handles to create.\n *\n * @property {Array} position - The x and y ratio position of the handle within\n *      the crop region. Accepts a value between 0 to 1 in the order of [X, Y].\n * @property {Array} constraints - Define the side of the crop region that is to\n *      be affected by this handle. Accepts a value of 0 or 1 in the order of\n *      [TOP, RIGHT, BOTTOM, LEFT].\n * @property {String} cursor - The CSS cursor of this handle.\n */\nvar HANDLES = [{ position: [0.0, 0.0], constraints: [1, 0, 0, 1], cursor: 'nw-resize' }, { position: [0.5, 0.0], constraints: [1, 0, 0, 0], cursor: 'n-resize' }, { position: [1.0, 0.0], constraints: [1, 1, 0, 0], cursor: 'ne-resize' }, { position: [1.0, 0.5], constraints: [0, 1, 0, 0], cursor: 'e-resize' }, { position: [1.0, 1.0], constraints: [0, 1, 1, 0], cursor: 'se-resize' }, { position: [0.5, 1.0], constraints: [0, 0, 1, 0], cursor: 's-resize' }, { position: [0.0, 1.0], constraints: [0, 0, 1, 1], cursor: 'sw-resize' }, { position: [0.0, 0.5], constraints: [0, 0, 0, 1], cursor: 'w-resize' }];\nvar CropprCore = function () {\n  function CropprCore(element, options) {\n    var _this = this;\n    var deferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    classCallCheck(this, CropprCore);\n    this.options = CropprCore.parseOptions(options || {});\n    if (!element.nodeName) {\n      element = document.querySelector(element);\n      if (element == null) {\n        throw 'Unable to find element.';\n      }\n    }\n    if (!element.getAttribute('src')) {\n      throw 'Image src not provided.';\n    }\n    this._initialized = false;\n    this._restore = {\n      parent: element.parentNode,\n      element: element\n    };\n    if (!deferred) {\n      if (element.width === 0 || element.height === 0) {\n        element.onload = function () {\n          _this.initialize(element);\n        };\n      } else {\n        this.initialize(element);\n      }\n    }\n  }\n  createClass(CropprCore, [{\n    key: 'initialize',\n    value: function initialize(element) {\n      this.createDOM(element);\n      this.options.convertToPixels(this.cropperEl);\n      this.attachHandlerEvents();\n      this.attachRegionEvents();\n      this.attachOverlayEvents();\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n      this._initialized = true;\n      if (this.options.onInitialize !== null) {\n        this.options.onInitialize(this);\n      }\n    }\n  }, {\n    key: 'createDOM',\n    value: function createDOM(targetEl) {\n      this.containerEl = document.createElement('div');\n      this.containerEl.className = 'croppr-container';\n      this.eventBus = this.containerEl;\n      enableTouch(this.containerEl);\n      this.cropperEl = document.createElement('div');\n      this.cropperEl.className = 'croppr';\n      this.imageEl = document.createElement('img');\n      this.imageEl.setAttribute('src', targetEl.getAttribute('src'));\n      this.imageEl.setAttribute('alt', targetEl.getAttribute('alt'));\n      this.imageEl.className = 'croppr-image';\n      this.imageClippedEl = this.imageEl.cloneNode();\n      this.imageClippedEl.className = 'croppr-imageClipped';\n      this.regionEl = document.createElement('div');\n      this.regionEl.className = 'croppr-region';\n      this.overlayEl = document.createElement('div');\n      this.overlayEl.className = 'croppr-overlay';\n      var handleContainerEl = document.createElement('div');\n      handleContainerEl.className = 'croppr-handleContainer';\n      this.handles = [];\n      for (var i = 0; i < HANDLES.length; i++) {\n        var handle = new Handle(HANDLES[i].position, HANDLES[i].constraints, HANDLES[i].cursor, this.eventBus);\n        this.handles.push(handle);\n        handleContainerEl.appendChild(handle.el);\n      }\n      this.cropperEl.appendChild(this.imageEl);\n      this.cropperEl.appendChild(this.imageClippedEl);\n      this.cropperEl.appendChild(this.regionEl);\n      this.cropperEl.appendChild(this.overlayEl);\n      this.cropperEl.appendChild(handleContainerEl);\n      this.containerEl.appendChild(this.cropperEl);\n      targetEl.parentElement.replaceChild(this.containerEl, targetEl);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      var _this2 = this;\n      this.imageEl.onload = function () {\n        _this2.box = _this2.initializeBox(_this2.options);\n        _this2.redraw();\n      };\n      this.imageEl.src = src;\n      this.imageClippedEl.src = src;\n      return this;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._restore.parent.replaceChild(this._restore.element, this.containerEl);\n    }\n    /**\n     * Create a new box region with a set of options.\n     * @param {Object} opts The options.\n     * @returns {Box}\n     */\n  }, {\n    key: 'initializeBox',\n    value: function initializeBox(opts) {\n      var width = opts.startSize.width;\n      var height = opts.startSize.height;\n      var box = new Box(0, 0, width, height);\n      box.constrainToRatio(opts.aspectRatio, [0.5, 0.5]);\n      var min = opts.minSize;\n      var max = opts.maxSize;\n      box.constrainToSize(max.width, max.height, min.width, min.height, [0.5, 0.5], opts.aspectRatio);\n      var parentWidth = this.cropperEl.offsetWidth;\n      var parentHeight = this.cropperEl.offsetHeight;\n      box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n      var x = this.cropperEl.offsetWidth / 2 - box.width() / 2;\n      var y = this.cropperEl.offsetHeight / 2 - box.height() / 2;\n      box.move(x, y);\n      return box;\n    }\n  }, {\n    key: 'redraw',\n    value: function redraw() {\n      var _this3 = this;\n      var width = Math.round(this.box.width()),\n          height = Math.round(this.box.height()),\n          x1 = Math.round(this.box.x1),\n          y1 = Math.round(this.box.y1),\n          x2 = Math.round(this.box.x2),\n          y2 = Math.round(this.box.y2);\n      window.requestAnimationFrame(function () {\n        _this3.regionEl.style.transform = 'translate(' + x1 + 'px, ' + y1 + 'px)';\n        _this3.regionEl.style.width = width + 'px';\n        _this3.regionEl.style.height = height + 'px';\n        _this3.imageClippedEl.style.clip = 'rect(' + y1 + 'px, ' + x2 + 'px, ' + y2 + 'px, ' + x1 + 'px)';\n        var center = _this3.box.getAbsolutePoint([.5, .5]);\n        var xSign = center[0] - _this3.cropperEl.offsetWidth / 2 >> 31;\n        var ySign = center[1] - _this3.cropperEl.offsetHeight / 2 >> 31;\n        var quadrant = (xSign ^ ySign) + ySign + ySign + 4;\n        var foregroundHandleIndex = -2 * quadrant + 8;\n        for (var i = 0; i < _this3.handles.length; i++) {\n          var handle = _this3.handles[i];\n          var handleWidth = handle.el.offsetWidth;\n          var handleHeight = handle.el.offsetHeight;\n          var left = x1 + width * handle.position[0] - handleWidth / 2;\n          var top = y1 + height * handle.position[1] - handleHeight / 2;\n          handle.el.style.transform = 'translate(' + Math.round(left) + 'px, ' + Math.round(top) + 'px)';\n          handle.el.style.zIndex = foregroundHandleIndex == i ? 5 : 4;\n        }\n      });\n    }\n  }, {\n    key: 'attachHandlerEvents',\n    value: function attachHandlerEvents() {\n      var eventBus = this.eventBus;\n      eventBus.addEventListener('handlestart', this.onHandleMoveStart.bind(this));\n      eventBus.addEventListener('handlemove', this.onHandleMoveMoving.bind(this));\n      eventBus.addEventListener('handleend', this.onHandleMoveEnd.bind(this));\n    }\n  }, {\n    key: 'attachRegionEvents',\n    value: function attachRegionEvents() {\n      var eventBus = this.eventBus;\n      var self = this;\n      this.regionEl.addEventListener('mousedown', onMouseDown);\n      eventBus.addEventListener('regionstart', this.onRegionMoveStart.bind(this));\n      eventBus.addEventListener('regionmove', this.onRegionMoveMoving.bind(this));\n      eventBus.addEventListener('regionend', this.onRegionMoveEnd.bind(this));\n      function onMouseDown(e) {\n        e.stopPropagation();\n        document.addEventListener('mouseup', onMouseUp);\n        document.addEventListener('mousemove', onMouseMove);\n        eventBus.dispatchEvent(new CustomEvent('regionstart', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseMove(e) {\n        e.stopPropagation();\n        eventBus.dispatchEvent(new CustomEvent('regionmove', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseUp(e) {\n        e.stopPropagation();\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        eventBus.dispatchEvent(new CustomEvent('regionend', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n    }\n  }, {\n    key: 'attachOverlayEvents',\n    value: function attachOverlayEvents() {\n      var SOUTHEAST_HANDLE_IDX = 4;\n      var self = this;\n      var tmpBox = null;\n      this.overlayEl.addEventListener('mousedown', onMouseDown);\n      function onMouseDown(e) {\n        e.stopPropagation();\n        document.addEventListener('mouseup', onMouseUp);\n        document.addEventListener('mousemove', onMouseMove);\n        var container = self.cropperEl.getBoundingClientRect();\n        var mouseX = e.clientX - container.left;\n        var mouseY = e.clientY - container.top;\n        tmpBox = self.box;\n        self.box = new Box(mouseX, mouseY, mouseX + 1, mouseY + 1);\n        self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n          detail: { handle: self.handles[SOUTHEAST_HANDLE_IDX] }\n        }));\n      }\n      function onMouseMove(e) {\n        e.stopPropagation();\n        self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseUp(e) {\n        e.stopPropagation();\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        if (self.box.width() === 1 && self.box.height() === 1) {\n          self.box = tmpBox;\n          return;\n        }\n        self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n    }\n  }, {\n    key: 'onHandleMoveStart',\n    value: function onHandleMoveStart(e) {\n      var handle = e.detail.handle;\n      var originPoint = [1 - handle.position[0], 1 - handle.position[1]];\n      var _box$getAbsolutePoint = this.box.getAbsolutePoint(originPoint),\n          _box$getAbsolutePoint2 = slicedToArray(_box$getAbsolutePoint, 2),\n          originX = _box$getAbsolutePoint2[0],\n          originY = _box$getAbsolutePoint2[1];\n      this.activeHandle = { handle: handle, originPoint: originPoint, originX: originX, originY: originY };\n      if (this.options.onCropStart !== null) {\n        this.options.onCropStart(this.getValue());\n      }\n    }\n  }, {\n    key: 'onHandleMoveMoving',\n    value: function onHandleMoveMoving(e) {\n      var _e$detail = e.detail,\n          mouseX = _e$detail.mouseX,\n          mouseY = _e$detail.mouseY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      if (mouseX < 0) {\n        mouseX = 0;\n      } else if (mouseX > container.width) {\n        mouseX = container.width;\n      }\n      if (mouseY < 0) {\n        mouseY = 0;\n      } else if (mouseY > container.height) {\n        mouseY = container.height;\n      }\n      var origin = this.activeHandle.originPoint.slice();\n      var originX = this.activeHandle.originX;\n      var originY = this.activeHandle.originY;\n      var handle = this.activeHandle.handle;\n      var TOP_MOVABLE = handle.constraints[0] === 1;\n      var RIGHT_MOVABLE = handle.constraints[1] === 1;\n      var BOTTOM_MOVABLE = handle.constraints[2] === 1;\n      var LEFT_MOVABLE = handle.constraints[3] === 1;\n      var MULTI_AXIS = (LEFT_MOVABLE || RIGHT_MOVABLE) && (TOP_MOVABLE || BOTTOM_MOVABLE);\n      var x1 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x1;\n      var x2 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x2;\n      var y1 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y1;\n      var y2 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y2;\n      x1 = LEFT_MOVABLE ? mouseX : x1;\n      x2 = RIGHT_MOVABLE ? mouseX : x2;\n      y1 = TOP_MOVABLE ? mouseY : y1;\n      y2 = BOTTOM_MOVABLE ? mouseY : y2;\n      var isFlippedX = false,\n          isFlippedY = false;\n      if (LEFT_MOVABLE || RIGHT_MOVABLE) {\n        isFlippedX = LEFT_MOVABLE ? mouseX > originX : mouseX < originX;\n      }\n      if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n        isFlippedY = TOP_MOVABLE ? mouseY > originY : mouseY < originY;\n      }\n      if (isFlippedX) {\n        var tmp = x1;x1 = x2;x2 = tmp;\n        origin[0] = 1 - origin[0];\n      }\n      if (isFlippedY) {\n        var _tmp = y1;y1 = y2;y2 = _tmp;\n        origin[1] = 1 - origin[1];\n      }\n      var box = new Box(x1, y1, x2, y2);\n      if (this.options.aspectRatio) {\n        var ratio = this.options.aspectRatio;\n        var isVerticalMovement = false;\n        if (MULTI_AXIS) {\n          isVerticalMovement = mouseY > box.y1 + ratio * box.width() || mouseY < box.y2 - ratio * box.width();\n        } else if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n          isVerticalMovement = true;\n        }\n        var ratioMode = isVerticalMovement ? 'width' : 'height';\n        box.constrainToRatio(ratio, origin, ratioMode);\n      }\n      var min = this.options.minSize;\n      var max = this.options.maxSize;\n      box.constrainToSize(max.width, max.height, min.width, min.height, origin, this.options.aspectRatio);\n      var parentWidth = this.cropperEl.offsetWidth;\n      var parentHeight = this.cropperEl.offsetHeight;\n      box.constrainToBoundary(parentWidth, parentHeight, origin);\n      this.box = box;\n      this.redraw();\n      if (this.options.onCropMove !== null) {\n        this.options.onCropMove(this.getValue());\n      }\n    }\n  }, {\n    key: 'onHandleMoveEnd',\n    value: function onHandleMoveEnd(e) {\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveStart',\n    value: function onRegionMoveStart(e) {\n      var _e$detail2 = e.detail,\n          mouseX = _e$detail2.mouseX,\n          mouseY = _e$detail2.mouseY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      this.currentMove = {\n        offsetX: mouseX - this.box.x1,\n        offsetY: mouseY - this.box.y1\n      };\n      if (this.options.onCropStart !== null) {\n        this.options.onCropStart(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveMoving',\n    value: function onRegionMoveMoving(e) {\n      var _e$detail3 = e.detail,\n          mouseX = _e$detail3.mouseX,\n          mouseY = _e$detail3.mouseY;\n      var _currentMove = this.currentMove,\n          offsetX = _currentMove.offsetX,\n          offsetY = _currentMove.offsetY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      this.box.move(mouseX - offsetX, mouseY - offsetY);\n      if (this.box.x1 < 0) {\n        this.box.move(0, null);\n      }\n      if (this.box.x2 > container.width) {\n        this.box.move(container.width - this.box.width(), null);\n      }\n      if (this.box.y1 < 0) {\n        this.box.move(null, 0);\n      }\n      if (this.box.y2 > container.height) {\n        this.box.move(null, container.height - this.box.height());\n      }\n      this.redraw();\n      if (this.options.onCropMove !== null) {\n        this.options.onCropMove(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveEnd',\n    value: function onRegionMoveEnd(e) {\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (mode === null) {\n        mode = this.options.returnMode;\n      }\n      if (mode == 'real') {\n        var actualWidth = this.imageEl.naturalWidth;\n        var actualHeight = this.imageEl.naturalHeight;\n        var _imageEl$getBoundingC = this.imageEl.getBoundingClientRect(),\n            elementWidth = _imageEl$getBoundingC.width,\n            elementHeight = _imageEl$getBoundingC.height;\n        var factorX = actualWidth / elementWidth;\n        var factorY = actualHeight / elementHeight;\n        return {\n          x: Math.round(this.box.x1 * factorX),\n          y: Math.round(this.box.y1 * factorY),\n          width: Math.round(this.box.width() * factorX),\n          height: Math.round(this.box.height() * factorY)\n        };\n      } else if (mode == 'ratio') {\n        var _imageEl$getBoundingC2 = this.imageEl.getBoundingClientRect(),\n            _elementWidth = _imageEl$getBoundingC2.width,\n            _elementHeight = _imageEl$getBoundingC2.height;\n        return {\n          x: round(this.box.x1 / _elementWidth, 3),\n          y: round(this.box.y1 / _elementHeight, 3),\n          width: round(this.box.width() / _elementWidth, 3),\n          height: round(this.box.height() / _elementHeight, 3)\n        };\n      } else if (mode == 'raw') {\n        return {\n          x: Math.round(this.box.x1),\n          y: Math.round(this.box.y1),\n          width: Math.round(this.box.width()),\n          height: Math.round(this.box.height())\n        };\n      }\n    }\n  }], [{\n    key: 'parseOptions',\n    value: function parseOptions(opts) {\n      var defaults$$1 = {\n        aspectRatio: null,\n        maxSize: { width: null, height: null },\n        minSize: { width: null, height: null },\n        startSize: { width: 100, height: 100, unit: '%' },\n        returnMode: 'real',\n        onInitialize: null,\n        onCropStart: null,\n        onCropMove: null,\n        onCropEnd: null\n      };\n      var aspectRatio = null;\n      if (opts.aspectRatio !== undefined) {\n        if (typeof opts.aspectRatio === 'number') {\n          aspectRatio = opts.aspectRatio;\n        } else if (opts.aspectRatio instanceof Array) {\n          aspectRatio = opts.aspectRatio[1] / opts.aspectRatio[0];\n        }\n      }\n      var maxSize = null;\n      if (opts.maxSize !== undefined && opts.maxSize !== null) {\n        maxSize = {\n          width: opts.maxSize[0] || null,\n          height: opts.maxSize[1] || null,\n          unit: opts.maxSize[2] || 'px'\n        };\n      }\n      var minSize = null;\n      if (opts.minSize !== undefined && opts.minSize !== null) {\n        minSize = {\n          width: opts.minSize[0] || null,\n          height: opts.minSize[1] || null,\n          unit: opts.minSize[2] || 'px'\n        };\n      }\n      var startSize = null;\n      if (opts.startSize !== undefined && opts.startSize !== null) {\n        startSize = {\n          width: opts.startSize[0] || null,\n          height: opts.startSize[1] || null,\n          unit: opts.startSize[2] || '%'\n        };\n      }\n      var onInitialize = null;\n      if (typeof opts.onInitialize === 'function') {\n        onInitialize = opts.onInitialize;\n      }\n      var onCropStart = null;\n      if (typeof opts.onCropStart === 'function') {\n        onCropStart = opts.onCropStart;\n      }\n      var onCropEnd = null;\n      if (typeof opts.onCropEnd === 'function') {\n        onCropEnd = opts.onCropEnd;\n      }\n      var onCropMove = null;\n      if (typeof opts.onUpdate === 'function') {\n        console.warn('Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead.');\n        onCropMove = opts.onUpdate;\n      }\n      if (typeof opts.onCropMove === 'function') {\n        onCropMove = opts.onCropMove;\n      }\n      var returnMode = null;\n      if (opts.returnMode !== undefined) {\n        var s = opts.returnMode.toLowerCase();\n        if (['real', 'ratio', 'raw'].indexOf(s) === -1) {\n          throw \"Invalid return mode.\";\n        }\n        returnMode = s;\n      }\n      var convertToPixels = function convertToPixels(container) {\n        var width = container.offsetWidth;\n        var height = container.offsetHeight;\n        var sizeKeys = ['maxSize', 'minSize', 'startSize'];\n        for (var i = 0; i < sizeKeys.length; i++) {\n          var key = sizeKeys[i];\n          if (this[key] !== null) {\n            if (this[key].unit == '%') {\n              if (this[key].width !== null) {\n                this[key].width = this[key].width / 100 * width;\n              }\n              if (this[key].height !== null) {\n                this[key].height = this[key].height / 100 * height;\n              }\n            }\n            delete this[key].unit;\n          }\n        }\n      };\n      var defaultValue = function defaultValue(v, d) {\n        return v !== null ? v : d;\n      };\n      return {\n        aspectRatio: defaultValue(aspectRatio, defaults$$1.aspectRatio),\n        maxSize: defaultValue(maxSize, defaults$$1.maxSize),\n        minSize: defaultValue(minSize, defaults$$1.minSize),\n        startSize: defaultValue(startSize, defaults$$1.startSize),\n        returnMode: defaultValue(returnMode, defaults$$1.returnMode),\n        onInitialize: defaultValue(onInitialize, defaults$$1.onInitialize),\n        onCropStart: defaultValue(onCropStart, defaults$$1.onCropStart),\n        onCropMove: defaultValue(onCropMove, defaults$$1.onCropMove),\n        onCropEnd: defaultValue(onCropEnd, defaults$$1.onCropEnd),\n        convertToPixels: convertToPixels\n      };\n    }\n  }]);\n  return CropprCore;\n}();\nfunction round(value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nvar Croppr$1 = function (_CropprCore) {\n  inherits(Croppr, _CropprCore);\n  /**\n   * @constructor\n   * Calls the CropprCore's constructor.\n   */\n  function Croppr(element, options) {\n    var _deferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    classCallCheck(this, Croppr);\n    return possibleConstructorReturn(this, (Croppr.__proto__ || Object.getPrototypeOf(Croppr)).call(this, element, options, _deferred));\n  }\n  /**\n   * Gets the value of the crop region.\n   * @param {String} [mode] Which mode of calculation to use: 'real', 'ratio' or\n   *      'raw'.\n   */\n  createClass(Croppr, [{\n    key: 'getValue',\n    value: function getValue(mode) {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'getValue', this).call(this, mode);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'setImage', this).call(this, src);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'destroy', this).call(this);\n    }\n    /**\n     * Moves the crop region to a specified coordinate.\n     * @param {Number} x\n     * @param {Number} y\n     */\n  }, {\n    key: 'moveTo',\n    value: function moveTo(x, y) {\n      this.box.move(x, y);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n    /**\n     * Resizes the crop region to a specified width and height.\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n  }, {\n    key: 'resizeTo',\n    value: function resizeTo(width, height) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [.5, .5];\n      this.box.resize(width, height, origin);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n    /**\n     * Scale the crop region by a factor.\n     * @param {Number} factor\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n  }, {\n    key: 'scaleBy',\n    value: function scaleBy(factor) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [.5, .5];\n      this.box.scale(factor, origin);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n  }]);\n  return Croppr;\n}(CropprCore);\n\nreturn Croppr$1;\n\n})));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// https://www.codingnepalweb.com/build-image-editor-html-javascript/\r\n// https://jamesooi.design/Croppr.js/#install\r\n\r\nimport Croppr from 'croppr';\r\n\r\nconsole.log('Image edit js loaded');\r\n\r\nexport async function addCropper(file){    \r\n    // constants\r\n    const modal\t    = document.getElementById('edit-image-modal'),\r\n    fileInput       = modal.querySelector(\".file-input\"),\r\n    filterOptions   = modal.querySelectorAll(\".filter button\"),\r\n    filterName      = modal.querySelector(\".filter-info .name\"),\r\n    filterValue     = modal.querySelector(\".filter-info .value\"),\r\n    filterSlider    = modal.querySelector(\".slider input\"),\r\n    rotateOptions   = modal.querySelectorAll(\".rotate button\"),\r\n    resetFilterBtn  = modal.querySelector(\".reset-filter\"),\r\n    chooseImgBtn    = modal.querySelector(\".choose-img\"),\r\n    saveImgBtn      = modal.querySelector(\".save-img\"),\r\n    orgImage        = modal.querySelector('.preview-img img');\r\n\r\n    // variables\r\n    let brightness  = \"100\", \r\n    saturation      = \"100\", \r\n    inversion       = \"0\", \r\n    grayscale       = \"0\",\r\n    rotate          = 0, \r\n    flipHorizontal  = 1, \r\n    flipVertical    = 1,\r\n    previewImg;\r\n\r\n    modal.currentFileName   = file.name;\r\n\r\n    // attach the cropper\r\n    orgImage.onload = function() {\r\n        modal._cropper  = new Croppr(\r\n            '.preview-img img',\r\n            {\r\n                startSize: [50, 50, '%'],\r\n            }\r\n        );\r\n\r\n        \r\n        previewImg      = modal._cropper.imageClippedEl;\r\n    };\r\n\r\n    // add the picture\r\n    modal.querySelector('.preview-img img').src\t= URL.createObjectURL(file);\r\n\r\n    // functions\r\n    const loadImage = () => {\r\n        modal.classList.add(\"disable\");\r\n        let file = fileInput.files[0];\r\n        if(!file) return;\r\n        orgImage.src = URL.createObjectURL(file);\r\n        previewImg.addEventListener(\"load\", () => {\r\n            resetFilterBtn.click();\r\n            modal.classList.remove(\"disable\");\r\n        });\r\n    }\r\n    \r\n    const applyFilter = () => {\r\n        previewImg.style.transform  = `rotate(${rotate}deg) scale(${flipHorizontal}, ${flipVertical})`;\r\n    \r\n        previewImg.style.filter     = `brightness(${brightness}%) saturate(${saturation}%) invert(${inversion}%) grayscale(${grayscale}%)`;\r\n    }\r\n    \r\n    filterOptions.forEach(option => {\r\n        option.addEventListener(\"click\", () => {\r\n            modal.querySelector(\".active\").classList.remove(\"active\");\r\n            option.classList.add(\"active\");\r\n            filterName.innerText = option.innerText;\r\n    \r\n            if(option.id === \"brightness\") {\r\n                filterSlider.max        = \"200\";\r\n                filterSlider.value      = brightness;\r\n                filterValue.innerText   = `${brightness}%`;\r\n            } else if(option.id === \"saturation\") {\r\n                filterSlider.max        = \"200\";\r\n                filterSlider.value      = saturation;\r\n                filterValue.innerText   = `${saturation}%`\r\n            } else if(option.id === \"inversion\") {\r\n                filterSlider.max        = \"100\";\r\n                filterSlider.value      = inversion;\r\n                filterValue.innerText   = `${inversion}%`;\r\n            } else {\r\n                filterSlider.max        = \"100\";\r\n                filterSlider.value      = grayscale;\r\n                filterValue.innerText   = `${grayscale}%`;\r\n            }\r\n        });\r\n    });\r\n    \r\n    const updateFilter = () => {\r\n        filterValue.innerText   = `${filterSlider.value}%`;\r\n        const selectedFilter    = modal.querySelector(\".filter .active\");\r\n    \r\n        if(selectedFilter.id === \"brightness\") {\r\n            brightness  = filterSlider.value;\r\n        } else if(selectedFilter.id === \"saturation\") {\r\n            saturation  = filterSlider.value;\r\n        } else if(selectedFilter.id === \"inversion\") {\r\n            inversion   = filterSlider.value;\r\n        } else {\r\n            grayscale   = filterSlider.value;\r\n        }\r\n        applyFilter();\r\n    }\r\n    \r\n    rotateOptions.forEach(option => {\r\n        option.addEventListener(\"click\", () => {\r\n            if(option.id === \"left\") {\r\n                rotate -= 90;\r\n            } else if(option.id === \"right\") {\r\n                rotate += 90;\r\n            } else if(option.id === \"horizontal\") {\r\n                flipHorizontal = flipHorizontal === 1 ? -1 : 1;\r\n            } else {\r\n                flipVertical = flipVertical === 1 ? -1 : 1;\r\n            }\r\n            applyFilter();\r\n        });\r\n    });\r\n    \r\n    const resetFilter = () => {\r\n        brightness      = \"100\"; \r\n        saturation      = \"100\"; \r\n        inversion       = \"0\"; \r\n        grayscale       = \"0\";\r\n        rotate          = 0; \r\n        flipHorizontal  = 1; \r\n        flipVertical    = 1;\r\n\r\n        filterOptions[0].click();\r\n        applyFilter();\r\n    }\r\n    \r\n    const saveImage = async (event) => {\r\n    \r\n        const points        = modal._cropper.getValue(),\r\n        sx                  = points.x,\r\n        sy                  = points.y,\r\n        width               = points.width,\r\n        height              = points.height,\r\n        tempCanvas          = document.createElement(\"canvas\"),\r\n        ctx                 = tempCanvas.getContext(\"2d\");\r\n\r\n        let dx  = 0,\r\n        dy      = 0;\r\n\r\n        tempCanvas.width    = width;\r\n        tempCanvas.height   = height;\r\n\r\n\r\n        if(rotate !== 0) {\r\n            // rotate with 90 degrees\r\n            if(rotate == 90){\r\n                // swap canvas size\r\n                tempCanvas.width    = height;\r\n                tempCanvas.height   = width;\r\n                \r\n                // set rotation center to the center of height.\r\n                ctx.translate((height/2), (height/2));\r\n\r\n                //rotate the canvas, \r\n                ctx.rotate((rotate) * Math.PI / 180); \r\n\r\n                // restore center               \r\n                ctx.translate((-height/2), (-height/2));\r\n            }else if(rotate == -90){\r\n                // swap canvas size\r\n                tempCanvas.width    = height;\r\n                tempCanvas.height   = width;\r\n\r\n                ctx.translate((height/2), (width/2));\r\n                ctx.rotate((rotate) * Math.PI / 180); // x and y are now swapped\r\n                ctx.translate(-(width/2), -(height/2));\r\n            }else{\r\n                // rotate 180 degrees\r\n                ctx.translate(tempCanvas.width / 2, tempCanvas.height / 2);\r\n                ctx.rotate(rotate * Math.PI / 180);\r\n                \r\n                ctx.translate(-tempCanvas.width / 2, -tempCanvas.height / 2);\r\n            }\r\n        } \r\n\r\n        if(flipHorizontal == -1){\r\n            dx  = -width;\r\n        }\r\n\r\n        if(flipVertical == -1){\r\n            dy  = -height;\r\n        }\r\n        ctx.scale(flipHorizontal, flipVertical);\r\n\r\n        ctx.filter = `brightness(${brightness}%) saturate(${saturation}%) invert(${inversion}%) grayscale(${grayscale}%)`;\r\n\r\n        ctx.drawImage(orgImage, sx, sy, width, height, dx, dy,  width, height);\r\n\r\n        let ext         = file.name.split('.').pop();\r\n        let filename    = file.name.replace(`.${ext}`, '.webp');\r\n    \r\n        /* const link = document.createElement(\"a\");\r\n        link.download = \"image.jpg\";\r\n        link.href = tempCanvas.toDataURL();\r\n        link.click(); */\r\n\r\n        tempCanvas.toBlob(\r\n            function(blob){\r\n                document.querySelector(\"#edit-image-modal .save-img\").file = new File([blob], filename);\r\n\r\n                Main.hideModals();\r\n            },\r\n            'image/webp'\r\n        );\r\n    } \r\n\r\n    const clearCropper  = function(){\r\n        // clear the cropper\r\n        modal._cropper.destroy();\r\n\r\n        modal.querySelector('.preview-img').innerHTML   = `<img src=\"\" alt=\"preview-img\" class='hidden'>`;\r\n\r\n        resetFilter();\r\n    }\r\n\r\n    //events\r\n    filterSlider.addEventListener(\"input\", updateFilter);\r\n    resetFilterBtn.addEventListener(\"click\", resetFilter);\r\n    saveImgBtn.addEventListener(\"click\", saveImage);\r\n    fileInput.addEventListener(\"change\", loadImage);\r\n    chooseImgBtn.addEventListener(\"click\", () => fileInput.click());\r\n\r\n    Main.showModal(modal);\r\n\r\n    return new Promise(async function(resolve, reject) {\r\n        let i   = 0;\r\n        while(!modal.matches('.hidden')){\r\n            i++;\r\n\r\n            if(i > 600 ){\r\n                reject('Took too long');\r\n            }\r\n\r\n            // sleep for 1 second\r\n            await new Promise(r => setTimeout(r, 1000));\r\n        }\r\n\r\n        clearCropper();\r\n\r\n        // return the edited image\r\n        console.log(modal);\r\n        if(modal.querySelector(\".save-img\").file != undefined){\r\n            resolve(modal.querySelector(\".save-img\").file);\r\n        }else{\r\n            // return the original image\r\n            resolve(file);\r\n        }\r\n    });\r\n}","import { addCropper } from './image-edit.js';\r\n\r\nconsole.log(\"Fileupload.js loaded\");\r\n\r\nlet totalFiles\t\t\t= 0;\r\nlet fileUploadWrap\t\t= '';\r\nlet datasetString\t\t= '';\r\n\r\nfunction createProgressBar(target){\r\n\t//Show loading gif\r\n\ttarget.closest('.upload_div').querySelectorAll(\".loadergif_wrapper\").forEach(loader =>{\r\n\t\tloader.classList.remove('hidden');\r\n\t\tloader.querySelectorAll(\".uploadmessage\").forEach(el =>{\r\n\t\t\tel.textContent = \"Preparing upload\";\r\n\t\t\tel.classList.add('upload-message');\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar html\t= ` \r\n\t<div id=\"progress-wrapper\" class=\"hidden\">\r\n\t\t<progress id=\"upload_progress\" value=\"0\" max=\"100\"></progress>\r\n\t\t<span id=\"progress_percentage\">   0%</span>\r\n\t</div>\r\n\t`;\r\n\r\n\tfileUploadWrap.insertAdjacentHTML('beforeEnd', html);\r\n}\r\n\r\nfunction addPreview(link, value){\r\n\tlet name\t\t= fileUploadWrap.querySelector('.file_upload').name.replace('_files','');\r\n\r\n\tlet html = `\r\n\t<div class='document'>\r\n\t\t<input type='hidden' name='${name}' value='${value}'>\r\n\t\t${link}\r\n\t\t<img class=\"remove_document_loader hidden\" src=\"${sim.loadingGif}\" style=\"height:40px;\">\r\n\t</div>`;\r\n\r\n\t// insert html\r\n\tfileUploadWrap.querySelector('.documentpreview').insertAdjacentHTML('beforeend', html);\r\n\r\n\treturn fileUploadWrap.querySelector('.documentpreview .document');\r\n}\r\n\r\nasync function fileUpload(target){\r\n\ttarget.classList.add('active');\r\n\r\n\tlet s\t\t\t= \"\";\r\n\tfileUploadWrap\t= target.closest('.file_upload_wrap');\r\n\ttotalFiles \t\t= target.files.length;\r\n\r\n\tif (totalFiles < 0){\r\n\t\tMain.displayMessage(\"Please select some files before hitting the uplad button!\", 'error');\r\n\t\treturn;\r\n\t}\r\n\r\n\t// prevent form submission\r\n\ttarget.closest('form').querySelector('.button.form_submit').disabled\t= true;\r\n\t\r\n\t//Create a formData element\r\n\tlet formData = new FormData();\r\n\t\r\n\t//Add the ajax action name\r\n\tformData.append('action', 'upload_files');\r\n\t\r\n\t//Loop over the dataset attributes and add them to post\r\n\tdatasetString\t= '';\r\n\ttarget.parentNode.querySelectorAll('input').forEach( \r\n\t\tinput => {\r\n\t\t\tformData.append(input.name, input.value);\r\n\t\t\tif(input.type != 'file' && !input.name.includes('fileupload')){\r\n\t\t\t\tdatasetString += `data-${input.name}=\"${input.value}\"`;\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\t//Add all the files to the formData\r\n\tfor (let index = 0; index < totalFiles; index++) {\r\n\t\tlet file\t= target.files[index];\r\n\t\tlet type \t= file.type.split('/')[0];\r\n\t\t// file is a video and vimeo enabled\r\n\t\tif(type == 'video' && typeof(vimeoUploader) == 'object'){\r\n\t\t\tcreateProgressBar(target);\r\n\r\n\t\t\t//update post id on a postform\r\n\t\t\tawait uploadVideo(file);\r\n\t\t// file to big\r\n\t\t}else if(file.size > sim.maxFileSize){\r\n\t\t\tMain.displayMessage('File too big, max file size is '+(parseInt(sim.maxFileSize)/1024/1024)+'MB','error');\r\n\t\t\ttarget.value = '';\r\n\t\t\treturn;\r\n\t\t}else if(type == 'image'){\r\n\t\t\tfile\t= await addCropper(file);\r\n\r\n\t\t\tformData.append('files[]', file);\r\n\t\t}else{\r\n\t\t\tformData.append('files[]', file);\r\n\t\t}\r\n\t}\r\n\r\n\t// No files remaining to upload after uploading videos\r\n\tif(formData.get('files[]') == null){\r\n\t\ttarget.closest('form').querySelector('.button.form_submit').disabled\t= false;\r\n\r\n\t\ttarget.classList.remove('active');\r\n\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t//AJAX request\r\n\tlet request = new XMLHttpRequest();\r\n\t\r\n\t//Listen to the state changes\r\n\trequest.onreadystatechange = readyStateChanged;\r\n\t\r\n\t//Listen to the upload status\r\n\trequest.upload.addEventListener('progress', fileUploadProgress, false);\r\n\t\r\n\trequest.open('POST', sim.ajaxUrl, true);\r\n\t\r\n\t//Create a progressbar\r\n\tcreateProgressBar(target);\r\n\t\r\n\t//Send AJAX request\r\n\tif (totalFiles > 1){\r\n\t\ts = \"s\";\r\n\t}\r\n\ttarget.closest('.upload_div').querySelector('.uploadmessage').textContent = \"Uploading document\"+s;\r\n\tdocument.getElementById('progress-wrapper').classList.remove('hidden');\r\n\r\n\trequest.send(formData);\r\n}\r\n\r\nfunction fileUploadProgress(e){\r\n\tif(e.lengthComputable){\r\n\t\tvar max = e.total;\r\n\t\tvar current = e.loaded;\r\n\r\n\t\tvar percentage = (current * 100)/max;\r\n\t\tpercentage = Math.round(percentage*10)/10\r\n\t\t\r\n\t\tdocument.getElementById(\"upload_progress\").value \t\t\t= percentage;\r\n\t\tdocument.getElementById(\"progress_percentage\").textContent\t= `   ${percentage}%`;\r\n\r\n\t\tif(percentage >= 99){\r\n\t\t\t//Remove progress barr\r\n\t\t\tdocument.getElementById(\"progress-wrapper\").remove();\r\n\t\t\t\r\n\t\t\t// process completed\r\n\t\t\tfileUploadWrap.querySelectorAll(\".uploadmessage\").forEach(el =>{\r\n\t\t\t\t//Change message text\r\n\t\t\t\tif (totalFiles > 1){\r\n\t\t\t\t\tel.textContent = \"Processing documents\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.textContent = \"Processing document\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}  \r\n}\r\n\r\nfunction readyStateChanged(e){\r\n\tlet request\t= e.target;\r\n\t\r\n\t//If finished\r\n\tif(request.readyState == 4){\r\n\t\t//Success\r\n\t\tif (request.status >= 200 && request.status < 400) {\r\n\t\t\tfileUploadSucces(request.responseText)\r\n\t\t//Error\r\n\t\t}else{\r\n\t\t\tconsole.error(request.responseText);\r\n\t\t\tMain.displayMessage(JSON.parse(request.responseText).error,'error');\r\n\t\t}\r\n\t\t\r\n\t\t//Hide loading gif\r\n\t\tdocument.querySelectorAll(\".loadergif_wrapper\").forEach(\r\n\t\t\tfunction(loader){\r\n\t\t\t\tloader.classList.add('hidden');\r\n\t\t\t}\r\n\t\t);\r\n\t\t\t\r\n\t\t//Clear the input\r\n\t\tfileUploadWrap.querySelector('.file_upload').value = \"\";\r\n\r\n\t\t// enable form submission again\r\n\t\tdocument.querySelectorAll('.button.form_submit[disabled]').forEach(el=>el.disabled\t= false);\r\n\t}\r\n}\r\n\r\nfunction fileUploadSucces(result){\r\n\tlet imgUrls\t\t= JSON.parse(result);\r\n\tlet src\t\t\t= '';\r\n\t\r\n\tfor(const element of imgUrls) {\r\n\t\tsrc \t\t\t= element['url'];\r\n\t\tlet url \t\t= sim.baseUrl+'/'+src;\r\n\t\tlet value\t\t= '';\r\n\t\tlet anchorLink\t= '';\r\n\t\t\r\n\t\tif(element['id'] != undefined){\r\n\t\t\tdatasetString += ' data-libraryid=\"'+element['id']+'\"';\r\n\t\t}\r\n\r\n\t\tif(element['id'] == undefined){\r\n\t\t\tvalue\t\t= url;\r\n\t\t}else{\r\n\t\t\tvalue\t\t= element['id'];\r\n\t\t}\r\n\r\n\t\t//is image\r\n\t\tif (src.toLowerCase().match(/\\.(jpe|jpeg|jpg|gif|png|webp)$/) != null){\r\n\t\t\t//Add the image\r\n\t\t\tanchorLink\t= `<a class=\"fileupload\" href=\"${url}\"><img src=\"${url}\" alt=\"picture\" style=\"height:150px;\"></a>`;\r\n\t\t}else{\r\n\t\t\t//Add a link\r\n\t\t\tlet filename\t= url.split('/')[url.split('/').length-1]\r\n\t\t\tanchorLink\t= `<a class=\"fileupload\" href=\"${url}\">${filename}</a>`;\r\n\t\t}\r\n\t\tanchorLink += `<button type=\"button\" class=\"remove_document button\" data-url=\"${src}\" ${datasetString}>X</button>`;\r\n\r\n\t\taddPreview(anchorLink, value);\r\n\t}\r\n\t\r\n\tif(imgUrls.length==1){\r\n\t\tlet fileName \t= src.split(\"/\")[src.split(\"/\").length-1];\r\n\t\tMain.displayMessage(`The file ${fileName} has been uploaded succesfully.`,'success',true);\r\n\t}else{\r\n\t\tMain.displayMessage(\"The files have been uploaded succesfully.\",'success',true);\r\n\t}\r\n\t\r\n\t//Hide upload button if only one file allowed\r\n\tif(!fileUploadWrap.querySelector('.file_upload').multiple){\r\n\t\tfileUploadWrap.querySelector('.upload_div').classList.add('hidden');\r\n\t}\r\n\r\n\t// Create a custom event so others can listen to it.\r\n\t// Used by formstable uploads\r\n\tconst event = new Event('uploadfinished');\r\n\tfileUploadWrap.dispatchEvent(event);\r\n\r\n\tdocument.querySelector('.file_upload.active').classList.remove('active');\r\n}\r\n\r\nasync function removeDocument(target){\r\n\tlet data = new FormData();\t\t\r\n\t//Loop over the dataset attributes and add them to post\r\n\tfor(let d in target.dataset){\r\n\t\tif(target.dataset[d] != ''){\r\n\t\t\tdata.append(d,target.dataset[d]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//hide the remove button\r\n\ttarget.style.display = \"none\";\r\n\t\r\n\t//add an id to the remove button so we can query for it later\r\n\ttarget.parentNode.classList.add('removethisdocument');\r\n\t\r\n\t//show loader\r\n\ttarget.parentNode.querySelector('.remove_document_loader').classList.remove('hidden');\r\n\t\r\n\tlet response\t= await FormSubmit.fetchRestApi('remove_document', data);\r\n\r\n\tif(response){\r\n\t\tlet docWrapper\t\t= target.closest('.document');\r\n\t\tfileUploadWrap\t\t= docWrapper.closest('.file_upload_wrap');\r\n\t\t\r\n\t\t//hide the loading gif\r\n\t\tdocWrapper.querySelector('.remove_document_loader').classList.add('hidden');\r\n\t\t\t\r\n\t\t// If successful\r\n\t\ttry{\r\n\t\t\t//show the upload field\r\n\t\t\tfileUploadWrap.querySelector('.upload_div').classList.remove('hidden');\r\n\t\t}catch{\r\n\t\t\t//remove featured image id\r\n\t\t\tdocument.querySelector('[name=\"post_image_id\"]').value = '';\r\n\t\t}\r\n\t\t\r\n\t\t//remove the document/picture\r\n\t\tdocWrapper.remove();\r\n\t\t\r\n\t\t//var re = new RegExp('(.*)[0-9](.*)',\"g\");\r\n\t\t//reindex documents\r\n\t\tfileUploadWrap.querySelectorAll('.file_url').forEach((el,index)=>{\r\n\t\t\t//el.name = el.name.replace(re, '$1'+index+'$2');\r\n\t\t\tel.name = el.name.replace(/(\\d)/g, index);\r\n\t\t});\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nfunction refreshVimeoiFrame(){\r\n\t// Show the vimeo video after 60 seconds when the video is hopefully rendered\r\n\tdocument.querySelectorAll('.vimeo-embed-container.loading iframe').forEach(el=>{\r\n\t\t// replace the src with itself to refresh the iframe\r\n\t\tel.src\t= el.src;\r\n\t});\r\n}\r\n\r\nasync function uploadVideo(file){\r\n\tvar uploader\t= new vimeoUploader.VimeoUpload(file);\r\n\tvar upload\t\t= await uploader.tusUploader();\r\n\tvar s\t\t\t= '';\r\n\r\n\t// Could not upload\r\n\tif(!upload){\r\n\t\t//clear file upload\r\n\t\tfileUploadWrap.querySelector('.file_upload').value = \"\";\r\n\t\t\t\t\r\n\t\t//Remove progress barr\r\n\t\tdocument.getElementById(\"progress-wrapper\").remove();\r\n\r\n\t\t// Hide the loader\r\n\t\tdocument.querySelector('.loadergif_wrapper:not(.hidden)').classList.add('hidden');\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Upload started\r\n\tif (totalFiles > 1){\r\n\t\ts = \"s\";\r\n\t}else{\r\n\t\ts = \"\";\r\n\t}\r\n\r\n\tupload.options.onProgress   = function(bytesUploaded, bytesTotal) {\r\n\t\t//calculate percentage\r\n\t\tvar percentage = (bytesUploaded / bytesTotal * 100).toFixed(2)\r\n\t\r\n\t\t//show percentage in progressbar\r\n\t\tdocument.getElementById(\"upload_progress\").value\t\t\t= percentage;\r\n\t\tdocument.getElementById(\"progress_percentage\").textContent\t= `   ${percentage}%`;\r\n\r\n\t\tif(percentage>98){\r\n\t\t\tdocument.querySelector('.upload-message').textContent = \"Processing video\"+s;\r\n\t\t\tdocument.getElementById('progress-wrapper').classList.add('hidden');\r\n\t\t}\r\n\t};\r\n\r\n\tupload.options.onSuccess    = async function() {\r\n\t\tlet postId\t= uploader.storedEntry.postId;\r\n\t\t// Add post id of the video to the form\r\n\t\tlet formData = new FormData();\r\n        formData.append('post_id', postId);\r\n    \r\n        let request = new XMLHttpRequest();\r\n        request.open('POST', `${sim.baseUrl}/wp-json${sim.restApiPrefix}/vimeo/add_uploaded_vimeo`, false);\r\n        request.send(formData);\r\n\r\n\t\t//Remove progress barr\r\n\t\tdocument.getElementById(\"progress-wrapper\").remove();\r\n\t\t\r\n\t\tlet link\t= `\r\n\t\t<div class=\"vimeo-wrapper\">\r\n\t\t\t<div class='vimeo-embed-container loading'>\r\n\t\t\t\t<iframe src='https://player.vimeo.com/video/${uploader.storedEntry.vimeoId}' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe><br>\r\n\t\t\t</div>\r\n\t\t</div>`;\r\n\r\n\t\tvar preview\t\t= addPreview(link, postId);\r\n\r\n\t\t// Hide the loader\r\n\t\tdocument.querySelector('.loadergif_wrapper:not(.hidden)').classList.add('hidden');\r\n\r\n\t\tMain.displayMessage(`The file ${file.name} has been uploaded succesfully.`,'success',true);\r\n\t\t\r\n\t\t//Hide upload button if only one file allowed\r\n\t\tif(!fileUploadWrap.querySelector('.file_upload').multiple){\r\n\t\t\tfileUploadWrap.querySelector('.upload_div').classList.add('hidden');\r\n\t\t}\r\n\r\n\t\t//clear file upload\r\n\t\tfileUploadWrap.querySelector('.file_upload').value = \"\";\r\n\t\t\r\n\t\tuploader.urlStorage.removeUpload(uploader.storedEntry.urlStorageKey);\r\n\r\n\t\t// check if we are uploading from frontend posting form\r\n\t\tvar postForm = document.getElementById('postform');\r\n\t\tif(postForm != null){\r\n\t\t\tpostForm.querySelector('[name=\"update\"]').value\t\t= 'true';\r\n\t\t\tpostForm.querySelector('[name=\"post_id\"]').value\t= postId;\r\n\t\t}\r\n\r\n\t\t// Wait for the video to be processed on Vimeo\r\n\t\tvar result\t= '';\r\n\t\twhile(!result.ok){\r\n\t\t\tawait new Promise(res => setTimeout(res, 10000));\r\n\t\t\tresult = await fetch(\r\n\t\t\t\t`https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/${uploader.storedEntry.vimeoId}`,\r\n\t\t\t\t{method: 'GET'}\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar response\t= await result.json();\r\n\r\n\t\tpreview.querySelector('.vimeo-wrapper').innerHTML = DOMPurify.sanitize(response.html);\r\n\t}\r\n\r\n\tupload.options.onError      = function(error) {\r\n\t\tconsole.error(\"Failed because: \" + error);\t\t\t\t\r\n\t}\r\n\r\n\tdocument.querySelector('.upload-message').textContent = \"Uploading video\"+s+\" to Vimeo\";\r\n\tdocument.getElementById('progress-wrapper').classList.remove('hidden');\r\n\r\n\tupload.start();\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\t// move the modal to the top of the body so its always visible when not hidden\r\n\tdocument.body.append(document.querySelector('.modal.edit-image.hidden'));\r\n});\r\n\r\n//Remove picture on button click\r\nwindow.addEventListener(\"click\", function(event) {\r\n\tvar target = event.target;\r\n\t\r\n\tif (target.matches(\".remove_document\")){\r\n\t\tevent.preventDefault();\r\n\t\tremoveDocument(target);\r\n\t}\r\n});\r\n\r\nwindow.addEventListener(\"change\", event => {\r\n\tlet target = event.target;\r\n\r\n\tif (target.className.includes(\"file_upload\")){\r\n\t\tevent.preventDefault();\r\n\t\tfileUpload(target);\r\n\t}\r\n});"],"names":["module","exports","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","e","MouseEvent","eventType","mouseEvent","initMouseEvent","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","value","getter","call","slicedToArray","arr","Array","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","push","err","sliceIterator","Handle","position","constraints","cursor","eventBus","this","self","onMouseUp","stopPropagation","removeEventListener","onMouseMove","dispatchEvent","handle","mouseX","clientX","mouseY","clientY","el","createElement","className","style","addEventListener","Box","x1","y1","x2","y2","arguments","abs","newWidth","newHeight","origin","fromX","width","fromY","height","factor","resize","y","point","ratio","grow","boundaryWidth","boundaryHeight","_getAbsolutePoint","getAbsolutePoint","_getAbsolutePoint2","originX","originY","maxIfLeft","maxIfTop","maxIfRight","maxIfBottom","directionX","directionY","maxWidth","maxHeight","min","scale","_factor","minWidth","minHeight","_newWidth","_newHeight","_newWidth2","_newHeight2","_newWidth3","_newHeight3","simulateMouseEvent","preventDefault","touch","changedTouches","type","view","screenX","screenY","HANDLES","CropprCore","options","_this","deferred","parseOptions","nodeName","querySelector","getAttribute","_initialized","_restore","parentNode","onload","initialize","createDOM","convertToPixels","cropperEl","attachHandlerEvents","attachRegionEvents","attachOverlayEvents","box","initializeBox","redraw","onInitialize","targetEl","containerEl","imageEl","setAttribute","imageClippedEl","cloneNode","regionEl","overlayEl","handleContainerEl","handles","appendChild","parentElement","replaceChild","src","_this2","opts","startSize","constrainToRatio","aspectRatio","minSize","maxSize","constrainToSize","parentWidth","offsetWidth","parentHeight","offsetHeight","constrainToBoundary","move","_this3","round","transform","clip","center","xSign","ySign","foregroundHandleIndex","handleWidth","handleHeight","left","top","zIndex","onHandleMoveStart","bind","onHandleMoveMoving","onHandleMoveEnd","onRegionMoveStart","onRegionMoveMoving","onRegionMoveEnd","tmpBox","container","getBoundingClientRect","originPoint","_box$getAbsolutePoint","_box$getAbsolutePoint2","activeHandle","onCropStart","getValue","_e$detail","slice","TOP_MOVABLE","RIGHT_MOVABLE","BOTTOM_MOVABLE","LEFT_MOVABLE","MULTI_AXIS","isFlippedX","isFlippedY","tmp","_tmp","isVerticalMovement","ratioMode","onCropMove","onCropEnd","_e$detail2","currentMove","offsetX","offsetY","_e$detail3","_currentMove","mode","returnMode","actualWidth","naturalWidth","actualHeight","naturalHeight","_imageEl$getBoundingC","factorX","factorY","_imageEl$getBoundingC2","_elementWidth","_elementHeight","defaults$$1","unit","onUpdate","console","warn","s","toLowerCase","indexOf","defaultValue","v","d","sizeKeys","decimals","Number","Croppr$1","_CropprCore","Croppr","_deferred","ReferenceError","possibleConstructorReturn","__proto__","subClass","superClass","create","constructor","setPrototypeOf","inherits","factory","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","__esModule","a","definition","o","obj","prop","hasOwnProperty","async","addCropper","file","modal","getElementById","fileInput","filterOptions","querySelectorAll","filterName","filterValue","filterSlider","rotateOptions","resetFilterBtn","chooseImgBtn","saveImgBtn","orgImage","previewImg","brightness","saturation","inversion","grayscale","rotate","flipHorizontal","flipVertical","currentFileName","name","_cropper","URL","createObjectURL","applyFilter","filter","forEach","option","classList","remove","add","innerText","resetFilter","click","selectedFilter","points","sx","sy","tempCanvas","ctx","getContext","dx","dy","translate","PI","drawImage","ext","split","pop","filename","replace","toBlob","blob","File","Main","hideModals","files","showModal","Promise","resolve","reject","matches","r","destroy","innerHTML","log","totalFiles","fileUploadWrap","datasetString","createProgressBar","closest","loader","textContent","insertAdjacentHTML","addPreview","link","html","sim","loadingGif","fileUploadProgress","lengthComputable","total","percentage","loaded","readyStateChanged","request","readyState","status","result","imgUrls","JSON","parse","url","baseUrl","anchorLink","match","fileName","displayMessage","multiple","fileUploadSucces","responseText","error","disabled","uploadVideo","uploader","vimeoUploader","VimeoUpload","upload","tusUploader","onProgress","bytesUploaded","bytesTotal","toFixed","onSuccess","postId","storedEntry","formData","FormData","append","XMLHttpRequest","open","restApiPrefix","send","preview","vimeoId","urlStorage","removeUpload","urlStorageKey","postForm","ok","res","fetch","method","response","json","DOMPurify","sanitize","onError","start","body","data","dataset","display","FormSubmit","fetchRestApi","docWrapper","index","removeDocument","includes","input","size","maxFileSize","parseInt","onreadystatechange","ajaxUrl"],"sourceRoot":""}