{"version":3,"file":"desktop-schedule.min.js","mappings":"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","sources":["webpack://events/./schedules/shared.js","webpack://events/./schedules/desktop.js"],"sourcesContent":["//shows the modal to select a user as host\r\nexport function showAddHostModal(target, date='', startTime=''){\r\n\ttarget.classList.add('active');\r\n\tlet modal\t\t\t\t\t\t\t\t\t\t\t= document.querySelector('[name=\"add_host\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n    modal.querySelector('[name=\"date\"]').value\t\t\t= date;\r\n    modal.querySelector('[name=\"starttime\"]').value\t\t= startTime;\r\n\r\n\t// Add new values\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t= target.closest('.schedules_div').dataset.id;\r\n\r\n\tmodal.classList.remove('hidden');\r\n}\r\n\r\n// Add current user as host\r\nexport async function addCurrentUserAsHost(target, dateStr){\r\n    let scheduleOwner\t= target.closest('.schedules_div').dataset.target;   \r\n\tlet text \t\t\t= `Please confirm you want to be the host for ${scheduleOwner} on ${dateStr}`;\r\n\tlet confirmed\t\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\r\n\t\tlet formData\t\t= loadHostFormdata(target);\r\n\r\n\t\tif(target.closest('table') == null){\r\n\t\t\tMain.showLoader(target);\r\n\t\t}\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('events/add_host', formData);\r\n\r\n\t\tif(response){\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Show the new host in the schedule\r\nexport function addHostHtml(response){\r\n\tlet target\t\t\t= document.querySelector('.active');\r\n\r\n\tif(target != null){\r\n\t\ttarget.classList.remove('active');\r\n\t\ttarget.outerHTML\t= response.html;\r\n\t}\r\n\r\n\tMain.displayMessage(response.message);\r\n\r\n\tMain.hideModals();\r\n}\r\n\r\n// Remove a host\r\nexport async function removeHost(target, dateStr){\r\n\tlet text, confirmed;\r\n\r\n    let scheduleOwner\t= target.closest('.schedules_div').dataset.target;\r\n\r\n\tif(target.classList.contains('orientation')){\r\n\t\ttext \t= `Are you sure you want to remove this orientation session`;\r\n\t}else if(target.classList.contains('admin')){\r\n\t\ttext \t= `Please confirm host removal for ${scheduleOwner} on ${dateStr}`;\r\n\t}else{\r\n\t\ttext \t= `Please confirm you do not want to be the host for ${scheduleOwner} on ${dateStr} anymore`;\r\n\t}\r\n\r\n\tconfirmed\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\t\t\r\n\t\tlet formData\t\t= new FormData();\r\n\t\tformData.append('session_id', target.dataset.session_id);\r\n\t\tMain.showLoader(target.firstChild);\r\n\r\n\t\tvar response = await FormSubmit.fetchRestApi('events/remove_host', formData);\r\n\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\treturn response.html;\r\n\t}\r\n\r\n    return confirmed;\r\n}\r\n\r\nexport function showTimeslotModal(target='', date='', startTime='', endTime=''){\r\n\tlet hostId, subject, location, hostName, sessionId;\r\n\tlet modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"checkbox\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t\t= target.closest('.schedules_div').dataset.id;\r\n\r\n\thostId\t\t\t= target.dataset.host_id;\r\n\tsubject\t\t\t= target.dataset.subject;\r\n\tlocation\t\t= target.dataset.location;\r\n\thostName\t\t= target.dataset.host;\r\n\tsessionId\t\t= target.dataset.session_id;\r\n\r\n\t//Fill the modal values\r\n\tmodal.querySelector('[name=\"date\"]').value\t\t\t\t= date;\r\n\tmodal.querySelector('[name=\"starttime\"]').value\t\t\t= startTime;\r\n\tmodal.querySelector('[name=\"endtime\"]').value\t\t\t= endTime;\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.remove('add_schedule_row');\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.add('update_schedule');\r\n\r\n\tif( target.dataset.session_id != undefined){\r\n\t\tmodal.querySelector('[name=\"session-id\"]').value\t= sessionId;\r\n\t}\r\n\tif(hostId\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host_id\"]').value\t\t= hostId;\r\n\t}\r\n\tif(subject\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t= subject;\r\n\t}\r\n\tif(location\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"location\"]').value\t\t= location;\r\n\t}\r\n\tif(hostName\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host\"]').value\t\t\t= hostName;\r\n\t}\r\n\t\r\n\tMain.showModal(modal);\r\n}\r\n\r\nexport async function editTimeSlot(target, date, dateStr){\r\n\tlet options\t= {\r\n\t\ttitle: 'What do you want to do?',\r\n\t\ttext: \"Do you want to edit or remove this timeslot?\",\r\n\t\tshowDenyButton: true,\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: 'Edit timeslot',\r\n\t\tdenyButtonText: 'Remove timeslot',\r\n\t}\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar answer = await Swal.fire(options);\r\n\r\n\t//swap and/or\r\n\tif (answer.isConfirmed) {\r\n\t\t// Show modal and prefill the default fields\r\n\t\tshowTimeslotModal(target, date, target.dataset.starttime, target.dataset.endtime);\r\n\t\t\r\n\t\t//change button text\r\n\t\tvar modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').textContent\t= 'Update time slot';\r\n\t//add new rule after this one\r\n\t}else if (answer.isDenied) {\r\n\t\treturn answer.isDenied;\r\n\t}\r\n}\r\n\r\nfunction loadHostFormdata(target){\r\n    let scheduleId\t\t= target.closest('.schedules_div').dataset.id;\r\n\tlet table\t\t\t= target.closest('table');\r\n\r\n\tlet heading, cell, date, startTime, host;\r\n\r\n\tif(table == null){\r\n\t\tstartTime\t\t= target.dataset.starttime;\r\n\t\thost\t\t\t= target.dataset.host_id;\r\n\t\tdate\t\t\t= target.dataset.isodate\r\n\t}else{\r\n\t\theading\t\t\t= table.tHead.rows[0];\r\n\t\tcell\t\t\t= target.closest('td');\r\n\t\tstartTime\t\t= target.closest('tr').dataset.starttime;\r\n\t\thost\t\t\t= cell.dataset.host;\r\n\t\tdate\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\t}\r\n\r\n\tvar formData\t\t= new FormData();\r\n\tformData.append('date', date);\r\n\tif(host != null){\r\n\t\tformData.append('host_id', host);\r\n\t}else{\r\n\t\tformData.append('host_id', sim.userId);\r\n\t}\r\n\t\r\n\tformData.append('starttime', startTime);\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\treturn formData;\r\n}\r\n\r\nexport async function checkConfirmation(text, target){\r\n\tlet options = {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: text+\"?\",\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: 'Yes'\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar result = await Swal.fire(options);\r\n\t\r\n\tif (result.isConfirmed) {\r\n\t\tdocument.querySelectorAll('.modal:not(.hidden)').forEach(modal=>modal.classList.add('hidden'));\r\n\t\t//display loading gif\r\n\t\tMain.showLoader(target.firstChild);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}","import { showLoader } from '../../../../js/imports.js';\r\nimport { showAddHostModal, addCurrentUserAsHost, addHostHtml, removeHost, showTimeslotModal, checkConfirmation, editTimeSlot } from './shared.js';\r\n\r\nconsole.log(\"Desktop-schedule.js loaded\");\r\n\r\n/**\r\n *\r\n * Submits the new schedule form via rest API and adds the new schedule to the screen.\r\n *\r\n * @listens to button click if button has name add_schedule\r\n *\r\n * @param {Object} target     The clicked button.\r\n *\r\n * @return nothing\r\n*/ \r\nasync function addSchedule(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_schedule');\r\n\r\n\tMain.hideModals();\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.schedules_wrapper').outerHTML=response.html;\r\n\t\t\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\taddSelectable();\r\n\t}\r\n}\r\n\r\nfunction ShowPublishScheduleModal(target){\r\n\tvar modal\t\t\t= target.closest('.schedules_div').querySelector('.publish_schedule');\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value = target.dataset[\"schedule_id\"];\r\n\tif(target.dataset.target != null){\r\n\t\tmodal.querySelector('[name=\"schedule_target\"]').value = target.dataset.target;\r\n\t\tmodal.querySelector('[name=\"publish_schedule\"]').click();\r\n\t\tMain.showLoader(target,true);\r\n\t}else{\r\n\t\tMain.showModal(modal);\r\n\t}\r\n}\r\n\r\nasync function publishSchedule(target){\r\n\tvar response\t= await FormSubmit.submitForm(target, 'events/publish_schedule');\r\n\r\n\tif(response){\r\n\t\tdocument.querySelectorAll('.schedule_actions .loadergif').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response);\r\n\r\n\t\tdocument.querySelectorAll('.schedule.publish.warning').forEach(el=>el.remove());\r\n\t\t\r\n\t}\r\n}\r\n\r\n// Removes an existing schedule\r\nasync function removeSchedule(target){\r\n\tvar scheduleId\t\t= target.dataset[\"schedule_id\"];\r\n\tvar text \t\t\t= \"Are you sure you want to remove this schedule\";\r\n\tvar formData \t\t= new FormData();\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\tvar confirmed\t\t= await checkConfirmation(text, target.closest('.schedules_div'));\r\n\tif(confirmed){\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/remove_schedule', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tMain.displayMessage(response);\r\n\r\n\t\t\tdocument.querySelector('.schedules_wrapper .loaderwrapper:not(.hidden)').remove();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyRowSpan(target, count){\r\n\tif(count > 1){\r\n\t\tvar row\t\t= target.closest('tr');\r\n\t\tvar index\t= target.cellIndex;\r\n\t\t//Loop over the next cells to add the hidden attribute\r\n\t\tfor (var i = 1; i < count; i++) {\r\n\t\t\trow = row.nextElementSibling;\r\n\t\t\trow.cells[index].classList.add('hidden');\r\n\t\t}\r\n\t\ttarget.rowSpan\t= count;\r\n\t}\r\n}\r\n\r\nfunction removeRowSpan(cell){\r\n\tcell.removeAttribute('rowspan');\r\n\tlet row\t\t\t= cell.closest('tr').nextElementSibling;\r\n\tif(row != null){\r\n\t\tcell\t\t\t= row.cells[cell.cellIndex];\r\n\t\twhile(cell.matches('.hidden')){\r\n\t\t\tcell.classList.remove('hidden');\r\n\t\t\trow\t\t\t\t= row.nextElementSibling;\r\n\t\t\tcell\t\t\t= row.cells[cell.cellIndex];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Add a new host/ updates an existing entry when the host form is submitted\r\nasync function addHost(target){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet sessionId\t= form.querySelector('[name=\"session-id\"]').value;\r\n\tlet date\t\t= form.querySelector('[name=\"date\"]').value;\r\n\tlet startTime\t= form.querySelector('[name=\"starttime\"]').value;\r\n\tlet endTime\t\t= form.querySelector('[name=\"endtime\"]').value;\r\n\tlet newCell, table, newRow, newCol, cell, oldStartTime, oldDate, oldEndTime;\r\n\r\n\tcell\t\t\t= document.querySelector('td.active');\r\n\tMain.showLoader(cell.firstChild);\r\n\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\ttable\t\t\t= cell.closest('table');\r\n\t\tnewCell\t= cell;\r\n\t\tnewRow\t= cell.closest('tr');\r\n\t\tnewCol\t= cell.cellIndex;\r\n\r\n\t\tif(sessionId != ''){\r\n\t\t\toldStartTime\t= cell.dataset.starttime;\r\n\t\t\toldEndTime\t\t= cell.dataset.endtime;\r\n\t\t\toldDate\t\t\t= table.rows[0].cells[1].dataset.isodate;\r\n\t\t\t\r\n\t\t\t// Adjust the table if date or times changed\r\n\t\t\tif(oldDate != date || oldStartTime != startTime || oldEndTime != endTime){\r\n\t\t\t\tremoveRowSpan(cell);\r\n\r\n\t\t\t\tif(oldDate != date || oldStartTime != startTime){\r\n\t\t\t\t\tcell.innerHTML\t= 'Available';\r\n\r\n\t\t\t\t\t// find the new cell\r\n\t\t\t\t\tnewRow\t= table.querySelector(`tr[data-starttime=\"${startTime}\"]`);\r\n\t\t\t\t\tnewCol\t= table.rows[0].querySelector(`[data-isodate=\"${date}\"]`).cellIndex;\r\n\t\t\t\t\tnewCell\t= newRow.cells[newCol];\r\n\r\n\t\t\t\t\t// make old cell a normall cell\r\n\t\t\t\t\tcell.classList.remove('ui-selected', 'active', 'selected');\r\n\r\n\t\t\t\t\t// make the new cell the active cell\r\n\t\t\t\t\tnewCell.classList.add('ui-selected', 'active', 'selected');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taddHostHtml(response);\r\n\r\n\t\t// Get the new inserted cell\r\n\t\tcell\t= newRow.cells[newCol];\r\n\r\n\t\tapplyRowSpan(cell, cell.rowSpan);\r\n\r\n        addSelectable();\r\n\t}\r\n}\r\n\r\n// Show the modal to add a recipe keyword\r\nfunction showRecipeModal(target){\r\n\ttarget.classList.add('active');\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar heading\t\t\t= table.tHead.rows[0];\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar date\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\tvar startTime\t\t= target.closest('tr').dataset.starttime;\r\n\r\n\t//Fill the modal with the values of the clickes schedule\r\n\tvar recipeModal \t= document.querySelector('[name=\"recipe_keyword_modal\"]');\r\n\r\n\tFormSubmit.formReset(recipeModal.querySelector('form'));\r\n\r\n\trecipeModal.querySelector('[name=\"schedule_id\"]').value \t= table.dataset[\"id\"];\r\n\trecipeModal.querySelector('[name=\"date\"]').value \t\t\t= date;\r\n\trecipeModal.querySelector('[name=\"starttime\"]').value \t\t= startTime;\r\n\r\n\tif(target.textContent != 'Enter recipe keyword'){\r\n\t\trecipeModal.querySelector('[name=\"recipe_keyword\"]').value\t= target.textContent;\r\n\t\tdocument.querySelector('[name=\"add_recipe_keyword\"]').textContent\t= 'Update recipe keywords';\r\n\t}\r\n\t\r\n\tMain.showModal(recipeModal);\r\n}\r\n\r\n//submit the recipe form\r\nasync function submitRecipe(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_menu');\r\n\r\n\tdocument.querySelector('.active').textContent\t= target.closest('form').querySelector('[name=\"recipe_keyword\"]').value;\r\n\r\n\tdocument.querySelector('.active').classList.remove('active');\r\n\r\n\tMain.hideModals();\r\n\r\n\tMain.displayMessage(response);\r\n}\r\n\r\nfunction showEditScheduleModal(target){\r\n\tlet modal\t\t= document.getElementById('edit_schedule_modal');\r\n\tlet wrapper\t\t= target.closest('.schedules_div');\r\n\tlet table\t\t= wrapper.querySelector('table.schedule');\r\n\r\n\tlet scheduleId\t= wrapper.dataset.id;\r\n\r\n\tmodal.querySelector(`[name=\"schedule_id\"]`).value\t\t= scheduleId;\r\n\tmodal.querySelector(`[name=\"target_id\"]`).value\t\t\t= table.dataset.target_id;\r\n\tmodal.querySelector(`[name=\"target_name\"]`).value\t\t= table.dataset.target;\r\n\tmodal.querySelector(`[name=\"schedule_info\"]`).value\t\t= wrapper.querySelector('.table_title.sub-title').textContent;\r\n\tmodal.querySelector(`[name=\"startdate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"enddate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[table.tHead.querySelector('tr').cells.length-1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"timeslotsize\"]`).value\t\t= wrapper.dataset.slotsize;\r\n\tmodal.querySelector(`[name=\"hidenames\"]`).checked\t\t= wrapper.dataset.hidenames;\r\n\tmodal.querySelector(`[name=\"skiplunch\"]`).checked\t\t= parseInt(table.dataset.skiplunch);\r\n\tmodal.querySelector(`[name=\"skipdiner\"]`).checked\t\t= parseInt(table.dataset.skipdiner);\r\n\tmodal.querySelector(`[name=\"skiporientation\"]`).checked\t= table.rows.length<3;\r\n\r\n\tlet adminRoles\t= JSON.parse(table.dataset.adminroles);\r\n\tmodal.querySelectorAll(`[name=\"admin-roles[]\"]`).forEach(checkbox => checkbox.checked = adminRoles.includes(checkbox.value));\r\n\r\n\tlet viewRoles\t= JSON.parse(table.dataset.viewroles);\r\n\tmodal.querySelectorAll(`[name=\"view-roles[]\"]`).forEach(checkbox => checkbox.checked = viewRoles.includes(checkbox.value));\r\n\r\n\tMain.showModal(modal);\r\n}\r\n\r\nasync function checkIfValidSelection(target, selected, e){\r\n\t//we have selected something and there are no open modals\r\n\tvar openModals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif((selected.length > 0 || target.classList.contains('orientation')) && (openModals == null || openModals.length == 0) ){\t\r\n\t\t//check if selection is valid\r\n\t\tvar columnNr\t= selected[0].node.cellIndex;\r\n\t\tvar firstCell\t= selected[0].node;\r\n\r\n\t\tfor (const selection of selected){\r\n\t\t\tif(columnNr != selection.node.cellIndex){\r\n\t\t\t\tlet options = {\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: \"You can not select times on multiple days!\",\r\n\t\t\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(document.fullscreenElement != null){\r\n\t\t\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tSwal.fire(options);\r\n\r\n\t\t\t\te.target.closest('.sim-table')._selectable.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfirstCell.dataset.oldvalue\t= firstCell.innerHTML;\r\n\r\n\t\t//We are dealing with a cell with a value\r\n\t\tif(firstCell.classList.contains('selected')){\r\n            let date    = firstCell.closest('table').rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n            let dateStr = firstCell.closest('table').rows[0].cells[firstCell.cellIndex].dataset.date;\r\n\r\n            firstCell.classList.add('active');\r\n\t\t\tlet result  = await editTimeSlot(firstCell, date, dateStr);\r\n            if(result){\r\n                deleteHost(firstCell);\r\n            }\r\n\t\t}else{\r\n            let firstCell\t    = selected[0].node;\r\n            let lastCell\t\t= selected[selected.length-1].node;\r\n            let rowCount\t\t= document.querySelectorAll('.ui-selected').length;\r\n            applyRowSpan(firstCell, rowCount);\r\n\r\n            // Only show loader when the cell is empty\r\n            if(!firstCell.matches('.selected')){\r\n                Main.showLoader(firstCell.firstChild);\r\n            }\r\n\r\n            let startTime\t= firstCell.closest('tr').dataset.starttime;\r\n\r\n            let endTime\t\t= firstCell.dataset.endtime;\r\n            if(endTime == undefined){\r\n                endTime\t= lastCell.closest('tr').dataset.endtime;\r\n            }\r\n            let table\t\t= firstCell.closest('table');\r\n            let date\t\t= table.rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n\r\n            firstCell.classList.add('active');\r\n\r\n\t\t\tshowTimeslotModal(firstCell, date, startTime, endTime);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function deleteHost(target){\r\n    let cell    = target.closest('td');\r\n    let classes = cell.classList.value;\r\n    let index   = cell.cellIndex;\r\n    let row     = cell.closest('tr');\r\n    let dateStr = cell.closest('table').rows[0].cells[cell.cellIndex].dataset.date;\r\n\r\n    let result  = await removeHost(cell, dateStr);\r\n\r\n    if(result){\r\n        cell.outerHTML   \t\t= result;\r\n\r\n        cell                    = row.cells[index];\r\n\t\tremoveRowSpan(cell);\r\n    }\r\n}\r\n\r\n//Do something with selected items\r\nasync function afterSelect(e, selected, _unselected){\r\n\tlet target = e.target;\r\n\r\n\t//remove a meal host\r\n\tif(target.matches('.meal.selected.own, .meal.selected.admin')){\r\n        deleteHost(target);\r\n\t//Add a host\r\n\t}else if(target.matches('.meal.admin')){\r\n        let table\t\t\t\t\t\t\t\t\t\t\t= target.closest('table');\r\n        let cell\t\t\t\t\t\t\t\t\t\t\t= target.closest('td');\r\n        let date\t\t\t\t\t\t\t\t\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.isodate;\r\n        let startTime\t\t\t\t\t\t\t\t\t\t= target.closest('tr').dataset.starttime;\r\n        \r\n\t\tshowAddHostModal(target, date, startTime);\r\n\t//orientation slot\r\n\t}else if(target.matches('.meal:not(.admin, .selected)')){\r\n        let table\t\t= target.closest('table');\r\n\t\tlet cell\t\t= target.closest('td');\r\n\t\tdateStr\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\r\n        target.classList.add('active');\r\n\t\taddCurrentUserAsHost(target, dateStr);\r\n\t}else{\r\n\t\tcheckIfValidSelection(target, selected, e); \r\n\t}\r\n}\r\n\r\n//hide empty rows on mobile\r\nfunction hideRows() {\r\n\t//only run for smaller screens\r\n\tif (window.innerWidth > 800) return false;\r\n\t\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table tr').forEach(function(tr){\r\n\t\tvar emptyRow = true;\r\n\t\t\r\n\t\t//DO not hide lunch or dinner rows\r\n\t\tif(tr.dataset.starttime != 'dinner' && tr.dataset.starttime != 'lunch'){\r\n\t\t\t//loop over all table cells to see if there is a cell with content\r\n\t\t\ttr.querySelectorAll('td').forEach(function(cell,index){\r\n\t\t\t\tif(index>0 && cell.textContent != 'Available' && cell.textContent != ' '){\r\n\t\t\t\t\temptyRow = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//If non of the cells have content\r\n\t\t\tif(emptyRow ){\r\n\t\t\t\t//hide the row\r\n\t\t\t\ttr.classList.add('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction addSelectable(){\r\n\t//loop over all the schedule tables\r\n\tdocument.querySelectorAll('.sim-table.schedule').forEach(function(table){\r\n\t\t//Add selectable on non-mobile devices or if it is only a lunch and dinner schedule\r\n\t\tif(!Main.isMobileDevice() || table.rows.length < 7){\r\n\t\t\tif(table._selectable != undefined){\r\n\t\t\t\ttable._selectable.destroy();\r\n\t\t\t}\r\n\r\n\t\t\t//Load selectable and attach it to the table\r\n\t\t\ttable._selectable = new Selectable({\r\n\t\t\t   filter:\t\t\".orientation.admin\",\r\n\t\t\t   appendTo:\ttable.querySelector(\"tbody\"),\r\n\t\t\t   lasso: {\r\n\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\tbackgroundColor: \"none\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Run the function afterSelect when selection is final\r\n\t\t\ttable._selectable.on('end', afterSelect);\r\n\t\t}\r\n\t});\r\n\r\n\thideRows();\r\n}\r\n\r\nfunction modalclosed(ev){\r\n\tdocument.querySelectorAll('td.active').forEach(cell => {\r\n\t\tcell.innerHTML = cell.dataset.oldvalue;\r\n\t\tcell.classList.remove('active', 'ui-selected');\r\n\t});\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\t\r\n\taddSelectable();\r\n\r\n\tdocument.querySelector('[name=\"add_session\"]').addEventListener('modalclosed', modalclosed);\r\n});\r\n\r\ndocument.addEventListener('click', function(event){\r\n\tlet target = event.target;\r\n\r\n\tif(target.name == 'add_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\taddSchedule(target);\r\n\t}else if(target.name == 'publish_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tpublishSchedule(target);\r\n\t}else if(target.name == 'add_recipe_keyword'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tsubmitRecipe(target);\r\n\t}else if(target.matches('.modal .close')  && target.closest('.modal').attributes.name.value == 'add_session'){\r\n\t\tremoveRowSpan(document.querySelector('td.active'));\r\n\t}else if(target.classList.contains('keyword')){\r\n\t\tshowRecipeModal(target);\r\n\t}else if(target.classList.contains('publish')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tShowPublishScheduleModal(target);\r\n\t}else if(target.classList.contains('remove_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tremoveSchedule(target);\r\n\t}else if(target.matches('.edit_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tshowEditScheduleModal(target);\r\n\t}else if(target.name == 'add_host' || target.name == 'add_timeslot'){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\taddHost(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', function(event){\r\n\r\n\tlet target = event.target;\r\n\r\n\t//Direct table actions\r\n\tif(target.name=='target_name'){\r\n\t\tvar userid = target.list.querySelector(`[value='${target.value}' i]`).dataset.value;\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"target_id\"]').value\t= userid;\r\n\t}else if(target.name == 'host'){\r\n\t\tlet host\t= target.list.querySelector(`[value=\"${target.value}\"]`);\r\n\t\tlet userId\t= '';\r\n\t\tif(host != null){\r\n\t\t\tuserId\t= host.dataset.userid;\r\n\t\t}\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"host_id\"]').value\t= userId;\r\n\t}\r\n\r\n\t/* if(target.matches('[name=\"add_session\"] .time')){\r\n\t\t// get the active cell\r\n\t\tlet cell\t\t= document.querySelector('td.active');\r\n\r\n\t\tif(cell == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet table\t\t= cell.closest('table');\r\n\r\n\t\t// validate the time\r\n\t\tif(\r\n\t\t\t(target.name == 'starttime' && table.querySelector(`tr[data-starttime=\"${target.value}\"]`) == null) ||\r\n\t\t\t(target.name == 'endtime' && table.querySelector(`tr[data-endtime=\"${target.value}\"]`) == null) \r\n\t\t){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet d\t\t\t= new Date();\r\n\t\tlet starttime\t= form.querySelector('[name=\"starttime\"]').value.split(':');\r\n\t\tstarttime\t\t= new Date(d.getFullYear(), 0, 1, starttime[0], starttime[1]);\r\n\t\tlet endtime\t\t= form.querySelector('[name=\"endtime\"]').value.split(':');\r\n\t\tendtime\t\t\t= new Date(d.getFullYear(), 0, 1, endtime[0], endtime[1]);\r\n\t\t// calculate the quarters between end and starttime\r\n\t\tlet rowSpan\t\t= (endtime-starttime)/1000/60/15\r\n\r\n\t\t// starttime changed\r\n\t\tif(starttime != target.value){\r\n\t\t\t// adjust the current cell\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\t\t\tcell.classList.remove('ui-selected', 'active');\r\n\r\n\t\t\t// find the new cell\r\n\t\t\tlet newRow\t= cell.closest('table').querySelector('tr[data-starttime=\"'+form.querySelector('[name=\"starttime\"]').value+'\"]');\r\n\t\t\tlet newCell\t= newRow.cells[cell.cellIndex];\r\n\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\t\t\tnewCell.classList.add('ui-selected', 'active');\r\n\t\t\tapplyRowSpan(newCell, rowSpan);\r\n\t\t// endtime changed\r\n\t\t}else{\r\n\t\t\tapplyRowSpan(cell, rowSpan);\r\n\t\t}\r\n\t} */\r\n});"],"names":["addHostHtml","response","target","document","querySelector","classList","remove","outerHTML","html","Main","displayMessage","message","hideModals","showTimeslotModal","date","startTime","endTime","hostId","subject","location","hostName","sessionId","modal","querySelectorAll","forEach","el","value","closest","dataset","id","host_id","host","session_id","add","undefined","showModal","async","checkConfirmation","text","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","fullscreenElement","Swal","fire","isConfirmed","showLoader","firstChild","applyRowSpan","count","row","index","cellIndex","i","nextElementSibling","cells","rowSpan","removeRowSpan","cell","removeAttribute","matches","deleteHost","dateStr","rows","result","confirmed","scheduleOwner","contains","formData","FormData","append","FormSubmit","fetchRestApi","removeHost","afterSelect","e","selected","_unselected","table","isodate","starttime","showAddHostModal","heading","scheduleId","tHead","sim","userId","loadHostFormdata","addCurrentUserAsHost","openModals","length","columnNr","node","firstCell","selection","_selectable","clear","oldvalue","innerHTML","showDenyButton","denyButtonText","answer","endtime","textContent","isDenied","editTimeSlot","lastCell","checkIfValidSelection","addSelectable","isMobileDevice","destroy","Selectable","filter","appendTo","lasso","border","backgroundColor","on","window","innerWidth","tr","emptyRow","hideRows","modalclosed","ev","console","log","addEventListener","event","name","stopPropagation","submitForm","addSchedule","publishSchedule","submitRecipe","attributes","recipeModal","formReset","showRecipeModal","click","ShowPublishScheduleModal","removeSchedule","getElementById","wrapper","target_id","slotsize","checked","hidenames","parseInt","skiplunch","skipdiner","adminRoles","JSON","parse","adminroles","checkbox","includes","viewRoles","viewroles","showEditScheduleModal","newCell","newRow","newCol","oldStartTime","oldDate","oldEndTime","form","addHost","userid","list"],"sourceRoot":""}