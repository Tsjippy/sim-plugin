{"version":3,"file":"desktop-schedule.min.js","mappings":"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","sources":["webpack://events/./schedules/shared.js","webpack://events/./schedules/desktop.js"],"sourcesContent":["//shows the modal to select a user as host\r\nexport function showAddHostModal(target, date='', startTime=''){\r\n\ttarget.classList.add('active');\r\n\tlet modal\t\t\t\t\t\t\t\t\t\t\t= document.querySelector('[name=\"add_host\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n    modal.querySelector('[name=\"date\"]').value\t\t\t= date;\r\n    modal.querySelector('[name=\"starttime\"]').value\t\t= startTime;\r\n\r\n\t// Add new values\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t= target.closest('.schedules_div').dataset.id;\r\n\r\n\tmodal.classList.remove('hidden');\r\n}\r\n\r\n// Add current user as host\r\nexport async function addCurrentUserAsHost(target, dateStr){\r\n    let scheduleOwner\t= target.closest('.schedules_div').dataset.target;   \r\n\tlet text \t\t\t= `Please confirm you want to be the host for ${scheduleOwner} on ${dateStr}`;\r\n\tlet confirmed\t\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\r\n\t\tlet formData\t\t= loadHostFormdata(target);\r\n\r\n\t\tif(target.closest('table') == null){\r\n\t\t\tMain.showLoader(target);\r\n\t\t}\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('events/add_host', formData);\r\n\r\n\t\tif(response){\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Show the new host in the schedule\r\nexport function addHostHtml(response){\r\n\tlet target\t\t\t= document.querySelector('.active');\r\n\r\n\ttarget.classList.remove('active');\r\n\ttarget.outerHTML\t= response.html;\r\n\r\n\tMain.displayMessage(response.message);\r\n\r\n\tMain.hideModals();\r\n}\r\n\r\n// Remove a host\r\nexport async function removeHost(target, dateStr){\r\n\tlet text, confirmed;\r\n\r\n    let scheduleOwner\t= target.closest('.schedules_div').dataset.target;\r\n    let formData\t\t= loadHostFormdata(target);\r\n\r\n\tif(target.classList.contains('orientation')){\r\n\t\ttext \t= `Are you sure you want to remove this orientation session`;\r\n\t}else if(target.classList.contains('admin')){\r\n\t\ttext \t= `Please confirm host removal for ${scheduleOwner} on ${dateStr}`;\r\n\t}else{\r\n\t\ttext \t= `Please confirm you do not want to be the host for ${scheduleOwner} on ${dateStr} anymore`;\r\n\t}\r\n\r\n\tconfirmed\t= await checkConfirmation(text, target.firstChild);\r\n\r\n\tif(confirmed){\r\n\t\tMain.showLoader(target);\r\n\r\n\t\tvar response = await FormSubmit.fetchRestApi('events/remove_host', formData);\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n\r\n    return confirmed;\r\n}\r\n\r\nexport function showTimeslotModal(target='', date='', startTime='', endTime=''){\r\n\tlet hostId, oldTime, subject, location, hostName, eventId;\r\n\tlet modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"checkbox\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t\t= target.closest('.schedules_div').dataset.id;\r\n\r\n\thostId\t\t\t= target.dataset.host_id;\r\n\toldTime\t\t\t= target.dataset.old_time;\r\n\tsubject\t\t\t= target.dataset.subject;\r\n\tlocation\t\t= target.dataset.location;\r\n\thostName\t\t= target.dataset.host;\r\n\teventId\t\t\t= target.dataset.event_id;\r\n\r\n\t//Fill the modal values\r\n\tmodal.querySelector('[name=\"date\"]').value\t\t\t\t= date;\r\n\tmodal.querySelector('[name=\"starttime\"]').value\t\t\t= startTime;\r\n\tmodal.querySelector('[name=\"endtime\"]').value\t\t\t= endTime;\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.remove('add_schedule_row');\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.add('update_schedule');\r\n\tif(startTime != undefined){\r\n\t\tmodal.querySelector('[name=\"oldtime\"]').value\t\t= startTime;\r\n\t}\r\n\tif(date != undefined){\r\n\t\tmodal.querySelector('[name=\"olddate\"]').value \t\t= date;\r\n\t}\r\n\tif(eventId != undefined){\r\n\t\tmodal.querySelector('[name=\"event-id\"]').value\t\t= eventId;\r\n\t}\r\n\tif(hostId\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host_id\"]').value\t\t= hostId;\r\n\t}\r\n\tif(subject\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t\t= subject;\r\n\t}\r\n\tif(location\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"location\"]').value\t\t\t= location;\r\n\t}\r\n\tif(hostName\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host\"]').value\t\t\t\t= hostName;\r\n\t}\r\n\t\r\n\tMain.showModal(modal);\r\n}\r\n\r\nexport async function editTimeSlot(target, date, dateStr){\r\n\tlet options\t= {\r\n\t\ttitle: 'What do you want to do?',\r\n\t\ttext: \"Do you want to edit or remove this timeslot?\",\r\n\t\tshowDenyButton: true,\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: 'Edit timeslot',\r\n\t\tdenyButtonText: 'Remove timeslot',\r\n\t}\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar answer = await Swal.fire(options);\r\n\r\n\t//swap and/or\r\n\tif (answer.isConfirmed) {\r\n\t\t// Show modal and prefill the default fields\r\n\t\tshowTimeslotModal(target, date, target.dataset.starttime, target.dataset.endtime);\r\n\t\t\r\n\t\t//change button text\r\n\t\tvar modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').textContent\t= 'Update time slot';\r\n\t//add new rule after this one\r\n\t}else if (answer.isDenied) {\r\n\t\treturn answer.isDenied;\r\n\t}\r\n}\r\n\r\nfunction loadHostFormdata(target){\r\n    let scheduleId\t\t= target.closest('.schedules_div').dataset.id;\r\n\tlet table\t\t\t= target.closest('table');\r\n\r\n\tlet heading, cell, date, startTime, host;\r\n\r\n\tif(table == null){\r\n\t\tstartTime\t\t= target.dataset.starttime;\r\n\t\thost\t\t\t= target.dataset.host_id;\r\n\t\tdate\t\t\t= target.dataset.isodate\r\n\t}else{\r\n\t\theading\t\t\t= table.tHead.rows[0];\r\n\t\tcell\t\t\t= target.closest('td');\r\n\t\tstartTime\t\t= target.closest('tr').dataset.starttime;\r\n\t\thost\t\t\t= cell.dataset.host;\r\n\t\tdate\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\t}\r\n\r\n\tvar formData\t\t= new FormData();\r\n\tformData.append('date', date);\r\n\tif(host != null){\r\n\t\tformData.append('host_id', host);\r\n\t}else{\r\n\t\tformData.append('host_id', sim.userId);\r\n\t}\r\n\t\r\n\tformData.append('starttime', startTime);\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\treturn formData;\r\n}\r\n\r\nexport async function checkConfirmation(text, target){\r\n\tlet options = {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: text+\"?\",\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: 'Yes'\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar result = await Swal.fire(options);\r\n\t\r\n\tif (result.isConfirmed) {\r\n\t\tdocument.querySelectorAll('.modal:not(.hidden)').forEach(modal=>modal.classList.add('hidden'));\r\n\t\t//display loading gif\r\n\t\tMain.showLoader(target.firstChild);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\ndocument.addEventListener('click',function(event){\r\n\tlet target = event.target;\r\n\r\n\tif(target.name == 'add-session'){\r\n        console.log('click12')\r\n\t\tevent.stopPropagation();\r\n\t\tshowTimeslotModal(target);\r\n\t}else if(target.name == 'add-host'){\r\n        console.log('click13')\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tMain.showModal(target.closest('.schedules_div').querySelector('.add-host-mobile-wrapper'));\r\n\t}\t\r\n});","import { showAddHostModal, addCurrentUserAsHost, addHostHtml, removeHost, showTimeslotModal, checkConfirmation, editTimeSlot } from './shared.js';\r\n\r\n/**\r\n *\r\n * Submits the new schedule form via rest API and adds the new schedule to the screen.\r\n *\r\n * @listens to button click if button has name add_schedule\r\n *\r\n * @param {Object} target     The clicked button.\r\n *\r\n * @return nothing\r\n*/ \r\nasync function addSchedule(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_schedule');\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.schedules_wrapper').outerHTML=response.html;\r\n\t\t\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\taddSelectable();\r\n\t}\r\n}\r\n\r\nfunction ShowPublishScheduleModal(target){\r\n\tvar modal\t\t\t= target.closest('.schedules_div').querySelector('.publish_schedule');\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value = target.dataset[\"schedule_id\"];\r\n\tif(target.dataset.target != null){\r\n\t\tmodal.querySelector('[name=\"schedule_target\"]').value = target.dataset.target;\r\n\t\tmodal.querySelector('[name=\"publish_schedule\"]').click();\r\n\t\tMain.showLoader(target,true);\r\n\t}else{\r\n\t\tMain.showModal(modal);\r\n\t}\r\n}\r\n\r\nasync function publishSchedule(target){\r\n\tvar response\t= await FormSubmit.submitForm(target, 'events/publish_schedule');\r\n\r\n\tif(response){\r\n\t\tdocument.querySelectorAll('.schedule_actions .loadergif').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\n// Removes an existing schedule\r\nasync function removeSchedule(target){\r\n\tvar scheduleId\t\t= target.dataset[\"schedule_id\"];\r\n\tvar text \t\t\t= \"Are you sure you want to remove this schedule\";\r\n\tvar formData \t\t= new FormData();\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\tvar confirmed\t\t= await checkConfirmation(text, target.closest('.schedules_div'));\r\n\tif(confirmed){\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/remove_schedule', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tMain.displayMessage(response);\r\n\r\n\t\t\tdocument.querySelector('.schedules_wrapper .loaderwrapper:not(.hidden)').remove();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyRowSpan(target, count){\r\n\tif(count > 1){\r\n\t\tvar row\t\t= target.closest('tr');\r\n\t\tvar index\t= target.cellIndex;\r\n\t\t//Loop over the next cells to add the hidden attribute\r\n\t\tfor (var i = 1; i < count; i++) {\r\n\t\t\trow = row.nextElementSibling;\r\n\t\t\trow.cells[index].classList.add('hidden');\r\n\t\t}\r\n\t\ttarget.rowSpan\t= count;\r\n\t}\r\n}\r\n\r\nfunction removeRowSpan(target){\r\n\tdocument.querySelectorAll('.ui-selected').forEach(el=>el.classList.remove('ui-selected', 'active', 'hidden'));\r\n\ttarget.rowSpan = 1;\r\n}\r\n\r\n// Add a new host/ updates an existing entry when the host form is submitted\r\nasync function addHost(target){\r\n\tlet form\t= target.closest('form');\r\n\tlet oldtime\t= form.querySelector('[name=\"oldtime\"]').value;\r\n\tif(oldtime != ''){\r\n\t\t// remove the old event\r\n\t\tlet cell\t= document.querySelector('td.active');\r\n\t\tif(cell != null){\r\n\t\t\tcell.classList.remove('ui-selected', 'active', 'selected');\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\r\n\t\t\tlet date\t\t= form.querySelector('[name=\"date\"]').value;\r\n\t\t\tlet time\t\t= form.querySelector('[name=\"starttime\"]').value;\r\n\t\t\tlet columnNr\t= cell.closest('table').tHead.querySelector(`[data-isodate=\"${date}\"]`).cellIndex;\r\n\t\t\t// Add the new one\r\n\t\t\tlet newCell\t\t= cell.closest('table').querySelector(`tr[data-starttime=\"${time}\"]`).cells[columnNr];\r\n\t\t\tnewCell.classList.add('ui-selected', 'active', 'selected');\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\r\n\t\t\tcell.innerHTML\t= 'Available';\r\n\t\t}\r\n\t}\r\n\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\taddHostHtml(response);\r\n\r\n        addSelectable();\r\n\t}\r\n}\r\n\r\n// Show the modal to add a recipe keyword\r\nfunction showRecipeModal(target){\r\n\ttarget.classList.add('active');\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar heading\t\t\t= table.tHead.rows[0];\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar date\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\tvar startTime\t\t= target.closest('tr').dataset.starttime;\r\n\r\n\t//Fill the modal with the values of the clickes schedule\r\n\tvar recipeModal \t= document.querySelector('[name=\"recipe_keyword_modal\"]');\r\n\r\n\tFormSubmit.formReset(recipeModal.querySelector('form'));\r\n\r\n\trecipeModal.querySelector('[name=\"schedule_id\"]').value \t= table.dataset[\"id\"];\r\n\trecipeModal.querySelector('[name=\"date\"]').value \t\t\t= date;\r\n\trecipeModal.querySelector('[name=\"starttime\"]').value \t\t= startTime;\r\n\r\n\tif(target.textContent != 'Enter recipe keyword'){\r\n\t\trecipeModal.querySelector('[name=\"recipe_keyword\"]').value\t= target.textContent;\r\n\t\tdocument.querySelector('[name=\"add_recipe_keyword\"]').textContent\t= 'Update recipe keywords';\r\n\t}\r\n\t\r\n\tMain.showModal(recipeModal);\r\n}\r\n\r\n//submit the recipe form\r\nasync function submitRecipe(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_menu');\r\n\r\n\tdocument.querySelector('.active').textContent\t= target.closest('form').querySelector('[name=\"recipe_keyword\"]').value;\r\n\r\n\tdocument.querySelector('.active').classList.remove('active');\r\n\r\n\tMain.hideModals();\r\n\r\n\tMain.displayMessage(response);\r\n}\r\n\r\nfunction showEditScheduleModal(target){\r\n\tlet modal\t\t= document.getElementById('edit_schedule_modal');\r\n\tlet wrapper\t\t= target.closest('.schedules_div');\r\n\tlet table\t\t= wrapper.querySelector('table.schedule');\r\n\r\n\tlet scheduleId\t= table.closest('.schedules_div').dataset[\"id\"];\r\n\r\n\tmodal.querySelector(`[name=\"schedule_id\"]`).value\t\t= scheduleId;\r\n\tmodal.querySelector(`[name=\"target_id\"]`).value\t\t\t= table.dataset.target_id;\r\n\tmodal.querySelector(`[name=\"target_name\"]`).value\t\t= table.dataset.target;\r\n\tmodal.querySelector(`[name=\"schedule_info\"]`).value\t\t= wrapper.querySelector('.table_title.sub-title').textContent;\r\n\tmodal.querySelector(`[name=\"startdate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"enddate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[table.tHead.querySelector('tr').cells.length-1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"skiplunch\"]`).checked\t\t= table.dataset.lunch;\r\n\tmodal.querySelector(`[name=\"skiporientation\"]`).checked\t= table.rows.length<3;\r\n\r\n\tMain.showModal(modal);\r\n}\r\n\r\nasync function checkIfValidSelection(target, selected, e){\r\n\t//we have selected something and there are no open modals\r\n\tvar openModals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif((selected.length > 0 || target.classList.contains('orientation')) && (openModals == null || openModals.length == 0) ){\t\r\n\t\t//check if selection is valid\r\n\t\tvar columnNr\t= selected[0].node.cellIndex;\r\n\t\tvar firstCell\t= selected[0].node;\r\n\r\n\t\tfor (const selection of selected){\r\n\t\t\tif(columnNr != selection.node.cellIndex){\r\n\t\t\t\tlet options = {\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: \"You can not select times on multiple days!\",\r\n\t\t\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(document.fullscreenElement != null){\r\n\t\t\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tSwal.fire(options);\r\n\r\n\t\t\t\te.target.closest('.sim-table')._selectable.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//We are dealing with a cell with a value\r\n\t\tif(firstCell.classList.contains('selected')){\r\n            let date    = firstCell.closest('table').rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n            let dateStr = firstCell.closest('table').rows[0].cells[firstCell.cellIndex].dataset.date;\r\n\r\n            firstCell.classList.add('active');\r\n\t\t\tlet result  = await editTimeSlot(firstCell, date, dateStr);\r\n            if(result){\r\n                deleteHost(firstCell);\r\n            }\r\n\t\t}else{\r\n            let firstCell\t    = selected[0].node;\r\n            let lastCell\t\t= selected[selected.length-1].node;\r\n            let rowCount\t\t= document.querySelectorAll('.ui-selected').length;\r\n            applyRowSpan(firstCell, rowCount);\r\n\r\n            // Only show loader when the cell is empty\r\n            if(!firstCell.matches('.selected')){\r\n                Main.showLoader(firstCell.firstChild);\r\n            }\r\n\r\n            let startTime\t= firstCell.closest('tr').dataset.starttime;\r\n\r\n            let endTime\t\t= firstCell.dataset.endtime;\r\n            if(endTime == undefined){\r\n                endTime\t= lastCell.closest('tr').dataset.endtime;\r\n            }\r\n            let table\t\t= firstCell.closest('table');\r\n            let date\t\t= table.rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n\r\n            firstCell.classList.add('active');\r\n\r\n\t\t\tshowTimeslotModal(firstCell, date, startTime, endTime);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function deleteHost(target){\r\n    let cell    = target.closest('td');\r\n    let classes = cell.classList.value;\r\n    let index   = cell.cellIndex;\r\n    let row     = cell.closest('tr');\r\n    let dateStr = cell.closest('table').rows[0].cells[cell.cellIndex].dataset.date;\r\n    let result  = await removeHost(target, dateStr);\r\n\r\n    if(result){\r\n        row.querySelector('.loaderwrapper').outerHTML   = `<td>Available</td>`;\r\n\r\n        cell                    = row.cells[index];\r\n        cell.classList.value    = classes;\r\n        cell.classList.remove('selected');\r\n\r\n        //only remove rowspan if the first cell of a row has no rowspan\r\n        if(row.cells[0].rowSpan==1){\r\n            //Loop over the next cells to remove the hidden attribute\r\n            for (var i = 1; i < target.rowSpan; i++) {\r\n                row = row.nextElementSibling;\r\n                row.cells[index].classList.remove('hidden');\r\n            }\r\n\r\n            //Reset the rowSpan\r\n            target.rowSpan = 1;\r\n        }\r\n    }\r\n}\r\n\r\n//Do something with selected items\r\nasync function afterSelect(e, selected, _unselected){\r\n\tlet target = e.target;\r\n\r\n\t//remove a meal host\r\n\tif(target.matches('.meal.selected.own, .meal.selected.admin')){\r\n        deleteHost(target);\r\n\t//Add a host\r\n\t}else if(target.matches('.meal.admin')){\r\n        let table\t\t\t\t\t\t\t\t\t\t\t= target.closest('table');\r\n        let cell\t\t\t\t\t\t\t\t\t\t\t= target.closest('td');\r\n        let date\t\t\t\t\t\t\t\t\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.isodate;\r\n        let startTime\t\t\t\t\t\t\t\t\t\t= target.closest('tr').dataset.starttime;\r\n        \r\n\t\tshowAddHostModal(target, date, startTime);\r\n\t//orientation slot\r\n\t}else if(target.matches('.meal:not(.admin, .selected)')){\r\n        let table\t\t= target.closest('table');\r\n\t\tlet cell\t\t= target.closest('td');\r\n\t\tdateStr\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\r\n        target.classList.add('active');\r\n\t\taddCurrentUserAsHost(target, dateStr);\r\n\t}else{\r\n\t\tcheckIfValidSelection(target, selected, e); \r\n\t}\r\n}\r\n\r\n//hide empty rows on mobile\r\nfunction hideRows() {\r\n\t//only run for smaller screens\r\n\tif (window.innerWidth > 800) return false;\r\n\t\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table tr').forEach(function(tr){\r\n\t\tvar emptyRow = true;\r\n\t\t\r\n\t\t//DO not hide lunch or dinner rows\r\n\t\tif(tr.dataset.starttime != 'dinner' && tr.dataset.starttime != 'lunch'){\r\n\t\t\t//loop over all table cells to see if there is a cell with content\r\n\t\t\ttr.querySelectorAll('td').forEach(function(cell,index){\r\n\t\t\t\tif(index>0 && cell.textContent != 'Available' && cell.textContent != ' '){\r\n\t\t\t\t\temptyRow = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//If non of the cells have content\r\n\t\t\tif(emptyRow ){\r\n\t\t\t\t//hide the row\r\n\t\t\t\ttr.classList.add('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction addSelectable(){\r\n\t//loop over all the schedule tables\r\n\tdocument.querySelectorAll('.sim-table.schedule').forEach(function(table){\r\n\t\t//Add selectable on non-mobile devices or if it is only a lunch and dinner schedule\r\n\t\tif(!Main.isMobileDevice() || table.rows.length < 7){\r\n\t\t\tif(table._selectable != undefined){\r\n\t\t\t\ttable._selectable.destroy();\r\n\t\t\t}\r\n\r\n\t\t\t//Load selectable and attach it to the table\r\n\t\t\ttable._selectable = new Selectable({\r\n\t\t\t   filter:\t\t\".orientation.admin\",\r\n\t\t\t   appendTo:\ttable.querySelector(\"tbody\"),\r\n\t\t\t   lasso: {\r\n\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\tbackgroundColor: \"none\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Run the function afterSelect when selection is final\r\n\t\t\ttable._selectable.on('end', afterSelect);\r\n\t\t}\r\n\t});\r\n\r\n\thideRows();\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\tconsole.log(\"Desktop-schedule.js loaded\");\r\n\t\r\n\taddSelectable();\r\n});\r\n\r\ndocument.addEventListener('click',function(event){\r\n\tlet target = event.target;\r\n\r\n\tif(target.name == 'add_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\taddSchedule(target);\r\n\t}else if(target.name == 'publish_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tpublishSchedule(target);\r\n\t}else if(target.name == 'add_recipe_keyword'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tsubmitRecipe(target);\r\n\t}else if(target.matches('.close') && target.closest('.modal') != null && target.closest('.modal').attributes.name.value == 'add_session'){\r\n\t\tremoveRowSpan(document.querySelector('td.active'));\r\n\t}else if(target.classList.contains('keyword')){\r\n\t\tshowRecipeModal(target);\r\n\t}else if(target.classList.contains('publish')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tShowPublishScheduleModal(target);\r\n\t}else if(target.classList.contains('remove_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tremoveSchedule(target);\r\n\t}else if(target.matches('.edit_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tshowEditScheduleModal(target);\r\n\t}else if(target.name == 'add_host' || target.name == 'add_timeslot'){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\taddHost(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', function(event){\r\n\r\n\tlet target = event.target;\r\n\r\n\t//Direct table actions\r\n\tif(target.name=='target_name'){\r\n\t\tvar userid = target.list.querySelector(`[value='${target.value}' i]`).dataset.value;\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"target_id\"]').value\t= userid;\r\n\t}else if(target.name == 'host'){\r\n\t\tlet host\t= target.list.querySelector(`[value=\"${target.value}\"]`);\r\n\t\tlet userId\t= '';\r\n\t\tif(host != null){\r\n\t\t\tuserId\t= host.dataset.userid;\r\n\t\t}\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"host_id\"]').value\t= userId;\r\n\t}\r\n\r\n\tif(target.matches('[name=\"add_session\"] .time')){\r\n\t\t// get the active cell\r\n\t\tlet cell\t\t= document.querySelector('td.active');\r\n\r\n\t\tif(cell == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet table\t\t= cell.closest('table');\r\n\r\n\t\t// validate the time\r\n\t\tif(\r\n\t\t\t(target.name == 'starttime' && table.querySelector(`tr[data-starttime=\"${target.value}\"]`) == null) ||\r\n\t\t\t(target.name == 'endtime' && table.querySelector(`tr[data-endtime=\"${target.value}\"]`) == null) \r\n\t\t){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet d\t\t\t= new Date();\r\n\t\tlet starttime\t= form.querySelector('[name=\"starttime\"]').value.split(':');\r\n\t\tstarttime\t\t= new Date(d.getFullYear(), 0, 1, starttime[0], starttime[1]);\r\n\t\tlet endtime\t\t= form.querySelector('[name=\"endtime\"]').value.split(':');\r\n\t\tendtime\t\t\t= new Date(d.getFullYear(), 0, 1, endtime[0], endtime[1]);\r\n\t\t// calculate the quarters between end and starttime\r\n\t\tlet rowSpan\t\t= (endtime-starttime)/1000/60/15\r\n\r\n\t\t// starttime changed\r\n\t\tif(starttime != target.value){\r\n\t\t\t// adjust the current cell\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\t\t\tcell.classList.remove('ui-selected', 'active');\r\n\r\n\t\t\t// find the new cell\r\n\t\t\tlet newRow\t= cell.closest('table').querySelector('tr[data-starttime=\"'+form.querySelector('[name=\"starttime\"]').value+'\"]');\r\n\t\t\tlet newCell\t= newRow.cells[cell.cellIndex];\r\n\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\t\t\tnewCell.classList.add('ui-selected', 'active');\r\n\t\t\tapplyRowSpan(newCell, rowSpan);\r\n\t\t// endtime changed\r\n\t\t}else{\r\n\t\t\tapplyRowSpan(cell, rowSpan);\r\n\t\t}\r\n\t}\r\n});"],"names":["addHostHtml","response","target","document","querySelector","classList","remove","outerHTML","html","Main","displayMessage","message","hideModals","showTimeslotModal","date","startTime","endTime","hostId","oldTime","subject","location","hostName","eventId","modal","querySelectorAll","forEach","el","value","closest","dataset","id","host_id","old_time","host","event_id","add","undefined","showModal","loadHostFormdata","heading","cell","scheduleId","table","starttime","isodate","tHead","rows","cells","cellIndex","formData","FormData","append","sim","userId","async","checkConfirmation","text","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","fullscreenElement","Swal","fire","isConfirmed","showLoader","firstChild","applyRowSpan","count","row","index","i","nextElementSibling","rowSpan","deleteHost","classes","dateStr","result","confirmed","scheduleOwner","contains","FormSubmit","fetchRestApi","removeHost","afterSelect","e","selected","_unselected","matches","showAddHostModal","addCurrentUserAsHost","openModals","length","columnNr","node","firstCell","selection","_selectable","clear","showDenyButton","denyButtonText","answer","endtime","textContent","isDenied","editTimeSlot","lastCell","checkIfValidSelection","addSelectable","isMobileDevice","destroy","Selectable","filter","appendTo","lasso","border","backgroundColor","on","window","innerWidth","tr","emptyRow","hideRows","addEventListener","event","name","console","log","stopPropagation","submitForm","addSchedule","publishSchedule","submitRecipe","attributes","removeRowSpan","recipeModal","formReset","showRecipeModal","click","ShowPublishScheduleModal","removeSchedule","getElementById","wrapper","target_id","checked","lunch","showEditScheduleModal","form","removeAttribute","time","newCell","innerHTML","addHost","userid","list","d","Date","split","getFullYear"],"sourceRoot":""}