{"version":3,"file":"schedules.min.js","mappings":"MAiEA,SAASA,EAAaC,EAAQC,GAC7B,GAAGA,EAAQ,EAAE,CAIZ,IAHA,IAAIC,EAAOF,EAAOG,QAAQ,MACtBC,EAAQJ,EAAOK,UAEVC,EAAI,EAAGA,EAAIL,EAAOK,KAC1BJ,EAAMA,EAAIK,oBACNC,MAAMJ,GAAOK,UAAUC,IAAI,UAEhCV,EAAOW,QAAUV,CAClB,CACD,CAuEAW,eAAeC,EAAqBb,GACnC,IAAIc,EAAUd,EAAOG,QAAQ,SAE7B,IAAIY,EAAeC,EAEnB,GAAY,MAATF,EAAc,CAChB,IAAIG,EAAQjB,EAAOG,QAAQ,MAC3BY,EAAgBD,EAAMX,QAAQ,kBAAkBe,QAAQlB,OACxDgB,EAAYF,EAAMK,KAAK,GAAGX,MAAMS,EAAKZ,WAAWa,QAAQE,IACzD,MACCC,QAAQC,IAAItB,GACZe,EAAgBf,EAAOG,QAAQ,kBAAkBe,QAAQlB,OACzDgB,EAAYhB,EAAOkB,QAAQE,KAG5B,IAAIG,EAAU,8CAA8CR,QAAoBC,IAGhF,SAFuBQ,EAAkBD,GAE5B,CAEZ,IAAIE,EAAYC,EAAiB1B,GAErB,MAATc,EACFd,EAAOS,UAAUC,IAAI,UAErBiB,KAAKC,WAAW5B,GAGjB,IAAI6B,QAAiBC,WAAWC,aAAa,kBAAmBN,GAE7DI,GACFG,EAAYH,EAEd,CACD,CAGA,SAASG,EAAYH,GACpB,IAAII,EAAeC,SAASC,cAAc,aAE1C,GAAiB,MAAdF,EAMF,OALAN,KAAKS,aAELT,KAAKU,eAAeR,EAASS,cAE7BC,SAASC,SAIVP,EAAWxB,UAAUgC,OAAO,UAC5BR,EAAWS,UAAYb,EAASc,KAEhChB,KAAKU,eAAeR,EAASS,SAE7BM,GACD,CAGAhC,eAAeiC,EAAW7C,GACzB,IAAIyB,EAAUV,EAAeE,EAAMD,EAASO,EAAMuB,EAASC,EAE3D,IAAIjC,EAAUd,EAAOG,QAAQ,SAuB7B,GAtBY,MAATW,GACFW,EAAYC,EAAiB1B,GAC7Be,EAAgBD,EAAMX,QAAQ,kBAAkBe,QAAQlB,OACxDiB,EAASjB,EAAOG,QAAQ,MACxBa,EAAYF,EAAMK,KAAK,GAAGX,MAAMS,EAAKZ,WAAWa,QAAQE,OAExDC,QAAQC,IAAItB,GACZyB,EAAYC,EAAiB1B,GAC7Be,EAAgBf,EAAOG,QAAQ,kBAAkBe,QAAQlB,OACzDgB,EAAYhB,EAAOkB,QAAQE,MAI3BG,EADEvB,EAAOS,UAAUuC,SAAS,eACpB,2DACAhD,EAAOS,UAAUuC,SAAS,SAC1B,mCAAmCjC,QAAoBC,IAEvD,qDAAqDD,QAAoBC,YAGlF+B,QAAkBvB,EAAkBD,GAEjCwB,EAAU,CACA,MAATjC,EACFa,KAAKC,WAAWX,EAAKgC,aAErBH,EAAU9C,EAAOG,QAAQ,2BACzBwB,KAAKC,WAAW5B,IAGjB,IAAI6B,QAAiBC,WAAWC,aAAa,qBAAsBN,GAEnE,GAAY,MAATX,EAAc,CAEhBG,EAAKR,UAAUgC,OAAO,YACtBxB,EAAKR,UAAUgC,OAAO,eAGtBxB,EAAKiC,UAAY,YACjB,IAAI9C,EAASa,EAAKZ,UACdH,EAAQe,EAAKd,QAAQ,MAGzB,GAAyB,GAAtBD,EAAIM,MAAM,GAAGG,QAAW,CAE1B,IAAK,IAAIL,EAAI,EAAGA,EAAIN,EAAOW,QAASL,KACnCJ,EAAMA,EAAIK,oBACNC,MAAMJ,GAAOK,UAAUgC,OAAO,UAInCzC,EAAOW,QAAU,CAClB,CACD,MACCmC,EAAQL,SAGTd,KAAKU,eAAeR,EACrB,CACD,CAEA,SAASsB,EAAkBC,EAAS,IACnC,IAAIC,EAAWjC,EAAMkC,EAAWC,EAASC,EAAQC,EAASC,EAASnB,EAAUoB,EAAUC,EACnFC,EAAW3B,SAASC,cAAc,wBAKtC,GAFA0B,EAAMC,iBAAiB,iEAAiEC,SAAQC,GAAIA,EAAGC,MAAM,KAE3FC,MAAfd,EAAS,GACX/B,QAAQC,IAAI8B,GACZC,EAAYD,EACZhC,EAAQgC,EAASlC,QAAQiD,QACzBb,EAAYF,EAASlC,QAAQkD,UAC7Bb,EAAWH,EAASlC,QAAQmD,QAC5BX,EAAWN,EAASlC,QAAQwC,QAC5BnB,EAAWa,EAASlC,QAAQqB,SAC5BoB,EAAWP,EAASlC,QAAQoD,KAC5Bd,EAAUJ,EAASlC,QAAQqD,QAC3BX,EAAWR,EAASlC,QAAQsD,SAE5BX,EAAM1B,cAAc,wBAAwB8B,MAASb,EAASjD,QAAQ,kBAAkBe,QAAQuD,OAC5F,CACJpB,EAAaD,EAAS,GAAGsB,KACzB,IAAIC,EAAYvB,EAASA,EAASwB,OAAO,GAAGF,KAE5CrB,EAAU5C,UAAUC,IAAI,UAExBX,EAAasD,EADGnB,SAAS4B,iBAAiB,gBAAgBc,QAItDvB,EAAUwB,QAAQ,cACrBlD,KAAKC,WAAWyB,EAAUJ,YAG3BK,EAAYD,EAAUlD,QAAQ,MAAMe,QAAQkD,UAE5Cb,EAAWF,EAAUnC,QAAQmD,QACfH,MAAXX,IACFA,EAAUoB,EAASxE,QAAQ,MAAMe,QAAQmD,SAG1CjD,EADciC,EAAUlD,QAAQ,SACjBgB,KAAK,GAAGX,MAAM6C,EAAUhD,WAAWa,QAAQiD,QAE1DX,EAAWH,EAAUnC,QAAQqD,QAC7Bd,EAAYJ,EAAUnC,QAAQ4D,SAC9BpB,EAAYL,EAAUnC,QAAQwC,QAC9BnB,EAAYc,EAAUnC,QAAQqB,SAC9BoB,EAAYN,EAAUnC,QAAQoD,KAC9BV,EAAYP,EAAUnC,QAAQsD,QAC/B,CAGAX,EAAM1B,cAAc,qBAAqB8B,MAAUL,EACnDC,EAAM1B,cAAc,iBAAiB8B,MAAW7C,EAChDyC,EAAM1B,cAAc,oBAAoB8B,MAAW7C,EACnDyC,EAAM1B,cAAc,sBAAsB8B,MAAUX,EACpDO,EAAM1B,cAAc,oBAAoB8B,MAAUV,EAClDM,EAAM1B,cAAc,oBAAoB8B,MAAUX,EAClDO,EAAM1B,cAAc,yBAAyB1B,UAAUgC,OAAO,oBAC9DoB,EAAM1B,cAAc,yBAAyB1B,UAAUC,IAAI,mBAE9CwD,MAAVV,IACFK,EAAM1B,cAAc,oBAAoB8B,MAAUT,GAGrCU,MAAXR,IACFG,EAAM1B,cAAc,oBAAoB8B,MAAUP,GAGpCQ,MAAZ3B,IACFsB,EAAM1B,cAAc,qBAAqB8B,MAAU1B,GAGrC2B,MAAZP,IACFE,EAAM1B,cAAc,iBAAiB8B,MAAWN,GAGjDhC,KAAKoD,UAAUlB,EAChB,CAEAjD,eAAeoE,EAAa5B,GAC3B,IAAI6B,EAAU,CACbC,MAAO,0BACP3D,KAAM,+CACN4D,gBAAgB,EAChBC,kBAAkB,EAClBC,kBAAmB,gBACnBC,eAAgB,mBAGgB,MAA9BpD,SAASqD,oBACXN,EAAgB,OAAI/C,SAASqD,mBAG9B,IAAIC,QAAeC,KAAKC,KAAKT,GAE7B,IAAI5B,EAEHA,EADiBa,MAAfd,EAAS,GACCA,EAEAA,EAAS,GAAGsB,KAIrBc,EAAOG,aAEVxC,EAAkBC,GAGHlB,SAASC,cAAc,wBAChCA,cAAc,yBAAyByD,YAAc,oBAElDJ,EAAOK,WAChBxE,QAAQC,IAAI+B,GACZR,EAAWQ,GAEb,CA0CA,SAAS3B,EAAiB1B,GACzB,IAAIc,EAAUd,EAAOG,QAAQ,SAE7B,IAAI2F,EAAYC,EAAS9E,EAAMG,EAAMkC,EAAWgB,EAEpC,MAATxD,GACFgF,EAAc9F,EAAOG,QAAQ,kBAAkBe,QAAY,GAC3DoC,EAAatD,EAAOkB,QAAQkD,UAC5BE,EAAStE,EAAOkB,QAAQqD,QACxBnD,EAASpB,EAAOkB,QAAQiD,UAExB2B,EAAchF,EAAMI,QAAY,GAChC6E,EAAYjF,EAAMkF,MAAM7E,KAAK,GAC7BF,EAASjB,EAAOG,QAAQ,MACxBiB,EAAS2E,EAAQvF,MAAMS,EAAKZ,WAAWa,QAAQiD,QAC/Cb,EAAatD,EAAOG,QAAQ,MAAMe,QAAQkD,UAC1CE,EAASrD,EAAKC,QAAQoD,MAGvB,IAAI7C,EAAY,IAAIwE,SAWpB,OAVAxE,EAASyE,OAAO,OAAQ9E,GACb,MAARkD,EACF7C,EAASyE,OAAO,UAAW5B,GAE3B7C,EAASyE,OAAO,UAAWC,IAAIC,QAGhC3E,EAASyE,OAAO,YAAa5C,GAC7B7B,EAASyE,OAAO,cAAeJ,GAExBrE,CACR,CAEAb,eAAeY,EAAkBD,GAChC,IAAI0D,EAAU,CACbC,MAAO,gBACP3D,KAAMA,EAAK,IACX8E,KAAM,UACNjB,kBAAkB,EAClBkB,mBAAoB,UACpBC,kBAAmB,OACnBlB,kBAAmB,OASpB,OANiC,MAA9BnD,SAASqD,oBACXN,EAAgB,OAAI/C,SAASqD,4BAGXE,KAAKC,KAAKT,IAElBU,cACVzD,SAAS4B,iBAAiB,uBAAuBC,SAAQF,GAAOA,EAAMpD,UAAUC,IAAI,YAEjFV,OAAOS,UAAUuC,SAAS,mBAC5BrB,KAAKC,WAAW5B,OAAOG,QAAQ,mBAE/BwB,KAAKC,WAAW5B,OAAOiD,aAGjB,EAIT,CA6BA,SAASL,IAERV,SAAS4B,iBAAiB,uBAAuBC,SAAQ,SAASjD,KAE7Da,KAAK6E,kBAAoB1F,EAAMK,KAAKyD,OAAS,KACxBV,MAArBpD,EAAM2F,aACR3F,EAAM2F,YAAYC,UAInB5F,EAAM2F,YAAc,IAAIE,WAAW,CAChCC,OAAS,qBACTC,SAAU/F,EAAMqB,cAAc,SAC9B2E,MAAO,CACRC,OAAQ,OACRC,gBAAiB,UAKnBlG,EAAM2F,YAAYQ,GAAG,MAAOC,GAE9B,IAhDD,WAEC,GAAIC,OAAOC,WAAa,IAAK,OAAO,EAGpClF,SAAS4B,iBAAiB,iBAAiBC,SAAQ,SAASsD,GAC3D,IAAIC,GAAW,EAGY,UAAxBD,EAAGnG,QAAQkD,WAAiD,SAAxBiD,EAAGnG,QAAQkD,YAEjDiD,EAAGvD,iBAAiB,MAAMC,SAAQ,SAAS9C,EAAKb,GAC5CA,EAAM,GAAyB,aAApBa,EAAK2E,aAAkD,KAApB3E,EAAK2E,cACrD0B,GAAW,EAEb,IAGGA,GAEFD,EAAG5G,UAAUC,IAAI,UAGpB,GACD,CA0BC6G,EACD,CAoMA,SAASL,EAAYM,EAAGpE,EAAUqE,GACjCzH,OAASwH,EAAExH,OAGRA,OAAO6E,QAAQ,4CACjBhC,EAAW7C,QAEHA,OAAO6E,QAAQ,eAvpBzB,WACC,IAAI/D,EAAkBd,OAAOG,QAAQ,SAEjC0D,EAAkB3B,SAASC,cAAc,qBAC7C,GAAY,MAATrB,EAAc,CAChBd,OAAOS,UAAUC,IAAI,UACrB,IAAIO,EAAiBjB,OAAOG,QAAQ,MAChCiB,EAAiBN,EAAMK,KAAK,GAAGX,MAAMS,EAAKZ,WAAWa,QAAQiD,QAC7Db,EAAqBtD,OAAOG,QAAQ,MAAMe,QAAQkD,UACtDP,EAAM1B,cAAc,iBAAiB8B,MAAU7C,EAC/CyC,EAAM1B,cAAc,sBAAsB8B,MAASX,CACpD,CAGAO,EAAMC,iBAAiB,8CAA8CC,SAAQC,GAAIA,EAAGC,MAAM,KAG1FJ,EAAM1B,cAAc,wBAAwB8B,MAAQjE,OAAOG,QAAQ,kBAAkBe,QAAQuD,GAE7FZ,EAAMpD,UAAUgC,OAAO,SACxB,CAooBEiF,GAEQ1H,OAAO6E,QAAQ,gCACvBhE,EAAqBb,QAhDvB,SAA+BA,EAAQoD,EAAUoE,GAEhD,IAAIG,EAAazF,SAAS4B,iBAAiB,uBAC3C,IAAIV,EAASwB,OAAS,GAAK5E,EAAOS,UAAUuC,SAAS,kBAAkC,MAAd2E,GAA2C,GAArBA,EAAW/C,QAAc,CAEvH,IAAIgD,EAAWxE,EAAS,GAAGsB,KAAKrE,UAC5BgD,EAAYD,EAAS,GAAGsB,KAE5B,IAAK,MAAMmD,KAAazE,EACvB,GAAGwE,GAAYC,EAAUnD,KAAKrE,UAAU,CACvC,IAAI4E,EAAU,CACboB,KAAM,QACNnB,MAAO,6CACPoB,mBAAoB,WAUrB,OAPiC,MAA9BpE,SAASqD,oBACXN,EAAgB,OAAI/C,SAASqD,mBAG9BE,KAAKC,KAAKT,QAEVuC,EAAExH,OAAOG,QAAQ,cAAcsG,YAAYqB,OAE5C,CAIEzE,EAAU5C,UAAUuC,SAAS,YAC/BgC,EAAa5B,GAEbD,EAAkBC,EAEpB,CACD,CAgBE2E,CAAsB/H,OAAQoD,EAAUoE,EAE1C,CAhMAtF,SAAS8F,iBAAiB,oBAAmB,WAC5C3G,QAAQC,IAAI,sBAEZsB,GACD,IAEAV,SAAS8F,iBAAiB,SAAQ,SAASC,GAC1CjI,OAASiI,EAAMjI,OAEG,gBAAfA,OAAOkI,MACTD,EAAME,kBAnjBRvH,eAA2BZ,GAC1B,IAAI6B,QAAiBC,WAAWsG,WAAWpI,EAAQ,uBAEhD6B,IACF7B,EAAOG,QAAQ,sBAAsBuC,UAAUb,EAASc,KAExDhB,KAAKU,eAAeR,EAASS,SAE7BM,IAEF,CA2iBEyF,CAAYrI,SACW,oBAAfA,OAAOkI,MACfD,EAAME,kBA/hBRvH,eAA+BZ,GAC9B,IAAI6B,QAAiBC,WAAWsG,WAAWpI,EAAQ,2BAEhD6B,IACFK,SAAS4B,iBAAiB,gCAAgCC,SAAQC,GAAIA,EAAGvD,UAAUC,IAAI,YAEvFiB,KAAKS,aAELT,KAAKU,eAAeR,GAEtB,CAuhBEyG,CAAgBtI,SACO,sBAAfA,OAAOkI,MACfD,EAAME,kBAtKRvH,eAA4BZ,GAC3B,IAAI6B,QAAiBC,WAAWsG,WAAWpI,EAAQ,mBAEnDkC,SAASC,cAAc,WAAWyD,YAAc5F,EAAOG,QAAQ,QAAQgC,cAAc,2BAA2B8B,MAEhH/B,SAASC,cAAc,WAAW1B,UAAUgC,OAAO,UAEnDd,KAAKS,aAELT,KAAKU,eAAeR,EACrB,CA8JE0G,CAAavI,SACU,YAAfA,OAAOkI,MAAqC,gBAAflI,OAAOkI,MAC5CD,EAAME,kBA9dRvH,eAAuBZ,GACtB,IAAIwI,EAAOxI,EAAOG,QAAQ,QAE1B,GAAc,IADAqI,EAAKrG,cAAc,oBAAoB8B,MACpC,CAEhB,IAAIhD,EAAOiB,SAASC,cAAc,aAClC,GAAW,MAARlB,EAAa,CACfA,EAAKR,UAAUgC,OAAO,cAAe,SAAU,YAC/CxB,EAAKwH,gBAAgB,WAErB,IAAIrH,EAAQoH,EAAKrG,cAAc,iBAAiB8B,MAC5CyE,EAAQF,EAAKrG,cAAc,sBAAsB8B,MACjD2D,EAAW3G,EAAKd,QAAQ,SAAS6F,MAAM7D,cAAc,kBAAkBf,OAAUf,UAEjFsI,EAAW1H,EAAKd,QAAQ,SAASgC,cAAc,sBAAsBuG,OAAUlI,MAAMoH,GACzFe,EAAQlI,UAAUC,IAAI,cAAe,SAAU,YAC/CiI,EAAQzF,UAAYjC,EAAKiC,UAEzBjC,EAAKiC,UAAY,WAClB,CACD,CAEA,IAAIrB,QAAkBC,WAAWsG,WAAWpI,EAAQ,mBAEjD6B,GACFG,EAAYH,EAEd,CAqcE+G,CAAQ5I,SACAA,OAAO6E,QAAQ,WAAyC,MAA5B7E,OAAOG,QAAQ,WAAuE,eAAlDH,OAAOG,QAAQ,UAAU0I,WAAWX,KAAKjE,OACjH5C,QAAQC,IAAItB,QA/fd,SAAuBA,GACtBkC,SAAS4B,iBAAiB,gBAAgBC,SAAQC,GAAIA,EAAGvD,UAAUgC,OAAO,cAAe,SAAU,YACnGzC,EAAOW,QAAU,CAClB,CA6fEmI,CAAc5G,SAASC,cAAc,eACd,eAAfnC,OAAOkI,MACfD,EAAME,kBACNhF,EAAkBnD,SACK,YAAfA,OAAOkI,MACfD,EAAME,kBAENxG,KAAKoD,UAAU/E,OAAOG,QAAQ,kBAAkBgC,cAAc,8BACtC,mBAAfnC,OAAOkI,MAChBD,EAAME,kBA/cRvH,eAA6BZ,GAC5B,IAAI6B,QAAkBC,WAAWsG,WAAWpI,EAAQ,mBAEjD6B,GACFF,KAAKU,eAAeR,GAGrBF,KAAKS,YACN,CAwcE2G,CAAc/I,SACmC,MAAzCA,OAAOG,QAAQ,wBACvB8H,EAAME,kBACNtF,EAAW7C,OAAOG,QAAQ,yBACwB,MAA1CH,OAAOG,QAAQ,wBACvB6E,EAAahF,OAAOG,QAAQ,yBACiB,MAArCH,OAAOG,QAAQ,oBACvBU,EAAqBb,OAAOG,QAAQ,oBAGlCH,OAAOS,UAAUuC,SAAS,YA9N9B,SAAyBhD,GACxBA,EAAOS,UAAUC,IAAI,UAErB,IAAII,EAAUd,EAAOG,QAAQ,SACzB4F,EAAYjF,EAAMkF,MAAM7E,KAAK,GAC7BF,EAASjB,EAAOG,QAAQ,MACxBiB,EAAS2E,EAAQvF,MAAMS,EAAKZ,WAAWa,QAAQiD,QAC/Cb,EAAatD,EAAOG,QAAQ,MAAMe,QAAQkD,UAG1C4E,EAAe9G,SAASC,cAAc,iCAE1CL,WAAWmH,UAAUD,EAAY7G,cAAc,SAE/C6G,EAAY7G,cAAc,wBAAwB8B,MAASnD,EAAMI,QAAY,GAC7E8H,EAAY7G,cAAc,iBAAiB8B,MAAW7C,EACtD4H,EAAY7G,cAAc,sBAAsB8B,MAAUX,EAEjC,wBAAtBtD,EAAO4F,cACToD,EAAY7G,cAAc,2BAA2B8B,MAAQjE,EAAO4F,YACpE1D,SAASC,cAAc,+BAA+ByD,YAAc,0BAGrEjE,KAAKoD,UAAUiE,EAChB,CAuMEE,CAAgBlJ,QAIdA,OAAOS,UAAUuC,SAAS,YAC5BiF,EAAME,kBAllBR,SAAkCnI,GACjC,IAAI6D,EAAU7D,EAAOG,QAAQ,kBAAkBgC,cAAc,qBAC7D0B,EAAM1B,cAAc,wBAAwB8B,MAAQjE,EAAOkB,QAAqB,YACpD,MAAzBlB,EAAOkB,QAAQlB,QACjB6D,EAAM1B,cAAc,4BAA4B8B,MAAQjE,EAAOkB,QAAQlB,OACvE6D,EAAM1B,cAAc,6BAA6BgH,QACjDxH,KAAKC,WAAW5B,GAAO,IAEvB2B,KAAKoD,UAAUlB,EAEjB,CA0kBEuF,CAAyBpJ,SACjBA,OAAOS,UAAUuC,SAAS,oBAClCiF,EAAME,kBA7jBRvH,eAA8BZ,GAC7B,IAAI8F,EAAc9F,EAAOkB,QAAqB,YAE1CO,EAAa,IAAIwE,SAIrB,GAHAxE,EAASyE,OAAO,cAAeJ,SAERtE,EAJT,iDAKD,CACZ,IAAIK,QAAiBC,WAAWC,aAAa,yBAA0BN,GAEpEI,IACFF,KAAKU,eAAeR,GAEpBK,SAASC,cAAc,kDAAkDM,SAE3E,CACD,CA+iBE4G,CAAerJ,SACPA,OAAO6E,QAAQ,oBACvBoD,EAAME,kBA9ER,SAA+BnI,GAC9B,IAAI6D,EAAQ3B,SAASoH,eAAe,uBAChCxG,EAAU9C,EAAOG,QAAQ,kBACzBW,EAAQgC,EAAQX,cAAc,kBAElC0B,EAAM1B,cAAc,wBAAwB8B,MAASnD,EAAMI,QAAQuD,GACnEZ,EAAM1B,cAAc,sBAAsB8B,MAAUnD,EAAMI,QAAQqI,UAClE1F,EAAM1B,cAAc,wBAAwB8B,MAASnD,EAAMI,QAAQlB,OACnE6D,EAAM1B,cAAc,0BAA0B8B,MAASnB,EAAQX,cAAc,0BAA0ByD,YACvG/B,EAAM1B,cAAc,sBAAsB8B,MAAUnD,EAAMkF,MAAM7D,cAAc,MAAM3B,MAAM,GAAGU,QAAQiD,QACrGN,EAAM1B,cAAc,oBAAoB8B,MAAUnD,EAAMkF,MAAM7D,cAAc,MAAM3B,MAAMM,EAAMkF,MAAM7D,cAAc,MAAM3B,MAAMoE,OAAO,GAAG1D,QAAQiD,QAChJN,EAAM1B,cAAc,sBAAsBqH,QAAW1I,EAAMI,QAAQuI,MACnE5F,EAAM1B,cAAc,4BAA4BqH,QAAU1I,EAAMK,KAAKyD,OAAO,EAE5EjD,KAAKoD,UAAUlB,EAChB,CAiEE6F,CAAsB1J,QAExB,IAEAkC,SAAS8F,iBAAiB,UAAU,SAASC,GAK5C,GAHAjI,OAASiI,EAAMjI,OAGC,eAAbA,OAAOkI,KAAoB,CAC7B,IAAIyB,EAAS3J,OAAO4J,KAAKzH,cAAc,WAAWnC,OAAOiE,aAAa/C,QAAQ+C,MAE9EjE,OAAOG,QAAQ,QAAQgC,cAAc,sBAAsB8B,MAAQ0F,CACpE,MAAM,GAAkB,QAAf3J,OAAOkI,KAAe,CAC9B,IAAI5D,EAAOtE,OAAO4J,KAAKzH,cAAc,WAAWnC,OAAOiE,WACnDmC,EAAS,GACF,MAAR9B,IACF8B,EAAS9B,EAAKpD,QAAQyI,QAGvB3J,OAAOG,QAAQ,QAAQgC,cAAc,oBAAoB8B,MAAQmC,CAClE,KAAwB,aAAfpG,OAAOkI,MAAsC,SAAflI,OAAO6J,OAC1B,SAAhB7J,OAAOiE,OACTjE,OAAOG,QAAQ,QAAQgC,cAAc,yBAAyB1B,UAAUgC,OAAO,UAC/EzC,OAAOG,QAAQ,QAAQgC,cAAc,yBAAyB1B,UAAUC,IAAI,YAE5EV,OAAOG,QAAQ,QAAQgC,cAAc,yBAAyB1B,UAAUgC,OAAO,UAC/EzC,OAAOG,QAAQ,QAAQgC,cAAc,yBAAyB1B,UAAUC,IAAI,YAI9E,GAAGV,OAAO6E,QAAQ,8BAA8B,CAE/C,IAAI5D,EAAQiB,SAASC,cAAc,aAEnC,GAAW,MAARlB,EACF,OAED,IAAIH,EAASG,EAAKd,QAAQ,SAG1B,GACiB,aAAfH,OAAOkI,MAAsF,MAA/DpH,EAAMqB,cAAc,sBAAsBnC,OAAOiE,YAChE,WAAfjE,OAAOkI,MAAkF,MAA7DpH,EAAMqB,cAAc,oBAAoBnC,OAAOiE,WAE5E,OAGD,IAAIuE,EAAQxI,OAAOG,QAAQ,QACvB2J,EAAM,IAAIC,KACV3F,EAAYoE,EAAKrG,cAAc,sBAAsB8B,MAAM+F,MAAM,KACrE5F,EAAa,IAAI2F,KAAKD,EAAEG,cAAe,EAAG,EAAG7F,EAAU,GAAIA,EAAU,IACrE,IAAIC,EAAWmE,EAAKrG,cAAc,oBAAoB8B,MAAM+F,MAAM,KAClE3F,EAAY,IAAI0F,KAAKD,EAAEG,cAAe,EAAG,EAAG5F,EAAQ,GAAIA,EAAQ,IAEhE,IAAI1D,GAAY0D,EAAQD,GAAW,IAAK,GAAG,GAG3C,GAAGA,GAAapE,OAAOiE,MAAM,CAE5BhD,EAAKwH,gBAAgB,WACrBxH,EAAKR,UAAUgC,OAAO,cAAe,UAGrC,IACIkG,EADS1H,EAAKd,QAAQ,SAASgC,cAAc,sBAAsBqG,EAAKrG,cAAc,sBAAsB8B,MAAM,MACjGzD,MAAMS,EAAKZ,WAEhCsI,EAAQzF,UAAYjC,EAAKiC,UACzByF,EAAQlI,UAAUC,IAAI,cAAe,UACrCX,EAAa4I,EAAShI,EAEvB,MACCZ,EAAakB,EAAMN,EAErB,CACD,G","sources":["webpack://events/./schedules.js"],"sourcesContent":["/**\r\n *\r\n * Submits the new schedule form via rest API and adds the new schedule to the screen.\r\n *\r\n * @listens to button click if button has name add_schedule\r\n *\r\n * @param {Object} target     The clicked button.\r\n *\r\n * @return nothing\r\n*/ \r\nasync function addSchedule(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_schedule');\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.schedules_wrapper').outerHTML=response.html;\r\n\t\t\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\taddSelectable();\r\n\t}\r\n}\r\n\r\nfunction ShowPublishScheduleModal(target){\r\n\tvar modal\t\t\t= target.closest('.schedules_div').querySelector('.publish_schedule');\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value = target.dataset[\"schedule_id\"];\r\n\tif(target.dataset.target != null){\r\n\t\tmodal.querySelector('[name=\"schedule_target\"]').value = target.dataset.target;\r\n\t\tmodal.querySelector('[name=\"publish_schedule\"]').click();\r\n\t\tMain.showLoader(target,true);\r\n\t}else{\r\n\t\tMain.showModal(modal);\r\n\t}\r\n}\r\n\r\nasync function publishSchedule(target){\r\n\tvar response\t= await FormSubmit.submitForm(target, 'events/publish_schedule');\r\n\r\n\tif(response){\r\n\t\tdocument.querySelectorAll('.schedule_actions .loadergif').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\n// Removes an existing schedule\r\nasync function removeSchedule(target){\r\n\tvar scheduleId\t\t= target.dataset[\"schedule_id\"];\r\n\tvar text \t\t\t= \"Are you sure you want to remove this schedule\";\r\n\tvar formData \t\t= new FormData();\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\tvar confirmed\t\t= await checkConfirmation(text);\r\n\tif(confirmed){\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/remove_schedule', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tMain.displayMessage(response);\r\n\r\n\t\t\tdocument.querySelector('.schedules_wrapper .loaderwrapper:not(.hidden)').remove();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyRowSpan(target, count){\r\n\tif(count > 1){\r\n\t\tvar row\t\t= target.closest('tr');\r\n\t\tvar index\t= target.cellIndex;\r\n\t\t//Loop over the next cells to add the hidden attribute\r\n\t\tfor (var i = 1; i < count; i++) {\r\n\t\t\trow = row.nextElementSibling;\r\n\t\t\trow.cells[index].classList.add('hidden');\r\n\t\t}\r\n\t\ttarget.rowSpan\t= count;\r\n\t}\r\n}\r\n\r\nfunction removeRowSpan(target){\r\n\tdocument.querySelectorAll('.ui-selected').forEach(el=>el.classList.remove('ui-selected', 'active', 'hidden'));\r\n\ttarget.rowSpan = 1;\r\n}\r\n\r\n//shows the modal to select a user as host\r\nfunction showAddHostModal(){\r\n\tlet table\t\t\t\t\t\t\t\t\t\t\t= target.closest('table');\r\n\t\r\n\tlet modal\t\t\t\t\t\t\t\t\t\t\t= document.querySelector('[name=\"add_host\"]');\r\n\tif(table != null){\r\n\t\ttarget.classList.add('active');\r\n\t\tlet cell\t\t\t\t\t\t\t\t\t\t\t= target.closest('td');\r\n\t\tlet date\t\t\t\t\t\t\t\t\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.isodate;\r\n\t\tlet startTime\t\t\t\t\t\t\t\t\t\t= target.closest('tr').dataset.starttime;\r\n\t\tmodal.querySelector('[name=\"date\"]').value\t\t\t= date;\r\n\t\tmodal.querySelector('[name=\"starttime\"]').value\t\t= startTime;\r\n\t}\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n\t// Add new values\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t= target.closest('.schedules_div').dataset.id;\r\n\r\n\tmodal.classList.remove('hidden');\r\n}\r\n\r\n// Add a new host/ updates an existing entry when the host form is submitted\r\nasync function addHost(target){\r\n\tlet form\t= target.closest('form');\r\n\tlet oldtime\t= form.querySelector('[name=\"oldtime\"]').value;\r\n\tif(oldtime != ''){\r\n\t\t// remove the old event\r\n\t\tlet cell\t= document.querySelector('td.active');\r\n\t\tif(cell != null){\r\n\t\t\tcell.classList.remove('ui-selected', 'active', 'selected');\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\r\n\t\t\tlet date\t\t= form.querySelector('[name=\"date\"]').value;\r\n\t\t\tlet time\t\t= form.querySelector('[name=\"starttime\"]').value;\r\n\t\t\tlet columnNr\t= cell.closest('table').tHead.querySelector(`[data-isodate=\"${date}\"]`).cellIndex;\r\n\t\t\t// Add the new one\r\n\t\t\tlet newCell\t\t= cell.closest('table').querySelector(`tr[data-starttime=\"${time}\"]`).cells[columnNr];\r\n\t\t\tnewCell.classList.add('ui-selected', 'active', 'selected');\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\r\n\t\t\tcell.innerHTML\t= 'Available';\r\n\t\t}\r\n\t}\r\n\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\taddHostHtml(response);\r\n\t}\r\n}\r\n\r\nasync function addHostMobile(target){\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n\r\n\tMain.hideModals();\r\n}\r\n\r\n// Add current user as host\r\nasync function addCurrentUserAsHost(target){\r\n\tvar table\t\t\t= target.closest('table');\r\n\r\n\tlet scheduleOwner, dateStr;\r\n\r\n\tif(table != null){\r\n\t\tvar cell\t\t= target.closest('td');\r\n\t\tscheduleOwner\t= table.closest('.schedules_div').dataset.target;;\r\n\t\tdateStr\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\t}else{\r\n\t\tconsole.log(target)\r\n\t\tscheduleOwner\t= target.closest('.schedules_div').dataset.target;;\r\n\t\tdateStr\t\t\t= target.dataset.date;\r\n\t}\r\n\t\r\n\tvar text \t\t\t= `Please confirm you want to be the host for ${scheduleOwner} on ${dateStr}`;\r\n\tvar confirmed\t\t= await checkConfirmation(text);\r\n\r\n\tif(confirmed){\r\n\r\n\t\tvar formData\t\t= loadHostFormdata(target);\r\n\t\t\r\n\t\tif(table != null){\r\n\t\t\ttarget.classList.add('active');\r\n\t\t}else{\r\n\t\t\tMain.showLoader(target);\r\n\t\t}\r\n\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/add_host', formData);\r\n\r\n\t\tif(response){\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Show the new host in the schedule\r\nfunction addHostHtml(response){\r\n\tvar targetCell\t\t\t= document.querySelector('td.active');\r\n\r\n\tif(targetCell == null){\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\tlocation.reload();\r\n\t\treturn;\r\n\t}\r\n\r\n\ttargetCell.classList.remove('active');\r\n\ttargetCell.outerHTML\t= response.html;\r\n\r\n\tMain.displayMessage(response.message);\r\n\r\n\taddSelectable();\r\n}\r\n\r\n// Remove a host\r\nasync function removeHost(target){\r\n\tlet formData, scheduleOwner, cell, dateStr, text, wrapper, confirmed;\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tif(table != null){\r\n\t\tformData\t\t= loadHostFormdata(target);\r\n\t\tscheduleOwner\t= table.closest('.schedules_div').dataset.target;\r\n\t\tcell\t\t\t= target.closest('td');\r\n\t\tdateStr\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\t}else{\r\n\t\tconsole.log(target)\r\n\t\tformData\t\t= loadHostFormdata(target);\r\n\t\tscheduleOwner\t= target.closest('.schedules_div').dataset.target;\r\n\t\tdateStr\t\t\t= target.dataset.date;\r\n\t}\r\n\r\n\tif(target.classList.contains('orientation')){\r\n\t\ttext \t= `Are you sure you want to remove this orientation session`;\r\n\t}else if(target.classList.contains('admin')){\r\n\t\ttext \t= `Please confirm host removal for ${scheduleOwner} on ${dateStr}`;\r\n\t}else{\r\n\t\ttext \t= `Please confirm you do not want to be the host for ${scheduleOwner} on ${dateStr} anymore`;\r\n\t}\r\n\r\n\tconfirmed\t= await checkConfirmation(text);\r\n\r\n\tif(confirmed){\r\n\t\tif(table != null){\r\n\t\t\tMain.showLoader(cell.firstChild);\r\n\t\t}else{\r\n\t\t\twrapper\t= target.closest('.session-wrapper-mobile');\r\n\t\t\tMain.showLoader(target);\r\n\t\t}\r\n\r\n\t\tvar response = await FormSubmit.fetchRestApi('events/remove_host', formData);\r\n\r\n\t\tif(table != null){\r\n\t\t\t//Remove cell class\r\n\t\t\tcell.classList.remove('selected');\r\n\t\t\tcell.classList.remove('ui-selected');\r\n\r\n\t\t\t//Set cell text\r\n\t\t\tcell.innerHTML\t= 'Available';\r\n\t\t\tvar index\t\t= cell.cellIndex;\r\n\t\t\tvar row\t\t\t= cell.closest('tr');\r\n\r\n\t\t\t//only remove rowspan if the first cell of a row has no rowspan\r\n\t\t\tif(row.cells[0].rowSpan==1){\r\n\t\t\t\t//Loop over the next cells to remove the hidden attribute\r\n\t\t\t\tfor (var i = 1; i < target.rowSpan; i++) {\r\n\t\t\t\t\trow = row.nextElementSibling;\r\n\t\t\t\t\trow.cells[index].classList.remove('hidden');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Reset the rowSpan\r\n\t\t\t\ttarget.rowSpan = 1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\twrapper.remove();\r\n\t\t}\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nfunction showTimeslotModal(selected=''){\r\n\tlet firstCell, date, startTime, endTime, hostId, oldTime, subject, location, hostName, eventId;\r\n\tlet modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"checkbox\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n\tif(selected[0] == undefined){\r\n\t\tconsole.log(selected)\r\n\t\tfirstCell\t= selected;\r\n\t\tdate\t\t= selected.dataset.isodate;\r\n\t\tstartTime\t= selected.dataset.starttime;\r\n\t\tendTime\t\t= selected.dataset.endtime;\r\n\t\tsubject\t\t= selected.dataset.subject;\r\n\t\tlocation\t= selected.dataset.location;\r\n\t\thostName\t= selected.dataset.host;\r\n\t\thostId\t\t= selected.dataset.host_id;\r\n\t\teventId\t\t= selected.dataset.event_id;\r\n\r\n\t\tmodal.querySelector('[name=\"schedule_id\"]').value\t\t= selected.closest('.schedules_div').dataset.id;\r\n\t}else{\r\n\t\tfirstCell\t\t= selected[0].node;\r\n\t\tlet lastCell\t\t= selected[selected.length-1].node;\r\n\r\n\t\tfirstCell.classList.add('active');\r\n\t\tlet rowCount\t\t= document.querySelectorAll('.ui-selected').length;\r\n\t\tapplyRowSpan(firstCell, rowCount);\r\n\r\n\t\t// Only show loader when the cell is empty\r\n\t\tif(!firstCell.matches('.selected')){\r\n\t\t\tMain.showLoader(firstCell.firstChild);\r\n\t\t}\r\n\r\n\t\tstartTime\t= firstCell.closest('tr').dataset.starttime;\r\n\r\n\t\tendTime\t\t= firstCell.dataset.endtime;\r\n\t\tif(endTime == undefined){\r\n\t\t\tendTime\t= lastCell.closest('tr').dataset.endtime;\r\n\t\t}\r\n\t\tlet table\t\t\t= firstCell.closest('table');\r\n\t\tdate\t\t\t= table.rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n\r\n\t\thostId\t\t\t= firstCell.dataset.host_id;\r\n\t\toldTime\t\t\t= firstCell.dataset.old_time;\r\n\t\tsubject\t\t\t= firstCell.dataset.subject;\r\n\t\tlocation\t\t= firstCell.dataset.location;\r\n\t\thostName\t\t= firstCell.dataset.host;\r\n\t\teventId\t\t\t= firstCell.dataset.event_id;\r\n\t}\r\n\r\n\t//Fill the modal values\r\n\tmodal.querySelector('[name=\"event-id\"]').value\t\t\t= eventId;\r\n\tmodal.querySelector('[name=\"date\"]').value\t\t\t\t= date;\r\n\tmodal.querySelector('[name=\"olddate\"]').value \t\t\t= date;\r\n\tmodal.querySelector('[name=\"starttime\"]').value\t\t\t= startTime;\r\n\tmodal.querySelector('[name=\"endtime\"]').value\t\t\t= endTime;\r\n\tmodal.querySelector('[name=\"oldtime\"]').value\t\t\t= startTime;\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.remove('add_schedule_row');\r\n\tmodal.querySelector('[name=\"add_timeslot\"]').classList.add('update_schedule');\r\n\r\n\tif(hostId\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host_id\"]').value\t\t\t= hostId;\r\n\t}\r\n\r\n\tif(subject\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"subject\"]').value\t\t\t= subject;\r\n\t}\r\n\r\n\tif(location\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"location\"]').value\t\t\t= location;\r\n\t}\r\n\r\n\tif(hostName\t!= undefined){\r\n\t\tmodal.querySelector('[name=\"host\"]').value\t\t\t\t= hostName;\r\n\t}\r\n\t\r\n\tMain.showModal(modal);\r\n}\r\n\r\nasync function editTimeSlot(selected){\r\n\tlet options\t= {\r\n\t\ttitle: 'What do you want to do?',\r\n\t\ttext: \"Do you want to edit or remove this timeslot?\",\r\n\t\tshowDenyButton: true,\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: 'Edit timeslot',\r\n\t\tdenyButtonText: 'Remove timeslot',\r\n\t}\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar answer = await Swal.fire(options);\r\n\r\n\tlet firstCell;\r\n\tif(selected[0] == undefined){\r\n\t\tfirstCell\t= selected;\r\n\t}else{\r\n\t\tfirstCell\t= selected[0].node;\r\n\t}\r\n\r\n\t//swap and/or\r\n\tif (answer.isConfirmed) {\r\n\t\t// Show modal and prefill the default fields\r\n\t\tshowTimeslotModal(selected);\r\n\t\t\r\n\t\t//change button text\r\n\t\tvar modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').textContent\t= 'Update time slot';\r\n\t//add new rule after this one\r\n\t}else if (answer.isDenied) {\r\n\t\tconsole.log(firstCell)\r\n\t\tremoveHost(firstCell);\r\n\t}\r\n}\r\n\r\n// Show the modal to add a recipe keyword\r\nfunction showRecipeModal(target){\r\n\ttarget.classList.add('active');\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar heading\t\t\t= table.tHead.rows[0];\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar date\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\tvar startTime\t\t= target.closest('tr').dataset.starttime;\r\n\r\n\t//Fill the modal with the values of the clickes schedule\r\n\tvar recipeModal \t= document.querySelector('[name=\"recipe_keyword_modal\"]');\r\n\r\n\tFormSubmit.formReset(recipeModal.querySelector('form'));\r\n\r\n\trecipeModal.querySelector('[name=\"schedule_id\"]').value \t= table.dataset[\"id\"];\r\n\trecipeModal.querySelector('[name=\"date\"]').value \t\t\t= date;\r\n\trecipeModal.querySelector('[name=\"starttime\"]').value \t\t= startTime;\r\n\r\n\tif(target.textContent != 'Enter recipe keyword'){\r\n\t\trecipeModal.querySelector('[name=\"recipe_keyword\"]').value\t= target.textContent;\r\n\t\tdocument.querySelector('[name=\"add_recipe_keyword\"]').textContent\t= 'Update recipe keywords';\r\n\t}\r\n\t\r\n\tMain.showModal(recipeModal);\r\n}\r\n\r\n//submit the recipe form\r\nasync function submitRecipe(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_menu');\r\n\r\n\tdocument.querySelector('.active').textContent\t= target.closest('form').querySelector('[name=\"recipe_keyword\"]').value;\r\n\r\n\tdocument.querySelector('.active').classList.remove('active');\r\n\r\n\tMain.hideModals();\r\n\r\n\tMain.displayMessage(response);\r\n}\r\n\r\nfunction loadHostFormdata(target){\r\n\tvar table\t\t\t= target.closest('table');\r\n\r\n\tlet scheduleId, heading, cell, date, startTime, host;\r\n\r\n\tif(table == null){\r\n\t\tscheduleId\t\t= target.closest('.schedules_div').dataset[\"id\"];\r\n\t\tstartTime\t\t= target.dataset.starttime;\r\n\t\thost\t\t\t= target.dataset.host_id;\r\n\t\tdate\t\t\t= target.dataset.isodate\r\n\t}else{\r\n\t\tscheduleId\t\t= table.dataset[\"id\"];\r\n\t\theading\t\t\t= table.tHead.rows[0];\r\n\t\tcell\t\t\t= target.closest('td');\r\n\t\tdate\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\t\tstartTime\t\t= target.closest('tr').dataset.starttime;\r\n\t\thost\t\t\t= cell.dataset.host;\r\n\t}\r\n\r\n\tvar formData\t\t= new FormData();\r\n\tformData.append('date', date);\r\n\tif(host != null){\r\n\t\tformData.append('host_id', host);\r\n\t}else{\r\n\t\tformData.append('host_id', sim.userId);\r\n\t}\r\n\t\r\n\tformData.append('starttime', startTime);\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\treturn formData;\r\n}\r\n\r\nasync function checkConfirmation(text){\r\n\tlet options = {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: text+\"?\",\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: 'Yes'\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar result = await Swal.fire(options);\r\n\t\r\n\tif (result.isConfirmed) {\r\n\t\tdocument.querySelectorAll('.modal:not(.hidden)').forEach(modal=>modal.classList.add('hidden'));\r\n\t\t//display loading gif\r\n\t\tif(target.classList.contains('remove_schedule')){\r\n\t\t\tMain.showLoader(target.closest('.schedules_div'));\r\n\t\t}else{\r\n\t\t\tMain.showLoader(target.firstChild);\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n//hide empty rows on mobile\r\nfunction hideRows() {\r\n\t//only run for smaller screens\r\n\tif (window.innerWidth > 800) return false;\r\n\t\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table tr').forEach(function(tr){\r\n\t\tvar emptyRow = true;\r\n\t\t\r\n\t\t//DO not hide lunch or dinner rows\r\n\t\tif(tr.dataset.starttime != 'dinner' && tr.dataset.starttime != 'lunch'){\r\n\t\t\t//loop over all table cells to see if there is a cell with content\r\n\t\t\ttr.querySelectorAll('td').forEach(function(cell,index){\r\n\t\t\t\tif(index>0 && cell.textContent != 'Available' && cell.textContent != ' '){\r\n\t\t\t\t\temptyRow = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//If non of the cells have content\r\n\t\t\tif(emptyRow ){\r\n\t\t\t\t//hide the row\r\n\t\t\t\ttr.classList.add('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction addSelectable(){\r\n\t//loop over all the schedule tables\r\n\tdocument.querySelectorAll('.sim-table.schedule').forEach(function(table){\r\n\t\t//Add selectable on non-mobile devices or if it is only a lunch and dinner schedule\r\n\t\tif(!Main.isMobileDevice() || table.rows.length < 7){\r\n\t\t\tif(table._selectable != undefined){\r\n\t\t\t\ttable._selectable.destroy();\r\n\t\t\t}\r\n\r\n\t\t\t//Load selectable and attach it to the table\r\n\t\t\ttable._selectable = new Selectable({\r\n\t\t\t   filter:\t\t\".orientation.admin\",\r\n\t\t\t   appendTo:\ttable.querySelector(\"tbody\"),\r\n\t\t\t   lasso: {\r\n\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\tbackgroundColor: \"none\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Run the function afterSelect when selection is final\r\n\t\t\ttable._selectable.on('end', afterSelect);\r\n\t\t}\r\n\t});\r\n\r\n\thideRows();\r\n}\r\n\r\nfunction showEditScheduleModal(target){\r\n\tlet modal\t= document.getElementById('edit_schedule_modal');\r\n\tlet wrapper\t= target.closest('.schedules_div');\r\n\tlet table\t= wrapper.querySelector('table.schedule');\r\n\r\n\tmodal.querySelector(`[name=\"schedule_id\"]`).value\t\t= table.dataset.id;\r\n\tmodal.querySelector(`[name=\"target_id\"]`).value\t\t\t= table.dataset.target_id;\r\n\tmodal.querySelector(`[name=\"target_name\"]`).value\t\t= table.dataset.target;\r\n\tmodal.querySelector(`[name=\"schedule_info\"]`).value\t\t= wrapper.querySelector('.table_title.sub-title').textContent;\r\n\tmodal.querySelector(`[name=\"startdate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"enddate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[table.tHead.querySelector('tr').cells.length-1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"skiplunch\"]`).checked\t\t= table.dataset.lunch;\r\n\tmodal.querySelector(`[name=\"skiporientation\"]`).checked\t= table.rows.length<3;\r\n\r\n\tMain.showModal(modal);\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\tconsole.log(\"Schedule.js loaded\");\r\n\t\r\n\taddSelectable();\r\n});\r\n\r\ndocument.addEventListener('click',function(event){\r\n\ttarget = event.target;\r\n\r\n\tif(target.name == 'add_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\taddSchedule(target);\r\n\t}else if(target.name == 'publish_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tpublishSchedule(target);\r\n\t}else if(target.name == 'add_recipe_keyword'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tsubmitRecipe(target);\r\n\t}else if(target.name == 'add_host' || target.name == 'add_timeslot'){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\taddHost(target);\r\n\t}else if(target.matches('.close') && target.closest('.modal') != null && target.closest('.modal').attributes.name.value == 'add_session'){\r\n\t\tconsole.log(target)\r\n\t\tremoveRowSpan(document.querySelector('td.active'));\r\n\t}else if(target.name == 'add-session'){\r\n\t\tevent.stopPropagation();\r\n\t\tshowTimeslotModal(target);\r\n\t}else if(target.name == 'add-host'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tMain.showModal(target.closest('.schedules_div').querySelector('.add-host-mobile-wrapper'));\r\n\t}else if (target.name == 'add_host_mobile' ){\r\n\t\tevent.stopPropagation();\r\n\t\taddHostMobile(target)\r\n\t}else if(target.closest('.remove-host-mobile') != null){\r\n\t\tevent.stopPropagation();\r\n\t\tremoveHost(target.closest('.remove-host-mobile'));\r\n\t}else if(target.closest('.edit-session-mobile') != null){\r\n\t\teditTimeSlot(target.closest('.edit-session-mobile'));\r\n\t}else if(target.closest('.add-me-as-host') != null){\r\n\t\taddCurrentUserAsHost(target.closest('.add-me-as-host'));\r\n\t}\r\n\t\r\n\tif(target.classList.contains('keyword')){\r\n\t\tshowRecipeModal(target);\r\n\t}\r\n\r\n\t//publish the schedule\r\n\tif(target.classList.contains('publish')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tShowPublishScheduleModal(target);\r\n\t}else if(target.classList.contains('remove_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tremoveSchedule(target);\r\n\t}else if(target.matches('.edit_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tshowEditScheduleModal(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', function(event){\r\n\r\n\ttarget = event.target;\r\n\r\n\t//Direct table actions\r\n\tif(target.name=='target_name'){\r\n\t\tvar userid = target.list.querySelector(`[value='${target.value}' i]`).dataset.value;\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"target_id\"]').value\t= userid;\r\n\t}else if(target.name == 'host'){\r\n\t\tlet host\t= target.list.querySelector(`[value=\"${target.value}\"]`);\r\n\t\tlet userId\t= '';\r\n\t\tif(host != null){\r\n\t\t\tuserId\t= host.dataset.userid;\r\n\t\t}\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"host_id\"]').value\t= userId;\r\n\t}else if(target.name == 'starttime' && target.type == 'radio'){\r\n\t\tif(target.value == '12:00'){\r\n\t\t\ttarget.closest('form').querySelector('.lunch.select-wrapper').classList.remove('hidden');\r\n\t\t\ttarget.closest('form').querySelector('.diner.select-wrapper').classList.add('hidden');\r\n\t\t}else{\r\n\t\t\ttarget.closest('form').querySelector('.diner.select-wrapper').classList.remove('hidden');\r\n\t\t\ttarget.closest('form').querySelector('.lunch.select-wrapper').classList.add('hidden');\r\n\t\t}\r\n\t}\r\n\r\n\tif(target.matches('[name=\"add_session\"] .time')){\r\n\t\t// get the active cell\r\n\t\tlet cell\t\t= document.querySelector('td.active');\r\n\r\n\t\tif(cell == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet table\t\t= cell.closest('table');\r\n\r\n\t\t// validate the time\r\n\t\tif(\r\n\t\t\t(target.name == 'starttime' && table.querySelector(`tr[data-starttime=\"${target.value}\"]`) == null) ||\r\n\t\t\t(target.name == 'endtime' && table.querySelector(`tr[data-endtime=\"${target.value}\"]`) == null) \r\n\t\t){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet d\t\t\t= new Date();\r\n\t\tlet starttime\t= form.querySelector('[name=\"starttime\"]').value.split(':');\r\n\t\tstarttime\t\t= new Date(d.getFullYear(), 0, 1, starttime[0], starttime[1]);\r\n\t\tlet endtime\t\t= form.querySelector('[name=\"endtime\"]').value.split(':');\r\n\t\tendtime\t\t\t= new Date(d.getFullYear(), 0, 1, endtime[0], endtime[1]);\r\n\t\t// calculate the quarters between end and starttime\r\n\t\tlet rowSpan\t\t= (endtime-starttime)/1000/60/15\r\n\r\n\t\t// starttime changed\r\n\t\tif(starttime != target.value){\r\n\t\t\t// adjust the current cell\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\t\t\tcell.classList.remove('ui-selected', 'active');\r\n\r\n\t\t\t// find the new cell\r\n\t\t\tlet newRow\t= cell.closest('table').querySelector('tr[data-starttime=\"'+form.querySelector('[name=\"starttime\"]').value+'\"]');\r\n\t\t\tlet newCell\t= newRow.cells[cell.cellIndex];\r\n\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\t\t\tnewCell.classList.add('ui-selected', 'active');\r\n\t\t\tapplyRowSpan(newCell, rowSpan);\r\n\t\t// endtime changed\r\n\t\t}else{\r\n\t\t\tapplyRowSpan(cell, rowSpan);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction checkIfValidSelection(target, selected, e){\r\n\t//we have selected something and there are no open modals\r\n\tvar openModals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif((selected.length > 0 || target.classList.contains('orientation')) && (openModals == null || openModals.length == 0) ){\t\r\n\t\t//check if selection is valid\r\n\t\tvar columnNr\t= selected[0].node.cellIndex;\r\n\t\tvar firstCell\t= selected[0].node;\r\n\r\n\t\tfor (const selection of selected){\r\n\t\t\tif(columnNr != selection.node.cellIndex){\r\n\t\t\t\tlet options = {\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: \"You can not select times on multiple days!\",\r\n\t\t\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(document.fullscreenElement != null){\r\n\t\t\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tSwal.fire(options);\r\n\r\n\t\t\t\te.target.closest('.sim-table')._selectable.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//We are dealing with a cell with a value\r\n\t\tif(firstCell.classList.contains('selected')){\r\n\t\t\teditTimeSlot(selected);\r\n\t\t}else{\r\n\t\t\tshowTimeslotModal(selected);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//Do something with selected items\r\nfunction afterSelect(e, selected, _unselected){\r\n\ttarget = e.target;\r\n\r\n\t//remove a meal host\r\n\tif(target.matches('.meal.selected.own, .meal.selected.admin')){\r\n\t\tremoveHost(target);\r\n\t//Add a host\r\n\t}else if(target.matches('.meal.admin')){\r\n\t\tshowAddHostModal();\r\n\t//orientation slot\r\n\t}else if(target.matches('.meal:not(.admin, .selected)')){\r\n\t\taddCurrentUserAsHost(target);\r\n\t}else{\r\n\t\tcheckIfValidSelection(target, selected, e); \r\n\t}\r\n}"],"names":["applyRowSpan","target","count","row","closest","index","cellIndex","i","nextElementSibling","cells","classList","add","rowSpan","async","addCurrentUserAsHost","table","scheduleOwner","dateStr","cell","dataset","rows","date","console","log","text","checkConfirmation","formData","loadHostFormdata","Main","showLoader","response","FormSubmit","fetchRestApi","addHostHtml","targetCell","document","querySelector","hideModals","displayMessage","message","location","reload","remove","outerHTML","html","addSelectable","removeHost","wrapper","confirmed","contains","firstChild","innerHTML","showTimeslotModal","selected","firstCell","startTime","endTime","hostId","oldTime","subject","hostName","eventId","modal","querySelectorAll","forEach","el","value","undefined","isodate","starttime","endtime","host","host_id","event_id","id","node","lastCell","length","matches","old_time","showModal","editTimeSlot","options","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","fullscreenElement","answer","Swal","fire","isConfirmed","textContent","isDenied","scheduleId","heading","tHead","FormData","append","sim","userId","icon","confirmButtonColor","cancelButtonColor","isMobileDevice","_selectable","destroy","Selectable","filter","appendTo","lasso","border","backgroundColor","on","afterSelect","window","innerWidth","tr","emptyRow","hideRows","e","_unselected","showAddHostModal","openModals","columnNr","selection","clear","checkIfValidSelection","addEventListener","event","name","stopPropagation","submitForm","addSchedule","publishSchedule","submitRecipe","form","removeAttribute","time","newCell","addHost","attributes","removeRowSpan","addHostMobile","recipeModal","formReset","showRecipeModal","click","ShowPublishScheduleModal","removeSchedule","getElementById","target_id","checked","lunch","showEditScheduleModal","userid","list","type","d","Date","split","getFullYear"],"sourceRoot":""}