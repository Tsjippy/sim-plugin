{"version":3,"file":"schedules.min.js","mappings":"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","sources":["webpack://events/./schedules.js"],"sourcesContent":["/**\r\n *\r\n * Submits the new schedule form via rest API and adds the new schedule to the screen.\r\n *\r\n * @listens to button click if button has name add_schedule\r\n *\r\n * @param {Object} target     The clicked button.\r\n *\r\n * @return nothing\r\n*/ \r\nasync function addSchedule(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_schedule');\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.schedules_wrapper').outerHTML=response.html;\r\n\t\t\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\taddSelectable();\r\n\t}\r\n}\r\n\r\nfunction ShowPublishScheduleModal(target){\r\n\tvar modal\t\t\t= target.closest('.schedules_div').querySelector('.publish_schedule');\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value = target.dataset[\"schedule_id\"];\r\n\tif(target.dataset.target != null){\r\n\t\tmodal.querySelector('[name=\"schedule_target\"]').value = target.dataset.target;\r\n\t\tmodal.querySelector('[name=\"publish_schedule\"]').click();\r\n\t\tMain.showLoader(target,true);\r\n\t}else{\r\n\t\tMain.showModal(modal);\r\n\t}\r\n}\r\n\r\nasync function publishSchedule(target){\r\n\tvar response\t= await FormSubmit.submitForm(target, 'events/publish_schedule');\r\n\r\n\tif(response){\r\n\t\tdocument.querySelectorAll('.schedule_actions .loadergif').forEach(el=>el.classList.add('hidden'));\r\n\t\t\r\n\t\tMain.hideModals();\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\n// Removes an existing schedule\r\nasync function removeSchedule(target){\r\n\tvar scheduleId\t\t= target.dataset[\"schedule_id\"];\r\n\tvar text \t\t\t= \"Are you sure you want to remove this schedule\";\r\n\tvar formData \t\t= new FormData();\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\tvar confirmed\t\t= await checkConfirmation(text);\r\n\tif(confirmed){\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/remove_schedule', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tMain.displayMessage(response);\r\n\r\n\t\t\tdocument.querySelector('.schedules_wrapper .loaderwrapper:not(.hidden)').remove();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyRowSpan(target, count){\r\n\tif(count > 1){\r\n\t\tvar row\t\t= target.closest('tr');\r\n\t\tvar index\t= target.cellIndex;\r\n\t\t//Loop over the next cells to add the hidden attribute\r\n\t\tfor (var i = 1; i < count; i++) {\r\n\t\t\trow = row.nextElementSibling;\r\n\t\t\trow.cells[index].classList.add('hidden');\r\n\t\t}\r\n\t\ttarget.rowSpan\t= count;\r\n\t}\r\n}\r\n\r\nfunction removeRowSpan(target){\r\n\tdocument.querySelectorAll('.ui-selected').forEach(el=>el.classList.remove('ui-selected', 'active', 'hidden'));\r\n\ttarget.rowSpan = 1;\r\n}\r\n\r\n//shows the modal to select a user as host\r\nfunction showAddHostModal(){\r\n\tlet table\t\t\t\t\t\t\t\t\t\t\t= target.closest('table');\r\n\t\r\n\tlet modal\t\t\t\t\t\t\t\t\t\t\t= document.querySelector('[name=\"add_host\"]');\r\n\tif(table != null){\r\n\t\ttarget.classList.add('active');\r\n\t\tlet cell\t\t\t\t\t\t\t\t\t\t\t= target.closest('td');\r\n\t\tlet date\t\t\t\t\t\t\t\t\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.isodate;\r\n\t\tlet startTime\t\t\t\t\t\t\t\t\t\t= target.closest('tr').dataset.starttime;\r\n\t\tmodal.querySelector('[name=\"date\"]').value\t\t\t= date;\r\n\t\tmodal.querySelector('[name=\"starttime\"]').value\t\t= startTime;\r\n\t}\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n\t// Add new values\r\n\tmodal.querySelector('[name=\"schedule_id\"]').value\t= target.closest('.schedules_div').dataset.id;\r\n\r\n\tmodal.classList.remove('hidden');\r\n}\r\n\r\n// Add a new host/ updates an existing entry when the host form is submitted\r\nasync function addHost(target){\r\n\tlet form\t= target.closest('form');\r\n\tlet oldtime\t= form.querySelector('[name=\"oldtime\"]').value;\r\n\tif(oldtime != ''){\r\n\t\t// remove the old event\r\n\t\tlet cell\t= document.querySelector('td.active');\r\n\t\tcell.classList.remove('ui-selected', 'active', 'selected');\r\n\t\tcell.removeAttribute('rowspan');\r\n\r\n\t\tlet date\t\t= form.querySelector('[name=\"date\"]').value;\r\n\t\tlet time\t\t= form.querySelector('[name=\"starttime\"]').value;\r\n\t\tlet columnNr\t= cell.closest('table').tHead.querySelector(`[data-isodate=\"${date}\"]`).cellIndex;\r\n\t\t// Add the new one\r\n\t\tlet newCell\t\t= cell.closest('table').querySelector(`tr[data-starttime=\"${time}\"]`).cells[columnNr];\r\n\t\tnewCell.classList.add('ui-selected', 'active', 'selected');\r\n\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\r\n\t\tcell.innerHTML\t= 'Available';\r\n\t}\r\n\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\taddHostHtml(response);\r\n\t}\r\n}\r\n\r\nasync function addHostMobile(target){\r\n\tvar response \t= await FormSubmit.submitForm(target, 'events/add_host');\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n\r\n\tMain.hideModals();\r\n}\r\n\r\n// Add current user as host\r\nasync function addCurrentUserAsHost(target){\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar scheduleOwner\t= table.dataset.target;\r\n\tvar dateStr\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\t\r\n\tvar text \t\t\t= `Please confirm you want to be the host for ${scheduleOwner} on ${dateStr}`;\r\n\tvar confirmed\t\t= await checkConfirmation(text);\r\n\r\n\tif(confirmed){\r\n\t\ttarget.classList.add('active');\r\n\r\n\t\tvar formData\t\t= loadHostFormdata(target);\r\n\r\n\t\tvar response\t= await FormSubmit.fetchRestApi('events/add_host', formData);\r\n\r\n\t\tif(response){\r\n\t\t\taddHostHtml(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Show the new host in the schedule\r\nfunction addHostHtml(response){\r\n\tvar targetCell\t\t\t= document.querySelector('td.active');\r\n\r\n\tif(targetCell == null){\r\n\t\tMain.hideModals();\r\n\t\treturn;\r\n\t}\r\n\r\n\ttargetCell.classList.remove('active');\r\n\ttargetCell.outerHTML\t= response.html;\r\n\r\n\tMain.displayMessage(response.message);\r\n\r\n\taddSelectable();\r\n}\r\n\r\n// Remove a host\r\nasync function removeHost(target){\r\n\tvar formData\t\t= loadHostFormdata(target);\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar scheduleOwner\t= table.dataset.target;\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar dateStr\t\t\t= table.rows[0].cells[cell.cellIndex].dataset.date;\r\n\tvar text;\r\n\r\n\tif(target.classList.contains('orientation')){\r\n\t\ttext \t= `Are you sure you want to remove this orientation session`;\r\n\t}else if(target.classList.contains('admin')){\r\n\t\ttext \t= `Please confirm host removal for ${scheduleOwner} on ${dateStr}`;\r\n\t}else{\r\n\t\ttext \t= `Please confirm you do not want to be the host for ${scheduleOwner} on ${dateStr} anymore`;\r\n\t}\r\n\r\n\tvar confirmed\t= await checkConfirmation(text);\r\n\r\n\tif(confirmed){\r\n\t\tMain.showLoader(cell.firstChild);\r\n\r\n\t\tvar response = await FormSubmit.fetchRestApi('events/remove_host', formData);\r\n\r\n\t\t//Remove cell class\r\n\t\tcell.classList.remove('selected');\r\n\t\tcell.classList.remove('ui-selected');\r\n\r\n\t\t//Set cell text\r\n\t\tcell.innerHTML\t= 'Available';\r\n\t\tvar index\t\t= cell.cellIndex;\r\n\t\tvar row\t\t\t= cell.closest('tr');\r\n\r\n\t\t//only remove rowspan if the first cell of a row has no rowspan\r\n\t\tif(row.cells[0].rowSpan==1){\r\n\t\t\t//Loop over the next cells to remove the hidden attribute\r\n\t\t\tfor (var i = 1; i < target.rowSpan; i++) {\r\n\t\t\t\trow = row.nextElementSibling;\r\n\t\t\t\trow.cells[index].classList.remove('hidden');\r\n\t\t\t}\r\n\r\n\t\t\t//Reset the rowSpan\r\n\t\t\ttarget.rowSpan = 1;\r\n\t\t}\r\n\r\n\t\tMain.displayMessage(response);\r\n\t}\r\n}\r\n\r\nfunction showTimeslotModal(selected=''){\r\n\tlet modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\r\n\t// Clear\r\n\tmodal.querySelectorAll('input:not([type=\"hidden\"], [type=\"checkbox\"], [type=\"radio\"])').forEach(el=>el.value='');\r\n\r\n\tif(typeof(selected) == 'object'){\r\n\t\tconsole.log(selected)\r\n\t\tmodal.querySelector('[name=\"schedule_id\"]').value\t\t= selected.closest('.schedules_div').dataset.id;\r\n\t}else{\r\n\t\tlet firstCell\t\t= selected[0].node;\r\n\t\tlet lastCell\t\t= selected[selected.length-1].node;\r\n\r\n\t\tfirstCell.classList.add('active');\r\n\t\tlet rowCount\t\t= document.querySelectorAll('.ui-selected').length;\r\n\t\tapplyRowSpan(firstCell, rowCount);\r\n\r\n\t\t// Only show loader when the cell is empty\r\n\t\tif(!firstCell.matches('.selected')){\r\n\t\t\tMain.showLoader(firstCell.firstChild);\r\n\t\t}\r\n\r\n\t\tlet endTime\t\t\t= firstCell.dataset.endtime;\r\n\t\tif(endTime == undefined){\r\n\t\t\tendTime\t= lastCell.closest('tr').dataset.endtime;\r\n\t\t}\r\n\t\tlet table\t\t\t= firstCell.closest('table');\r\n\t\tlet date\t\t\t= table.rows[0].cells[firstCell.cellIndex].dataset.isodate;\r\n\r\n\t\t//Fill the modal values\r\n\t\tmodal.querySelector('[name=\"date\"]').value\t\t\t\t= date;\r\n\t\tmodal.querySelector('[name=\"olddate\"]').value \t\t\t= date;\r\n\t\tmodal.querySelector('[name=\"starttime\"]').value\t\t\t= firstCell.closest('tr').dataset.starttime;\r\n\t\tmodal.querySelector('[name=\"endtime\"]').value\t\t\t= endTime;\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').classList.remove('add_schedule_row');\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').classList.add('update_schedule');\r\n\t\r\n\t\tlet hostId\t\t\t= firstCell.dataset.host_id;\r\n\t\tlet time\t\t\t= firstCell.dataset.time;\r\n\t\tlet subject\t\t\t= firstCell.dataset.subject;\r\n\t\tlet location\t\t= firstCell.dataset.location;\r\n\t\tlet hostName\t\t= firstCell.dataset.host;\r\n\r\n\t\tif(hostId\t!= undefined){\r\n\t\t\tmodal.querySelector('[name=\"host_id\"]').value\t\t\t= hostId;\r\n\t\t}\r\n\r\n\t\tif(time\t!= undefined){\r\n\t\t\tmodal.querySelector('[name=\"oldtime\"]').value\t\t\t= time;\r\n\t\t}\r\n\r\n\t\tif(subject\t!= undefined){\r\n\t\t\tmodal.querySelector('[name=\"subject\"]').value\t\t\t= subject;\r\n\t\t}\r\n\r\n\t\tif(location\t!= undefined){\r\n\t\t\tmodal.querySelector('[name=\"location\"]').value\t\t\t= location;\r\n\t\t}\r\n\r\n\t\tif(hostName\t!= undefined){\r\n\t\t\tmodal.querySelector('[name=\"host\"]').value\t\t\t\t= hostName;\r\n\t\t}\r\n\t}\r\n\t\r\n\tMain.showModal(modal);\r\n}\r\n\r\nasync function editTimeSlot(selected){\r\n\tlet options\t= {\r\n\t\ttitle: 'What do you want to do?',\r\n\t\ttext: \"Do you want to edit or remove this timeslot?\",\r\n\t\tshowDenyButton: true,\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: 'Edit timeslot',\r\n\t\tdenyButtonText: 'Remove timeslot',\r\n\t}\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar answer = await Swal.fire(options);\r\n\t\r\n\tvar firstCell\t= selected[0].node;\r\n\r\n\t//swap and/or\r\n\tif (answer.isConfirmed) {\r\n\t\t// Show modal and prefill the default fields\r\n\t\tshowTimeslotModal(selected);\r\n\t\t\r\n\t\t//change button text\r\n\t\tvar modal \t\t\t= document.querySelector('[name=\"add_session\"]');\r\n\t\tmodal.querySelector('[name=\"add_timeslot\"]').textContent\t= 'Update time slot';\r\n\t//add new rule after this one\r\n\t}else if (answer.isDenied) {\r\n\t\tremoveHost(firstCell);\r\n\t}\r\n}\r\n\r\n// Show the modal to add a recipe keyword\r\nfunction showRecipeModal(target){\r\n\ttarget.classList.add('active');\r\n\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar heading\t\t\t= table.tHead.rows[0];\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar date\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\tvar startTime\t\t= target.closest('tr').dataset.starttime;\r\n\r\n\t//Fill the modal with the values of the clickes schedule\r\n\tvar recipeModal \t= document.querySelector('[name=\"recipe_keyword_modal\"]');\r\n\r\n\tFormSubmit.formReset(recipeModal.querySelector('form'));\r\n\r\n\trecipeModal.querySelector('[name=\"schedule_id\"]').value \t= table.dataset[\"id\"];\r\n\trecipeModal.querySelector('[name=\"date\"]').value \t\t\t= date;\r\n\trecipeModal.querySelector('[name=\"starttime\"]').value \t\t= startTime;\r\n\r\n\tif(target.textContent != 'Enter recipe keyword'){\r\n\t\trecipeModal.querySelector('[name=\"recipe_keyword\"]').value\t= target.textContent;\r\n\t\tdocument.querySelector('[name=\"add_recipe_keyword\"]').textContent\t= 'Update recipe keywords';\r\n\t}\r\n\t\r\n\tMain.showModal(recipeModal);\r\n}\r\n\r\n//submit the recipe form\r\nasync function submitRecipe(target){\r\n\tvar response = await FormSubmit.submitForm(target, 'events/add_menu');\r\n\r\n\tdocument.querySelector('.active').textContent\t= target.closest('form').querySelector('[name=\"recipe_keyword\"]').value;\r\n\r\n\tdocument.querySelector('.active').classList.remove('active');\r\n\r\n\tMain.hideModals();\r\n\r\n\tMain.displayMessage(response);\r\n}\r\n\r\nfunction loadHostFormdata(target){\r\n\tvar table\t\t\t= target.closest('table');\r\n\tvar scheduleId\t\t= table.dataset[\"id\"];\r\n\tvar heading\t\t\t= table.tHead.rows[0];\r\n\tvar cell\t\t\t= target.closest('td');\r\n\tvar date\t\t\t= heading.cells[cell.cellIndex].dataset.isodate;\r\n\tvar startTime\t\t= target.closest('tr').dataset.starttime;\r\n\r\n\tvar formData\t\t= new FormData();\r\n\tformData.append('date',date);\r\n\tif(cell.dataset.host != null){\r\n\t\tformData.append('host', cell.dataset.host);\r\n\t}else{\r\n\t\tformData.append('host_id', sim.userId);\r\n\t}\r\n\t\r\n\tformData.append('starttime', startTime);\r\n\tformData.append('schedule_id', scheduleId);\r\n\r\n\treturn formData;\r\n}\r\n\r\nasync function checkConfirmation(text){\r\n\tlet options = {\r\n\t\ttitle: 'Are you sure?',\r\n\t\ttext: text+\"?\",\r\n\t\ticon: 'warning',\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\tcancelButtonColor: '#d33',\r\n\t\tconfirmButtonText: 'Yes'\r\n\t};\r\n\r\n\tif(document.fullscreenElement != null){\r\n\t\toptions['target']\t= document.fullscreenElement;\r\n\t}\r\n\r\n\tvar result = await Swal.fire(options);\r\n\t\r\n\tif (result.isConfirmed) {\r\n\t\tdocument.querySelectorAll('.modal:not(.hidden)').forEach(modal=>modal.classList.add('hidden'));\r\n\t\t//display loading gif\r\n\t\tif(target.classList.contains('remove_schedule')){\r\n\t\t\tMain.showLoader(target.closest('.schedules_div'));\r\n\t\t}else{\r\n\t\t\tMain.showLoader(target.firstChild);\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n//hide empty rows on mobile\r\nfunction hideRows() {\r\n\t//only run for smaller screens\r\n\tif (window.innerWidth > 800) return false;\r\n\t\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table tr').forEach(function(tr){\r\n\t\tvar emptyRow = true;\r\n\t\t\r\n\t\t//DO not hide lunch or dinner rows\r\n\t\tif(tr.dataset.starttime != 'dinner' && tr.dataset.starttime != 'lunch'){\r\n\t\t\t//loop over all table cells to see if there is a cell with content\r\n\t\t\ttr.querySelectorAll('td').forEach(function(cell,index){\r\n\t\t\t\tif(index>0 && cell.textContent != 'Available' && cell.textContent != ' '){\r\n\t\t\t\t\temptyRow = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//If non of the cells have content\r\n\t\t\tif(emptyRow ){\r\n\t\t\t\t//hide the row\r\n\t\t\t\ttr.classList.add('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction addSelectable(){\r\n\t//loop over all the schedule tables\r\n\tdocument.querySelectorAll('.sim-table.schedule').forEach(function(table){\r\n\t\t//Add selectable on non-mobile devices or if it is only a lunch and dinner schedule\r\n\t\tif(!Main.isMobileDevice() || table.rows.length < 7){\r\n\t\t\tif(table._selectable != undefined){\r\n\t\t\t\ttable._selectable.destroy();\r\n\t\t\t}\r\n\r\n\t\t\t//Load selectable and attach it to the table\r\n\t\t\ttable._selectable = new Selectable({\r\n\t\t\t   filter:\t\t\".orientation.admin\",\r\n\t\t\t   appendTo:\ttable.querySelector(\"tbody\"),\r\n\t\t\t   lasso: {\r\n\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\tbackgroundColor: \"none\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Run the function afterSelect when selection is final\r\n\t\t\ttable._selectable.on('end', afterSelect);\r\n\t\t}\r\n\t});\r\n\r\n\thideRows();\r\n}\r\n\r\nfunction showEditScheduleModal(target){\r\n\tlet modal\t= document.getElementById('edit_schedule_modal');\r\n\tlet wrapper\t= target.closest('.schedules_div');\r\n\tlet table\t= wrapper.querySelector('table.schedule');\r\n\r\n\tmodal.querySelector(`[name=\"schedule_id\"]`).value\t\t= table.dataset.id;\r\n\tmodal.querySelector(`[name=\"target_id\"]`).value\t\t\t= table.dataset.target_id;\r\n\tmodal.querySelector(`[name=\"target_name\"]`).value\t\t= table.dataset.target;\r\n\tmodal.querySelector(`[name=\"schedule_info\"]`).value\t\t= wrapper.querySelector('.table_title.sub-title').textContent;\r\n\tmodal.querySelector(`[name=\"startdate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"enddate\"]`).value\t\t\t= table.tHead.querySelector('tr').cells[table.tHead.querySelector('tr').cells.length-1].dataset.isodate;\r\n\tmodal.querySelector(`[name=\"skiplunch\"]`).checked\t\t= table.dataset.lunch;\r\n\tmodal.querySelector(`[name=\"skiporientation\"]`).checked\t= table.rows.length<3;\r\n\r\n\tMain.showModal(modal);\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\tconsole.log(\"Schedule.js loaded\");\r\n\t\r\n\taddSelectable();\r\n});\r\n\r\ndocument.addEventListener('click',function(event){\r\n\ttarget = event.target;\r\n\r\n\tif(target.name == 'add_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\taddSchedule(target);\r\n\t}else if(target.name == 'publish_schedule'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tpublishSchedule(target);\r\n\t}else if(target.name == 'add_recipe_keyword'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tsubmitRecipe(target);\r\n\t}else if(target.name == 'add_host' || target.name == 'add_timeslot'){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\taddHost(target);\r\n\t}else if(target.matches('.close') && target.closest('.modal') != null && target.closest('.modal').attributes.name.value == 'add_session'){\r\n\t\tconsole.log(target)\r\n\t\tremoveRowSpan(document.querySelector('td.active'));\r\n\t}else if(target.name == 'add-session'){\r\n\t\tevent.stopPropagation();\r\n\t\tshowTimeslotModal(target);\r\n\t}else if(target.name == 'add-host'){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tMain.showModal(document.querySelector('[name=\"add_host_mobile\"]'));\r\n\t}else if (target.name == 'add_host_mobile' ){\r\n\t\tevent.stopPropagation();\r\n\t\taddHostMobile(target)\r\n\t}\r\n\t\r\n\tif(target.classList.contains('keyword')){\r\n\t\tshowRecipeModal(target);\r\n\t}\r\n\r\n\t//publish the schedule\r\n\tif(target.classList.contains('publish')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tShowPublishScheduleModal(target);\r\n\t}else if(target.classList.contains('remove_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tremoveSchedule(target);\r\n\t}else if(target.matches('.edit_schedule')){\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tshowEditScheduleModal(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', function(event){\r\n\r\n\ttarget = event.target;\r\n\r\n\t//Direct table actions\r\n\tif(target.name=='target_name'){\r\n\t\tvar userid = target.list.querySelector(`[value='${target.value}' i]`).dataset.value;\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"target_id\"]').value\t= userid;\r\n\t}else if(target.name == 'host'){\r\n\t\tlet host\t= target.list.querySelector(`[value=\"${target.value}\"]`);\r\n\t\tlet userId\t= '';\r\n\t\tif(host != null){\r\n\t\t\tuserId\t= host.dataset.userid;\r\n\t\t}\r\n\r\n\t\ttarget.closest('form').querySelector('[name=\"host_id\"]').value\t= userId;\r\n\t}else if(target.name == 'starttime' && target.type == 'radio'){\r\n\t\tif(target.value == '12:00'){\r\n\t\t\ttarget.closest('form').querySelector('.lunch-select-wrapper').classList.remove('hidden');\r\n\t\t\ttarget.closest('form').querySelector('.diner-select-wrapper').classList.add('hidden');\r\n\t\t}else{\r\n\t\t\ttarget.closest('form').querySelector('.diner-select-wrapper').classList.remove('hidden');\r\n\t\t\ttarget.closest('form').querySelector('.lunch-select-wrapper').classList.add('hidden');\r\n\t\t}\r\n\t}\r\n\r\n\tif(target.matches('[name=\"add_session\"] .time')){\r\n\t\t// get the active cell\r\n\t\tlet cell\t\t= document.querySelector('td.active');\r\n\r\n\t\tif(cell == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet table\t\t= cell.closest('table');\r\n\r\n\t\t// validate the time\r\n\t\tif(\r\n\t\t\t(target.name == 'starttime' && table.querySelector(`tr[data-starttime=\"${target.value}\"]`) == null) ||\r\n\t\t\t(target.name == 'endtime' && table.querySelector(`tr[data-endtime=\"${target.value}\"]`) == null) \r\n\t\t){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet form\t\t= target.closest('form');\r\n\t\tlet d\t\t\t= new Date();\r\n\t\tlet starttime\t= form.querySelector('[name=\"starttime\"]').value.split(':');\r\n\t\tstarttime\t\t= new Date(d.getFullYear(), 0, 1, starttime[0], starttime[1]);\r\n\t\tlet endtime\t\t= form.querySelector('[name=\"endtime\"]').value.split(':');\r\n\t\tendtime\t\t\t= new Date(d.getFullYear(), 0, 1, endtime[0], endtime[1]);\r\n\t\t// calculate the quarters between end and starttime\r\n\t\tlet rowSpan\t\t= (endtime-starttime)/1000/60/15\r\n\r\n\t\t// starttime changed\r\n\t\tif(starttime != target.value){\r\n\t\t\t// adjust the current cell\r\n\t\t\tcell.removeAttribute('rowspan');\r\n\t\t\tcell.classList.remove('ui-selected', 'active');\r\n\r\n\t\t\t// find the new cell\r\n\t\t\tlet newRow\t= cell.closest('table').querySelector('tr[data-starttime=\"'+form.querySelector('[name=\"starttime\"]').value+'\"]');\r\n\t\t\tlet newCell\t= newRow.cells[cell.cellIndex];\r\n\r\n\t\t\tnewCell.innerHTML\t= cell.innerHTML;\r\n\t\t\tnewCell.classList.add('ui-selected', 'active');\r\n\t\t\tapplyRowSpan(newCell, rowSpan);\r\n\t\t// endtime changed\r\n\t\t}else{\r\n\t\t\tapplyRowSpan(cell, rowSpan);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction checkIfValidSelection(target, selected, e){\r\n\t//we have selected something and there are no open modals\r\n\tvar openModals\t= document.querySelectorAll('.modal:not(.hidden)');\r\n\tif((selected.length > 0 || target.classList.contains('orientation')) && (openModals == null || openModals.length == 0) ){\t\r\n\t\t//check if selection is valid\r\n\t\tvar columnNr\t= selected[0].node.cellIndex;\r\n\t\tvar firstCell\t= selected[0].node;\r\n\r\n\t\tfor (const selection of selected){\r\n\t\t\tif(columnNr != selection.node.cellIndex){\r\n\t\t\t\tlet options = {\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: \"You can not select times on multiple days!\",\r\n\t\t\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(document.fullscreenElement != null){\r\n\t\t\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tSwal.fire(options);\r\n\r\n\t\t\t\te.target.closest('.sim-table')._selectable.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//We are dealing with a cell with a value\r\n\t\tif(firstCell.classList.contains('selected')){\r\n\t\t\teditTimeSlot(selected);\r\n\t\t}else{\r\n\t\t\tshowTimeslotModal(selected);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//Do something with selected items\r\nfunction afterSelect(e, selected, _unselected){\r\n\ttarget = e.target;\r\n\r\n\t//remove a meal host\r\n\tif(target.matches('.meal.selected.own, .meal.selected.admin')){\r\n\t\tremoveHost(target);\r\n\t//Add a host\r\n\t}else if(target.matches('.meal.admin')){\r\n\t\tshowAddHostModal();\r\n\t//orientation slot\r\n\t}else if(target.matches('.meal:not(.admin, .selected)')){\r\n\t\taddCurrentUserAsHost(target);\r\n\t}else{\r\n\t\tcheckIfValidSelection(target, selected, e); \r\n\t}\r\n}"],"names":["applyRowSpan","target","count","row","closest","index","cellIndex","i","nextElementSibling","cells","classList","add","rowSpan","addHostHtml","response","targetCell","document","querySelector","remove","outerHTML","html","Main","displayMessage","message","addSelectable","hideModals","async","removeHost","text","formData","loadHostFormdata","table","scheduleOwner","dataset","cell","dateStr","rows","date","contains","checkConfirmation","showLoader","firstChild","FormSubmit","fetchRestApi","innerHTML","showTimeslotModal","selected","modal","querySelectorAll","forEach","el","value","console","log","id","firstCell","node","lastCell","length","matches","endTime","endtime","undefined","isodate","starttime","hostId","host_id","time","subject","location","hostName","host","showModal","scheduleId","heading","tHead","startTime","FormData","append","sim","userId","options","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","fullscreenElement","Swal","fire","isConfirmed","isMobileDevice","_selectable","destroy","Selectable","filter","appendTo","lasso","border","backgroundColor","on","afterSelect","window","innerWidth","tr","emptyRow","textContent","hideRows","e","_unselected","showAddHostModal","addCurrentUserAsHost","openModals","columnNr","selection","clear","showDenyButton","denyButtonText","answer","isDenied","editTimeSlot","checkIfValidSelection","addEventListener","event","name","stopPropagation","submitForm","addSchedule","publishSchedule","submitRecipe","form","removeAttribute","newCell","addHost","attributes","removeRowSpan","addHostMobile","recipeModal","formReset","showRecipeModal","click","ShowPublishScheduleModal","removeSchedule","getElementById","wrapper","target_id","checked","lunch","showEditScheduleModal","userid","list","type","d","Date","split","getFullYear"],"sourceRoot":""}