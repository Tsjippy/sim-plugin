{"version":3,"file":"forms_table.min.js","mappings":"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","sources":["webpack://forms/./forms_table.js"],"sourcesContent":["window['remove_form_table_row']\t= function(result,responsdata){\n\tif (result.status >= 200 && result.status < 400) {\n\t\tvar base_query\t= '.form-data-table[data-id=\"'+responsdata.formid+'\"] .table-row[data-id=\"'+responsdata.submissionid+'\"]';\n\t\tif(responsdata.subid != -1){\n\t\t\tdocument.querySelectorAll(base_query+'[data-subid=\"'+responsdata.subid+'\"]').forEach(\n\t\t\t\trow=>{row.remove();}\n\t\t\t);\n\t\t}else{\n\t\t\tdocument.querySelectorAll(base_query).forEach(\n\t\t\t\trow=>{row.remove();}\n\t\t\t);\n\t\t}\n\t}\n}\n\nwindow['changearchivebutton']\t= function(result,responsdata){\n\tif (result.status >= 200 && result.status < 400) {\n\t\t//console.log(responsdata);\n\t\t\n\t\tif(responsdata.message.includes('unarchived')){\n\t\t\tvar buttonclass = 'unarchive';\n\t\t}else{\n\t\t\tvar buttonclass = 'archive';\n\t\t}\n\t\t\n\t\tif(responsdata.subid != -1){\n\t\t\tvar buttons = document.querySelectorAll('.form-data-table[data-id=\"'+responsdata.formid+'\"] .table-row[data-id=\"'+responsdata.submissionid+'\"][data-subid=\"'+responsdata.subid+'\"] .'+buttonclass);\n\t\t}else{\n\t\t\tvar buttons = document.querySelectorAll('.form-data-table[data-id=\"'+responsdata.formid+'\"] .table-row[data-id=\"'+responsdata.submissionid+'\"] .'+buttonclass);\n\t\t}\n\t\t\n\t\tvar loader = document.querySelector('.form-data-table[data-id=\"'+responsdata.formid+'\"] .loadergif');\n\t\tvar loaderhtml = loader.outerHTML;\n\t\t\n\t\t\n\t\t\n\t\tif(responsdata.message.includes('unarchived')){\n\t\t\tloader.parentNode.innerHTML = loader.parentNode.innerHTML.replace(loaderhtml,'<button class=\"archive button table_action\" name=\"archive_action\" value=\"\">Archive</button>');\n\t\t\tconsole.log(loader.parentNode);\n\t\t\t\n\t\t\t\n\t\t\tbuttons.forEach(\n\t\t\t\tbutton=>{\n\t\t\t\t\tbutton.textContent = 'Archive';\n\t\t\t\t\tbutton.classList.replace('unarchive','archive');\n\t\t\t\t}\n\t\t\t);\n\t\t}else{\n\t\t\tloader.parentNode.innerHTML = loader.parentNode.innerHTML.replace(loaderhtml,'<button class=\"unarchive button table_action\" name=\"unarchive_action\">Unarchive</button>');\n\t\t\tbuttons.forEach(\n\t\t\t\tbutton=>{\n\t\t\t\t\tbutton.textContent = 'Unarchive';\n\t\t\t\t\tbutton.classList.replace('archive','unarchive');\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n\nwindow['showforminput']\t\t\t= function(result,responsdata){\n\tvar html\t\t= responsdata.html; \n\t\n\t//if there is a subid, make sure the input shows up on the right place\n\tif(isNaN(responsdata.subid)){\n\t\tvar subid =  '';\n\t}else{\n\t\tvar subid =  '[data-subid=\"'+responsdata.subid+'\"]';\n\t}\n\ttarget_cell\t= document.querySelector('table[data-id=\"'+responsdata.formid+'\"] tr[data-id=\"'+responsdata.submissionid+'\"]'+subid+' td[data-id=\"'+responsdata.cellid+'\"]');\n\t\n\tif(target_cell != null){\n\t\ttarget_cell.innerHTML\t = html;\n\t\tadd_forms_table_input_event_listeners(target_cell);\n\t\t//add a listener for clicks outside the cell\n\t\tdocument.addEventListener('click', outside_forms_table_clicked);\n\t}\n}\n\nwindow['changetablevalue']\t\t= function(result,responsdata){\n\t//if there is a subid, make sure the new value shows up on the right place\n\tif(isNaN(responsdata.subid)){\n\t\tvar subid =  '';\n\t}else{\n\t\tvar subid =  '[data-subid=\"'+responsdata.subid+'\"]';\n\t}\n\tvar target_cells\t= document.querySelectorAll('table[data-id=\"'+responsdata.formid+'\"] tr[data-id=\"'+responsdata.submissionid+'\"]'+subid+' td[data-id=\"'+responsdata.cellid+'\"]');\n\t\n\ttarget_cells.forEach(cell=>{\n\t\tvar value = responsdata.newvalue;\n\t\t//Replace the input element with its value\n\t\tif(value == \"\") value = \"X\";\n\t\tcell.innerHTML = value;\n\t});\n\t\n\t//reset editing indicator\n\teditedel = '';\n}\n\nfunction add_forms_table_input_event_listeners(cell){\n\tvar inputs\t= cell.querySelectorAll('input,select,textarea');\n\t\t\n\tinputs.forEach(inputnode=>{\n\t\t//add old value\n\t\told_value.split(',').forEach(val=>{\n\t\t\tif(inputnode.type == 'checkbox' || inputnode.type == 'radio'){\n\t\t\t\tif(inputnode.value == val.trim()){\n\t\t\t\t\tinputnode.checked = true;\n\t\t\t\t}\n\t\t\t}else if(inputnode.type == 'select'){\n\t\t\t\tinputnode.querySelector('option[value=\"'+val+'\"]').selected = true;\n\t\t\t}else{\n\t\t\t\tinputnode.value\t= old_value;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(inputnode.type == 'select-one'){\n\t\t\tinputnode._niceselect = NiceSelect.bind(inputnode,{searchable: true});\n\t\t}\n\t\t\n\t\t//Add a keyboard\n\t\tinputnode.addEventListener(\"keyup\", function(event){\n\t\t\tif (event.keyCode === 13) {\n\t\t\t\tprocessFormsTableInput(event);\n\t\t\t}\n\t\t});\n\t\t\n\t\t//add a listener for clicks outside the cell\n\t\tdocument.addEventListener('click', outside_forms_table_clicked);\n\t\t\n\t\tif(inputnode.type != 'checkbox' || inputs.length == 1){\n\t\t\tif(inputnode.type == 'date'){\n\t\t\t\tinputnode.addEventListener(\"blur\", function(event){\n\t\t\t\t\t//only process if we added a value\n\t\t\t\t\tif(event.target.value != ''){\n\t\t\t\t\t\tprocessFormsTableInput(event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tinputnode.addEventListener(\"change\", function(event){\n\t\t\t\t\t//only process if we added a value\n\t\t\t\t\tif(event.target.value != ''){\n\t\t\t\t\t\tprocessFormsTableInput(event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tinputnode.focus();\n\t\t}\n\t});\n}\n\nfunction outside_forms_table_clicked(event){\n\tif(event.target.closest('td') != target_cell){\n\t\t//remove as soon as we come here\n\t\tthis.removeEventListener(\"click\", arguments.callee);\n\t\tprocessFormsTableInput(event, target_cell);\n\t}\n}\n\n//function to change a cells contents\nvar editedel = '';\nfunction edit_forms_table_td(target){\n\t//element is already edited\n\tif(editedel == target){\n\t\treturn;\n\t}\n\teditedel\t\t\t= target;\n\tvar table\t\t\t= target.closest('table');\n\tvar formname\t\t= table.dataset.id;\n\n    var nonce\t\t\t= table.dataset.nonce;\n    var submission_id\t= target.closest('tr').dataset.id;\n    var sub_id\t\t\t= target.closest('tr').dataset.subid;\n    var cell_id\t\t\t= target.dataset.id\n    old_text\t\t\t= target.textContent;\n    old_value\t\t\t= target.dataset.original;\n    \n    showLoader(target.firstChild);\n    \n    if (old_value == \"Click to update\" || old_value == \"X\"){\n        old_value = \"\";\n    }\n    \n    //Get original input via AJAX\n    var formdata = new FormData();\n    formdata.append('action', 'get_input_html');\n    formdata.append('formname', formname);\n    formdata.append('updateforminput', nonce);\n    formdata.append('submission_id',submission_id);\n    formdata.append('sub_id',sub_id);\n    formdata.append('fieldname',cell_id);\n    formdata.append('old_value',old_value);\n    sendAJAX(formdata);\n}\n\n//function to get the temp input value and save it over AJAX\nvar running = false;\nfunction processFormsTableInput(event, target){\n\tif(typeof(target)=='undefined'){\n\t\tvar target\t= event.target;\n\t}\n\t\n\tform = target.closest('td');\n\t\n\tif(running == target){\n\t\treturn;\n\t}\n\trunning = target;\n\t\n\tsetTimeout(function(){ running = false;}, 500);\t\n\t\n\tvar value\t\t\t= get_field_value(target,false);\n\tvar table\t\t\t= target.closest('table');\n\tvar submission_id\t= target.closest('tr').dataset.id;\n\tvar subid\t\t\t= target.closest('td').dataset.subid;\n\tvar fieldname\t\t= target.closest('td').dataset.id;\n\t\n\t//remove all event listeners\n\tdocument.removeEventListener(\"click\", outside_forms_table_clicked);\n\t\n\t//Only update when needed\n\tif (value != old_value){\n\t\tshowLoader(target.closest('td').firstChild);\n\t\t\n\t\t//get the updated fieldname from the column header\n\t\tvar formdata = new FormData();\n\t\tformdata.append('action','forms_table_update');\n\t\tformdata.append('table_id',table.dataset.id);\n\t\tformdata.append('shortcodeid',table.dataset[\"shortcodeid\"]);\n\t\tformdata.append('submission_id',submission_id);\n\t\tformdata.append('subid',subid);\n\t\tformdata.append('fieldname',fieldname);\n\t\tformdata.append('newvalue',value);\n\t\tformdata.append('formurl',location.href);\n\t\t\n\t\tsendAJAX(formdata);\n\t}else{\n\t\tconsole.log(value)\n\t\ttarget.closest('td').innerHTML = old_text;\n\t}\n}\n\n//Function to listen to table buttons\nfunction processFomrsTableButtons(target){\n\tvar formdata = new FormData();\n\t\n\tvar table\t\t= target.closest('table');\n\tvar table_row\t= target.closest('tr');\n\tvar show_swal\t= true;\n\t\n\t//Check which button is clicked\n\tif(target.classList.contains('delete')){\n\t\tformdata.append('remove','true');\n\t\ttext \t= 'delete';\n\t}else if(target.classList.contains('archive')){\n\t\tformdata.append('archive',true);\n\t\ttext \t= \"archive\";\n\t\t\n\t\tif(table_row.dataset.subid != undefined){\n\t\t\tshow_swal = false;\n\t\t\tvar fire = false;\n\t\t\tSwal.fire({\n\t\t\t\ttitle: 'What do you want to archive?',\n\t\t\t\ttext: \"Do you want to archive just this one or the whole request?\",\n\t\t\t\ticon: 'question',\n\t\t\t\tshowDenyButton: true,\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonText: 'Just this one',\n\t\t\t\tdenyButtonText: 'The whole request',\n\t\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t\t}).then((result) => {\n\t\t\t\tif (result.isConfirmed) {\n\t\t\t\t\tformdata.append('subid',table_row.dataset.subid);\n\t\t\t\t}\n\t\t\t\tif(result.isDismissed == false){\n\t\t\t\t\t//display loading gif\n\t\t\t\t\tshowLoader(target);\n\t\t\t\t\tformdata.append('action','forms_table_update');\n\t\t\t\t\tformdata.append('table_id',table.dataset.id);\n\t\t\t\t\tformdata.append('submission_id',table_row.dataset.id);\n\t\t\t\t\tformdata.append('shortcodeid',table.dataset.shortcodeid);\n\t\t\t\t\tsendAJAX(formdata);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\t}else if(target.classList.contains('unarchive')){\n\t\tformdata.append('archive',false);\n\t\ttext \t= \"unarchive\";\n\t}else if(target.classList.contains('print')){\n\t\twindow.location.href = window.location.href.split('?')[0]+\"?print=true&table_id=\"+table.dataset.id+\"&submission_id=\"+table_row.querySelector(\"[id='id' i]\").textContent;\n\t}\n\t\n\tif(show_swal == true){\n\t\tSwal.fire({\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"Are you sure you want to \"+text+\" this?\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: \"Yes, \"+text+\" it!\"\n\t\t}).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//display loading gif\n\t\t\t\tshowLoader(target);\n\t\t\t\tformdata.append('action','forms_table_update');\n\t\t\t\tformdata.append('table_id',table.dataset.id);\n\t\t\t\tformdata.append('submission_id',table_row.dataset.id);\n\t\t\t\tformdata.append('shortcodeid',table.dataset.shortcodeid);\n\t\t\t\tsendAJAX(formdata);\n\t\t\t}\n\t\t})\n\t}\n};\n\nfunction hide_column(cell){\n\t// Hide the column\n\tvar table\t\t= cell.closest('table');\n\tvar tablerows\t= table.rows;\n\tfor (let i = 0; i < tablerows.length; i++) {\n\t\ttablerows[i].cells[cell.cellIndex].classList.add('hidden')\n\t}\n\n\t//show the reset button\n\n\tcell.closest('.form-table-wrapper').querySelector('.reset-col-vis').classList.remove('hidden');\n\n\t// store as preference\n\tvar formData\t= new FormData();\n\tformData.append('formname', table.dataset.id);\n\tformData.append('column_name', cell.id);\n\tformData.append('_wpnonce', sim.restnonce);\n\t\n\tfetch(\n\t\tsim.base_url+'/wp-json/sim/v1/save_table_prefs', \n\t\t{\n\t\t\tmethod: 'POST',\n\t\t\tcredentials: 'same-origin',\n\t\t\tbody: formData\n\t\t}\n\t).then(response => response.json())\n\t.then(response => console.log(response))\n\t.catch(err => console.error(err));\n}\n\nfunction show_hidden_columns(target){\n\t//hiden the reset button\n\ttarget.closest('.form-table-wrapper').querySelector('.reset-col-vis').classList.add('hidden');\n\n\t// Show the columns again\n\tvar table\t\t= target.closest('.form-table-wrapper').querySelector('table');\n\ttable.querySelectorAll('th.hidden, td.hidden').forEach(el=>el.classList.remove('hidden'));\n\n\t// store as preference\n\tvar formData\t= new FormData();\n\tformData.append('formname', table.dataset.id);\n\tformData.append('_wpnonce', sim.restnonce);\n\t\n\tfetch(\n\t\tsim.base_url+'/wp-json/sim/v1/delete_table_prefs', \n\t\t{\n\t\t\tmethod: 'POST',\n\t\t\tcredentials: 'same-origin',\n\t\t\tbody: formData\n\t\t}\n\t).then(response => response.json())\n\t.then(response => console.log(response))\n\t.catch(err => console.error(err));\n}\n\ndocument.addEventListener(\"click\", event=>{\n\tvar target = event.target;\n\n\t//Actions\n\tif(target.classList.contains('forms_table_action')){\n\t\tprocessFomrsTableButtons(target);\n\t}\n\t\n\t//show auto archive fields\n\tif(target.name == 'form_settings[autoarchive]'){\n\t\tel = target.closest('.table_rights_wrapper').querySelector('.autoarchivelogic');\n\t\tif(target.value == 'true'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}\n\t\n\t//Open settings modal\n\tif(target.classList.contains('edit_formshortcode_settings')){\n\t\ttarget.parentNode.querySelector('.form_shortcode_settings').classList.remove('hidden');\n\t}\n\t\n\t//Edit data]\n\tvar td = target.closest('td');\n\tif(target.matches('td.edit_forms_table')){\n\t\tedit_forms_table_td(target);\n\t}else if(td != null && td.matches('td.edit_forms_table') && target.tagName != 'INPUT' && target.tagName != 'A' && target.tagName != 'TEXTAREA' && !target.closest('.nice-select') ){\n\t\tedit_forms_table_td(target.closest('td'));\n\t}\n\t\n\t//Hide column\n\tif(target.classList.contains('visibilityicon')){\n\t\tif(target.tagName == 'SPAN'){\n\t\t\ttarget = target.querySelector('img');\n\t\t}\n\n\t\t// Table itself\n\t\tif(target.parentNode.matches('th')){\n\t\t\thide_column(target.parentNode);\n\t\t// Table settings\n\t\t}else{\n\t\t\tif(target.classList.contains('visible')){\n\t\t\t\ttarget.classList.replace('visible','invisible');\n\t\t\t\ttarget.src\t= target.src.replace('visible.png','invisible.png');\n\t\t\t\ttarget.closest('.column_setting_wrapper').querySelector('.visibilitytype').value = 'hide';\n\t\t\t}else{\n\t\t\t\ttarget.classList.replace('invisible','visible');\n\t\t\t\ttarget.src\t= target.src.replace('invisible.png','visible.png');\n\t\t\t\ttarget.closest('.column_setting_wrapper').querySelector('.visibilitytype').value = 'show';\n\t\t\t}\n\t\t}\n\t}\n\n\tif(target.matches('.reset-col-vis')){\n\t\tshow_hidden_columns(target);\n\t}\n});\n\ndocument.addEventListener(\"DOMContentLoaded\",function() {\n\tconsole.log(\"Formstable.js loaded\");\n\t\n\tif(typeof(Sortable) != 'undefined'){\n\t\t//Make the sortable_column_settings_rows div sortable\n\t\tvar options = {\n\t\t\thandle: '.movecontrol',\n\t\t\tanimation: 150,\n\t\t};\n\n\t\tdocument.querySelectorAll('.sortable_column_settings_rows').forEach(el=>{\n\t\t\tSortable.create(el, options);\n\t\t});\n\t}\n});\n\ndocument.addEventListener('change', event=>{\n\tvar target = event.target;\n\n\tif(target.id == 'sim-forms-selector'){\n\t\tdocument.querySelectorAll('.main_form_wrapper').forEach(el=>{\n\t\t\tel.classList.add('hidden');\n\t\t});\n\t\tdocument.getElementById(target.value).classList.remove('hidden');\n\n\t\t// position table\n\t\tposition_table();\n\t}\n});"],"names":["outside_forms_table_clicked","event","target","closest","target_cell","this","removeEventListener","arguments","callee","processFormsTableInput","window","result","responsdata","status","base_query","formid","submissionid","subid","document","querySelectorAll","forEach","row","remove","message","includes","buttonclass","buttons","loader","querySelector","loaderhtml","outerHTML","parentNode","innerHTML","replace","console","log","button","textContent","classList","cell","inputs","html","isNaN","cellid","inputnode","old_value","split","val","type","value","trim","checked","selected","_niceselect","NiceSelect","bind","searchable","addEventListener","keyCode","length","focus","newvalue","editedel","edit_forms_table_td","table","formname","dataset","id","nonce","submission_id","sub_id","cell_id","old_text","original","showLoader","firstChild","formdata","FormData","append","sendAJAX","running","form","setTimeout","get_field_value","fieldname","location","href","contains","table_row","show_swal","text","undefined","Swal","fire","title","icon","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","confirmButtonColor","then","isConfirmed","isDismissed","shortcodeid","cancelButtonColor","processFomrsTableButtons","name","el","add","td","matches","tagName","tablerows","rows","i","cells","cellIndex","formData","sim","restnonce","fetch","base_url","method","credentials","body","response","json","catch","err","error","hide_column","src","show_hidden_columns","options","handle","animation","Sortable","create","getElementById","position_table"],"sourceRoot":""}