{"version":3,"file":"formbuilder.min.js","mappings":"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","sources":["webpack://formFunctions/webpack/universalModuleDefinition","webpack://formFunctions/./formbuilder.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"formFunctions\"] = factory();\n\telse\n\t\troot[\"formFunctions\"] = factory();\n})(self, function() {\nreturn ","/* FUNCTIONS */\nfunction clearFormInputs(){\n\ttry {\n\t\t//Loop to clear the modalform\n\t\tmodal.querySelectorAll('input:not([type=hidden]), select, textarea, [name=insertafter], [name=element_id]').forEach(function(el){\n\t\t\tif(el.type == 'checkbox'){\n\t\t\t\tel.checked = false;\n\t\t\t}else{\n\t\t\t\tel.value = '';\n\t\t\t}\n\n\t\t\tif(el.type == 'textarea' && el.id != ''){\n\t\t\t\tvar editor = tinyMCE.get(el.id);\n\t\t\t\tif(editor != null){\n\t\t\t\t\teditor.setContent('');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(el.type == \"select-one\"){\n\t\t\t\tformFunctions.removeDefaultSelect(el);\n\t\t\t\t\n\t\t\t\tif(el._niceselect != undefined){\n\t\t\t\t\tel._niceselect.clear();\n\t\t\t\t\tel._niceselect.update();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\thide_conditionalfields(modal.querySelector('form'));\n\t}\n\tcatch(err) {\n\t\tconsole.error(err);\n\t}\n}\n\nfunction fixElementNumbering(form){\n\tform.querySelectorAll('.form_element_wrapper').forEach((el, index)=>{\n\t\tel.dataset.priority = index+1;\n\t});\n}\n\nfunction addWarningConditionsForm(response){\n\tif(modal.querySelector('#warning_conditions_form') == null) return;\n\ttry{\n\t\tmodal.querySelector('#warning_conditions_form').innerHTML = response.warning_conditions;\n\n\t\tmodal.querySelectorAll('#warning_conditions_form select').forEach(function(select){\n\t\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\n\t\t});\n\t}catch(err) {\n\t\tconsole.error(err);\n\t}\n}\n\nfunction addConditionsForm(response){\n\t//fill the element conditions tab\n\tmodal.querySelector('.element_conditions_wrapper').innerHTML = response;\n\n\t// Add nice selects\n\tmodal.querySelectorAll('.condition_select').forEach(function(select){\n\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\n\t});\n}\n\n// add new element\nasync function showEmptyModal(target){\n\ttarget.classList.add('clicked');\n\n\tvar formid\t\t\t\t\t= target.dataset.formid;\n\tif(formid == undefined){\n\t\tformid = target.closest('.form_element_wrapper').dataset.formid;\n\t}\n\t\n\tclearFormInputs();\n\t\n\tif(form_element_wrapper != null){\n\t\tmodal.querySelector('[name=\"insertafter\"]').value = form_element_wrapper.dataset.priority;\n\t}\n\t\n\tmodal.querySelector('[name=\"submit_form_element\"]').textContent = modal.querySelector('[name=\"submit_form_element\"]').textContent.replace('Update','Add');\n\t\n\tmodal.querySelector('.element_conditions_wrapper').innerHTML = '<img src=\"'+sim.loading_gif+'\" style=\"display:block; margin:0px auto 0px auto;\">';\n\t\n\tmodal.classList.remove('hidden');\n\n\tvar formdata = new FormData();\n\tformdata.append('elementid','-1');\n\tformdata.append('formid', formid);\n\tvar response = await fetchRestApi('forms/request_form_conditions_html', formdata);\n\n\taddConditionsForm(response);\n}\n\n//edit existing element\nasync function requestEditElementData(target){\n\ttarget.classList.add('clicked');\n\n\tvar elementid\t\t\t\t\t= form_element_wrapper.dataset.id;\n\tvar formid\t\t\t\t\t\t= target.closest('.form_element_wrapper').dataset.formid;\n\tmodal.querySelector('[name=\"element_id\"]').value = form_element_wrapper.dataset.id;\n\tmodal.originalhtml = target.outerHTML;\n\tvar parent\t\t\t= target.parentNode;\n\tshowLoader(target);\n\tparent.querySelector('.loadergif').style.margin = '5px 19px 0px 19px';\n\t\n\tvar formdata = new FormData();\n\tformdata.append('elementid',elementid);\n\tformdata.append('formid',formid);\n\t\n\tvar response = await fetchRestApi('forms/request_form_element', formdata);\n\n\tif(response){\n\t\t//fill the form after we have clicked the edit button\n\t\tclearFormInputs();\n\n\t\taddConditionsForm(response.conditions_html);\n\n\t\taddWarningConditionsForm(response.warning_conditions);\n\n\t\t//parse data\n\t\tvar original = response.original;\n\t\tvar form = modal.querySelector('form');\n\t\tshow_condional_fields(original['type'],form);\n\t\t//loop over all elements in the modal\n\t\tmodal.querySelectorAll('.formbuilder').forEach(function(el){\n\t\t\tif(el.name != null){\n\t\t\t\t//get the elements name\n\t\t\t\tvar name = el.name.replace('formfield[','').replace(']','');\n\t\t\t\t\n\t\t\t\t//Check if there is a value for this element\n\t\t\t\tif(original[name] != undefined && original[name] != ''){\t\t\t\t\t\t\n\t\t\t\t\tif(el.type == 'checkbox'){\n\t\t\t\t\t\tif(original[name]==true){\n\t\t\t\t\t\t\tel.checked = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t/* if(el.name == \"formfield[multiple]\"){\n\t\t\t\t\t\t\tmultiple_changed(el);\n\t\t\t\t\t\t\tform.querySelector('select.formbuilder.array').classList.replace('hidden', 'hide');\n\t\t\t\t\t\t} */\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//set the value\n\t\t\t\t\t\tel.value = original[name];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(el.type == \"select-one\"){\n\t\t\t\t\t\tif(el.selectedOptions.length > 0){\n\t\t\t\t\t\t\tel.selectedOptions[0].defaultSelected = true;\n\n\t\t\t\t\t\t\tif(el._niceselect != 'undefined'){\n\t\t\t\t\t\t\t\tel._niceselect.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(el.classList.contains('wp-editor-area')){\n\t\t\t\t\t\ttinyMCE.get(el.id).setContent(original[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tmodal.querySelector('[name=\"element_id\"]').value = elementid;\n\t\tmodal.querySelector('[name=\"submit_form_element\"]').textContent = modal.querySelector('[name=\"submit_form_element\"]').textContent.replace('Add','Update');\t\t\n\t\tmodal.classList.remove('hidden');\n\t\t\n\t\t//show edit button again\n\t\tvar loader \t\t\t= document.querySelector(`.form_element_wrapper[data-id=\"${elementid}\"][data-formid=\"${formid}\"] .loadergif`);\n\t\tvar template\t\t= document.createElement('template');\n\t\ttemplate.innerHTML\t= modal.originalhtml;\n\t\tvar node\t\t\t= template.content.firstChild;\n\t\t\n\t\tloader.parentNode.replaceChild(node, loader);\n\t}\n}\n\nasync function addFormElement(target){\n\tvar form\t\t= target.closest('form');\n\tvar response\t= await submitForm(target, 'forms/add_formfield');\n\n\tif(response){\n\t\tif(form.querySelector('[name=\"element_id\"]').value == ''){\n\t\t\t//First clear any previous input\n\t\t\tclearFormInputs();\n\t\t\t\n\t\t\t//Add the new element to the form, first convert the received html to nodes\n\t\t\tvar template\t\t= document.createElement('template');\n\t\t\ttemplate.innerHTML\t= response.html;\n\t\t\tvar node\t\t\t= template.content.firstChild;\n\t\t\t\n\t\t\t//insert the node\n\t\t\treferenceNode = document.querySelector('.form_elements .clicked');\n\t\t\treferenceNode.classList.remove('clicked');\n\t\t\treferenceNode.closest('.form_element_wrapper').parentNode.insertBefore(node, referenceNode.closest('.form_element_wrapper').nextSibling);\n\t\t\t\n\t\t\tfixElementNumbering(form);\n\t\t\t\n\t\t\t//add resize listener\n\t\t\tresize_ob.observe(node);\n\t\t}else{\n\t\t\t//Runs after an element update\n\t\t\tdocument.querySelector('.form_elements .clicked').closest('.form_element_wrapper').outerHTML = response.html;\n\t\t}\n\n\t\thide_modals();\n\n\t\tdisplay_message(response.message);\n\t}\n}\n\nasync function sendElementSize(el, widthpercentage){\n\tif(widthpercentage != el.dataset.widthpercentage && Math.abs(widthpercentage - el.dataset.widthpercentage)>5){\n\t\tel.dataset.widthpercentage = widthpercentage;\n\t\t\n\t\t//send new width over AJAX\n\t\tvar remove_form_element_nonce = document.querySelector('[name=\"remove_form_element_nonce\"]').value;\n\t\tvar formdata = new FormData();\n\t\tformdata.append('formid',el.closest('.form_element_wrapper').dataset.formid);\n\t\tformdata.append('elementid',el.closest('.form_element_wrapper').dataset.id);\n\t\tformdata.append('new_width',widthpercentage);\n\t\t\n\t\tresponse = await fetchRestApi('forms/edit_formfield_width', formdata);\n\n\t\tif(response){\n\t\t\thide_modals();\n\n\t\t\tdisplay_message(response);\n\t\t}\n\t}\n}\n\nasync function remove_element(target){\n\tvar parent\t\t\t= target.parentNode;\n\tvar elementwrapper\t= target.closest('.form_element_wrapper');\n\tvar formid\t\t\t= elementwrapper.dataset.formid;\n\tvar elementindex \t= elementwrapper.dataset.id;\n\tvar form\t\t\t= target.closest('form');\n\n\tshowLoader(target);\n\tvar loader\t\t\t= parent.querySelector('.loadergif');\n\tloader.style.paddingRight = '10px';\n\tloader.classList.remove('loadergif');\n\n\tvar formdata = new FormData();\n\tformdata.append('formid',formid);\n\n\tformdata.append('elementindex',elementindex);\n\t\n\tresponse = await fetchRestApi('forms/remove_element', formdata);\n\n\tif(response){\n\t\t//remove the formelement row\n\t\telementwrapper.remove();\n\t\t\n\t\tfixElementNumbering(form);\n\n\t\tdisplay_message(response);\n\t}\n}\n\n //Fires after element reorder\nasync function reorderformelements(event){\n\tif(reordering_busy == false){\n\t\treordering_busy = true;\n\n\t\tvar old_index\t= parseInt(event.item.dataset.priority);\n\n\t\tfixElementNumbering(event.item.closest('form'));\n\t\t\n\t\tvar difference = event.newIndex-event.oldIndex\n\n\t\tvar formdata = new FormData();\n\t\tformdata.append('formid',event.item.dataset.formid);\n\t\tformdata.append('old_index', old_index);\n\t\tformdata.append('new_index',(old_index+difference));\n\t\t\n\t\tvar response\t= await fetchRestApi('forms/reorder_form_elements', formdata);\n\n\t\tif(response){\n\t\t\treordering_busy = false;\n\n\t\t\tdisplay_message(response);\n\t\t}\n\t}else{\n\t\tSwal.fire({\n\t\t\ticon: 'error',\n\t\t\ttitle: 'ordering already in progress, please wait',\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t});\n\t}\n}\n\nasync function saveFormConditions(target){\n\tvar response\t= await submitForm(target, 'forms/save_element_conditions');\n\n\tif(response){\n\t\thide_modals();\n\n\t\tdisplay_message(response);\n\t}\n}\n\nasync function saveFormSettings(target){\n\tvar response\t= await submitForm(target, 'forms/save_form_settings');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tdisplay_message(response);\n\t}\n}\n\nasync function saveFormEmails(target){\n\tvar response\t= await submitForm(target, 'forms/save_form_emails');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tdisplay_message(response);\n\t}\n}\n\n//listen to element size changes\nvar doit;\nconst resize_ob = new ResizeObserver(function(entries) {\n\tvar element = entries[0].target;\n\tif(element.parentNode != undefined){\n\t\tvar width\t= entries[0].contentRect.width\n\t\tvar widthpercentage = Math.round(width/element.parentNode.offsetWidth*100);\n\t\t\n\t\t//Show percentage on screen\n\t\tvar el\t= element.querySelector('.widthpercentage');\n\t\tif(widthpercentage <99){\n\t\t\tel.textContent = widthpercentage+'%';\n\t\t}else if(el != null){\n\t\t\tel.textContent = '';\n\t\t}\n\t\t\n\t\tclearTimeout(doit);\n\t\tdoit = setTimeout(sendElementSize, 500,element,widthpercentage);\n\t}\n});\n\n\n\n//show conditional fields based on on the element type\nfunction show_condional_fields(type, form){\n\thide_conditionalfields(form);\n\t\n\tswitch(type) {\n\t\tcase 'button':\n\t\tcase 'formstep':\n\t\tcase 'label':\n\t\t\tform.querySelector('[name=\"labeltext\"]').classList.replace('hidden', 'hide');\n\t\t\tform.querySelector('[name=\"labeltext\"] .elementtype').textContent = type;\n\t\t\t\n\t\t\tform.querySelectorAll('.labelhide').forEach(function(el){\n\t\t\t\tel.classList.replace('hide','hidden');\n\t\t\t});\n\t\t\t\n\t\t\tbreak;\n\t\tcase 'info':\n\t\t\tform.querySelector('[name=\"infotext\"]').classList.replace('hidden', 'hide');\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'infobox';\n\t\t\tbreak;\n\t\tcase 'radio':\n\t\tcase 'select':\n\t\tcase 'checkbox':\n\t\tcase 'datalist':\n\t\t\t//show manual options field\n\t\t\tform.querySelector('[name=\"valuelist\"]').classList.replace('hidden', 'hide');\n\t\t\t\n\t\t\t//show option array select\n\t\t\tform.querySelector('[name=\"select_options\"]').classList.replace('hidden', 'hide');\n\n\t\t\t//show selected option select\n\t\t\tform.querySelector('[name=\"defaults\"]').classList.replace('hidden', 'hide');\n\t\t\t\n\t\t\tif(type != 'select'){\n\t\t\t\tform.querySelector('[name=\"multiple\"]').classList.replace('hide','hidden');\n\t\t\t}\n\t\t\t\n\t\t\tbreak;\n\t\tcase 'p':\n\t\t\tform.querySelectorAll('[name=\"labeltext\"],[name=\"wrap\"],[name=\"multiple\"],[name=\"defaults\"],[name=\"elementoptions\"]').forEach(div=>div.classList.add('hidden'))\n\t\t\tform.querySelector('[name=\"infotext\"]').classList.replace('hidden', 'hide');\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'Paragraph';\n\t\t\tbreak;\n\t\tcase 'php':\n\t\t\tform.querySelectorAll('[name=\"elementname\"],[name=\"infotext\"],[name=\"labeltext\"],[name=\"wrap\"],[name=\"multiple\"],[name=\"defaults\"],[name=\"elementoptions\"]').forEach(div=>div.classList.add('hidden'))\n\t\t\tform.querySelector('[name=\"functionname\"]').classList.replace('hidden', 'hide');\n\t\t\tbreak;\n\t\tcase 'file':\n\t\tcase 'image':\n\t\t\tform.querySelectorAll('[name=\"functionname\"],[name=\"infotext\"],[name=\"labeltext\"],[name=\"wrap\"],[name=\"defaults\"]').forEach(div=>div.classList.add('hidden'))\n\t\t\tform.querySelector('[name=\"upload-options\"]').classList.replace('hidden', 'hide');\n\n\t\t\tform.querySelectorAll('.filetype').forEach(el=>{el.textContent = type;});\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//console.log(type);\n\t} \n}\n\nfunction hide_conditionalfields(form){\n\t//hide all fields that should be hidden\n\tform.querySelectorAll('.hide').forEach(function(el){\n\t\tel.classList.replace('hide', 'hidden');\n\t});\n\t\n\t//show the default value selector\n\t//form.querySelectorAll('.nice-select.formbuilder.flat').forEach(el=>{el.classList.replace('hidden', 'hide')});\n\t//form.querySelector('select.formbuilder.flat').classList.replace('hidden', 'hide');\n\t\n\t//show the multiple\n\tform.querySelector('[name=\"multiple\"]').classList.replace('hidden', 'hide');\n\n\tform.querySelectorAll('.labelhide').forEach(function(el){\n\t\tel.classList.replace('hidden','hide');\n\t});\n}\n\nfunction show_or_hide_controls(target){\n\tif(target.dataset.action == 'show'){\n\t\tformwrapper.querySelectorAll('.formfieldbutton').forEach(function(el){\n\t\t\tel.classList.remove('hidden');\n\t\t\ttarget.textContent\t= 'Hide form edit controls';\n\t\t\ttarget.dataset.action\t= 'hide';\n\t\t});\n\t\t\n\t\tformwrapper.querySelectorAll('.resizer').forEach(function(el){\n\t\t\tel.classList.add('show');\n\t\t});\n\t\t\n\t\t//hide submit button\n\t\tformwrapper.querySelector('[name=\"submit_form\"]').classList.add('hidden');\n\t\t\n\t}else{\n\t\tformwrapper.querySelectorAll('.formfieldbutton').forEach(function(el){\n\t\t\tel.classList.add('hidden');\n\t\t\ttarget.textContent = 'Show form edit controls';\n\t\t\ttarget.dataset.action\t= 'show';\n\t\t});\n\t\t\n\t\tformwrapper.querySelectorAll('.resizer').forEach(function(el){\n\t\t\tel.classList.remove('show');\n\t\t});\n\t\t\n\t\t//show submit button\n\t\tformwrapper.querySelector('[name=\"submit_form\"]').classList.remove('hidden');\n\t\t}\n}\n\nfunction maybe_remove_element(target){\n\tif(typeof(Swal)=='undefined'){\n\t\tremove_element(target);\n\t}else{\n\t\tSwal.fire({\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"This will remove this element\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: '#3085d6',\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t}).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\tremove_element(target);\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction show_or_hide_condition_fields(target){\n\t//showdefault conditional field\n\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.remove('hidden');\n\t\n\t//hide extra fields\n\ttarget.closest('.rule_row').querySelectorAll('.equation_2, .conditional_field_2').forEach(function(el){\n\t\tel.classList.add('hidden');\n\t});\n\t\n\t//show both extra fields\n\tif(target.dataset.value == '-' || target.dataset.value == '+'){\n\t\ttarget.closest('.rule_row').querySelectorAll('.equation_2, .conditional_field_2').forEach(function(el){\n\t\t\tel.classList.remove('hidden');\n\t\t});\n\t//show extra conditional field\n\t}else if(target.dataset.value != undefined && target.dataset.value.includes('value')){\n\t\ttarget.closest('.rule_row').querySelector('.conditional_field_2').classList.remove('hidden');\n\n\t\t//hide normal conditional value field\n\t\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.add('hidden');\n\t}else if(target.dataset.value != undefined && (\n\t\ttarget.dataset.value.includes('changed') || \n\t\ttarget.dataset.value.includes('clicked') ||\n\t\ttarget.dataset.value.includes('checked')\n\t\t)){\n\t\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.add('hidden');\n\t}\n}\n\nfunction add_condition_rule(target){\n\tvar row\t\t\t\t= target.closest('.rule_row');\n\tvar activebutton\t= row.querySelector('.active');\n\t\t\n\t//there was alreay an next rule and we clicked on the button which was no active\n\tif(activebutton != null && !target.classList.contains('active')){\t\t\n\t\tif(activebutton.textContent == 'AND'){\n\t\t\tvar current\t\t= 'AND';\n\t\t\tvar opposite\t= 'OR';\n\t\t}else{\n\t\t\tvar current\t\t= 'OR';\n\t\t\tvar opposite\t= 'AND';\n\t\t}\n\t\t\n\t\tSwal.fire({\n\t\t\ttitle: 'What do you want to do?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: 'Change '+current+' to '+opposite,\n\t\t\tdenyButtonText: 'Add a new rule',\n\t\t}).then((result) => {\n\t\t\t//swap and/or\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//make other button inactive\n\t\t\t\tactivebutton.classList.remove('active');\n\t\t\t\t\n\t\t\t\t//make the button active\n\t\t\t\ttarget.classList.add('active');\n\t\t\t\t\n\t\t\t\t//store action \n\t\t\t\trow.querySelector('.combinator').value = target.textContent;\n\t\t\t//add new rule after this one\n\t\t\t}else if (result.isDenied) {\n\t\t\t\taddrulerow(row);\n\t\t\t}\n\t\t});\n\t//add new rule at the end\n\t}else{\n\t\taddrulerow(row);\n\t\t\n\t\t//make the button active\n\t\ttarget.classList.add('active');\n\t\t\n\t\t//store action \n\t\trow.querySelector('.combinator').value = target.textContent;\n\t}\n}\n\nfunction addrulerow(row){\n\t//Insert a new rule row\n\tvar clone\t\t= formFunctions.cloneNode(row);\n\t\n\tvar cloneindex\t= parseInt(row.dataset.rule_index) + 1;\n\n\tclone.dataset.rule_index = cloneindex;\n\n\trow.parentNode.insertBefore(clone, row.nextSibling);\n\t\n\tfix_rule_numbering(row.closest('.condition_row'));\n}\n\nfunction add_condition(target){\n\tvar row = target.closest('.condition_row');\n\t\n\tif(target.classList.contains('opposite')){\n\t\tclone = formFunctions.cloneNode(row, false);\n\t}else{\n\t\tclone = formFunctions.cloneNode(row);\n\t}\n\t\n\tvar cloneindex\t= parseInt(row.dataset.condition_index) + 1;\n\n\tclone.dataset.condition_index = cloneindex;\n\t\n\tif(!target.classList.contains('opposite')){\n\t\tclone.querySelectorAll('.active').forEach(function(el){\n\t\t\tel.classList.remove('active');\n\t\t});\n\t}\n\t\n\tif(target.classList.contains('opposite')){\n\t\t//Set values to opposite\n\t\tclone.querySelectorAll('.element_condition').forEach(function(el){\n\t\t\tif(el.tagName == 'SELECT' && el.classList.contains('equation')){\n\t\t\t\t//remove all default selected\n\t\t\t\tformFunctions.removeDefaultSelect(el);\n\t\t\t\t\n\t\t\t\t//get the original value which was lost during cloning\n\t\t\t\tvar original_select = row.querySelector('.equation');\n\t\t\t\tvar selindex = original_select.selectedIndex;\n\t\t\t\t\n\t\t\t\tif(selindex != false){\n\t\t\t\t\t//if odd the select the next one\n\t\t\t\t\tif(selindex % 2){\n\t\t\t\t\t\tel.options[(selindex+1)].defaultSelected = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tel.options[(selindex-1)].defaultSelected = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//reflect changes in niceselect\n\t\t\t\tel._niceselect.update();\n\t\t\t}else if(el.type == 'radio' && el.classList.contains('element_condition') && (el.value == 'show' || el.value == 'hide')){\n\t\t\t\tif(el.checked == false){\n\t\t\t\t\tel.checked = true;\n\t\t\t\t}else{\n\t\t\t\t\tel.checked = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\t//store radio values\n\tvar radio_values = {};\n\trow.querySelectorAll('input[type=\"radio\"]:checked').forEach(input=>{\n\t\tradio_values[input.value]\t= input.value;\n\t});\n\t\t\n\t//insert in page\n\trow.parentNode.insertBefore(clone, row.nextSibling);\n\t\n\tif(!target.classList.contains('opposite')){\n\t\t//remove unnecessy rulerows works only after html insert\n\t\tvar rule_count = clone.querySelectorAll('.rule_row').length;\n\t\tclone.querySelectorAll('.rule_row').forEach(function(rulerow){\n\t\t\t//only keep the last rule (as that one has the + button)\n\t\t\tif(rulerow.dataset.rule_index != rule_count-1){\n\t\t\t\trulerow.remove();\n\t\t\t}else{\n\t\t\t\tfix_rule_numbering(rulerow.closest('.condition_row'));\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//fix numbering\n\tfix_condition_numbering();\n\t\n\t//fix radio's as they get unselected due to same names on insert\n\trow.querySelectorAll('input[type=\"radio\"]').forEach(input=>{\n\t\tif(radio_values[input.value] != undefined){\n\t\t\tinput.checked = true;\n\t\t}\n\t});\n\t\n\t\n\t//hide button\n\ttarget.style.display = 'none';\n}\n\nfunction remove_condition_rule(target){\n\tvar conditionrow = target.closest('.condition_row');\n\t\n\t//count rule rows in this condition row\n\tif(conditionrow.querySelectorAll('.rule_row').length > 1){\n\t\tSwal.fire({\n\t\t\ttitle: 'What do you want to remove?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: `One condition rule`,\n\t\t\tdenyButtonText: `The whole condition`,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t}).then((result) => {\n\t\t\t//remove a rule rowe\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//get the current row\n\t\t\t\tvar rule_row\t\t= target.closest('.rule_row');\n\t\t\t\t\n\t\t\t\t//get the current row index\n\t\t\t\tvar rule_row_index\t= rule_row.dataset.rule_index;\n\t\t\t\t\n\t\t\t\t//Get previous row\n\t\t\t\tvar prev_row\t\t= conditionrow.querySelector('[data-rule_index=\"'+(rule_row_index-1)+'\"]')\n\t\t\t\t\n\t\t\t\tif(prev_row != null){\n\t\t\t\t\t//remove the active class from row above\n\t\t\t\t\tprev_row.querySelectorAll('.active').forEach(el=>el.classList.remove('active'));\n\t\t\t\t\t\n\t\t\t\t\t//clear the hidden input\n\t\t\t\t\tprev_row.querySelector('.combinator').value\t= '';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttarget.closest('.rule_row').remove();\n\t\t\t\t\n\t\t\t\tfix_rule_numbering(conditionrow);\n\t\t\t} else if (result.isDenied) {\n\t\t\t\tconditionrow.remove();\n\t\t\t\tfix_condition_numbering();\n\t\t\t}\n\t\t});\n\t}else{\n\t\tSwal.fire({\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"This will remove this condition\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t}).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\tconditionrow.remove();\n\t\t\t\tfix_condition_numbering();\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction fix_rule_numbering(condition_row){\n\tvar rulerows\t= condition_row.querySelectorAll('.element_conditions_wrapper .rule_row');\n\tvar i = 0;\n\t\n\t//loop over all rules in the condition\n\trulerows.forEach(rulerow =>{\n\t\trulerow.dataset.rule_index = i;\n\t\t\n\t\trulerow.querySelectorAll('.element_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id = el.id.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\n\t\t\t}\n\t\t\t\t\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name = el.name.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\n\t\t\t}\n\t\t});\n\t\t\n\t\ti++;\n\t});\n}\n\nfunction fix_condition_numbering(){\n\tvar conditionrows\t= modal.querySelectorAll('.element_conditions_wrapper .condition_row');\n\tfor (let i = 0; i < conditionrows.length; i++) {\n\t\tconditionrows[i].dataset.condition_index = i;\n\t\t\n\t\tconditionrows[i].querySelectorAll('.element_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id = el.id.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\")\n\t\t\t\tel.id.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\n\t\t\t\tel.id = el.id.replace(/(element_conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\n\t\t\t}\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\");\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\n\t\t\t\tel.name = el.name.replace(/(element_conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction focus_first(){\n\tmodal.scrollTo(0,0);\n\tmodal.querySelector('[name=\"add_form_element_form\"] .nice-select').focus();\n}\n\nreordering_busy = false;\n\ndocument.addEventListener(\"DOMContentLoaded\",function() {\n\tconsole.log(\"Formbuilder.js loaded\");\n\n\t//Make the form_elements div sortable\n\tvar options = {\n\t\thandle: '.movecontrol',\n\t\tanimation: 150,\n\t\tonEnd: reorderformelements\n\t};\n\t\n\tdocument.querySelectorAll('.form_elements').forEach(el=>{Sortable.create(el, options);});\n\t\n\t//Listen to resize events on form_element_wrappers\n\tdocument.querySelectorAll('.resizer').forEach(el=>{resize_ob.observe(el);});\n});\n\n//Catch click events\nwindow.addEventListener(\"click\", event => {\n\tvar target = event.target;\n\t\n\tformwrapper\t\t\t\t= target.closest('.sim_form.wrapper');\n\tform_element_wrapper\t= target.closest('.form_element_wrapper');\n\t\n\tif(formwrapper != null){\n\t\tmodal = formwrapper.querySelector('.add_form_element_modal');\n\t}\n\t\n\t/* ELEMENT ACTIONS */\n\t\n\t//Show form edit controls\n\tif (target.name == 'editform'){\n\t\tshow_or_hide_controls(target);\n\t}\n\t\n\t//open the modal to add an element\n\tif (target.classList.contains('add_form_element') || target.name == 'createform'){\n\t\tshowEmptyModal(target);\n\t}\n\t\n\tif(target.name == 'submit_form_element'){\n\t\taddFormElement(target);\n\t}\n\n\tif(target.name == 'submit_form_condition'){\n\t\tsaveFormConditions(target);\n\t}\n\n\tif(target.name == 'submit_form_setting'){\n\t\tsaveFormSettings(target);\n\t}\n\n\tif(target.name == 'submit_form_emails'){\n\t\tsaveFormEmails(target);\n\t}\n\t\n\t//request form values via AJAX\n\tif (target.classList.contains('edit_form_element')){\n\t\trequestEditElementData(target);\n\t}\n\t\n\tif (target.classList.contains('remove_form_element')){\n\t\tmaybe_remove_element(target);\n\t}\n\t\n\t//actions on element type select\n\tif (target.closest('.elementtype') != null){\n\t\tshow_condional_fields(target.dataset.value, target.closest('form'));\n\t\t//if label type is selected, wrap by default\n\t\tif(target.dataset.value == 'label'){\n\t\t\ttarget.closest('form').querySelector('[name=\"formfield[wrap]\"]').checked\t= true;\n\t\t}\n\t}\n\t\n\t/* ELEMENT CONDITION ACTIONS */\n\t//actions on condition equation select\n\tif (target.closest('.equation') != null){\n\t\tshow_or_hide_condition_fields(target);\n\t}\n\t\n\t//add new conditions_rule\n\tif (target.classList.contains('and_rule') || target.classList.contains('or_rule')){\n\t\tadd_condition_rule(target);\n\t}\n\t\n\t//add new condition row\n\tif (target.classList.contains('add_condition')){\n\t\tadd_condition(target);\n\t}\n\t\n\t//remove  condition row\n\tif (target.classList.contains('remove_condition')){\n\t\tremove_condition_rule(target);\n\t}\n\t\n\t//show copy fields\n\tif (target.classList.contains('showcopyfields')){\n\t\tif(target.checked){\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.remove('hidden');\n\t\t}else{\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('emailtrigger')){\n\t\tel = target.closest('.clone_div').querySelector('.emailfieldcondition');\n\t\tif(target.value == 'fieldchanged'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('fromemail')){\n\t\tdiv1 = target.closest('.clone_div').querySelector('.emailfromfixed');\n\t\tdiv2 = target.closest('.clone_div').querySelector('.emailfromconditional');\n\t\tif(target.value == 'fixed'){\n\t\t\tdiv1.classList.remove('hidden');\n\t\t\tdiv2.classList.add('hidden');\n\t\t}else{\n\t\t\tdiv2.classList.remove('hidden');\n\t\t\tdiv1.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('emailto')){\n\t\tdiv1 = target.closest('.clone_div').querySelector('.emailtofixed');\n\t\tdiv2 = target.closest('.clone_div').querySelector('.emailtoconditional');\n\t\tif(target.value == 'fixed'){\n\t\t\tdiv1.classList.remove('hidden');\n\t\t\tdiv2.classList.add('hidden');\n\t\t}else{\n\t\t\tdiv2.classList.remove('hidden');\n\t\t\tdiv1.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\n\t\tvar value = '';\n\t\tif(target.classList.contains('placeholders')){\n\t\t\tvalue = target.textContent;\n\t\t}else if(target.value != ''){\n\t\t\tvalue = target.value;\n\t\t\ttarget.selectedIndex = '0';\n\t\t}\n\t\t\n\t\tif(value != ''){\n\t\t\tSwal.fire({\n\t\t\t\ticon: 'success',\n\t\t\t\ttitle: 'Copied '+value,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t\ttimer: 1500\n\t\t\t})\n\t\t\tnavigator.clipboard.writeText(value);\n\t\t}\n\t}\n\t\n\t//show auto archive fields\n\tif(target.name == 'settings[autoarchive]'){\n\t\tel = target.closest('.formsettings_wrapper').querySelector('.autoarchivelogic');\n\t\tif(target.value == 'true'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}\n\n\tif(target.name == 'settings[save_in_meta]'){\n\t\ttarget.closest('.sim_form.builder').querySelector('.submit_others_form_wrapper').classList.toggle('hidden');\n\t}\n\n\tif(target.name == 'formfield[mandatory]' && target.checked){\n\t\ttarget.closest('div').querySelector('[name=\"formfield[recommended]\"]').checked=true;\n\t}\n\n\t//copy warning_conditions row\n\tif(target.matches('.warn_cond')){\n\t\t//copy the row\n\t\tvar new_node = formFunctions.cloneNode(target.closest('.warning_conditions'));\n\n\t\tdocument.getElementById('conditions_wrapper').insertAdjacentElement('beforeEnd', new_node);\n\n\t\t//add the active class\n\t\ttarget.classList.add('active');\n\n\t\t//store the value\n\t\ttarget.closest('.warning_conditions').querySelector('.combinator').value = target.value;\n\n\t\tfix_warning_condition_numbering();\n\t}\n\n\tif(target.matches('.remove_warn_cond')){\n\t\ttarget.closest('.warning_conditions').remove();\n\t\tfix_warning_condition_numbering();\n\t}\n\t\n});\n\nwindow.addEventListener('change', ev=>{\n\tif(ev.target.matches('.meta_key')){\n\t\t//if this option has a keys data value\n\t\tvar meta_indexes\t= ev.target.list.querySelector(\"[value='\"+ev.target.value+\"' i]\").dataset.keys;\n\t\tif(meta_indexes != null){\n\t\t\tparent\t= ev.target.closest('.warning_conditions').querySelector('.index_wrapper');\n\t\t\t//show the data key selector\n\t\t\tparent.classList.remove('hidden');\n\t\t\t\n\t\t\tconsole.log(parent);\n\t\t\t//remove all options and add new ones\n\t\t\tvar datalist\t= parent.querySelector('.meta_key_index_list');\n\t\t\tconsole.log(datalist);\n\t\t\tfor(var i=1; i<datalist.options.length; i++) {\n\t\t\t\tdatalist.options[i].remove();\n\t\t\t}\n\n\t\t\t//add the new options\n\t\t\tmeta_indexes.split(',').forEach(key=>{\n\t\t\t\tvar opt\t\t\t= document.createElement('option');\n\t\t\t\topt.value \t\t= key;\n\t\t\t\tdatalist.appendChild(opt);\n\t\t\t});\n\t\t}\n\t}\n});\n\nfunction fix_warning_condition_numbering(){\n\tvar warning_conditions\t= document.querySelectorAll('#conditions_wrapper .warning_conditions');\n\tvar i = 0;\n\t//loop over all rules in the condition\n\twarning_conditions.forEach(condition =>{\n\t\tcondition.dataset.index = i;\n\t\t\n\t\tcondition.querySelectorAll('.warning_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name\t= el.name.replace(/([0-9])+/g,i);\n\t\t\t}\n\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id\t= el.id.replace(/([0-9])+/g,i);\n\t\t\t}\n\n\t\t\tif(el.list != undefined){\n\t\t\t\tel.setAttribute('list', el.list.id.replace(/([0-9])+/g,i));\n\t\t\t}\n\t\t});\n\t\t\n\t\ti++;\n\t});\n}"],"names":["root","factory","exports","module","define","amd","self","doit","clearFormInputs","modal","querySelectorAll","forEach","el","type","checked","value","id","editor","tinyMCE","get","setContent","formFunctions","removeDefaultSelect","undefined","_niceselect","clear","update","hide_conditionalfields","querySelector","err","console","error","fixElementNumbering","form","index","dataset","priority","addConditionsForm","response","innerHTML","select","NiceSelect","bind","searchable","async","sendElementSize","widthpercentage","Math","abs","document","formdata","FormData","append","closest","formid","fetchRestApi","hide_modals","display_message","remove_element","target","parent","parentNode","elementwrapper","elementindex","showLoader","loader","style","paddingRight","classList","remove","reorderformelements","event","reordering_busy","old_index","parseInt","item","difference","newIndex","oldIndex","Swal","fire","icon","title","confirmButtonColor","resize_ob","ResizeObserver","entries","element","width","contentRect","round","offsetWidth","textContent","clearTimeout","setTimeout","show_condional_fields","replace","div","add","addrulerow","row","clone","cloneNode","cloneindex","rule_index","insertBefore","nextSibling","fix_rule_numbering","condition_row","rulerows","i","rulerow","name","fix_condition_numbering","conditionrows","length","condition_index","fix_warning_condition_numbering","warning_conditions","condition","list","setAttribute","addEventListener","log","options","handle","animation","onEnd","Sortable","create","observe","window","formwrapper","form_element_wrapper","action","show_or_hide_controls","contains","sim","loading_gif","showEmptyModal","submitForm","template","createElement","html","node","content","firstChild","referenceNode","outerHTML","message","addFormElement","saveFormConditions","saveFormSettings","saveFormEmails","elementid","originalhtml","margin","conditions_html","addWarningConditionsForm","original","selectedOptions","defaultSelected","replaceChild","requestEditElementData","text","showCancelButton","cancelButtonColor","confirmButtonText","then","result","isConfirmed","maybe_remove_element","includes","show_or_hide_condition_fields","activebutton","current","opposite","showDenyButton","denyButtonText","isDenied","add_condition_rule","tagName","selindex","selectedIndex","radio_values","input","rule_count","display","add_condition","conditionrow","rule_row_index","prev_row","remove_condition_rule","div1","div2","showConfirmButton","timer","navigator","clipboard","writeText","toggle","matches","new_node","getElementById","insertAdjacentElement","ev","meta_indexes","keys","datalist","split","key","opt","appendChild"],"sourceRoot":""}