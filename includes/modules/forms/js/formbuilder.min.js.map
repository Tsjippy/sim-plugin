{"version":3,"file":"formbuilder.min.js","mappings":"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","sources":["webpack://forms/./formbuilder.js"],"sourcesContent":["/* FUNCTIONS */\nfunction clearFormInputs(){\n\ttry {\n\t\t//Loop to clear the modalform\n\t\tmodal.querySelectorAll('input:not([type=hidden]), select, textarea, [name=insertafter], [name=element_id]').forEach(function(el){\n\t\t\tif(el.type == 'checkbox'){\n\t\t\t\tel.checked = false;\n\t\t\t}else{\n\t\t\t\tel.value = '';\n\t\t\t}\n\n\t\t\tif(el.type == 'textarea' && el.id != ''){\n\t\t\t\tvar editor = tinyMCE.get(el.id);\n\t\t\t\tif(editor != null){\n\t\t\t\t\teditor.setContent('');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(el.type == \"select-one\"){\n\t\t\t\tFormFunctions.removeDefaultSelect(el);\n\t\t\t\t\n\t\t\t\tif(el._niceselect != undefined){\n\t\t\t\t\tel._niceselect.clear();\n\t\t\t\t\tel._niceselect.update();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\thideConditionalfields(modal.querySelector('form'));\n\t}\n\tcatch(err) {\n\t\tconsole.error(err);\n\t}\n}\n\nfunction fixElementNumbering(form){\n\tform.querySelectorAll('.form_element_wrapper').forEach((el, index)=>{\n\t\tel.dataset.priority = index+1;\n\t});\n}\n\n// add new element\nasync function showEmptyModal(target){\n\ttarget.classList.add('clicked');\n\n\tvar formId\t\t\t\t\t= target.dataset.formid;\n\tif(formId == undefined){\n\t\tformId = target.closest('.form_element_wrapper').dataset.formid;\n\t}\n\t\n\tclearFormInputs();\n\t\n\tif(formElementWrapper != null){\n\t\tmodal.querySelector('[name=\"insertafter\"]').value = formElementWrapper.dataset.priority;\n\t}\n\t\n\tmodal.querySelector('[name=\"submit_form_element\"]').textContent = modal.querySelector('[name=\"submit_form_element\"]').textContent.replace('Update','Add');\n\t\n\tmodal.querySelector('.element_conditions_wrapper').innerHTML = '<img src=\"'+sim.loadingGif+'\" style=\"display:block; margin:0px auto 0px auto;\">';\n\t\n\tmodal.classList.remove('hidden');\n\n\tvar formData = new FormData();\n\tformData.append('elementid', '-1');\n\tformData.append('formid', formId);\n\tvar response = await FormSubmit.fetchRestApi('forms/request_form_conditions_html', formData);\n\n\t//fill the element conditions tab\n\tmodal.querySelector('.element_conditions_wrapper').innerHTML = response;\n\n\t// Add nice selects\n\tmodal.querySelectorAll('.condition_select').forEach(function(select){\n\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\n\t});\n}\n\n//edit existing element\nasync function requestEditElementData(target){\n\ttarget.classList.add('clicked');\n\n\tvar elementId\t\t= formElementWrapper.dataset.id;\n\tvar formId\t\t\t= target.closest('.form_element_wrapper').dataset.formid;\n\tmodal.querySelector('[name=\"element_id\"]').value = formElementWrapper.dataset.id;\n\tmodal.originalhtml\t= target.outerHTML;\n\n\tvar editButton\t\t= target.outerHTML;\n\n\tvar loader\t\t\t= main.showLoader(target);\n\n\tloader.querySelector('.loadergif').style.margin = '5px 19px 0px 19px';\n\t\n\tvar formData = new FormData();\n\tformData.append('elementid', elementId);\n\tformData.append('formid', formId);\n\t\n\tvar response = await FormSubmit.fetchRestApi('forms/request_form_element', formData);\n\n\tif(response){\n\t\t//fill the form after we have clicked the edit button\n\t\tif(modal.querySelector('[name=\"add_form_element_form\"]') != null){\n\t\t\tmodal.querySelector('[name=\"add_form_element_form\"]').innerHTML = response.elementForm;\n\t\t}\n\n\t\tshowCondionalFields(modal.querySelector('[name=\"formfield[type]\"]').value, modal.querySelector('[name=\"add_form_element_form\"]'));\n\n\t\t//fill the element conditions tab\n\t\tmodal.querySelector('.element_conditions_wrapper').innerHTML = response.conditionsHtml;\n\n\t\t// Add nice selects\n\t\tmodal.querySelectorAll('select').forEach(function(select){\n\t\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\n\t\t});\n\t\t\n\t\tmodal.classList.remove('hidden');\n\t\t\n\t\t//show edit button again\n\t\tloader.outerHTML\t= editButton;\n\t}\n}\n\nasync function addFormElement(target){\n\tvar form\t\t= target.closest('form');\n\tvar response\t= await FormSubmit.submitForm(target, 'forms/add_form_element');\n\n\tif(response){\n\t\tif(form.querySelector('[name=\"element_id\"]').value == ''){\n\t\t\t//First clear any previous input\n\t\t\tclearFormInputs();\n\n\t\t\treferenceNode\t\t= document.querySelector('.form_elements .clicked');\n\t\t\treferenceNode.classList.remove('clicked');\n\t\t\treferenceNode.closest('.form_element_wrapper').insertAdjacentHTML('afterEnd', response.html)\n\t\t\t\n\t\t\tfixElementNumbering(form);\n\t\t\t\n\t\t\t//add resize listener\n\t\t\tform.querySelectorAll('.resizer').forEach(el=>{resizeOb.observe(el);});\n\t\t}else{\n\t\t\t//Runs after an element update\n\t\t\tdocument.querySelector('.form_elements .clicked').closest('.form_element_wrapper').outerHTML = response.html;\n\t\t}\n\n\t\tmain.hideModals();\n\n\t\tmain.displayMessage(response.message);\n\t}\n}\n\nasync function sendElementSize(el, widthPercentage){\n\tif(widthPercentage != el.dataset.widthpercentage && Math.abs(widthPercentage - el.dataset.widthpercentage)>5){\n\t\tel.dataset.widthpercentage = widthPercentage;\n\t\t\n\t\t//send new width over AJAX\n\t\tvar formData = new FormData();\n\t\tformData.append('formid', el.closest('.form_element_wrapper').dataset.formid);\n\t\tformData.append('elementid', el.closest('.form_element_wrapper').dataset.id);\n\t\tformData.append('new_width', widthPercentage);\n\t\t\n\t\tresponse = await FormSubmit.fetchRestApi('forms/edit_formfield_width', formData);\n\n\t\tif(response){\n\t\t\tmain.hideModals();\n\n\t\t\tmain.displayMessage(response);\n\t\t}\n\t}\n}\n\nasync function removeElement(target){\n\tvar parent\t\t\t= target.parentNode;\n\tvar elementWrapper\t= target.closest('.form_element_wrapper');\n\tvar formId\t\t\t= elementWrapper.dataset.formid;\n\tvar elementIndex \t= elementWrapper.dataset.id;\n\tvar form\t\t\t= target.closest('form');\n\n\tmain.showLoader(target);\n\tvar loader\t\t\t= parent.querySelector('.loadergif');\n\tloader.style.paddingRight = '10px';\n\tloader.classList.remove('loadergif');\n\n\tvar formData = new FormData();\n\tformData.append('formid', formId);\n\n\tformData.append('elementindex', elementIndex);\n\t\n\tresponse = await FormSubmit.fetchRestApi('forms/remove_element', formData);\n\n\tif(response){\n\t\t//remove the formelement row\n\t\telementWrapper.remove();\n\t\t\n\t\tfixElementNumbering(form);\n\n\t\tmain.displayMessage(response);\n\t}\n}\n\n //Fires after element reorder\nasync function reorderformelements(event){\n\tif(reorderingBusy == false){\n\t\treorderingBusy = true;\n\n\t\tvar oldIndex\t= parseInt(event.item.dataset.priority);\n\n\t\tfixElementNumbering(event.item.closest('form'));\n\t\t\n\t\tvar difference = event.newIndex-event.oldIndex\n\n\t\tvar formData = new FormData();\n\t\tformData.append('formid', event.item.dataset.formid);\n\t\tformData.append('old_index', oldIndex);\n\t\tformData.append('new_index',(oldIndex + difference));\n\t\t\n\t\tvar response\t= await FormSubmit.fetchRestApi('forms/reorder_form_elements', formData);\n\n\t\tif(response){\n\t\t\treorderingBusy = false;\n\n\t\t\tmain.displayMessage(response);\n\t\t}\n\t}else{\n\t\tSwal.fire({\n\t\t\ticon: 'error',\n\t\t\ttitle: 'ordering already in progress, please wait',\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t});\n\t}\n}\n\nasync function saveFormConditions(target){\n\tvar response\t= await FormSubmit.submitForm(target, 'forms/save_element_conditions');\n\n\tif(response){\n\t\tmain.hideModals();\n\n\t\tmain.displayMessage(response);\n\t}\n}\n\nasync function saveFormSettings(target){\n\tvar response\t= await FormSubmit.submitForm(target, 'forms/save_form_settings');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tmain.displayMessage(response);\n\t}\n}\n\nasync function saveFormEmails(target){\n\tvar response\t= await FormSubmit.submitForm(target, 'forms/save_form_emails');\n\n\tif(response){\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\n\n\t\tmain.displayMessage(response);\n\t}\n}\n\n//listen to element size changes\nvar doit;\nconst resizeOb = new ResizeObserver(function(entries) {\n\tvar element = entries[0].target;\n\tif(element.parentNode != undefined){\n\t\tvar width\t= entries[0].contentRect.width\n\t\tvar widthPercentage = Math.round(width/element.parentNode.offsetWidth * 100);\n\t\t\n\t\t//Show percentage on screen\n\t\tvar el\t= element.querySelector('.widthpercentage');\n\t\tif(widthPercentage <99){\n\t\t\tel.textContent = widthPercentage + '%';\n\t\t}else if(el != null){\n\t\t\tel.textContent = '';\n\t\t}\n\t\t\n\t\tclearTimeout(doit);\n\t\tdoit = setTimeout(sendElementSize, 500, element, widthPercentage);\n\t}\n});\n\n//show conditional fields based on on the element type\nfunction showCondionalFields(type, form){\n\thideConditionalfields(form);\n\t\n\tswitch(type) {\n\t\tcase 'button':\n\t\tcase 'formstep':\n\t\tcase 'label':\n\t\t\tform.querySelector('[name=\"labeltext\"]').classList.replace('hidden', 'hide');\n\t\t\tform.querySelector('[name=\"labeltext\"] .elementtype').textContent = type;\n\t\t\t\n\t\t\tform.querySelectorAll('.labelhide').forEach(function(el){\n\t\t\t\tel.classList.replace('hide','hidden');\n\t\t\t});\n\t\t\t\n\t\t\tbreak;\n\t\tcase 'info':\n\t\t\tform.querySelector('[name=\"infotext\"]').classList.replace('hidden', 'hide');\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'infobox';\n\t\t\tbreak;\n\t\tcase 'radio':\n\t\tcase 'select':\n\t\tcase 'checkbox':\n\t\tcase 'datalist':\n\t\t\t//show manual options field\n\t\t\tform.querySelector('[name=\"valuelist\"]').classList.replace('hidden', 'hide');\n\t\t\t\n\t\t\t//show option array select\n\t\t\tform.querySelector('[name=\"select_options\"]').classList.replace('hidden', 'hide');\n\n\t\t\t//show selected option select\n\t\t\tform.querySelector('[name=\"defaults\"]').classList.replace('hidden', 'hide');\n\t\t\t\n\t\t\tif(type != 'select'){\n\t\t\t\tform.querySelector('[name=\"multiple\"]').classList.replace('hide','hidden');\n\t\t\t}\n\t\t\t\n\t\t\tbreak;\n\t\tcase 'p':\n\t\t\tform.querySelectorAll('[name=\"labeltext\"],[name=\"wrap\"],[name=\"multiple\"],[name=\"defaults\"],[name=\"elementoptions\"]').forEach(div=>div.classList.add('hidden'))\n\t\t\tform.querySelector('[name=\"infotext\"]').classList.replace('hidden', 'hide');\n\t\t\tform.querySelector('[name=\"infotext\"] .type').textContent = 'Paragraph';\n\t\t\tbreak;\n\t\tcase 'php':\n\t\t\tform.querySelectorAll('[name=\"elementname\"],[name=\"infotext\"],[name=\"labeltext\"],[name=\"wrap\"],[name=\"multiple\"],[name=\"defaults\"],[name=\"elementoptions\"]').forEach(div=>div.classList.add('hidden'))\n\t\t\tform.querySelector('[name=\"functionname\"]').classList.replace('hidden', 'hide');\n\t\t\tbreak;\n\t\tcase 'file':\n\t\tcase 'image':\n\t\t\tform.querySelectorAll('[name=\"functionname\"],[name=\"infotext\"],[name=\"labeltext\"],[name=\"wrap\"],[name=\"defaults\"]').forEach(div=>div.classList.add('hidden'))\n\t\t\tform.querySelector('[name=\"upload-options\"]').classList.replace('hidden', 'hide');\n\n\t\t\tform.querySelectorAll('.filetype').forEach(el=>{el.textContent = type;});\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//console.log(type);\n\t} \n}\n\nfunction hideConditionalfields(form){\n\t//hide all fields that should be hidden\n\tform.querySelectorAll('.hide').forEach(function(el){\n\t\tel.classList.replace('hide', 'hidden');\n\t});\n\t\n\t//show the default value selector\n\t//form.querySelectorAll('.nice-select.formbuilder.flat').forEach(el=>{el.classList.replace('hidden', 'hide')});\n\t//form.querySelector('select.formbuilder.flat').classList.replace('hidden', 'hide');\n\t\n\t//show the multiple\n\tform.querySelector('[name=\"multiple\"]').classList.replace('hidden', 'hide');\n\n\tform.querySelectorAll('.labelhide').forEach(function(el){\n\t\tel.classList.replace('hidden','hide');\n\t});\n}\n\nfunction showOrHideControls(target){\n\tif(target.dataset.action == 'show'){\n\t\tformWrapper.querySelectorAll('.formfieldbutton').forEach(function(el){\n\t\t\tel.classList.remove('hidden');\n\t\t\ttarget.textContent\t\t= 'Hide form edit controls';\n\t\t\ttarget.dataset.action\t= 'hide';\n\t\t});\n\t\t\n\t\tformWrapper.querySelectorAll('.resizer').forEach(function(el){\n\t\t\tel.classList.add('show');\n\t\t});\n\t\t\n\t\t//hide submit button\n\t\tformWrapper.querySelector('[name=\"submit_form\"]').classList.add('hidden');\n\t\t\n\t}else{\n\t\tformWrapper.querySelectorAll('.formfieldbutton').forEach(function(el){\n\t\t\tel.classList.add('hidden');\n\t\t\ttarget.textContent \t\t= 'Show form edit controls';\n\t\t\ttarget.dataset.action\t= 'show';\n\t\t});\n\t\t\n\t\tformWrapper.querySelectorAll('.resizer').forEach(function(el){\n\t\t\tel.classList.remove('show');\n\t\t});\n\t\t\n\t\t//show submit button\n\t\tformWrapper.querySelector('[name=\"submit_form\"]').classList.remove('hidden');\n\t}\n}\n\nfunction maybeRemoveElement(target){\n\tif(typeof(Swal)=='undefined'){\n\t\tremoveElement(target);\n\t}else{\n\t\tSwal.fire({\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"This will remove this element\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: '#3085d6',\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t}).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\tremoveElement(target);\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction showOrHideConditionFields(target){\n\t//showdefault conditional field\n\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.remove('hidden');\n\t\n\t//hide extra fields\n\ttarget.closest('.rule_row').querySelectorAll('.equation_2, .conditional_field_2').forEach(function(el){\n\t\tel.classList.add('hidden');\n\t});\n\t\n\t//show both extra fields\n\tif(target.dataset.value == '-' || target.dataset.value == '+'){\n\t\ttarget.closest('.rule_row').querySelectorAll('.equation_2, .conditional_field_2').forEach(function(el){\n\t\t\tel.classList.remove('hidden');\n\t\t});\n\t//show extra conditional field\n\t}else if(target.dataset.value != undefined && target.dataset.value.includes('value')){\n\t\ttarget.closest('.rule_row').querySelector('.conditional_field_2').classList.remove('hidden');\n\n\t\t//hide normal conditional value field\n\t\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.add('hidden');\n\t}else if(target.dataset.value != undefined && (\n\t\t\ttarget.dataset.value.includes('changed') || \n\t\t\ttarget.dataset.value.includes('clicked') ||\n\t\t\ttarget.dataset.value.includes('checked')\n\t\t)){\n\t\ttarget.closest('.rule_row').querySelector('[name*=\"conditional_value\"]').classList.add('hidden');\n\t}\n}\n\nfunction addConditionRule(target){\n\tvar row\t\t\t\t= target.closest('.rule_row');\n\tvar activeButton\t= row.querySelector('.active');\n\t\t\n\t//there was alreay an next rule and we clicked on the button which was no active\n\tif(activeButton != null && !target.classList.contains('active')){\t\t\n\t\tif(activeButton.textContent == 'AND'){\n\t\t\tvar current\t\t= 'AND';\n\t\t\tvar opposite\t= 'OR';\n\t\t}else{\n\t\t\tvar current\t\t= 'OR';\n\t\t\tvar opposite\t= 'AND';\n\t\t}\n\t\t\n\t\tSwal.fire({\n\t\t\ttitle: 'What do you want to do?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: `Change ${current} to ${opposite}`,\n\t\t\tdenyButtonText: 'Add a new rule',\n\t\t}).then((result) => {\n\t\t\t//swap and/or\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//make other button inactive\n\t\t\t\tactiveButton.classList.remove('active');\n\t\t\t\t\n\t\t\t\t//make the button active\n\t\t\t\ttarget.classList.add('active');\n\t\t\t\t\n\t\t\t\t//store action \n\t\t\t\trow.querySelector('.combinator').value = target.textContent;\n\t\t\t//add new rule after this one\n\t\t\t}else if (result.isDenied) {\n\t\t\t\taddRuleRow(row);\n\t\t\t}\n\t\t});\n\t//add new rule at the end\n\t}else{\n\t\taddRuleRow(row);\n\t\t\n\t\t//make the button active\n\t\ttarget.classList.add('active');\n\t\t\n\t\t//store action \n\t\trow.querySelector('.combinator').value = target.textContent;\n\t}\n}\n\nfunction addRuleRow(row){\n\t//Insert a new rule row\n\tvar clone\t\t= FormFunctions.cloneNode(row);\n\t\n\tvar cloneIndex\t= parseInt(row.dataset.rule_index) + 1;\n\n\tclone.dataset.rule_index = cloneIndex;\n\n\trow.parentNode.insertBefore(clone, row.nextSibling);\n\t\n\tfixRuleNumbering(row.closest('.condition_row'));\n}\n\nfunction addCondition(target){\n\tvar row = target.closest('.condition_row');\n\t\n\tif(target.classList.contains('opposite')){\n\t\tclone = FormFunctions.cloneNode(row, false);\n\t}else{\n\t\tclone = FormFunctions.cloneNode(row);\n\t}\n\t\n\tvar cloneIndex\t= parseInt(row.dataset.condition_index) + 1;\n\n\tclone.dataset.condition_index = cloneIndex;\n\t\n\tif(!target.classList.contains('opposite')){\n\t\tclone.querySelectorAll('.active').forEach(function(el){\n\t\t\tel.classList.remove('active');\n\t\t});\n\t}\n\t\n\tif(target.classList.contains('opposite')){\n\t\t//Set values to opposite\n\t\tclone.querySelectorAll('.element_condition').forEach(function(el){\n\t\t\tif(el.tagName == 'SELECT' && el.classList.contains('equation')){\n\t\t\t\t//remove all default selected\n\t\t\t\tFormFunctions.removeDefaultSelect(el);\n\t\t\t\t\n\t\t\t\t//get the original value which was lost during cloning\n\t\t\t\tvar originalSelect \t= row.querySelector('.equation');\n\t\t\t\tvar selIndex\t\t= originalSelect.selectedIndex;\n\t\t\t\t\n\t\t\t\tif(selIndex != false){\n\t\t\t\t\t//if odd the select the next one\n\t\t\t\t\tif(selIndex % 2){\n\t\t\t\t\t\tel.options[(selIndex + 1)].defaultSelected = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tel.options[(selIndex - 1)].defaultSelected = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//reflect changes in niceselect\n\t\t\t\tel._niceselect.update();\n\t\t\t}else if(el.type == 'radio' && el.classList.contains('element_condition') && (el.value == 'show' || el.value == 'hide')){\n\t\t\t\tif(el.checked == false){\n\t\t\t\t\tel.checked = true;\n\t\t\t\t}else{\n\t\t\t\t\tel.checked = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\t//store radio values\n\tvar radioValues = {};\n\trow.querySelectorAll('input[type=\"radio\"]:checked').forEach(input=>{\n\t\tradioValues[input.value]\t= input.value;\n\t});\n\t\t\n\t//insert in page\n\trow.parentNode.insertBefore(clone, row.nextSibling);\n\t\n\tif(!target.classList.contains('opposite')){\n\t\t//remove unnecessy rulerows works only after html insert\n\t\tvar ruleCount = clone.querySelectorAll('.rule_row').length;\n\t\tclone.querySelectorAll('.rule_row').forEach(function(ruleRow){\n\t\t\t//only keep the last rule (as that one has the + button)\n\t\t\tif(ruleRow.dataset.rule_index != ruleCount - 1){\n\t\t\t\truleRow.remove();\n\t\t\t}else{\n\t\t\t\tfixRuleNumbering(ruleRow.closest('.condition_row'));\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//fix numbering\n\tfixConditionNumbering();\n\t\n\t//fix radio's as they get unselected due to same names on insert\n\trow.querySelectorAll('input[type=\"radio\"]').forEach(input=>{\n\t\tif(radioValues[input.value] != undefined){\n\t\t\tinput.checked = true;\n\t\t}\n\t});\n\t\n\t\n\t//hide button\n\ttarget.style.display = 'none';\n}\n\nfunction removeConditionRule(target){\n\tvar conditionRow = target.closest('.condition_row');\n\t\n\t//count rule rows in this condition row\n\tif(conditionRow.querySelectorAll('.rule_row').length > 1){\n\t\tSwal.fire({\n\t\t\ttitle: 'What do you want to remove?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: `One condition rule`,\n\t\t\tdenyButtonText: `The whole condition`,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t}).then((result) => {\n\t\t\t//remove a rule rowe\n\t\t\tif (result.isConfirmed) {\n\t\t\t\t//get the current row\n\t\t\t\tvar ruleRow\t\t= target.closest('.rule_row');\n\t\t\t\t\n\t\t\t\t//get the current row index\n\t\t\t\tvar ruleRowIndex\t= ruleRow.dataset.rule_index;\n\t\t\t\t\n\t\t\t\t//Get previous row\n\t\t\t\tvar prevRow\t\t= conditionrow.querySelector('[data-rule_index=\"'+(ruleRowIndex - 1)+'\"]')\n\t\t\t\t\n\t\t\t\tif(prevRow != null){\n\t\t\t\t\t//remove the active class from row above\n\t\t\t\t\tprevRow.querySelectorAll('.active').forEach(el=>el.classList.remove('active'));\n\t\t\t\t\t\n\t\t\t\t\t//clear the hidden input\n\t\t\t\t\tprevRow.querySelector('.combinator').value\t= '';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttarget.closest('.rule_row').remove();\n\t\t\t\t\n\t\t\t\tfixRuleNumbering(conditionRow);\n\t\t\t} else if (result.isDenied) {\n\t\t\t\tconditionrow.remove();\n\t\t\t\tfixConditionNumbering();\n\t\t\t}\n\t\t});\n\t}else{\n\t\tSwal.fire({\n\t\t\ttitle: 'Are you sure?',\n\t\t\ttext: \"This will remove this condition\",\n\t\t\ticon: 'warning',\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: \"#bd2919\",\n\t\t\tcancelButtonColor: '#d33',\n\t\t\tconfirmButtonText: 'Yes, delete it!'\n\t\t}).then((result) => {\n\t\t\tif (result.isConfirmed) {\n\t\t\t\tconditionRow.remove();\n\t\t\t\tfixConditionNumbering();\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction fixRuleNumbering(conditionRow){\n\tvar ruleRows\t= conditionRow.querySelectorAll('.element_conditions_wrapper .rule_row');\n\tvar i = 0;\n\t\n\t//loop over all rules in the condition\n\truleRows.forEach(ruleRow =>{\n\t\truleRow.dataset.rule_index = i;\n\t\t\n\t\truleRow.querySelectorAll('.element_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id = el.id.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\n\t\t\t}\n\t\t\t\t\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name = el.name.replace(/([0-9]+\\]\\[rules\\]\\[)[0-9]+/g,\"$1\"+i);\n\t\t\t}\n\t\t});\n\t\t\n\t\ti++;\n\t});\n}\n\nfunction fixConditionNumbering(){\n\tvar conditionRows\t= modal.querySelectorAll('.element_conditions_wrapper .condition_row');\n\tfor (let i = 0; i < conditionRows.length; i++) {\n\t\tconditionRows[i].dataset.condition_index = i;\n\t\t\n\t\tconditionRows[i].querySelectorAll('.element_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id = el.id.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\")\n\t\t\t\tel.id.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\n\t\t\t\tel.id = el.id.replace(/(element_conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\n\t\t\t}\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[rules\\]\\[[0-9]+)/g,i+\"$1\");\n\t\t\t\tel.name = el.name.replace(/[0-9]+(\\]\\[action\\])/g,i+\"$1\");\n\t\t\t\tel.name = el.name.replace(/(element_conditions\\[)[0-9]+\\]\\[+/g,\"$1\"+i+'][');\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction focusFirst(){\n\tmodal.scrollTo(0,0);\n\tmodal.querySelector('[name=\"add_form_element_form\"] .nice-select').focus();\n}\n\nreorderingBusy = false;\ndocument.addEventListener(\"DOMContentLoaded\",function() {\n\tconsole.log(\"Formbuilder.js loaded\");\n\n\t//Make the form_elements div sortable\n\tvar options = {\n\t\thandle: '.movecontrol',\n\t\tanimation: 150,\n\t\tonEnd: reorderformelements\n\t};\n\t\n\tdocument.querySelectorAll('.form_elements').forEach(el=>{Sortable.create(el, options);});\n\t\n\t//Listen to resize events on form_element_wrappers\n\tdocument.querySelectorAll('.resizer').forEach(el=>{resizeOb.observe(el);});\n});\n\n//Catch click events\nwindow.addEventListener(\"click\", event => {\n\tvar target = event.target;\n\t\n\tformWrapper\t\t\t\t= target.closest('.sim_form.wrapper');\n\tformElementWrapper\t\t= target.closest('.form_element_wrapper');\n\t\n\tif(formWrapper != null){\n\t\tmodal = formWrapper.querySelector('.add_form_element_modal');\n\t}\n\t\n\t/* ELEMENT ACTIONS */\n\t\n\t//Show form edit controls\n\tif (target.name == 'editform'){\n\t\tshowOrHideControls(target);\n\t}\n\t\n\t//open the modal to add an element\n\tif (target.classList.contains('add_form_element') || target.name == 'createform'){\n\t\tshowEmptyModal(target);\n\t}\n\t\n\tif(target.name == 'submit_form_element'){\n\t\tevent.stopPropagation();\n\t\taddFormElement(target);\n\t}\n\n\tif(target.name == 'submit_form_condition'){\n\t\tsaveFormConditions(target);\n\t}\n\n\tif(target.name == 'submit_form_setting'){\n\t\tsaveFormSettings(target);\n\t}\n\n\tif(target.name == 'submit_form_emails'){\n\t\tsaveFormEmails(target);\n\t}\n\t\n\t//request form values via AJAX\n\tif (target.classList.contains('edit_form_element')){\n\t\trequestEditElementData(target);\n\t}\n\t\n\tif (target.classList.contains('remove_form_element')){\n\t\tmaybeRemoveElement(target);\n\t}\n\t\n\t//actions on element type select\n\tif (target.closest('.elementtype') != null){\n\t\tshowCondionalFields(target.dataset.value, target.closest('form'));\n\t\t//if label type is selected, wrap by default\n\t\tif(target.dataset.value == 'label'){\n\t\t\ttarget.closest('form').querySelector('[name=\"formfield[wrap]\"]').checked\t= true;\n\t\t}\n\t}\n\t\n\t/* ELEMENT CONDITION ACTIONS */\n\t//actions on condition equation select\n\tif (target.closest('.equation') != null){\n\t\tshowOrHideConditionFields(target);\n\t}\n\t\n\t//add new conditions_rule\n\tif (target.classList.contains('and_rule') || target.classList.contains('or_rule')){\n\t\taddConditionRule(target);\n\t}\n\t\n\t//add new condition row\n\tif (target.classList.contains('add_condition')){\n\t\taddCondition(target);\n\t}\n\t\n\t//remove  condition row\n\tif (target.classList.contains('remove_condition')){\n\t\tremoveConditionRule(target);\n\t}\n\t\n\t//show copy fields\n\tif (target.classList.contains('showcopyfields')){\n\t\tif(target.checked){\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.remove('hidden');\n\t\t}else{\n\t\t\ttarget.closest('.copyfieldswrapper').querySelector('.copyfields').classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('emailtrigger')){\n\t\tel = target.closest('.clone_div').querySelector('.emailfieldcondition');\n\t\tif(target.value == 'fieldchanged'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('fromemail')){\n\t\tdiv1 = target.closest('.clone_div').querySelector('.emailfromfixed');\n\t\tdiv2 = target.closest('.clone_div').querySelector('.emailfromconditional');\n\t\tif(target.value == 'fixed'){\n\t\t\tdiv1.classList.remove('hidden');\n\t\t\tdiv2.classList.add('hidden');\n\t\t}else{\n\t\t\tdiv2.classList.remove('hidden');\n\t\t\tdiv1.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('emailto')){\n\t\tdiv1 = target.closest('.clone_div').querySelector('.emailtofixed');\n\t\tdiv2 = target.closest('.clone_div').querySelector('.emailtoconditional');\n\t\tif(target.value == 'fixed'){\n\t\t\tdiv1.classList.remove('hidden');\n\t\t\tdiv2.classList.add('hidden');\n\t\t}else{\n\t\t\tdiv2.classList.remove('hidden');\n\t\t\tdiv1.classList.add('hidden');\n\t\t}\n\t}\n\t\n\tif(target.classList.contains('placeholderselect') || target.classList.contains('placeholders')){\n\t\tvar value = '';\n\t\tif(target.classList.contains('placeholders')){\n\t\t\tvalue = target.textContent;\n\t\t}else if(target.value != ''){\n\t\t\tvalue = target.value;\n\t\t\ttarget.selectedIndex = '0';\n\t\t}\n\t\t\n\t\tif(value != ''){\n\t\t\tSwal.fire({\n\t\t\t\ticon: 'success',\n\t\t\t\ttitle: 'Copied '+value,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t\ttimer: 1500\n\t\t\t})\n\t\t\tnavigator.clipboard.writeText(value);\n\t\t}\n\t}\n\t\n\t//show auto archive fields\n\tif(target.name == 'settings[autoarchive]'){\n\t\tel = target.closest('.formsettings_wrapper').querySelector('.autoarchivelogic');\n\t\tif(target.value == 'true'){\n\t\t\tel.classList.remove('hidden');\n\t\t}else{\n\t\t\tel.classList.add('hidden');\n\t\t}\n\t}\n\n\tif(target.name == 'settings[save_in_meta]'){\n\t\ttarget.closest('.sim_form.builder').querySelector('.submit_others_form_wrapper').classList.toggle('hidden');\n\t}\n\n\tif(target.name == 'formfield[mandatory]' && target.checked){\n\t\ttarget.closest('div').querySelector('[name=\"formfield[recommended]\"]').checked=true;\n\t}\n\n\t//copy warning_conditions row\n\tif(target.matches('.warn_cond')){\n\t\t//copy the row\n\t\tvar newNode = FormFunctions.cloneNode(target.closest('.warning_conditions'));\n\n\t\ttarget.closest('.conditions_wrapper').insertAdjacentElement('beforeEnd', newNode);\n\n\t\t//add the active class\n\t\ttarget.classList.add('active');\n\n\t\t//store the value\n\t\ttarget.closest('.warning_conditions').querySelector('.combinator').value = target.value;\n\n\t\tfixWarningConditionNumbering(target.closest('.conditions_wrapper'));\n\t}\n\n\tif(target.matches('.remove_warn_cond')){\n\t\tvar condition\t= target.closest('.warning_conditions');\n\n\t\t// Remove the active class of the previous conditions\n\t\tif(condition.nextElementSibling == null){\n\t\t\tconsole.log(condition.previousElementSibling);\n\t\t\tcondition.previousElementSibling.querySelector('.active').classList.remove('active');\n\n\t\t\t//clear the value\n\t\t\tcondition.previousElementSibling.querySelector('.combinator').value='';\n\t\t}\n\n\t\t// remove the condition\n\t\tcondition.remove();\n\n\t\tfixWarningConditionNumbering(target.closest('.conditions_wrapper'));\n\t}\n\t\n});\n\nwindow.addEventListener('change', ev=>{\n\tif(ev.target.matches('.meta_key')){\n\t\t//if this option has a keys data value\n\t\tvar metaIndexes\t= ev.target.list.querySelector(\"[value='\"+ev.target.value+\"' i]\").dataset.keys;\n\t\tif(metaIndexes != null){\n\t\t\tparent\t= ev.target.closest('.warning_conditions').querySelector('.index_wrapper');\n\t\t\t//show the data key selector\n\t\t\tparent.classList.remove('hidden');\n\t\t\t\n\t\t\t//remove all options and add new ones\n\t\t\tvar datalist\t= parent.querySelector('.meta_key_index_list');\n\t\t\tfor(var i=1; i<datalist.options.length; i++) {\n\t\t\t\tdatalist.options[i].remove();\n\t\t\t}\n\n\t\t\t//add the new options\n\t\t\tmetaIndexes.split(',').forEach(key=>{\n\t\t\t\tvar opt\t\t\t= document.createElement('option');\n\t\t\t\topt.value \t\t= key;\n\t\t\t\tdatalist.appendChild(opt);\n\t\t\t});\n\t\t}\n\t}\n});\n\nfunction fixWarningConditionNumbering(parent){\n\tvar warningConditions\t= parent.querySelectorAll('.warning_conditions');\n\tvar i = 0;\n\t//loop over all rules in the condition\n\twarningConditions.forEach(condition =>{\n\t\tcondition.dataset.index = i;\n\t\t\n\t\tcondition.querySelectorAll('.warning_condition').forEach(function(el){\n\t\t\t//fix numbering\n\t\t\tif(el.name != undefined){\n\t\t\t\tel.name\t= el.name.replace(/([0-9])+/g,i);\n\t\t\t}\n\n\t\t\tif(el.id != undefined){\n\t\t\t\tel.id\t= el.id.replace(/([0-9])+/g,i);\n\t\t\t}\n\n\t\t\tif(el.list != undefined){\n\t\t\t\tel.setAttribute('list', el.list.id.replace(/([0-9])+/g,i));\n\t\t\t}\n\t\t});\n\t\t\n\t\ti++;\n\t});\n}"],"names":["clearFormInputs","modal","querySelectorAll","forEach","el","type","checked","value","id","editor","tinyMCE","get","setContent","FormFunctions","removeDefaultSelect","undefined","_niceselect","clear","update","hideConditionalfields","querySelector","err","console","error","fixElementNumbering","form","index","dataset","priority","async","sendElementSize","widthPercentage","widthpercentage","Math","abs","formData","FormData","append","closest","formid","response","FormSubmit","fetchRestApi","main","hideModals","displayMessage","removeElement","target","parent","parentNode","elementWrapper","formId","elementIndex","showLoader","loader","style","paddingRight","classList","remove","reorderformelements","event","reorderingBusy","oldIndex","parseInt","item","difference","newIndex","Swal","fire","icon","title","confirmButtonColor","doit","resizeOb","ResizeObserver","entries","element","width","contentRect","round","offsetWidth","textContent","clearTimeout","setTimeout","showCondionalFields","replace","div","add","addRuleRow","row","clone","cloneNode","cloneIndex","rule_index","insertBefore","nextSibling","fixRuleNumbering","conditionRow","ruleRows","i","ruleRow","name","fixConditionNumbering","conditionRows","length","condition_index","fixWarningConditionNumbering","warningConditions","condition","list","setAttribute","document","addEventListener","log","options","handle","animation","onEnd","Sortable","create","observe","window","formWrapper","formElementWrapper","action","showOrHideControls","contains","innerHTML","sim","loadingGif","select","NiceSelect","bind","searchable","showEmptyModal","stopPropagation","submitForm","referenceNode","insertAdjacentHTML","html","outerHTML","message","addFormElement","saveFormConditions","saveFormSettings","saveFormEmails","elementId","originalhtml","editButton","margin","elementForm","conditionsHtml","requestEditElementData","text","showCancelButton","cancelButtonColor","confirmButtonText","then","result","isConfirmed","maybeRemoveElement","includes","showOrHideConditionFields","activeButton","current","opposite","showDenyButton","denyButtonText","isDenied","addConditionRule","tagName","selIndex","selectedIndex","defaultSelected","radioValues","input","ruleCount","display","addCondition","ruleRowIndex","prevRow","conditionrow","removeConditionRule","div1","div2","showConfirmButton","timer","navigator","clipboard","writeText","toggle","matches","newNode","insertAdjacentElement","nextElementSibling","previousElementSibling","ev","metaIndexes","keys","datalist","split","key","opt","createElement","appendChild"],"sourceRoot":""}