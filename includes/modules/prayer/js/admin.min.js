(()=>{"use strict";function e(e){Array.from(e.options).forEach((function(e){e.defaultSelected=!1}))}let t=[];function l(l){let r=function(l,r=!0){!function(l){l.querySelectorAll("select").forEach((t=>{-1!=t.selectedIndex&&(t.options[t.selectedIndex].defaultSelected||e(t)),t.selectedOptions.length>0&&(t.selectedOptions[0].defaultSelected=!0),t._niceselect.destroy()})),"undefined"!=typeof tinymce&&l.querySelectorAll(".wp-editor-area").forEach((e=>{let l=tinymce.get(e.id);null!=l&&(t[e.id]=l.settings,l.save(),l.remove())}))}(l);let n=l.cloneNode(!0);return l.querySelectorAll("select").forEach((e=>{e._niceselect=NiceSelect.bind(e,{searchable:!0}),""==e.value&&e._niceselect.clear()})),l.querySelectorAll(".wp-editor-area").forEach((e=>{tinymce.init(t[e.id])})),r?n.querySelectorAll("input,select,textarea").forEach((t=>{"checkbox"==t.type||"radio"==t.type?t.checked=!1:"hidden"!=t.type&&(t.value=""),"select-one"==t.type&&(e(t),t._niceselect=NiceSelect.bind(t,{searchable:!0}),t._niceselect.clear())})):n.querySelectorAll("select").forEach((e=>{e._niceselect=NiceSelect.bind(e,{searchable:!0})})),n}(l);r.querySelectorAll(".upload-files").forEach((function(e){e.dataset.index=nodeNr})),r.querySelectorAll(".documentpreview").forEach((function(e){e.innerHTML=""}));let n=0;if(r.querySelectorAll("select").forEach((e=>{let t=l.getElementsByTagName("select")[n].selectedIndex;e.options[t].style.display="none",e._niceselect.update(),e.nextSibling.querySelector(".current").textContent="Select an option",n++})),null==l.querySelector(".remove")){let e=r.querySelector(".add"),t=`<button type="button" class="${e.className.replace("add","remove")}" id="${e.id.replace("add","remove")}" style="flex: 1;">${e.textContent.replace("Add","Remove this").replace("an","").replace("+","-")}</button>`;l.querySelector(".buttonwrapper").insertAdjacentHTML("beforeend",t),r.querySelector(".buttonwrapper").insertAdjacentHTML("beforeend",t)}return l.parentNode.insertBefore(r,l.nextSibling),r}function r(e){e.querySelectorAll(":scope > .clone_div").forEach(((e,t)=>{""!=e.id&&(e.id=e.id.replace(/(\d)/g,t)),null!=e.dataset.divid&&(e.dataset.divid=t),e.querySelectorAll("h3, h4").forEach((e=>{e.textContent=e.textContent.replace(/(\d)/g,t+1)})),e.querySelectorAll("legend").forEach((e=>{e.innerHTML=e.innerHTML.replace(/ (\d)/g," "+(t+1))})),e.querySelectorAll("input,select,textarea").forEach((e=>{e.classList.contains("nice-select-search")||(""!=e.id&&null!=e.id&&(e.id=e.id.replace(/(\d)/g,t)),""!=e.name&&null!=e.name&&(e.name=e.name.replace(/(\d)/g,t)),"button"==e.type&&(e.value=e.value.replace(/\d/g,t)))}))}))}function n(e){let t=e.closest(".clone_div"),l=t.closest(".clone_divs_wrapper"),n=l.querySelectorAll(".clone_div");if(n[n.length-1]==t){let e=t.querySelector(".add");t.previousElementSibling.querySelector(".buttonwrapper").appendChild(e)}t.remove(),1==l.querySelectorAll(".clone_div").length&&l.querySelector(".remove").remove(),r(l)}document.addEventListener("DOMContentLoaded",(function(){console.log("Forms.js is loaded")})),window.addEventListener("online",(function(){document.querySelectorAll(".form_submit").forEach((e=>{e.disabled=!1,e.querySelectorAll(".offline").forEach((e=>e.remove()))}))})),window.addEventListener("offline",(function(){document.querySelectorAll(".form_submit").forEach((e=>{e.disabled=!0,null==e.querySelector(".online")&&(e.innerHTML='<div class="online">'+e.innerHTML+"</div>"),e.innerHTML+='<div class="offline">You are offline</div>'}))})),document.addEventListener("click",(function(e){let t=e.target;if(t.matches(".add")){let e=l(t.closest(".clone_div"));r(t.closest(".clone_divs_wrapper")),e.querySelectorAll(".wp-editor-area").forEach((e=>{window.tinyMCE.execCommand("mceAddEditor",!1,e.id)})),t.remove()}t.matches(".remove")&&n(t),t.matches('.sim_form [name="submit_form"]')&&(e.stopPropagation(),async function(e){let t=e.closest("form"),l=await FormSubmit.submitForm(e,"forms/save_form_input");l&&(e.closest(".submit_wrapper").querySelector(".loadergif").classList.add("hidden"),Main.displayMessage(l),"true"==t.dataset.reset&&FormSubmit.formReset(t))}(t))})),document.addEventListener("click",(function(e){let t=e.target;t.matches(".add")&&(l(t.closest(".clone_div")),r(t.closest(".clone_divs_wrapper")),t.remove()),t.matches(".remove")&&n(t)}))})();
//# sourceMappingURL=admin.min.js.map