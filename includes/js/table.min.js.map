{"version":3,"file":"table.min.js","mappings":"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","sources":["webpack://Base scripts/webpack/universalModuleDefinition","webpack://Base scripts/webpack/bootstrap","webpack://Base scripts/webpack/runtime/define property getters","webpack://Base scripts/webpack/runtime/hasOwnProperty shorthand","webpack://Base scripts/webpack/runtime/make namespace object","webpack://Base scripts/./table.js","webpack://Base scripts/./field_value.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SimTableFunctions\"] = factory();\n\telse\n\t\troot[\"SimTableFunctions\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getFieldValue } from './field_value.js';\r\n\r\nlet oldValue;\r\n\r\nconsole.log(\"Table.js loaded\");\r\n\r\nfunction outsideClicked(event){\r\n\tif(event.target.closest('td') == null || !event.target.closest('td').matches('.editing')){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\t//remove as soon as we come here\r\n\t\tdocument.removeEventListener('click', outsideClicked);\r\n\t\tprocessInput(event, document.querySelector('.editing input, .editing select, .editing textarea'));\r\n\t}\r\n}\r\n\r\nfunction addInputEventListeners(cell){\r\n\tlet inputs\t= cell.querySelectorAll('input,select,textarea');\r\n\t\t\r\n\tinputs.forEach(inputnode => {\r\n\t\t//add old value\r\n\t\toldValue.split(',').forEach(val=>{\r\n\t\t\tif(inputnode.type == 'checkbox' || inputnode.type == 'radio'){\r\n\t\t\t\tif(inputnode.value == val.trim()){\r\n\t\t\t\t\tinputnode.checked = true;\r\n\t\t\t\t}\r\n\t\t\t}else if(inputnode.type == 'select'){\r\n\t\t\t\tinputnode.querySelector('option[value=\"'+val+'\"]').selected = true;\r\n\t\t\t}else{\r\n\t\t\t\tinputnode.value\t= oldValue;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(inputnode.type == 'select-one' && inputnode._niceselect == undefined){\r\n\t\t\tMain.attachNiceSelect(inputnode);\r\n\t\t}\r\n\t\t\r\n\t\t//Add a keyboard\r\n\t\tinputnode.addEventListener(\"keyup\", function(event){\r\n\t\t\tif (event.keyCode === 13) {\r\n\t\t\t\tprocessInput(event);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//add a listener for clicks outside the cell\r\n\t\tdocument.addEventListener('click', outsideClicked);\r\n\t\t\r\n\t\tif(inputnode.type != 'checkbox' || inputs.length == 1){\r\n\t\t\tif(inputnode.type == 'date'){\r\n\t\t\t\tinputnode.addEventListener(\"blur\", function(event){\r\n\t\t\t\t\t//only process if we added a value\r\n\t\t\t\t\tif(event.target.value != ''){\r\n\t\t\t\t\t\tprocessInput(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tinputnode.addEventListener(\"change\", function(event){\r\n\t\t\t\t\t//only process if we added a value\r\n\t\t\t\t\tif(event.target.value != ''){\r\n\t\t\t\t\t\tprocessInput(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinputnode.focus();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//function to change a cells contents\r\nfunction editTd(target){\r\n\ttarget.closest('td').classList.add('editing');\r\n\r\n\t//element is already edited\r\n\r\n\toldValue\t= target.textContent;\r\n\tif (oldValue == \"Click to update\" || oldValue == \"X\"){\r\n\t\toldValue = \"\";\r\n\t}\r\n\t\r\n\ttarget.innerHTML = `<input type=\"text\" value=\"${oldValue}\">`;\r\n\r\n\taddInputEventListeners(target);\r\n}\r\n\r\n//function to get the temp input value and save it using the rest api\r\nasync function processInput(event, target){\r\n\tif(typeof(target) == 'undefined'){\r\n\t\ttarget\t= event.target;\r\n\t}\r\n\t\r\n\tlet cell \t\t\t= target.closest('td');\t\r\n\tlet value\t\t\t= getFieldValue(target, cell, false);\r\n\tlet table\t\t\t= target.closest('table');\r\n\t\r\n\t//Only update when needed\r\n\tif (value != oldValue){\t\t\r\n\t\t//get the updated fieldname from the column header\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('value', JSON.stringify(value));\r\n\r\n\t\tfor( let key in cell.dataset){\r\n\t\t\tformData.append(key, cell.dataset[key]);\r\n\t\t}\r\n\t\tfor( let key in target.closest('tr').dataset){\r\n\t\t\tformData.append(key, target.closest('tr').dataset[key]);\r\n\t\t}\r\n\t\t\r\n\t\tMain.showLoader(cell.firstChild);\r\n\t\t\r\n\t\tlet response = await FormSubmit.fetchRestApi(table.dataset.url, formData);\r\n\r\n\t\tif(response){\r\n\t\t\tcell.innerHTML = value;\r\n\r\n\t\t\t//reset editing indicator\r\n\t\t\t//let editedel = '';\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.log(value)\r\n\t\ttarget.closest('td').innerHTML = oldValue;\r\n\t}\r\n\r\n\tcell.classList.remove('editing');\r\n}\r\n\r\n//function to sort a table by column\r\nfunction sortTable(target){\r\n\tlet table \t\t\t= target.closest('table');\r\n\tlet switching\t \t= true;\r\n\tlet x,y, rows;\r\n\tvar sort \t\t= 'asc';\r\n\t\r\n\t//Check the sort order\r\n\tif (target.classList.contains('desc')){\r\n\t\tsort \t\t= 'desc';\r\n\t}\r\n\t\r\n\t/*Make a loop that will continue until\r\n\tno switching has been done:*/\r\n\twhile (switching) {\r\n\t\t//start by saying: no switching is done:\r\n\t\tswitching\t= false;\r\n\t\trows\t\t= table.rows;\r\n\t\t/*Loop through all table rows (except the\r\n\t\tfirst, which contains table headers):*/\r\n\t\tfor (let i = 1; i < (rows.length - 1); i++) {\r\n\t\t\t// Get the lowercase cell contents\r\n\t\t\tx = rows[i].getElementsByTagName(\"TD\")[target.cellIndex].innerHTML.toLowerCase();\r\n\t\t\ty = rows[i + 1].getElementsByTagName(\"TD\")[target.cellIndex].innerHTML.toLowerCase();\r\n\t\t\t\r\n\t\t\t//check if numeric\r\n\t\t\tif(!isNaN(x) && !isNaN(y)){\r\n\t\t\t\tx = parseFloat(x);\r\n\t\t\t\ty = parseFloat(y);\r\n\t\t\t}else{\r\n\t\t\t\t//check if these are dates\r\n\t\t\t\tlet datex = new Date(x);\r\n\t\t\t\tlet datey = new Date(y);\r\n\t\t\t\tif(datex !== \"Invalid Date\" && !isNaN(datex) && datex.getYear()!=70 && datey !== \"Invalid Date\" && !isNaN(datey) && datey.getYear()!=70){\r\n\t\t\t\t\tx = datex.getTime();\r\n\t\t\t\t\ty = datey.getTime();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check if the two rows should switch place ASC:\r\n\t\t\tif ((sort == 'asc' && x > y) || (sort == 'desc'  && y > x)) {\r\n\t\t\t\t//Switch positions of the rows and start over\r\n\t\t\t\trows[i].parentNode.insertBefore(rows[i + 1], rows[i]);\r\n\t\t\t\tswitching = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//Mark the row to sort desc the next time\r\n\tif (sort == 'asc'){\r\n\t\ttarget.classList.add('desc');\r\n\t\ttarget.classList.replace('asc', 'desc');\r\n\t//Mark the row to sort asc the next time\r\n\t}else{\r\n\t\ttarget.classList.replace('desc', 'asc');\r\n\t}\r\n}\r\n\r\n//Store the table headers as td attribute for use on smaller screens\r\nexport function setTableLabel() {\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table').forEach(function(table){\r\n\t\t//Get all heading elements\r\n\t\tlet tdLabels = [];\r\n\t\ttable.querySelectorAll('thead th').forEach((el,index) => {\r\n\t\t\tif(el.dataset.nicename != null){\r\n\t\t\t\ttdLabels[index]\t= el.dataset.nicename;\r\n\t\t\t}else{\r\n\t\t\t\ttdLabels[index]\t= el.textContent;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//loop over all table rows\r\n\t\ttable.querySelectorAll('tbody td').forEach( (td) => {\r\n\t\t\tif(!td.hasAttribute('label') && tdLabels[td.cellIndex] != undefined){\r\n\t\t\t\t//set the header text as label\r\n\t\t\t\ttd.setAttribute('label', tdLabels[td.cellIndex]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(td.textContent == 'X' || td.textContent == ''){\r\n\t\t\t\ttd.classList.add('mobile-hidden');\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nasync function showFullscreen(target){\r\n\ttarget.textContent\t= 'Close full screen';\r\n\ttarget.classList.replace('show', 'close');\r\n\r\n\tlet parent\t= target.closest('.table-wrapper');\r\n\r\n\t//store current y position\r\n\twindow.lastY\t= window.pageYOffset;\r\n\r\n\twindow.scrollTo(0,0);\r\n\r\n\t// remove scrollbars from body\r\n\tdocument.querySelector('body').style.overflow\t= 'hidden';\r\n\r\n\tdocument.querySelector('header').style.zIndex\t= 'unset';\r\n\r\n\tparent.classList.add('fullscreen');\r\n\r\n\tparent.style.marginLeft\t= '0px';\r\n\r\n\tlet url = new URL(window.location);\r\n\r\n\turl.searchParams.set('fullscreen', parent.querySelector('table').dataset.formid);\r\n\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tsetTableHeight();\r\n\r\n\tparent.requestFullscreen().catch((err) => {\r\n\t\t// does not work without user interaction\r\n\t});\r\n}\r\n\r\nfunction closeFullscreen(target){\r\n\tlet lastY\t= 100;\r\n\r\n\ttarget.textContent\t= 'Show full screen';\r\n\ttarget.classList.replace('close','show');\r\n\r\n\tif(window.lastY != undefined){\r\n\t\tlastY\t= window.lastY;\r\n\t}\r\n\twindow.scrollTo(0, lastY);\r\n\t\r\n\tconsole.log('scrolling')\r\n\r\n\t// remove scrollbars from body\r\n\tdocument.querySelector('body').style.overflow\t= 'unset';\r\n\r\n\tdocument.querySelector('header').style.zIndex\t= '99999';\r\n\r\n\ttarget.closest('.table-wrapper').classList.remove('fullscreen');\r\n\r\n\tpositionTable();\r\n\r\n\tlet url = new URL(window.location);\r\n\r\n\turl.searchParams.delete('fullscreen');\r\n\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tdocument.exitFullscreen();\r\n\r\n\tsetTableHeight();\r\n}\r\n\r\nfunction setTableHeight(){\r\n\tlet urlParams = new URLSearchParams(window.location.search);\r\n\tlet\tfullscreen\t= urlParams.get('fullscreen');\r\n\r\n\t// calculate how heigh the table should be\r\n\tlet footerHeight, headerHeight;\r\n\tdocument.querySelectorAll('.sim-table').forEach( table => {\r\n\t\tlet wrapper\t= table.closest('.table-wrapper');\r\n\t\tif(wrapper == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif(fullscreen != null){\r\n\t\t\theaderHeight\t= 0;\r\n\t\t\twrapper.querySelectorAll('.table-head').forEach(el=> headerHeight = el.offsetHeight);\r\n\t\t}else{\r\n\t\t\theaderHeight\t= document.querySelector('header').offsetHeight;\r\n\t\t}\r\n\t\t\r\n\t\tfooterHeight\t= 0;\r\n\t\twrapper.querySelectorAll('.sim-table-footer').forEach(el=> footerHeight\t= el.offsetHeight);\r\n\r\n\t\tlet px\t= headerHeight + footerHeight + 40;\r\n\t\ttable.style.maxHeight\t= `calc(100vh - ${px}px)`;\r\n\t});\t\r\n}\r\n\r\nexport function positionTable(){\r\n\t//use whole page width for tables\r\n\tdocument.querySelectorAll(\".table-wrapper\").forEach(wrapper=>{\r\n\t\tlet offset\t\t= '';\r\n\t\tlet newX\t\t= 0;\r\n\r\n\t\tlet table\t= wrapper.querySelector('table');\r\n\t\tif(table == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet width\t= table.scrollWidth;\r\n\t\tif(width == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// If on small width use full screen\r\n\t\tif(window.innerWidth < 570){\r\n\t\t\toffset\t= wrapper.getBoundingClientRect().x\r\n\t\t}else{\r\n\t\t\tlet diff\t= window.innerWidth - width;\r\n\t\t\t\r\n\t\t\t//calculate if room for sidebar if one exists\r\n\t\t\tif((width/window.innerWidth) < 0.7){\r\n\t\t\t\tif(document.querySelector('.is-right-sidebar') != null){\r\n\t\t\t\t\tdiff\t= (window.innerWidth * 0.7) - width;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdocument.getElementById('primary').style.zIndex = 1;\r\n\r\n\t\t\t\t//sidebar behind table\r\n\t\t\t\tdocument.querySelectorAll('#right-sidebar').forEach(el=>el.style.zIndex = 0);\r\n\t\t\t}\r\n\r\n\t\t\t//Table needs full screen width\r\n\t\t\tif(diff < 20){\r\n\t\t\t\tnewX = 10;\r\n\t\t\t//center the table\r\n\t\t\t}else{\r\n\t\t\t\tnewX = diff/2; \r\n\t\t\t}\t\t\t\r\n\t\t\t\r\n\t\t\t//first set it back to default\r\n\t\t\tif(wrapper.style.marginLeft != ''){\r\n\t\t\t\twrapper.style.marginLeft = '-0px';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//then calculate the required offset\r\n\t\t\toffset\t= parseInt(wrapper.getBoundingClientRect().x)-newX;\r\n\t\t}\r\n\r\n\t\twrapper.style.marginLeft = `-${offset}px`;\r\n\t});\r\n}\r\n\r\ndocument.addEventListener(\"click\", event=>{\r\n\tlet target = event.target;\r\n\t\r\n\tif(target.tagName == 'TH'){\r\n\t\tsortTable(target);\r\n\t}\r\n\t\r\n\t//Edit data\r\n\tlet td = target.closest('td');\r\n\tif(target.matches('td.edit')){\r\n\t\tevent.stopPropagation();\r\n\t\teditTd(target);\r\n\t}else if(td != null && td.matches('td.edit') && target.tagName != 'INPUT' && target.tagName != 'A' && target.tagName != 'TEXTAREA' && !target.closest('.nice-select') ){\r\n\t\tevent.stopPropagation();\r\n\t\teditTd(target.closest('td'));\r\n\t}else if(target.matches('.show.fullscreenbutton')){\r\n\t\tshowFullscreen(target);\r\n\t}else if(target.matches('.close.fullscreenbutton')){\r\n\t\tcloseFullscreen(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\t\r\n\tpositionTable();\r\n\twindow.addEventListener('resize', positionTable);\r\n\t\r\n\t//add label attribute\r\n\tsetTableLabel();\r\n\r\n\tlet urlParams = new URLSearchParams(window.location.search);\r\n\tlet\tfullscreen\t= urlParams.get('fullscreen');\r\n\r\n\tif(fullscreen != null){\r\n\t\ttry{\r\n\t\t\tshowFullscreen(document.querySelector(`table[data-formid=\"${fullscreen}\"]`).closest('.table-wrapper').querySelector('.fullscreenbutton')); \r\n\t\t}catch{\r\n\t\t\tconsole.error(`table[data-formid=\"${fullscreen}\"]`);\r\n\t\t}\r\n\t}\r\n\r\n\tsetTableHeight();\r\n});\r\n","function getRadioValue(form, selector){\r\n\tlet el\t= form.querySelector(`${selector}:checked`);\r\n\r\n\t//There is no radio selected currently\r\n\tif(el == null){\r\n\t\t//return an empty value\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn el.value;\r\n}\r\n\r\nfunction getCheckboxValue(form, selector, compareValue, orgName){\r\n\tlet value\t\t= '';\r\n\tlet elements\t= '';\r\n\r\n\t//we are dealing with a specific checkbox\r\n\tif(orgName.type == 'checkbox' && compareValue != null ){\r\n\t\tif(orgName.checked){\r\n\t\t\treturn orgName.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn '';\r\n\t}\r\n\r\n\t//we should find the checkbox with this value and check if it is checked\r\n\tif(compareValue != null){\r\n\t\telements\t= form.querySelector(`${selector}[value=\"${compareValue}\" i]:checked`);\r\n\t\tif(elements != null){\r\n\t\t\tvalue = compareValue;\r\n\t\t}\r\n\t//no compare value give just return all checked values\r\n\t}else{\r\n\t\telements\t= form.querySelectorAll(`${selector}:checked`);\r\n\t\tvalue\t\t= [];\r\n\t\telements.forEach(el=>{\r\n\t\t\tvalue.push(el.value);\r\n\t\t\t/* if(value != ''){\r\n\t\t\t\tvalue += ', ';\r\n\t\t\t}\r\n\t\t\tvalue += el.value; */\r\n\t\t});\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction getMultiValue(form, el){\r\n\tlet value = [];\r\n\r\n\tform.querySelectorAll(`[name=\"${el.name}\"]`).forEach(elem => value.push(elem.value));\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getDataListValue(el){\r\n\tlet value\t\t= '';\r\n\tlet origInput \t= el.list.querySelector(`[value='${el.value}' i]`);\r\n\t\t\t\r\n\tif(origInput == null){\r\n\t\tvalue =  el.value;\r\n\t}else{\r\n\t\tvalue = origInput.dataset.value;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getFieldValue(orgName, form, checkDatalist=true, compareValue=null, lowercase=false){\r\n\r\n\tlet el\t\t\t= ''; \r\n\tlet name\t\t= '';\r\n\tlet value \t\t= '';\r\n\tlet selector\t= '';\r\n\r\n\t//name is not a name but a node\r\n\tif(orgName instanceof Element){\r\n\t\tel\t\t\t= orgName;\t\t\r\n\t\t//check if valid input type\r\n\t\tif(el.tagName != 'INPUT' && el.tagName != 'TEXTAREA' && el.tagName != 'SELECT' && el.closest('.nice-select-dropdown') == null){\r\n\t\t\tel = el.querySelector('input, select, textarea');\r\n\t\t}\r\n\t\tif(el == null){\r\n\t\t\tel\t\t\t= orgName;\r\n\t\t}\r\n\t\tname\t\t= el.name;\r\n\t// We should look for an id\r\n\t}else if(orgName.match(\"E[0-9]\")){\r\n\t\tselector\t= `[id^=${orgName}]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t\tname\t\t= el.name;\r\n\t}else{\r\n\t\tname\t\t= orgName;\r\n\t\tselector\t= `[name='${name}' i]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t}\r\n\t\r\n\tif(el == null){\r\n\t\tconsole.trace();\r\n\t\tconsole.log(\"cannot find element with name \"+name);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(el.type == 'radio'){\r\n\t\tvalue\t= getRadioValue(form, selector);\r\n\t}else if(el.type == 'checkbox'){\r\n\t\tvalue\t= getCheckboxValue(form, selector, compareValue, orgName);\t\r\n\t}else if(el.closest('.nice-select-dropdown') != null && el.dataset.value != undefined){\r\n\t\t//nice select\r\n\t\tvalue = el.dataset.value\r\n\t}else if(el.list != null && el.value != '' && checkDatalist){\r\n\t\tvalue =  getDataListValue(el);\r\n\t}else if(el.name != undefined && el.name.endsWith('[]')){\r\n\t\tvalue =  getMultiValue(form, el);\r\n\t}else if(el.value != null && el.value != 'undefined'){\r\n\t\tvalue = el.value;\r\n\t}\r\n\t\r\n\tif(lowercase){\r\n\t\treturn value.toLowerCase();\r\n\t}\r\n\treturn value;\r\n}"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","oldValue","outsideClicked","event","target","closest","matches","stopPropagation","document","removeEventListener","processInput","querySelector","editTd","classList","add","textContent","innerHTML","cell","inputs","querySelectorAll","forEach","inputnode","split","val","type","trim","checked","selected","undefined","_niceselect","Main","attachNiceSelect","addEventListener","keyCode","length","focus","addInputEventListeners","async","orgName","form","checkDatalist","compareValue","lowercase","el","name","selector","Element","tagName","match","console","trace","log","getRadioValue","elements","push","getCheckboxValue","dataset","list","origInput","getDataListValue","endsWith","elem","getMultiValue","toLowerCase","getFieldValue","table","formData","FormData","append","JSON","stringify","showLoader","firstChild","FormSubmit","fetchRestApi","url","remove","setTableLabel","tdLabels","index","nicename","td","hasAttribute","cellIndex","setAttribute","showFullscreen","replace","parent","window","lastY","pageYOffset","scrollTo","style","overflow","zIndex","marginLeft","URL","location","searchParams","set","formid","history","pushState","setTableHeight","requestFullscreen","catch","err","footerHeight","headerHeight","fullscreen","URLSearchParams","search","wrapper","offsetHeight","px","maxHeight","positionTable","offset","newX","width","scrollWidth","innerWidth","getBoundingClientRect","x","diff","getElementById","parseInt","y","rows","switching","sort","contains","i","getElementsByTagName","isNaN","datex","Date","datey","getYear","getTime","parseFloat","parentNode","insertBefore","sortTable","delete","exitFullscreen","closeFullscreen","error"],"sourceRoot":""}