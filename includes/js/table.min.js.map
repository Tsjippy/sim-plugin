{"version":3,"file":"table.min.js","mappings":"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","sources":["webpack://picture_select/webpack/universalModuleDefinition","webpack://picture_select/webpack/bootstrap","webpack://picture_select/webpack/runtime/define property getters","webpack://picture_select/webpack/runtime/hasOwnProperty shorthand","webpack://picture_select/webpack/runtime/make namespace object","webpack://picture_select/../modules/forms/js/forms.js","webpack://picture_select/./table.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SimTableFunctions\"] = factory();\n\telse\n\t\troot[\"SimTableFunctions\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","async function saveFormInput(target){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_input');\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\r\n\r\n\t\tMain.displayMessage(response);\r\n\r\n\t\tif(form.dataset.reset == 'true'){\r\n\t\t\tFormSubmit.formReset(form);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function removeDefaultSelect(el){\r\n\tArray.from(el.options).forEach(function(option){\r\n\t\toption.defaultSelected = false;\r\n\t});\r\n}\r\n\r\nlet tinymceSettings = [];\r\nfunction prepareForCloning(originalNode){\r\n\t//First remove any nice selects\r\n\toriginalNode.querySelectorAll('select').forEach(select => {\r\n\t\t//remove defaults if it has changed\r\n\t\tif(select.selectedIndex != -1){\r\n\t\t\tif(!select.options[select.selectedIndex].defaultSelected){\r\n\t\t\t\t//remove all default selected\r\n\t\t\t\tremoveDefaultSelect(select);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//Then add a new default selected if needed\r\n\t\tif(select.selectedOptions.length>0){\r\n\t\t\tselect.selectedOptions[0].defaultSelected = true;\r\n\t\t}\r\n\t\t\r\n\t\t//remove the original\r\n\t\tselect._niceselect.destroy()\r\n\t});\r\n\r\n\t//also remove any tinymce's\r\n\tif(typeof(tinymce) != 'undefined'){\r\n\t\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\t\tlet tn = tinymce.get(el.id);\r\n\t\t\tif(tn != null){\r\n\t\t\t\ttinymceSettings[el.id] = tn.settings\r\n\t\t\t\ttn.save();\r\n\t\t\t\ttn.remove();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function cloneNode(originalNode, clear=true){\r\n\tprepareForCloning(originalNode);\r\n\t\r\n\t//make a clone\r\n\tlet newNode = originalNode.cloneNode(true);\r\n\t\r\n\t//Then add niceselects again after cloning took place\r\n\toriginalNode.querySelectorAll('select').forEach(select => {\r\n\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\r\n\t\tif(select.value == ''){\r\n\t\t\tselect._niceselect.clear();\r\n\t\t}\r\n\t});\r\n\t\r\n\t//add tinymce's again\r\n\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\ttinymce.init(tinymceSettings[el.id]);\r\n\t});\r\n\t\r\n\t//clear values in the clone\r\n\tif(clear){\r\n\t\tnewNode.querySelectorAll('input,select,textarea').forEach(input => {\r\n\t\t\tif(input.type == 'checkbox' || input.type == 'radio'){\r\n\t\t\t\tinput.checked = false;\r\n\t\t\t}else if(input.type != 'hidden'){\r\n\t\t\t\tinput.value = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//if this is a select\r\n\t\t\tif(input.type == \"select-one\"){\r\n\t\t\t\t//remove any defaults\r\n\t\t\t\tremoveDefaultSelect(input);\r\n\t\t\t\t\r\n\t\t\t\tinput._niceselect = NiceSelect.bind(input,{searchable: true});\r\n\t\t\t\tinput._niceselect.clear();\r\n\t\t\t}\r\n\t\t});\r\n\t}else{\r\n\t\tnewNode.querySelectorAll('select').forEach(select => {\r\n\t\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn newNode;\r\n}\r\n\r\nexport function copyFormInput(originalNode){\r\n\tlet newNode = cloneNode(originalNode);\r\n\t\r\n\t//update the data index\r\n\tnewNode.querySelectorAll('.upload-files').forEach(function(uploadButton){\r\n\t\tuploadButton.dataset.index = nodeNr;\r\n\t})\r\n\t\r\n\t//Clear contents of any document preview divs.\r\n\tnewNode.querySelectorAll('.documentpreview').forEach(function(previewDiv){\r\n\t\tpreviewDiv.innerHTML = '';\r\n\t});\r\n\r\n\t//Select\r\n\tlet i = 0;\r\n\tnewNode.querySelectorAll('select').forEach(select => {\r\n\t\t//Find the value of the select we have cloned\r\n\t\tlet previousVal = originalNode.getElementsByTagName('select')[i].selectedIndex;\r\n\t\t\r\n\t\t//Hide the value in the clone\r\n\t\tselect.options[previousVal].style.display = 'none';\r\n\t\t\r\n\t\t//Add nice select\r\n\t\tselect._niceselect.update();\r\n\t\t\r\n\t\tselect.nextSibling.querySelector('.current').textContent = 'Select an option';\r\n\t\t\r\n\t\ti++;\r\n\t});\r\n\t\r\n\t//Add remove buttons if they are not there\r\n\tif(originalNode.querySelector('.remove') == null){\r\n \t\tlet addElement \t\t= newNode.querySelector('.add');\r\n\t\tlet elementClass \t= addElement.className.replace('add','remove');\r\n\t\tlet id \t\t\t\t= addElement.id.replace('add','remove');\r\n\t\tlet content \t\t= addElement.textContent.replace('Add','Remove this').replace('an','').replace('+','-');\r\n\t\t\r\n\t\tlet html = `<button type=\"button\" class=\"${elementClass}\" id=\"${id}\" style=\"flex: 1;\">${content}</button>`;\r\n\t\t\r\n\t\t//Add minus button to the first div\r\n\t\toriginalNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html);\r\n\t\t//Add minus button to the second div\r\n\t\tnewNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html)\r\n\t}\t\r\n\t\r\n\t//Insert the clone\r\n\toriginalNode.parentNode.insertBefore(newNode, originalNode.nextSibling);\r\n\t\r\n\treturn newNode;\r\n}\r\n\r\nexport function fixNumbering(cloneDivsWrapper){\r\n\tcloneDivsWrapper.querySelectorAll(':scope > .clone_div').forEach((clone, index)=>{\r\n\t\t//Update the new number\t\r\n\t\t//DIV\r\n\t\tif(clone.id != ''){\r\n\t\t\tclone.id = clone.id.replace(/(\\d)/g, index);\r\n\t\t}\r\n\t\t\r\n\t\tif(clone.dataset.divid  != null){\r\n\t\t\tclone.dataset.divid = index;\r\n\t\t}\r\n\t\t\r\n\t\t//Update the title\r\n\t\tclone.querySelectorAll('h3, h4').forEach(title => {\r\n\t\t\ttitle.textContent = title.textContent.replace(/(\\d)/g, index+1);\r\n\t\t});\r\n\t\t\r\n\t\t//Update the legend\r\n\t\tclone.querySelectorAll('legend').forEach(legend => {\r\n\t\t\tlegend.innerHTML = legend.innerHTML.replace(/ (\\d)/g, ' '+(index+1));\r\n\t\t});\r\n\t\t\r\n\t\t//Update the elements\r\n\t\tclone.querySelectorAll('input,select,textarea').forEach(input => {\r\n\t\t\t//Do not copy nice selects\r\n\t\t\tif(!input.classList.contains('nice-select-search')){\r\n\t\t\t\t//Update the id\r\n\t\t\t\tif(input.id != '' && input.id != undefined){\r\n\t\t\t\t\tinput.id = input.id.replace(/(\\d)/g, index);\r\n\t\t\t\t}\r\n\t\t\t\t//Update the name\r\n\t\t\t\tif(input.name != '' && input.name != undefined){\r\n\t\t\t\t\tinput.name = input.name.replace(/(\\d)/g, index);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//Reset the select to the default\r\n\t\t\t\tif(input.type == 'button'){\r\n\t\t\t\t\tinput.value = input.value.replace(/\\d/g, index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t})\r\n}\r\n\r\nexport function removeNode(target){\r\n\tlet node\t\t\t= target.closest(\".clone_div\");\r\n\tlet parentNode\t\t= node.closest('.clone_divs_wrapper');\r\n\tlet allCloneDivs\t= parentNode.querySelectorAll('.clone_div');\r\n\t\r\n\t//Check if we are removing the last element\r\n\tif(allCloneDivs[allCloneDivs.length-1] == node){\r\n\t\tlet addElement = node.querySelector(\".add\");\r\n\t\t\r\n\t\t//Move the add button one up\r\n\t\tlet prev = node.previousElementSibling;\r\n\t\tprev.querySelector('.buttonwrapper').appendChild(addElement);\r\n\t}\r\n\t\r\n\t//Remove the node\r\n\tnode.remove();\r\n\r\n\t//If there is only one div remaining, remove the remove button\r\n\tif(parentNode.querySelectorAll('.clone_div').length == 1){\r\n\t\tlet removeElement = parentNode.querySelector('.remove');\r\n\t\tremoveElement.remove();\r\n\t}\r\n\r\n\tfixNumbering(parentNode)\r\n}\r\n\r\n/* \r\n\tFUNCTIONS USED BY DYNAMIC FORMS JS\r\n */\r\nexport function tidyMultiInputs(){\r\n\t//remove unnecessary buttons on inputs with multiple values\r\n\tdocument.querySelectorAll('.clone_divs_wrapper').forEach(function(div){\r\n\t\tlet cloneDivArr\t= div.querySelectorAll('.clone_div');\r\n\t\t\r\n\t\tif(cloneDivArr.length == 1){\r\n\t\t\tcloneDivArr[0].querySelectorAll('.remove').forEach(el=>el.remove());\r\n\t\t}\r\n\t\t\r\n\t\tcloneDivArr.forEach(function(cloneDiv, index, array){\r\n\t\t\t//update dataset\r\n\t\t\tcloneDiv.dataset.divid = index;\r\n\t\t\t\r\n\t\t\t//remove add button for all but the last\r\n\t\t\tif(index != array.length - 1){\r\n\t\t\t\tcloneDiv.querySelectorAll('.add').forEach(el=>el.remove());\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n}\r\n\t\r\n//show a next form step\r\nexport function showTab(n, form) {\r\n\tif(typeof(form) != 'undefined'){\r\n\t\tif(n == 0){\r\n\t\t\tlet loader = form.querySelector('.formsteploader');\r\n\t\t\t//hide loader\r\n\t\t\tif(loader != null){\r\n\t\t\t\tloader.classList.add('hidden');\r\n\t\t\t\r\n\t\t\t\t//show form controls\r\n\t\t\t\tform.querySelector('.multistepcontrols').classList.remove('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//hide all formsteps\r\n\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(step=>step.classList.add('stephidden'));\r\n\t\t\r\n\t\t// Show the specified formstep of the form ...\r\n\t\tlet x = form.getElementsByClassName(\"formstep\");\r\n\t\t\r\n\t\tif(x.length == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t//scroll back to top\r\n\t\tlet y = x[n].offsetTop - document.querySelector(\"#masthead\").offsetHeight\r\n\t\twindow.scrollTo({ top: y, behavior: 'auto'});\r\n\t\t\r\n\t\t//show\r\n\t\tx[n].classList.remove('stephidden');\r\n\r\n\t\t// This function removes the \"active\" class of all steps...\r\n\t\tform.querySelectorAll(\".step.active\").forEach(el=>{el.classList.remove('active');});\r\n\r\n\t\t//... and adds the \"active\" class to the current step:\r\n\t\tx = form.getElementsByClassName(\"step\");\r\n\t\tx[n].classList.add(\"active\");\r\n\r\n\t\t// ... and fix the Previous/Next buttons:\r\n\t\tif (n == 0) {\r\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.add('hidden');\r\n\t\t} else {\r\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.remove('hidden');\r\n\t\t}\r\n\r\n\t\tif (n == (x.length - 1)) {\r\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.add('hidden');\r\n\t\t\tform.querySelector('.form_submit').classList.remove('hidden');\r\n\t\t} else {\r\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.remove('hidden');\r\n\t\t\tform.querySelector('.form_submit').classList.add('hidden');\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.log('no form defined');\r\n\t}\r\n\t\t\r\n}\r\n\r\n//next form step clicked\r\nexport function nextPrev(n) {\r\n\t// This function will figure out which tab to display\r\n\tlet x \t\t\t\t= form.querySelectorAll(\".formstep\");\r\n\tlet stepIndicators\t= form.querySelectorAll(\".step\");\r\n\tlet currentTab\t\t= 0;\r\n\tlet valid;\r\n\r\n\t// Find the current active tab\r\n\tx.forEach((el, index)=>{if(!el.matches('.stephidden')){currentTab = index}});\r\n\t\r\n\t//Check validity of this step if going forward\r\n\tif(n>0){\r\n\t\t// Report validity of each required field\r\n\t\tlet elements\t= x[currentTab].querySelectorAll('.required:not(.hidden) input, .required:not(.hidden) textarea, .required:not(.hidden) select');\r\n\t\tfor(const element of elements) {\r\n\t\t\telement.required\t\t= true;\r\n\t\t\tvalid\t\t= element.reportValidity();\r\n\t\t\tif(!valid){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!valid) return;\r\n\t\t\r\n\t\t//mark the last step as finished\r\n\t\tstepIndicators[currentTab].classList.add(\"finish\");\r\n\t}else{\r\n\t\t//mark the last step as unfinished\r\n\t\tstepIndicators[currentTab].classList.remove(\"finish\");\r\n\t}\r\n\t\r\n\t//loop over all the formsteps to hide stepindicators of them if needed\r\n\tArray.from(x).forEach((formstep,index) =>{\r\n\t\tif(formstep.classList.contains('hidden')){\r\n\t\t\t//hide the corresponding circle\r\n\t\t\tstepIndicators[index].classList.add('hidden');\r\n\t\t}\r\n\t});\r\n\r\n\t// Increase or decrease the current tab by 1:\r\n\tcurrentTab = currentTab + n;\r\n\t\r\n\t//check if the next tab is hidden\r\n\twhile(x[currentTab].classList.contains('hidden')){\r\n\t\t//go to the next tab\r\n\t\tcurrentTab = currentTab + n;\r\n\t}\r\n\t\r\n\t// if you have reached the end of the form... :\r\n\tif (currentTab >= x.length) {\r\n\t\treturn false;\r\n\t}\r\n\t// Otherwise, display the correct tab:\r\n\tshowTab(currentTab,form);\r\n}\r\n\r\nfunction getRadioValue(form, name){\r\n\tlet el\t= form.querySelector(`[name='${name}' i]:checked`);\r\n\r\n\t//There is no radio selected currently\r\n\tif(el == null){\r\n\t\t//return an empty value\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn el.value;\r\n}\r\n\r\nfunction getCheckboxValue(form, name, compareValue, orgName){\r\n\tlet value\t\t= '';\r\n\tlet elements\t= '';\r\n\r\n\t//we are dealing with a specific checkbox\r\n\tif(orgName.type == 'checkbox' ){\r\n\t\tif(orgName.checked){\r\n\t\t\treturn orgName.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn '';\r\n\t}\r\n\r\n\t//we should find the checkbox with this value and check if it is checked\r\n\tif(compareValue != null){\r\n\t\telements\t= form.querySelector(`[name='${name}' i][value=\"${compareValue}\" i]:checked`);\r\n\t\tif(elements != null){\r\n\t\t\tvalue = compareValue;\r\n\t\t}\r\n\t//no compare value give just return all checked values\r\n\t}else{\r\n\t\telements\t= form.querySelectorAll(`[name=\"${name}\" i]:checked`);\r\n\t\t\r\n\t\telements.forEach(el=>{\r\n\t\t\tif(value != ''){\r\n\t\t\t\tvalue += ', ';\r\n\t\t\t}\r\n\t\t\tvalue += el.value;\r\n\t\t});\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction getDataListValue(el){\r\n\tlet value\t\t= '';\r\n\tlet origInput \t= el.list.querySelector(\"[value='\"+el.value+\"' i]\");\r\n\t\t\t\r\n\tif(origInput == null){\r\n\t\tvalue =  el.value;\r\n\t}else{\r\n\t\tvalue = origInput.dataset.value;\r\n\t\tif(value == ''){\r\n\t\t\tvalue =  el.value;\r\n\t\t}\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getFieldValue(orgName, form, checkDatalist=true, compareValue=null, lowercase=false){\r\n\tlet el\t\t= ''; \r\n\tlet name\t= '';\r\n\tlet value \t= '';\r\n\r\n\t//name is not a name but a node\r\n\tif(orgName instanceof Element){\r\n\t\tel\t\t\t= orgName;\t\t\r\n\t\t//check if valid input type\r\n\t\tif(el.tagName != 'INPUT' && el.tagName != 'TEXTAREA' && el.tagName != 'SELECT' && el.closest('.nice-select-dropdown') == null){\r\n\t\t\tel = el.querySelector('input, select, textarea');\r\n\t\t}\r\n\t\tif(el == null){\r\n\t\t\tel\t\t\t= orgName;\r\n\t\t}\r\n\t\tname\t\t= el.name;\r\n\t}else{\r\n\t\tname\t\t= orgName;\r\n\t\tel\t\t\t= form.querySelector(`[name='${name}' i]`);\r\n\t}\r\n\t\r\n\tif(el == null){\r\n\t\tconsole.trace();\r\n\t\tconsole.log(\"cannot find element with name \"+name);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(el.type == 'radio'){\r\n\t\tvalue\t= getRadioValue(form, name);\r\n\t}else if(el.type == 'checkbox'){\r\n\t\tvalue\t= getCheckboxValue(form, name, compareValue, orgName);\t\r\n\t}else if(el.closest('.nice-select-dropdown') != null && el.dataset.value != undefined){\r\n\t\t//nice select\r\n\t\tvalue = el.dataset.value\r\n\t}else if(el.list != null && checkDatalist){\r\n\t\tvalue =  getDataListValue(el);\r\n\t}else if(el.value != null && el.value != 'undefined'){\r\n\t\tvalue = el.value;\r\n\t}\r\n\t\r\n\tif(lowercase){\r\n\t\treturn value.toLowerCase();\r\n\t}\r\n\treturn value;\r\n}\r\n\r\nfunction findcheckboxTarget(form, name, value){\r\n\tlet targets = form.querySelectorAll(`[name=\"${name}\" i]`);\r\n\tfor (const element of targets) {\r\n\t\tif(element.value.toLowerCase() == value.toLowerCase()){\r\n\t\t\treturn element;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function changeFieldValue(orgName, value, functionRef){\r\n\tlet name\t= '';\r\n\tlet target\t= '';\r\n\r\n\tif(orgName instanceof Element){\r\n\t\tname\t= orgName.name;\r\n\t\ttarget\t= orgName;\r\n\t}else{\r\n\t\tname \t= orgName;\r\n\t\t//get the target\r\n\t\ttarget \t= form.querySelector(`[name=\"${name}\" i]`);\r\n\t}\r\n\t\r\n\tif(target.type == 'radio' || target.type == 'checkbox'){\r\n\t\tif(!(orgName instanceof Element)){\r\n\t\t\ttarget\t= findcheckboxTarget(form, name, value);\r\n\t\t}\r\n\t\t\r\n\t\tif(target.value.toLowerCase() == value.toLowerCase()){\r\n\t\t\ttarget.checked = true;\r\n\t\t}\r\n\t//the target has a list attached to it\r\n\t}else if(target.list != null){\r\n\t\tlet dataListOption = target.list.querySelector(`[data-value=\"${value}\" i]`);\r\n\r\n\t\t//we found a match\r\n\t\tif(dataListOption != null){\r\n\t\t\ttarget.value = dataListOption.value;\r\n\t\t}else{\r\n\t\t\ttarget.value = value;\r\n\t\t}\r\n\t}else{\r\n\t\ttarget.value = value;\r\n\t}\r\n\t\r\n\t//create a new event\r\n\tlet evt = new Event('input');\r\n\t//attach the target\r\n\ttarget.dispatchEvent(evt);\r\n\t\r\n\t//run the originating function with this event\r\n\tfunctionRef(target);\r\n}\r\n\r\nexport function changeFieldProperty(name, att, value, functionRef){\r\n\t//first change the value\r\n\tlet target = form.querySelector(`[name=\"${name}\" i]`);\r\n\t\r\n\tform.querySelector(`[name=\"${name}\"]`)[att] = value;\r\n\t\r\n\t//create a new event\r\n\tlet evt = new Event('input');\r\n\r\n\t//attach the target\r\n\ttarget.dispatchEvent(evt);\r\n\r\n\t//run the originating function with this event\r\n\tfunctionRef(target);\r\n}\r\n\r\n//Main code\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\tconsole.log('Forms.js is loaded');\r\n});\r\n\r\n//we are online again\r\nwindow.addEventListener('online',function(){\r\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\r\n\t\tbtn.disabled = false\r\n\t\tbtn.querySelectorAll('.offline').forEach(el=>el.remove());\r\n\t});\r\n});\r\n\r\n//prevent form submit when offline\r\nwindow.addEventListener('offline',function(){\r\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\r\n\t\tbtn.disabled = true;\r\n\t\tif(btn.querySelector('.online') == null){\r\n\t\t\tbtn.innerHTML = '<div class=\"online\">'+btn.innerHTML+'</div>';\r\n\t\t}\r\n\t\tbtn.innerHTML += '<div class=\"offline\">You are offline</div>'\r\n\t});\r\n});\r\n\r\ndocument.addEventListener('click',function(event) {\r\n\tlet target = event.target;\r\n\t\r\n\t//add element\r\n\tif(target.matches('.add')){\r\n\t\tlet newNode = copyFormInput(target.closest(\".clone_div\"));\r\n\r\n\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\r\n\r\n\t\t//add tinymce's can only be done when node is inserted and id is unique\r\n\t\tnewNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor',false, el.id);\r\n\t\t});\r\n\r\n\t\ttarget.remove();\r\n\t}\r\n\t\r\n\t//remove element\r\n\tif(target.matches('.remove')){\r\n\t\t//Remove node clicked\r\n\t\tremoveNode(target);\r\n\t}\r\n\r\n\tif(target.matches('.sim_form [name=\"submit_form\"]')){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tsaveFormInput(target);\r\n\t}\r\n});","import {getFieldValue} from '/../modules/forms/js/forms';\r\n\r\nlet oldValue;\r\n\r\nfunction outsideClicked(event){\r\n\tif(event.target.closest('td') == null || !event.target.closest('td').matches('.editing')){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\t//remove as soon as we come here\r\n\t\tdocument.removeEventListener('click', outsideClicked);\r\n\t\tprocessInput(event, document.querySelector('.editing input, .editing select, .editing textarea'));\r\n\t}\r\n}\r\n\r\nfunction addInputEventListeners(cell){\r\n\tlet inputs\t= cell.querySelectorAll('input,select,textarea');\r\n\t\t\r\n\tinputs.forEach(inputnode=>{\r\n\t\t//add old value\r\n\t\toldValue.split(',').forEach(val=>{\r\n\t\t\tif(inputnode.type == 'checkbox' || inputnode.type == 'radio'){\r\n\t\t\t\tif(inputnode.value == val.trim()){\r\n\t\t\t\t\tinputnode.checked = true;\r\n\t\t\t\t}\r\n\t\t\t}else if(inputnode.type == 'select'){\r\n\t\t\t\tinputnode.querySelector('option[value=\"'+val+'\"]').selected = true;\r\n\t\t\t}else{\r\n\t\t\t\tinputnode.value\t= oldValue;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(inputnode.type == 'select-one'){\r\n\t\t\tinputnode._niceselect = NiceSelect.bind(inputnode,{searchable: true});\r\n\t\t}\r\n\t\t\r\n\t\t//Add a keyboard\r\n\t\tinputnode.addEventListener(\"keyup\", function(event){\r\n\t\t\tif (event.keyCode === 13) {\r\n\t\t\t\tprocessInput(event);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//add a listener for clicks outside the cell\r\n\t\tdocument.addEventListener('click', outsideClicked);\r\n\t\t\r\n\t\tif(inputnode.type != 'checkbox' || inputs.length == 1){\r\n\t\t\tif(inputnode.type == 'date'){\r\n\t\t\t\tinputnode.addEventListener(\"blur\", function(event){\r\n\t\t\t\t\t//only process if we added a value\r\n\t\t\t\t\tif(event.target.value != ''){\r\n\t\t\t\t\t\tprocessInput(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tinputnode.addEventListener(\"change\", function(event){\r\n\t\t\t\t\t//only process if we added a value\r\n\t\t\t\t\tif(event.target.value != ''){\r\n\t\t\t\t\t\tprocessInput(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinputnode.focus();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//function to change a cells contents\r\nfunction editTd(target){\r\n\ttarget.closest('td').classList.add('editing');\r\n\r\n\t//element is already edited\r\n\r\n\toldValue\t= target.textContent;\r\n\tif (oldValue == \"Click to update\" || oldValue == \"X\"){\r\n\t\toldValue = \"\";\r\n\t}\r\n\t\r\n\ttarget.innerHTML = `<input type=\"text\" value=\"${oldValue}\">`;\r\n\r\n\taddInputEventListeners(target);\r\n}\r\n\r\n//function to get the temp input value and save it using the rest api\r\nasync function processInput(event, target){\r\n\tif(typeof(target) == 'undefined'){\r\n\t\ttarget\t= event.target;\r\n\t}\r\n\t\r\n\tlet cell \t\t\t= target.closest('td');\t\r\n\tlet value\t\t\t= getFieldValue(target, cell, false);\r\n\tlet table\t\t\t= target.closest('table');\r\n\t\r\n\t//Only update when needed\r\n\tif (value != oldValue){\t\t\r\n\t\t//get the updated fieldname from the column header\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append('value', value);\r\n\r\n\t\tfor( let key in cell.dataset){\r\n\t\t\tformData.append(key, cell.dataset[key]);\r\n\t\t}\r\n\t\tfor( let key in target.closest('tr').dataset){\r\n\t\t\tformData.append(key, target.closest('tr').dataset[key]);\r\n\t\t}\r\n\t\t\r\n\t\tMain.showLoader(cell.firstChild);\r\n\t\t\r\n\t\tlet response = await FormSubmit.fetchRestApi(table.dataset.url, formData);\r\n\r\n\t\tif(response){\r\n\t\t\tcell.innerHTML = value;\r\n\r\n\t\t\t//reset editing indicator\r\n\t\t\t//let editedel = '';\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.log(value)\r\n\t\ttarget.closest('td').innerHTML = oldValue;\r\n\t}\r\n\r\n\tcell.classList.remove('editing');\r\n}\r\n\r\n//function to sort a table by column\r\nfunction sortTable(target){\r\n\t//console.log(target);\r\n\tlet table \t\t\t= target.closest('table');\r\n\tlet switching\t \t= true;\r\n\tlet shouldSwitch \t= false;\r\n\tlet x,y, rows;\r\n\t\r\n\t//Check the sort order\r\n\tif (target.classList.contains('dsc')){\r\n\t\tlet sort \t\t\t= 'dsc';\r\n\t}else{\r\n\t\tlet sort \t\t= 'asc';\r\n\t}\r\n\t\r\n\t/*Make a loop that will continue until\r\n\tno switching has been done:*/\r\n\twhile (switching) {\r\n\t\t//start by saying: no switching is done:\r\n\t\tswitching\t= false;\r\n\t\trows\t\t= table.rows;\r\n\t\t/*Loop through all table rows (except the\r\n\t\tfirst, which contains table headers):*/\r\n\t\tfor (let i = 1; i < (rows.length - 1); i++) {\r\n\t\t\t//start by saying there should be no switching:\r\n\t\t\tshouldSwitch = false;\r\n\t\t\t// Get the lowercase cell contents\r\n\t\t\tx = rows[i].getElementsByTagName(\"TD\")[target.cellIndex].innerHTML.toLowerCase();\r\n\t\t\ty = rows[i + 1].getElementsByTagName(\"TD\")[target.cellIndex].innerHTML.toLowerCase();\r\n\t\t\t\r\n\t\t\t//check if numeric\r\n\t\t\tif(!isNaN(x) && !isNaN(y)){\r\n\t\t\t\tx = parseFloat(x);\r\n\t\t\t\ty = parseFloat(y);\r\n\t\t\t}else{\r\n\t\t\t\t//check if these are dates\r\n\t\t\t\tlet datex = new Date(x);\r\n\t\t\t\tlet datey = new Date(y);\r\n\t\t\t\tif(datex !== \"Invalid Date\" && !isNaN(datex) && datex.getYear()!=70 && datey !== \"Invalid Date\" && !isNaN(datey) && datey.getYear()!=70){\r\n\t\t\t\t\tx = datex.getTime();\r\n\t\t\t\t\ty = datey.getTime();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//check if the two rows should switch place ASC:\r\n\t\t\tif (sort == 'asc' && x > y) {\r\n\t\t\t\t//if so, mark as a switch and break the loop:\r\n\t\t\t\tshouldSwitch = true;\r\n\t\t\t\tbreak;\r\n\t\t\t//check if the two rows should switch place DSC:\r\n\t\t\t}else if (sort == 'dsc'  && y > x) {\r\n\t\t\t\tshouldSwitch = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (shouldSwitch) {\r\n\t\t\t//Switch positions of the rows and start over\r\n\t\t\trows[i].parentNode.insertBefore(rows[i + 1], rows[i]);\r\n\t\t\tswitching = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//Mark the row to sort dsc the next time\r\n\tif (sort == 'asc'){\r\n\t\ttarget.classList.remove('asc');\r\n\t\ttarget.classList.add('dsc');\r\n\t//Mark the row to sort asc the next time\r\n\t}else{\r\n\t\ttarget.classList.remove('dsc');\r\n\t\ttarget.classList.add('asc');\r\n\t}\r\n}\r\n\r\n//Store the table headers as td attribute for use on smaller screens\r\nexport function setTableLabel() {\r\n\t//Loop over all tables\r\n\tdocument.querySelectorAll('.sim-table').forEach(function(table){\r\n\t\t//Get all heading elements\r\n\t\tlet tdLabels = [];\r\n\t\ttable.querySelectorAll('thead th').forEach((el,index) => {\r\n\t\t\tif(el.dataset.nicename != null){\r\n\t\t\t\ttdLabels[index]\t= el.dataset.nicename;\r\n\t\t\t}else{\r\n\t\t\t\ttdLabels[index]\t= el.textContent;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//loop over all table rows\r\n\t\ttable.querySelectorAll('tbody tr').forEach( tr => {\r\n\t\t\t//loop over all table cells\r\n\t\t\tArray.from(tr.children).forEach(\r\n\t\t\t\t//set the header text as label\r\n\t\t\t\tfunction(td, index){\r\n\t\t\t\t\ttd.setAttribute('label', tdLabels[index]);\r\n\t\t\t\t\tif(td.textContent=='X' || td.textContent==''){\r\n\t\t\t\t\t\ttd.classList.add('mobile-hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction showFullscreen(target){\r\n\ttarget.textContent\t= 'Close full screen';\r\n\ttarget.classList.replace('show', 'close');\r\n\r\n\tlet parent\t= target.closest('.table-wrapper');\r\n\r\n\t//store current y position\r\n\twindow.lastY\t= window.pageYOffset;\r\n\r\n\twindow.scrollTo(0,0);\r\n\r\n\t// remove scrollbars from body\r\n\tdocument.querySelector('body').style.overflow\t= 'hidden';\r\n\r\n\tdocument.querySelector('header').style.zIndex\t= 'unset';\r\n\r\n\tparent.classList.add('fullscreen');\r\n\r\n\tparent.style.marginLeft\t= '0px';\r\n\r\n\tlet url = new URL(window.location);\r\n\r\n\turl.searchParams.set('fullscreen', parent.querySelector('table').dataset.formid);\r\n\r\n\twindow.history.pushState({}, '', url);\r\n}\r\n\r\nfunction closeFullscreen(target){\r\n\tlet lastY\t= 100;\r\n\r\n\ttarget.textContent\t= 'Show full screen';\r\n\ttarget.classList.replace('close','show');\r\n\r\n\tif(window.lastY != undefined){\r\n\t\tlastY\t= window.lastY;\r\n\t}\r\n\twindow.scrollTo(0, lastY);\r\n\r\n\t// remove scrollbars from body\r\n\tdocument.querySelector('body').style.overflow\t= 'unset';\r\n\r\n\tdocument.querySelector('header').style.zIndex\t= '99999';\r\n\r\n\ttarget.closest('.table-wrapper').classList.remove('fullscreen');\r\n\r\n\tpositionTable();\r\n\r\n\tlet url = new URL(window.location);\r\n\r\n\turl.searchParams.delete('fullscreen');\r\n\r\n\twindow.history.pushState({}, '', url);\r\n}\r\n\r\nexport function positionTable(){\r\n\t//use whole page width for tables\r\n\tdocument.querySelectorAll(\".table-wrapper\").forEach(wrapper=>{\r\n\t\tlet offset\t\t= '';\r\n\t\tlet newX\t\t= 0;\r\n\r\n\t\tlet table\t= wrapper.querySelector('table');\r\n\t\tif(table == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet width\t= table.scrollWidth;\r\n\t\tif(width == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// If on small width use full screen\r\n\t\tif(window.innerWidth < 570){\r\n\t\t\toffset\t= wrapper.getBoundingClientRect().x\r\n\t\t}else{\r\n\t\t\tlet diff\t= window.innerWidth - width;\r\n\t\t\t\r\n\t\t\t//calculate if room for sidebar if one exists\r\n\t\t\tif((width/window.innerWidth) < 0.7){\r\n\t\t\t\tif(document.querySelector('.is-right-sidebar') != null){\r\n\t\t\t\t\tdiff\t= (window.innerWidth*0.7) - width;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdocument.getElementById('primary').style.zIndex=1;\r\n\t\t\t\t//sidebar behind table\r\n\t\t\t\tdocument.querySelectorAll('#right-sidebar').forEach(el=>el.style.zIndex=0);\r\n\t\t\t}\r\n\r\n\t\t\t//Table needs full screen width\r\n\t\t\tif(diff<20){\r\n\t\t\t\tnewX = 10;\r\n\t\t\t//center the table\r\n\t\t\t}else{\r\n\t\t\t\tnewX = diff/2; \r\n\t\t\t}\t\t\t\r\n\t\t\t\r\n\t\t\t//first set it back to default\r\n\t\t\tif(wrapper.style.marginLeft != ''){\r\n\t\t\t\twrapper.style.marginLeft = '-0px';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//then calculate the required offset\r\n\t\t\toffset\t= parseInt(wrapper.getBoundingClientRect().x)-newX;\r\n\t\t}\r\n\r\n\t\twrapper.style.marginLeft = `-${offset}px`;\r\n\t});\r\n}\r\n\r\ndocument.addEventListener(\"click\", event=>{\r\n\tlet target = event.target;\r\n\t\r\n\tif(target.tagName == 'TH'){\r\n\t\tsortTable(target);\r\n\t}\r\n\t\r\n\t//Edit data]\r\n\tlet td = target.closest('td');\r\n\tif(target.matches('td.edit')){\r\n\t\tevent.stopPropagation();\r\n\t\teditTd(target);\r\n\t}else if(td != null && td.matches('td.edit') && target.tagName != 'INPUT' && target.tagName != 'A' && target.tagName != 'TEXTAREA' && !target.closest('.nice-select') ){\r\n\t\tevent.stopPropagation();\r\n\t\teditTd(target.closest('td'));\r\n\t}else if(target.matches('.show.fullscreenbutton')){\r\n\t\tshowFullscreen(target);\r\n\t}else if(target.matches('.close.fullscreenbutton')){\r\n\t\tcloseFullscreen(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",function() {\r\n\tconsole.log(\"Table.js loaded\");\r\n\t\r\n\tpositionTable();\r\n\twindow.addEventListener('resize', positionTable);\r\n\t\r\n\t//add label attribute\r\n\tsetTableLabel();\r\n\r\n\tconst urlParams = new URLSearchParams(window.location.search);\r\n\tlet\tfullscreen\t= urlParams.get('fullscreen');\r\n\r\n\tif(fullscreen != null){\r\n\t\ttry{\r\n\t\t\tshowFullscreen(document.querySelector(`table[data-formid=\"${fullscreen}\"]`).closest('.table-wrapper').querySelector('.fullscreenbutton')); \r\n\t\t}catch{\r\n\t\t\tconsole.error(`table[data-formid=\"${fullscreen}\"]`);\r\n\t\t}\r\n\t}\r\n});"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","removeDefaultSelect","el","Array","from","options","forEach","option","defaultSelected","oldValue","tinymceSettings","fixNumbering","cloneDivsWrapper","querySelectorAll","clone","index","id","replace","dataset","divid","title","textContent","legend","innerHTML","input","classList","contains","undefined","name","type","outsideClicked","event","target","closest","matches","stopPropagation","document","removeEventListener","processInput","querySelector","editTd","add","cell","inputs","inputnode","split","val","trim","checked","selected","_niceselect","NiceSelect","bind","searchable","addEventListener","keyCode","length","focus","addInputEventListeners","async","orgName","form","checkDatalist","compareValue","lowercase","Element","tagName","console","trace","log","getRadioValue","elements","getCheckboxValue","list","origInput","getDataListValue","toLowerCase","getFieldValue","table","formData","FormData","append","Main","showLoader","firstChild","FormSubmit","fetchRestApi","url","remove","setTableLabel","tdLabels","nicename","tr","children","td","setAttribute","showFullscreen","parent","window","lastY","pageYOffset","scrollTo","style","overflow","zIndex","marginLeft","URL","location","searchParams","set","formid","history","pushState","positionTable","wrapper","offset","newX","width","scrollWidth","innerWidth","getBoundingClientRect","x","diff","getElementById","parseInt","btn","disabled","newNode","originalNode","clear","select","selectedIndex","selectedOptions","destroy","tn","tinymce","settings","save","prepareForCloning","cloneNode","init","uploadButton","nodeNr","previewDiv","i","previousVal","getElementsByTagName","display","update","nextSibling","addElement","html","className","insertAdjacentHTML","parentNode","insertBefore","copyFormInput","tinyMCE","execCommand","node","allCloneDivs","previousElementSibling","appendChild","removeNode","response","submitForm","displayMessage","reset","formReset","saveFormInput","y","rows","switching","shouldSwitch","cellIndex","isNaN","datex","Date","datey","getYear","getTime","parseFloat","sort","sortTable","delete","closeFullscreen","fullscreen","URLSearchParams","search","error"],"sourceRoot":""}