!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SimTableFunctions=t():e.SimTableFunctions=t()}(self,(function(){return(()=>{"use strict";var e,t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function a(e){null!=e.target.closest("td")&&e.target.closest("td").matches(".editing")||(e.stopPropagation(),document.removeEventListener("click",a),r(e,document.querySelector(".editing input, .editing select, .editing textarea")))}function o(t){var n;t.closest("td").classList.add("editing"),"Click to update"!=(e=t.textContent)&&"X"!=e||(e=""),t.innerHTML=`<input type="text" value="${e}">`,(n=t.querySelectorAll("input,select,textarea")).forEach((t=>{e.split(",").forEach((n=>{"checkbox"==t.type||"radio"==t.type?t.value==n.trim()&&(t.checked=!0):"select"==t.type?t.querySelector('option[value="'+n+'"]').selected=!0:t.value=e})),"select-one"==t.type&&(t._niceselect=NiceSelect.bind(t,{searchable:!0})),t.addEventListener("keyup",(function(e){13===e.keyCode&&r(e)})),document.addEventListener("click",a),"checkbox"==t.type&&1!=n.length||("date"==t.type?t.addEventListener("blur",(function(e){""!=e.target.value&&r(e)})):t.addEventListener("change",(function(e){""!=e.target.value&&r(e)})),t.focus())}))}async function r(t,n){void 0===n&&(n=t.target);var a=n.closest("td"),o=FormFunctions.getFieldValue(n,!1),r=n.closest("table");if(o!=e){var i=new FormData;for(var s in i.append("value",o),a.dataset)i.append(s,a.dataset[s]);for(var s in n.closest("tr").dataset)i.append(s,n.closest("tr").dataset[s]);Main.showLoader(a.firstChild),response=await FormSubmit.fetchRestApi(r.dataset.url,i),response&&(a.innerHTML=o,editedel="")}else console.log(o),n.closest("td").innerHTML=e;a.classList.remove("editing")}function i(e){var t,n,a,o=e.closest("table"),r=!0,i=!1;if(e.classList.contains("dsc"))var s="dsc";else s="asc";for(;r;){r=!1,a=o.rows;for(var l=1;l<a.length-1;l++){if(i=!1,t=a[l].getElementsByTagName("TD")[e.cellIndex].innerHTML.toLowerCase(),n=a[l+1].getElementsByTagName("TD")[e.cellIndex].innerHTML.toLowerCase(),isNaN(t)||isNaN(n)){var c=new Date(t),d=new Date(n);"Invalid Date"===c||isNaN(c)||70==c.getYear()||"Invalid Date"===d||isNaN(d)||70==d.getYear()||(t=c.getTime(),n=d.getTime())}else t=parseFloat(t),n=parseFloat(n);if("asc"==s&&t>n){i=!0;break}if("dsc"==s&&n>t){i=!0;break}}i&&(a[l].parentNode.insertBefore(a[l+1],a[l]),r=!0)}"asc"==s?(e.classList.remove("asc"),e.classList.add("dsc")):(e.classList.remove("dsc"),e.classList.add("asc"))}function s(){document.querySelectorAll(".form-table-wrapper").forEach((e=>{var t=e.querySelector("table");if(null!=t){var n=t.scrollWidth;if(0!=n){if(window.innerWidth<570)var a=e.getBoundingClientRect().x;else{var o=window.innerWidth-n;if(n/window.innerWidth<.7)o=.7*window.innerWidth-n;else if(document.getElementById("primary").style.zIndex=1,document.querySelectorAll("#right-sidebar").forEach((e=>e.style.zIndex=0)),o<20)var r=10;else r=o/2;""!=e.style.marginLeft&&(e.style.marginLeft="-0px"),a=parseInt(e.getBoundingClientRect().x)-r}e.style.marginLeft="-"+a+"px"}}}))}return t.r(n),t.d(n,{positionTable:()=>s}),document.addEventListener("click",(e=>{var t=e.target;"TH"==t.tagName&&i(t);var n=t.closest("td");t.matches("td.edit")?(e.stopPropagation(),o(t)):null!=n&&n.matches("td.edit")&&"INPUT"!=t.tagName&&"A"!=t.tagName&&"TEXTAREA"!=t.tagName&&!t.closest(".nice-select")&&(e.stopPropagation(),o(t.closest("td")))})),document.addEventListener("DOMContentLoaded",(function(){console.log("Table.js loaded"),s(),window.addEventListener("resize",s),document.querySelectorAll(".sim-table").forEach((function(e){var t=[];e.querySelectorAll("thead th").forEach(((e,n)=>{null!=e.dataset.nicename?t[n]=e.dataset.nicename:t[n]=e.textContent})),e.querySelectorAll("tbody tr").forEach((e=>{Array.from(e.children).forEach((function(e,n){e.setAttribute("label",t[n]),"X"!=e.textContent&&""!=e.textContent||e.classList.add("mobile-hidden")}))}))})),document.querySelectorAll("th.defaultsort").forEach((e=>i(e)))})),n})()}));
//# sourceMappingURL=table.min.js.map