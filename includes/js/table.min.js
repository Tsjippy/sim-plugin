!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.table=t():e.table=t()}(self,(function(){return(()=>{"use strict";var e,t={d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};function n(e){null!=e.target.closest("td")&&e.target.closest("td").matches(".editing")||(e.stopPropagation(),document.removeEventListener("click",n),r(e,document.querySelector(".editing input, .editing select, .editing textarea")))}function o(t){var a;t.closest("td").classList.add("editing"),"Click to update"!=(e=t.textContent)&&"X"!=e||(e=""),t.innerHTML=`<input type="text" value="${e}">`,(a=t.querySelectorAll("input,select,textarea")).forEach((t=>{e.split(",").forEach((a=>{"checkbox"==t.type||"radio"==t.type?t.value==a.trim()&&(t.checked=!0):"select"==t.type?t.querySelector('option[value="'+a+'"]').selected=!0:t.value=e})),"select-one"==t.type&&(t._niceselect=NiceSelect.bind(t,{searchable:!0})),t.addEventListener("keyup",(function(e){13===e.keyCode&&r(e)})),document.addEventListener("click",n),"checkbox"==t.type&&1!=a.length||("date"==t.type?t.addEventListener("blur",(function(e){""!=e.target.value&&r(e)})):t.addEventListener("change",(function(e){""!=e.target.value&&r(e)})),t.focus())}))}async function r(t,a){void 0===a&&(a=t.target);var n=a.closest("td"),o=formFunctions.getFieldValue(a,!1),r=a.closest("table");if(o!=e){var i=new FormData;for(var s in i.append("value",o),n.dataset)i.append(s,n.dataset[s]);for(var s in a.closest("tr").dataset)i.append(s,a.closest("tr").dataset[s]);main.showLoader(n.firstChild),response=await formsubmit.fetchRestApi(r.dataset.url,i),response&&(n.innerHTML=o,editedel="")}else console.log(o),a.closest("td").innerHTML=old_text;n.classList.remove("editing")}function s(e){var t,a,n=e.closest("table"),o=!0,r=!1;if(e.classList.contains("dsc"))var s="dsc";else s="asc";for(;o;){for(o=!1,rows=n.rows,i=1;i<rows.length-1;i++){if(r=!1,t=rows[i].getElementsByTagName("TD")[e.cellIndex].innerHTML.toLowerCase(),a=rows[i+1].getElementsByTagName("TD")[e.cellIndex].innerHTML.toLowerCase(),isNaN(t)||isNaN(a)){var l=new Date(t),c=new Date(a);"Invalid Date"===l||isNaN(l)||70==l.getYear()||"Invalid Date"===c||isNaN(c)||70==c.getYear()||(t=l.getTime(),a=c.getTime())}else t=parseFloat(t),a=parseFloat(a);if("asc"==s&&t>a){r=!0;break}if("dsc"==s&&a>t){r=!0;break}}r&&(rows[i].parentNode.insertBefore(rows[i+1],rows[i]),o=!0)}"asc"==s?(e.classList.remove("asc"),e.classList.add("dsc")):(e.classList.remove("dsc"),e.classList.add("asc"))}function l(){document.querySelectorAll(".form-table-wrapper").forEach((e=>{var t=e.querySelector("table");if(null!=t){var a=t.scrollWidth;if(0!=a){if(window.innerWidth<570)var n=e.getBoundingClientRect().x;else{var o=window.innerWidth-a;if(a/window.innerWidth<.7)o=.7*window.innerWidth-a;else if(document.getElementById("primary").style.zIndex=1,document.querySelectorAll("#right-sidebar").forEach((e=>e.style.zIndex=0)),o<20)var r=10;else r=o/2;""!=e.style.marginLeft&&(e.style.marginLeft="-0px"),n=parseInt(e.getBoundingClientRect().x)-r}e.style.marginLeft="-"+n+"px"}}}))}return t.r(a),t.d(a,{positionTable:()=>l}),document.addEventListener("click",(e=>{var t=e.target;t.classList.contains("table_action"),"TH"==t.tagName&&s(t);var a=t.closest("td");t.matches("td.edit")?(e.stopPropagation(),o(t)):null!=a&&a.matches("td.edit")&&"INPUT"!=t.tagName&&"A"!=t.tagName&&"TEXTAREA"!=t.tagName&&!t.closest(".nice-select")&&(e.stopPropagation(),o(t.closest("td")))})),document.addEventListener("DOMContentLoaded",(function(){console.log("Table.js loaded"),l(),window.addEventListener("resize",l),document.querySelectorAll(".sim-table").forEach((function(e){var t=[];e.querySelectorAll("thead th").forEach(((e,a)=>{null!=e.dataset.nicename?t[a]=e.dataset.nicename:t[a]=e.textContent})),e.querySelectorAll("tbody tr").forEach((e=>{Array.from(e.children).forEach((function(e,a){e.setAttribute("label",t[a]),"X"!=e.textContent&&""!=e.textContent||e.classList.add("mobile-hidden")}))}))})),document.querySelectorAll("th.defaultsort").forEach((e=>s(e)))})),a})()}));
//# sourceMappingURL=table.min.js.map