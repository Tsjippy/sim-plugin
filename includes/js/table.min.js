!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SimTableFunctions=t():e.SimTableFunctions=t()}(self,(function(){return(()=>{"use strict";var e,t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function o(e){null!=e.target.closest("td")&&e.target.closest("td").matches(".editing")||(e.stopPropagation(),document.removeEventListener("click",o),s(e,document.querySelector(".editing input, .editing select, .editing textarea")))}function a(t){var n;t.closest("td").classList.add("editing"),"Click to update"!=(e=t.textContent)&&"X"!=e||(e=""),t.innerHTML=`<input type="text" value="${e}">`,(n=t.querySelectorAll("input,select,textarea")).forEach((t=>{e.split(",").forEach((n=>{"checkbox"==t.type||"radio"==t.type?t.value==n.trim()&&(t.checked=!0):"select"==t.type?t.querySelector('option[value="'+n+'"]').selected=!0:t.value=e})),"select-one"==t.type&&(t._niceselect=NiceSelect.bind(t,{searchable:!0})),t.addEventListener("keyup",(function(e){13===e.keyCode&&s(e)})),document.addEventListener("click",o),"checkbox"==t.type&&1!=n.length||("date"==t.type?t.addEventListener("blur",(function(e){""!=e.target.value&&s(e)})):t.addEventListener("change",(function(e){""!=e.target.value&&s(e)})),t.focus())}))}async function s(t,n){void 0===n&&(n=t.target);var o=n.closest("td"),a=FormFunctions.getFieldValue(n,!1),s=n.closest("table");if(a!=e){var r=new FormData;for(var l in r.append("value",a),o.dataset)r.append(l,o.dataset[l]);for(var l in n.closest("tr").dataset)r.append(l,n.closest("tr").dataset[l]);Main.showLoader(o.firstChild),response=await FormSubmit.fetchRestApi(s.dataset.url,r),response&&(o.innerHTML=a,editedel="")}else console.log(a),n.closest("td").innerHTML=e;o.classList.remove("editing")}function r(e){e.textContent="Close full screen",e.classList.replace("show","close");var t=e.closest(".table-wrapper");window.lastY=window.pageYOffset,window.scrollTo(0,0),document.querySelector("body").style.overflow="hidden",document.querySelector("header").style.zIndex="unset",t.classList.add("fullscreen"),t.style.marginLeft="0px";var n=new URL(window.location);n.searchParams.set("fullscreen",t.querySelector("table").dataset.formid),window.history.pushState({},"",n)}function l(){document.querySelectorAll(".table-wrapper").forEach((e=>{var t="",n=0,o=e.querySelector("table");if(null!=o){var a=o.scrollWidth;if(0!=a){if(window.innerWidth<570)t=e.getBoundingClientRect().x;else{var s=window.innerWidth-a;a/window.innerWidth<.7?s=.7*window.innerWidth-a:(document.getElementById("primary").style.zIndex=1,document.querySelectorAll("#right-sidebar").forEach((e=>e.style.zIndex=0)),n=s<20?10:s/2),""!=e.style.marginLeft&&(e.style.marginLeft="-0px"),t=parseInt(e.getBoundingClientRect().x)-n}e.style.marginLeft=`-${t}px`}}}))}return t.r(n),t.d(n,{positionTable:()=>l}),document.addEventListener("click",(e=>{var t=e.target;"TH"==t.tagName&&function(e){var t,n,o,a=e.closest("table"),s=!0,r=!1;if(e.classList.contains("dsc"))var l="dsc";else l="asc";for(;s;){s=!1,o=a.rows;for(var c=1;c<o.length-1;c++){if(r=!1,t=o[c].getElementsByTagName("TD")[e.cellIndex].innerHTML.toLowerCase(),n=o[c+1].getElementsByTagName("TD")[e.cellIndex].innerHTML.toLowerCase(),isNaN(t)||isNaN(n)){var i=new Date(t),d=new Date(n);"Invalid Date"===i||isNaN(i)||70==i.getYear()||"Invalid Date"===d||isNaN(d)||70==d.getYear()||(t=i.getTime(),n=d.getTime())}else t=parseFloat(t),n=parseFloat(n);if("asc"==l&&t>n){r=!0;break}if("dsc"==l&&n>t){r=!0;break}}r&&(o[c].parentNode.insertBefore(o[c+1],o[c]),s=!0)}"asc"==l?(e.classList.remove("asc"),e.classList.add("dsc")):(e.classList.remove("dsc"),e.classList.add("asc"))}(t);var n=t.closest("td");t.matches("td.edit")?(e.stopPropagation(),a(t)):null!=n&&n.matches("td.edit")&&"INPUT"!=t.tagName&&"A"!=t.tagName&&"TEXTAREA"!=t.tagName&&!t.closest(".nice-select")?(e.stopPropagation(),a(t.closest("td"))):t.matches(".show.fullscreenbutton")?r(t):t.matches(".close.fullscreenbutton")&&function(e){var t=100;e.textContent="Show full screen",e.classList.replace("close","show"),null!=window.lastY&&(t=window.lastY),window.scrollTo(0,t),document.querySelector("body").style.overflow="unset",document.querySelector("header").style.zIndex="99999",e.closest(".table-wrapper").classList.remove("fullscreen"),l();var n=new URL(window.location);n.searchParams.delete("fullscreen"),window.history.pushState({},"",n)}(t)})),document.addEventListener("DOMContentLoaded",(function(){console.log("Table.js loaded"),l(),window.addEventListener("resize",l),document.querySelectorAll(".sim-table").forEach((function(e){var t=[];e.querySelectorAll("thead th").forEach(((e,n)=>{null!=e.dataset.nicename?t[n]=e.dataset.nicename:t[n]=e.textContent})),e.querySelectorAll("tbody tr").forEach((e=>{Array.from(e.children).forEach((function(e,n){e.setAttribute("label",t[n]),"X"!=e.textContent&&""!=e.textContent||e.classList.add("mobile-hidden")}))}))}));const e=new URLSearchParams(window.location.search);var t=decodeURI(e.get("fullscreen"));t&&r(document.querySelector(`table[data-formid="${t}"]`).closest(".table-wrapper").querySelector(".fullscreenbutton"))})),n})()}));
//# sourceMappingURL=table.min.js.map